(this.webpackJsonpygocarder=this.webpackJsonpygocarder||[]).push([[0],{223:function(e,t,a){},225:function(e,t,a){},226:function(e,t,a){},227:function(e,t,a){},228:function(e,t,a){},263:function(e,t,a){},298:function(e,t,a){},299:function(e,t,a){},300:function(e,t,a){},301:function(e,t,a){},407:function(e,t,a){},413:function(e,t,a){},414:function(e,t,a){},415:function(e,t,a){},433:function(e,t,a){"use strict";a.r(t);var r=a(0),o=a.n(r),n=a(33),l=a.n(n);a(223),a(224),a(225),a(226),a(227),a(228);const i={width:813,height:1185,topToPendulumStructure:210,pendulumStructureHeight:912,leftToPendulumStructure:52},s="#404040",c=()=>({body:100,pendulum:100,text:100,name:100,baseFill:s,artBorder:!0,nameBorder:!0,boundless:!1}),d={normal:{artFinishX:100,artFinishY:219,artWidth:614,artX:100,artY:219,ratio:1,type:"normal"},pendulum:{artFinishX:56,artFinishY:213,artWidth:702,artX:56,artY:213,ratio:1.325,type:"pendulum"},extendedCard:{artFinishX:100,artFinishY:219,artWidth:702,artX:56,artY:213,ratio:.775,type:"extendedCard"},extendedPendulum:{artFinishX:56,artFinishY:213,artWidth:702,artX:56,artY:213,ratio:.775,type:"extendedPendulum"},truePendulum:{artFinishX:56,artFinishY:213,artWidth:702,artX:56,artY:213,ratio:1.057,type:"truePendulum"},fullCard:{artFinishX:100,artFinishY:219,artWidth:758,artX:28,artY:28,ratio:.67,type:"fullCard"},fullPendulum:{artFinishX:56,artFinishY:213,artWidth:758,artX:28,artY:28,ratio:.67,type:"fullPendulum"}},u=(e,t,a)=>{const{boundless:r,body:o,pendulum:n,text:l}={...c(),...t};if("full"===a)return d.fullCard;return d["fit"!==a&&r||o<100?e?"fullPendulum":"fullCard":e?l<100?"extendedPendulum":n<100?"truePendulum":"pendulum":l<100?"extendedCard":"normal"]};var p=a(449),m=a(1);const b="NONE",f=[{name:b,nameKey:"input.attribute.none",color:"#000000"},{name:"DARK",nameKey:"input.attribute.dark",label:"Dark",color:"#b41dda"},{name:"EARTH",nameKey:"input.attribute.earth",label:"Earth",color:"#8d8e8e"},{name:"FIRE",nameKey:"input.attribute.fire",label:"Fire",color:"#e51b23"},{name:"LIGHT",nameKey:"input.attribute.light",label:"Light",color:"#bfae32"},{name:"WATER",nameKey:"input.attribute.water",label:"Water",color:"#008ecd"},{name:"WIND",nameKey:"input.attribute.wind",label:"Wind",color:"#28ab35"},{name:"DIVINE",nameKey:"input.attribute.divine",label:"Divine",color:"#ef6300"},{name:"SPELL",nameKey:"input.attribute.spell",label:"Spell",color:"#1b8f83"},{name:"TRAP",nameKey:"input.attribute.trap",label:"TRAP",color:"#c32a8c"}],h="NO ICON",g=[{label:Object(m.jsx)(p.a,{}),value:h,nameKey:"input.icon.none"},{label:"Field",value:"FIELD",nameKey:"input.icon.field"},{label:"Continuous",value:"CONTINUOUS",nameKey:"input.icon.continuous"},{label:"Quick-Play",value:"QUICK-PLAY",nameKey:"input.icon.quick-play"},{label:"Ritual",value:"RITUAL",nameKey:"input.icon.ritual"},{label:"Equip",value:"EQUIP",nameKey:"input.icon.equip"},{label:"Counter",value:"COUNTER",nameKey:"input.icon.counter"}],y=e=>({hasGradient:!1,hasOutline:!1,hasShadow:!1,pattern:"none",...e}),v={commonB:{key:"commonB",label:"Common (Black)",image:"asset/image/other/name-common-b.png",value:y({preset:"commonB",fillStyle:"#000000"})},commonW:{key:"commonW",label:"Common (White)",image:"asset/image/other/name-common-w.png",value:y({preset:"commonW",fillStyle:"#ffffff"})},skillDefault:{key:"skillDefault",label:"Skill (Default)",image:"asset/image/other/name-skill-default.png",value:y({preset:"skillDefault",fillStyle:"#ffffff",lineWidth:6,lineColor:"#000",hasOutline:!0})},skillArial:{key:"skillArial",label:"Skill (Arial)",image:"asset/image/other/name-skill-arial.png",value:y({preset:"skillArial",font:"Arial",fillStyle:"#ffffff",lineWidth:6,lineColor:"#000",lineOffsetX:1,hasOutline:!0})},rare:{key:"rare",label:"Rare",image:"asset/image/other/name-rare.png",value:y({preset:"rare",fillStyle:"#cfc6de"})},secretGradient:{key:"secretGradient",label:"Secret (Gradient)",image:"asset/image/other/name-secret-gradient.png",value:y({preset:"secretGradient",gradientAngle:180,gradientColor:"0.000|#7a71a6,1.000|#a8c1e5",hasGradient:!0})},secret:{key:"secret",label:"Secret",image:"asset/image/other/name-secret.png",value:y({preset:"secret",fillStyle:"#8a8381"})},platinum2:{key:"platinum2",label:"Platinum",image:"asset/image/other/name-platinum.png",value:y({preset:"platinum2",fillStyle:"#a49f9e"})},ultra:{key:"ultra",label:"Ultra",image:"asset/image/other/name-ultra.png",value:y({preset:"ultra",fillStyle:"#dbb473"})},ultra2:{key:"ultra2",label:"Ultra (Type 2)",image:"asset/image/other/name-ultra-2.png",value:y({preset:"ultra2",fillStyle:"#fee002"})},platinum:{key:"platinum",label:"Foil Platinum",image:"asset/image/other/name-foil-platinum.png",value:y({preset:"platinum",fillStyle:"#CCCCCC",shadowColor:"#FFFFFF",shadowOffsetY:1,shadowOffsetX:0,shadowBlur:1,hasShadow:!0})},gold:{key:"gold",label:"Foil Gold",image:"asset/image/other/name-foil-gold.png",value:y({preset:"gold",fillStyle:"#b88c43",shadowColor:"#FCC400",shadowOffsetY:1,shadowOffsetX:0,shadowBlur:1,hasShadow:!0})},animeRed:{key:"animeRed",label:"Anime (Type Red)",image:"asset/image/other/name-anime-red.png",value:y({preset:"animeRed",gradientAngle:180,gradientColor:"0.000|#d81961,0.220|#b81654,0.270|#9e1348,0.330|#95093e,0.380|#95093e,0.450|#ba3264,0.530|#ff5e99,0.620|#ffa0c3,0.690|#ffffff,0.770|#ff5e99,0.870|#d81961,1.000|#b81654",hasGradient:!0,hasOutline:!0,hasShadow:!0,lineColor:"#333333",lineOffsetX:1,lineOffsetY:0,lineWidth:3,shadowBlur:2,shadowColor:"#383838",shadowOffsetX:2,shadowOffsetY:3})},animeSilver:{key:"animeSilver",label:"Anime (Type Silver)",image:"asset/image/other/name-anime-silver.png",value:y({preset:"animeSilver",shadowColor:"#383838",shadowOffsetY:3,shadowOffsetX:2,shadowBlur:2,hasShadow:!0,lineColor:"#333333",lineWidth:3,lineOffsetX:1,lineOffsetY:0,hasOutline:!0,gradientAngle:180,gradientColor:"0.000|#cecbb8,0.220|#b0ad9b,0.270|#94917e,0.330|#797768,0.380|#797768,0.450|#d9d9d9,0.610|#ffffff,0.700|#ffffff,0.870|#d6d7c7,1.000|#c9cbb6",hasGradient:!0})},animeGold:{key:"animeGold",label:"Anime (Type Gold)",image:"asset/image/other/name-anime-gold.png",value:y({preset:"animeGold",shadowColor:"#383838",shadowOffsetY:3,shadowOffsetX:2,shadowBlur:2,hasShadow:!0,lineColor:"#333333",lineWidth:3,lineOffsetX:1,lineOffsetY:0,hasOutline:!0,gradientAngle:180,gradientColor:"0.000|#eee317,0.220|#dbbe15,0.270|#d0920c,0.330|#b57f0b,0.380|#d0920c,0.450|#ffff6b,0.610|#ffffff,0.700|#ffffff,0.870|#e5dd2d,1.000|#e3da23",hasGradient:!0})},promo:{key:"promo",label:"Promo",image:"asset/image/other/name-promo.png",value:y({preset:"promo",fillStyle:"#c7080b",shadowColor:"#333333",shadowOffsetY:0,shadowOffsetX:0,shadowBlur:1,hasShadow:!0,lineColor:"#8a1801",lineWidth:3,lineOffsetX:0,hasOutline:!0,lineOffsetY:0})}},x=Object.values(v),j={none:{key:"none",patternImage:"",blendMode:"source-atop"},type1:{key:"type1",patternImage:"finish-name-type1",blendMode:"source-atop"},type2:{key:"type2",patternImage:"finish-name-type2",blendMode:"source-atop"},type3:{key:"type3",patternImage:"finish-name-type3",blendMode:"source-atop"},type4:{key:"type4",patternImage:"finish-name-type4",blendMode:"source-atop"},type5:{key:"type5",patternImage:"finish-name-type5",blendMode:"multiply",overrideFill:!0},type6:{key:"type6",patternImage:"finish-name-type6",blendMode:"source-atop"},type7:{key:"type7",patternImage:"finish-name-type7",blendMode:"lighter",overrideFill:!0},type8:{key:"type8",patternImage:"finish-name-type8",blendMode:"source-atop"},type9:{key:"type9",patternImage:"finish-name-type9",blendMode:"source-atop"}},w=Object.values(j),O={tcg:[{trueWidth:684,trueBaseline:890.23,trueEdge:64.8}],"tcg-stat":[{trueWidth:684,trueBaseline:890.23,trueEdge:64.8}],"tcg-type-stat":[{trueWidth:684,trueBaseline:919.8,trueEdge:64.5}],"tcg-type":[{trueWidth:684,trueBaseline:921.8,trueEdge:64.5}],ocg:[{trueWidth:684,trueBaseline:895.23,trueEdge:64.8}],"ocg-stat":[{trueWidth:684,trueBaseline:891.23,trueEdge:64.8}],"ocg-type-stat":[{trueWidth:684,trueBaseline:918.5,trueEdge:64.5}],"ocg-type":[{trueWidth:684,trueBaseline:918.5,trueEdge:64.5}]},F=[{trueWidth:555.47,trueBaseline:746.29,trueEdge:128.94},{trueWidth:555.47,trueBaseline:746.29,trueEdge:128.94}],k={tcg:{small:{trueBaseline:919,trueEdge:62.5,trueWidth:684.5},medium:{trueBaseline:920,trueEdge:62.5,trueWidth:684.5},large:{trueBaseline:187.5,trueEdge:732,edgeAlignment:"right",trueWidth:648.5}},ocg:{small:{trueBaseline:917,trueEdge:63.7,trueWidth:684.5},medium:{trueBaseline:917,trueEdge:63.7,trueWidth:684.5},large:{trueBaseline:190.5,trueEdge:728,edgeAlignment:"right",trueWidth:642.5}}},C={ocg:{trueBaseline:1146.5,trueEdge:736,trueWidth:435},tcg:{trueBaseline:1149.5,trueEdge:733,trueWidth:380}},S=[{shortForm:"\u7279\u6b8a\u53ec\u559a",rubyForm:"{\u7279|\u3068\u304f}{\u6b8a|\u3057\u3085}{\u53ec|\u3057\u3087\u3046}{\u559a|\u304b\u3093}"},{shortForm:"\u30ab\u30fc\u30c9",rubyForm:"{\u30ab\u30fc\u30c9}"},{shortForm:"\u30c7\u30e5\u30a8\u30eb",rubyForm:"{\u30c7\u30e5\u30a8\u30eb}"},{shortForm:"\u30de\u30c3\u30c1",rubyForm:"{\u30de\u30c3\u30c1}"},{shortForm:"\u30bf\u30fc\u30f3",rubyForm:"{\u30bf\u30fc\u30f3}"},{shortForm:"\u30d7\u30ec\u30a4\u30e4\u30fc",rubyForm:"{\u30d7\u30ec\u30a4\u30e4\u30fc}"},{shortForm:"\u81ea\u5206",rubyForm:"{\u81ea|\u3058}{\u5206|\u3076\u3093}"},{shortForm:"\u76f8\u624b",rubyForm:"{\u76f8|\u3042\u3044}{\u624b|\u3066}"},{shortForm:"LP",regexForm:"(?<![a-zA-Z_])LP(?![a-zA-Z_])",rubyForm:"{LP|\u30e9\u30a4\u30d5\u30dd\u30a4\u30f3\u30c8}"},{shortForm:"\u30c7\u30c3\u30ad",rubyForm:"{\u30c7\u30c3\u30ad}"},{shortForm:"\u30e1\u30a4\u30f3",rubyForm:"{\u30e1\u30a4\u30f3}"},{shortForm:"\u30b5\u30a4\u30c9",rubyForm:"{\u30b5\u30a4\u30c9}"},{shortForm:"EX",regexForm:"(?<!\\w)EX(?!\\w)",rubyForm:"{EX|\u30a8\u30af\u30b9\u30c8\u30e9}"},{shortForm:"\u30d5\u30a3\u30fc\u30eb\u30c9",rubyForm:"{\u30d5\u30a3\u30fc\u30eb\u30c9}"},{shortForm:"\u5893\u5730",rubyForm:"{\u5893|\u307c}{\u5730|\u3061}"},{shortForm:"\u624b\u672d",rubyForm:"{\u624b|\u3066}{\u672d|\u3075\u3060}"},{shortForm:"\u30be\u30fc\u30f3",rubyForm:"{\u30be\u30fc\u30f3}"},{shortForm:"\u30e2\u30f3\u30b9\u30bf\u30fc",rubyForm:"{\u30e2\u30f3\u30b9\u30bf\u30fc}"},{shortForm:"\u7e26\u5217",rubyForm:"{\u7e26|\u305f\u3066}{\u5217|\u308c\u3064}"},{shortForm:"\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc",rubyForm:"{\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc}"},{shortForm:"\u6301\u3061\u4e3b",rubyForm:"{\u6301|\u3082}\u3061{\u4e3b|\u306c\u3057}"},{shortForm:"\u30c0\u30e1\u30fc\u30b8",rubyForm:"{\u30c0\u30e1\u30fc\u30b8}"},{shortForm:"\u6226\u95d8",rubyForm:"{\u6226|\u305b\u3093}{\u95d8|\u3068\u3046}"},{shortForm:"\u30b9\u30da\u30eb",rubyForm:"{\u30b9\u30da\u30eb}"},{shortForm:"\u30b9\u30d4\u30fc\u30c9",rubyForm:"{\u30b9\u30d4\u30fc\u30c9}"},{shortForm:"\u30c1\u30a7\u30fc\u30f3",rubyForm:"{\u30c1\u30a7\u30fc\u30f3}"},{shortForm:"\u30d6\u30ed\u30c3\u30af",rubyForm:"{\u30d6\u30ed\u30c3\u30af}"},{shortForm:"\u76f4\u63a5",rubyForm:"{\u76f4|\u3061\u3087\u304f}{\u63a5|\u305b\u3064}"},{shortForm:"\u7d20\u6750",rubyForm:"{\u7d20|\u305d}{\u6750|\u3056\u3044}"},{shortForm:"\u540d",rubyForm:"{\u540d|\u3081\u3044}"},{shortForm:"\u6761\u4ef6",rubyForm:"{\u6761|\u3058\u3087\u3046}{\u4ef6|\u3051\u3093}"},{shortForm:"\u30b3\u30a4\u30f3",rubyForm:"{\u30b3\u30a4\u30f3}"},{shortForm:"\u30b5\u30a4\u30b3\u30ed",rubyForm:"{\u30b5\u30a4\u30b3\u30ed}"},{shortForm:"\u5143",rubyForm:"{\u5143|\u3082\u3068}"},{shortForm:"\u5148",rubyForm:"{\u5148|\u3055\u304d}"},{shortForm:"\u72b6\u614b",rubyForm:"{\u72b6|\u3058\u3087\u3046}{\u614b|\u305f\u3044}"},{shortForm:"\u76f8\u4e92",rubyForm:"{\u76f8|\u305d\u3046}{\u4e92|\u3054}"},{shortForm:"\u30a8\u30af\u30b9\u30c8\u30e9",rubyForm:"{\u30a8\u30af\u30b9\u30c8\u30e9}"},{shortForm:"\u30d5\u30a7\u30a4\u30ba",rubyForm:"{\u30d5\u30a7\u30a4\u30ba}"},{shortForm:"\u30c9\u30ed\u30fc",rubyForm:"{\u30c9\u30ed\u30fc}"},{shortForm:"\u30b9\u30bf\u30f3\u30d0\u30a4",rubyForm:"{\u30b9\u30bf\u30f3\u30d0\u30a4}"},{shortForm:"\u30d0\u30c8\u30eb",rubyForm:"{\u30d0\u30c8\u30eb}"},{shortForm:"\u30a8\u30f3\u30c9",rubyForm:"{\u30a8\u30f3\u30c9}"},{shortForm:"\u30b9\u30bf\u30fc\u30c8",rubyForm:"{\u30b9\u30bf\u30fc\u30c8}"},{shortForm:"\u30b9\u30c6\u30c3\u30d7",rubyForm:"{\u30b9\u30c6\u30c3\u30d7}"},{shortForm:"\u7a2e\u985e",rubyForm:"{\u7a2e|\u3057\u3085}{\u985e|\u308b\u3044}"},{shortForm:"\u5f62\u5f0f",rubyForm:"{\u5f62|\u3051\u3044}{\u5f0f|\u3057\u304d}"},{shortForm:"\u8868\u5074",rubyForm:"{\u8868|\u304a\u3082\u3066}{\u5074|\u304c\u308f}"},{shortForm:"\u88cf\u5074",rubyForm:"{\u88cf|\u3046\u3089}{\u5074|\u304c\u308f}"},{shortForm:"\u8868\u793a",rubyForm:"{\u8868|\u3072\u3087\u3046}{\u793a|\u3058}"},{shortForm:"\u88cf",rubyForm:"{\u88cf|\u3046\u3089}"},{shortForm:"\u7f60",rubyForm:"{\u7f60|\u30c8\u30e9\u30c3\u30d7}"},{shortForm:"\u30a2\u30af\u30b7\u30e7\u30f3",rubyForm:"\u30a2\u30af\u30b7\u30e7\u30f3"},{shortForm:"\u88c5\u5099",rubyForm:"{\u88c5|\u305d\u3046}{\u5099|\u3073}"},{shortForm:"\u901f\u653b",rubyForm:"{\u901f|\u305d\u3063}{\u653b|\u3053\u3046}"},{shortForm:"\u6c38\u7d9a",rubyForm:"{\u6c38|\u3048\u3044}{\u7d9a|\u305e\u304f}"},{shortForm:"\u30ab\u30a6\u30f3\u30bf\u30fc",rubyForm:"{\u30ab\u30a6\u30f3\u30bf\u30fc}"},{shortForm:"\u30ec\u30d9\u30eb",rubyForm:"{\u30ec\u30d9\u30eb}"},{shortForm:"\u30e9\u30f3\u30af",rubyForm:"{\u30e9\u30f3\u30af}"},{shortForm:"\u30b9\u30b1\u30fc\u30eb",rubyForm:"{\u30b9\u30b1\u30fc\u30eb}"},{shortForm:"\u653b\u6483\u529b",rubyForm:"{\u653b|\u3053\u3046}{\u6483|\u3052\u304d}{\u529b|\u308a\u3087\u304f}"},{shortForm:"\u5b88\u5099\u529b",rubyForm:"{\u5b88|\u3057\u3085}{\u5099|\u3073}{\u529b|\u308a\u3087\u304f}"},{shortForm:"\u6483\u529b",rubyForm:"{\u6483|\u3052\u304d}{\u529b|\u308a\u3087\u304f}"},{shortForm:"\u52dd\u5229",rubyForm:"{\u52dd|\u3057\u3087\u3046}{\u5229|\u308a}"},{shortForm:"\u5c5e\u6027",rubyForm:"{\u5c5e|\u305e\u304f}{\u6027|\u305b\u3044}"},{shortForm:"\u7a2e\u65cf",rubyForm:"{\u7a2e|\u3057\u3085}{\u65cf|\u305e\u304f}"},{shortForm:"\u52b9\u679c",rubyForm:"{\u52b9|\u3053\u3046}{\u679c|\u304b}"},{shortForm:"\u878d\u5408",rubyForm:"{\u878d|\u3086\u3046}{\u5408|\u3054\u3046}"},{shortForm:"\u5100\u5f0f",rubyForm:"{\u5100|\u304e}{\u5f0f|\u3057\u304d}"},{shortForm:"\u30de\u30ad\u30b7\u30de\u30e0",rubyForm:"{\u30de\u30ad\u30b7\u30de\u30e0}"},{shortForm:"\u30c8\u30fc\u30af\u30f3",rubyForm:"{\u30c8\u30fc\u30af\u30f3}"},{shortForm:"\u30c1\u30e5\u30fc\u30ca\u30fc",rubyForm:"{\u30c1\u30e5\u30fc\u30ca\u30fc}"},{shortForm:"\u30c7\u30e5\u30a2\u30eb",rubyForm:"{\u30c7\u30e5\u30a2\u30eb}"},{shortForm:"\u30ea\u30d0\u30fc\u30b9",rubyForm:"{\u30ea\u30d0\u30fc\u30b9}"},{shortForm:"\u30c8\u30a5\u30fc\u30f3",rubyForm:"{\u30c8\u30a5\u30fc\u30f3}"},{shortForm:"\u30b9\u30d4\u30ea\u30c3\u30c8",rubyForm:"{\u30b9\u30d4\u30ea\u30c3\u30c8}"},{shortForm:"\u30e6\u30cb\u30aa\u30f3",rubyForm:"{\u30e6\u30cb\u30aa\u30f3}"},{shortForm:"\u5149",rubyForm:"{\u5149|\u3072\u304b\u308a}"},{shortForm:"\u95c7",rubyForm:"{\u95c7|\u3084\u307f}"},{shortForm:"\u5730",rubyForm:"{\u5730|\u3061}"},{shortForm:"\u6c34",rubyForm:"{\u6c34|\u307f\u305a}"},{shortForm:"\u708e",rubyForm:"{\u708e|\u307b\u306e\u304a}"},{shortForm:"\u98a8",rubyForm:"{\u98a8|\u304b\u305c}"},{shortForm:"\u7363\u6226\u58eb",rubyForm:"{\u7363|\u3058\u3085\u3046}{\u6226|\u305b\u3093}{\u58eb|\u3057}"},{shortForm:"\u5275\u9020\u795e",rubyForm:"{\u5275|\u305d\u3046}{\u9020|\u305e\u3046}{\u795e|\u3057\u3093}"},{shortForm:"\u30b5\u30a4\u30d0\u30fc\u30b9",rubyForm:"{\u30b5\u30a4\u30d0\u30fc\u30b9}"},{shortForm:"\u6050\u7adc",rubyForm:"{\u6050|\u304d\u3087\u3046}{\u7adc|\u308a\u3085\u3046}"},{shortForm:"\u5e7b\u795e\u7363",rubyForm:"{\u5e7b|\u3052\u3093}{\u795e|\u3057\u3093}{\u7363|\u3058\u3085\u3046}"},{shortForm:"\u5929\u4f7f",rubyForm:"{\u5929|\u3066\u3093}{\u4f7f|\u3057}"},{shortForm:"\u60aa\u9b54",rubyForm:"{\u60aa|\u3042\u304f}{\u9b54|\u307e}"},{shortForm:"\u9b5a",rubyForm:"{\u9b5a|\u3055\u304b\u306a}"},{shortForm:"\u30ae\u30e3\u30e9\u30af\u30b7\u30fc",rubyForm:"{\u30ae\u30e3\u30e9\u30af\u30b7\u30fc}"},{shortForm:"\u5e7b\u60f3\u9b54",rubyForm:"{\u5e7b|\u3052\u3093}{\u60f3|\u305d\u3046}{\u9b54|\u307e}"},{shortForm:"\u6606\u866b",rubyForm:"{\u6606|\u3053\u3093}{\u866b|\u3061\u3085\u3046}"},{shortForm:"\u6a5f\u68b0",rubyForm:"{\u6a5f|\u304d}{\u68b0|\u304b\u3044}"},{shortForm:"\u690d\u7269",rubyForm:"{\u690d|\u3057\u3087\u304f}{\u7269|\u3076\u3064}"},{shortForm:"\u722c\u866b\u985e",rubyForm:"{\u722c|\u306f}{\u866b|\u3061\u3085\u3046}{\u985e|\u308b\u3044}"},{shortForm:"\u5ca9\u77f3",rubyForm:"{\u5ca9|\u304c\u3093}{\u77f3|\u305b\u304d}"},{shortForm:"\u6d77\u7adc",rubyForm:"{\u6d77|\u304b\u3044}{\u7adc|\u308a\u3085\u3046}"},{shortForm:"\u9b54\u6cd5\u4f7f\u3044",rubyForm:"{\u9b54|\u307e}{\u6cd5|\u307b\u3046}{\u4f7f|\u3064\u304b}\u3044"},{shortForm:"\u96f7",rubyForm:"{\u96f7|\u3044\u304b\u305a\u3061}"},{shortForm:"\u9ce5\u7363",rubyForm:"{\u9ce5|\u3061\u3087\u3046}{\u7363|\u3058\u3085\u3046}"},{shortForm:"\u5e7b\u7adc",rubyForm:"{\u5e7b|\u3052\u3093}{\u7adc|\u308a\u3085\u3046}"},{shortForm:"\u30a2\u30f3\u30c7\u30c3\u30c8",rubyForm:"{\u30a2\u30f3\u30c7\u30c3\u30c8}"},{shortForm:"\u30b5\u30a4\u30dc\u30fc\u30b0",rubyForm:"{\u30b5\u30a4\u30dc\u30fc\u30b0}"},{shortForm:"\u5929\u754c\u6226\u58eb",rubyForm:"{\u5929|\u3066\u3093}{\u754c|\u304b\u3044}{\u6226|\u305b\u3093}{\u58eb|\u3057}"},{shortForm:"\u30cf\u30a4\u30c9\u30e9\u30b4\u30f3",rubyForm:"{\u30cf\u30a4\u30c9\u30e9\u30b4\u30f3}"},{shortForm:"\u9b54\u5c0e\u9a0e\u58eb",rubyForm:"{\u9b54|\u307e}{\u5c0e|\u3069\u3046}{\u9a0e|\u304d}{\u58eb|\u3057}"},{shortForm:"\u7121\u52b9\u5316",rubyForm:"{\u7121|\u3080}{\u52b9|\u3053\u3046}{\u5316|\u304b}"},{shortForm:"\u30aa\u30e1\u30ac",rubyForm:"{\u30aa\u30e1\u30ac}"},{shortForm:"\u30b5\u30a4\u30ad\u30c3\u30af",rubyForm:"{\u30b5\u30a4\u30ad\u30c3\u30af}"},{shortForm:"\u6368\u3066\u308b",rubyForm:"{\u6368|\u3059}\u3066\u308b"},{shortForm:"\u52a0\u3048\u308b",rubyForm:"{\u52a0|\u304f\u308f}\u3048\u308b"},{shortForm:"\u304b\u3089\u96e2\u308c\u308b",rubyForm:"\u304b\u3089{\u96e2|\u306f\u306a}\u308c\u308b"},{shortForm:"\u4e0e\u3048\u308b",rubyForm:"{\u4e0e|\u3042\u305f}\u3048\u308b"},{shortForm:"\u91cd\u306d\u308b",rubyForm:"{\u91cd|\u304b\u3055}\u306d\u308b"},{shortForm:"\u53d6\u308a\u9664\u304f",rubyForm:"{\u53d6|\u3068}\u308a{\u9664|\u306e\u305e}\u304f"},{shortForm:"\u53d6\u308a\u9664\u3044",rubyForm:"{\u53d6|\u3068}\u308a{\u9664|\u306e\u305e}\u3044"},{shortForm:"\u9664\u304f",rubyForm:"{\u9664|\u306e\u305e}\u304f"},{shortForm:"\u884c\u3046",rubyForm:"{\u884c|\u304a\u3053\u306a}\u3046"},{shortForm:"\u5bfe\u3059",rubyForm:"{\u5bfe|\u305f\u3044}\u3059"},{shortForm:"\u9001\u308b",rubyForm:"{\u9001|\u304a\u304f}\u308b"},{shortForm:"\u7f6e\u304f",rubyForm:"{\u7f6e|\u304a}\u304f"},{shortForm:"\u3081\u304f\u308b",rubyForm:"{\u3081\u304f\u308b}"},{shortForm:"\u30a2\u30c9\u30d0\u30f3\u30b9",rubyForm:"{\u30a2\u30c9\u30d0\u30f3\u30b9}"},{shortForm:"\u53cd\u8ee2",rubyForm:"{\u53cd|\u306f\u3093}{\u8ee2|\u3066\u3093}"},{shortForm:"\u7279\u6b8a",rubyForm:"{\u7279|\u3068\u304f}{\u6b8a|\u3057\u3085}"},{shortForm:"\u767a\u52d5",rubyForm:"{\u767a|\u306f\u3064}{\u52d5|\u3069\u3046}"},{shortForm:"\u7834\u58ca",rubyForm:"{\u7834|\u306f}{\u58ca|\u304b\u3044}"},{shortForm:"\u5bfe\u8c61",rubyForm:"{\u5bfe|\u305f\u3044}{\u8c61|\u3057\u3087\u3046}"},{shortForm:"\u7121\u52b9",rubyForm:"{\u7121|\u3080}{\u52b9|\u3053\u3046}"},{shortForm:"\u653b\u6483",rubyForm:"{\u653b|\u3053\u3046}{\u6483|\u3052\u304d}"},{shortForm:"\u51e6\u7406",rubyForm:"{\u51e6|\u3057\u3087}{\u7406|\u308a}"},{shortForm:"\u5ba3\u8a00",rubyForm:"{\u5ba3|\u305b\u3093}{\u8a00|\u3052\u3093}"},{shortForm:"\u9664\u5916",rubyForm:"{\u9664|\u3058\u3087}{\u5916|\u304c\u3044}"},{shortForm:"\u30ea\u30ea\u30fc\u30b9",rubyForm:"{\u30ea\u30ea\u30fc\u30b9}"},{shortForm:"\u30b9\u30ad\u30c3\u30d7",rubyForm:"{\u30b9\u30ad\u30c3\u30d7}"},{shortForm:"\u30b7\u30e3\u30c3\u30d5\u30eb",rubyForm:"{\u30b7\u30e3\u30c3\u30d5\u30eb}"},{shortForm:"\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb",rubyForm:"{\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb}"},{shortForm:"\u30bb\u30c3\u30c8",rubyForm:"{\u30bb\u30c3\u30c8}"},{shortForm:"RUM",regexForm:"(?<!\\w)RUM(?!\\w)",rubyForm:"{RUM|\u30e9\u30f3\u30af\u30a2\u30c3\u30d7\u30de\u30b8\u30c3\u30af}"},{shortForm:"S",regexForm:"(?<!\\w)S(?!\\w)",rubyForm:"{S|\u30b7\u30f3\u30af\u30ed}"},{shortForm:"X",regexForm:"(?<!\\w)X(?!\\w)",rubyForm:"{X|\u30a8\u30af\u30b7\u30fc\u30ba}"},{shortForm:"L",regexForm:"(?<!\\w)L(?!\\w)",rubyForm:"{L|\u30ea\u30f3\u30af}"},{shortForm:"P",regexForm:"(?<!\\w)P(?!\\w)",rubyForm:"{P|\u30da\u30f3\u30c7\u30e5\u30e9\u30e0}"},{shortForm:"\u30ea\u30f3\u30af",rubyForm:"{\u30ea\u30f3\u30af}"},{shortForm:"\u5b88\u5099",rubyForm:"{\u5b88|\u3057\u3085}{\u5099|\u3073}"},{shortForm:"\u901a\u5e38",rubyForm:"{\u901a|\u3064\u3046}{\u5e38|\u3058\u3087\u3046}"},{shortForm:"\u53ef\u80fd",rubyForm:"{\u53ef|\u304b}{\u80fd|\u306e\u3046}"},{shortForm:"\u795e",rubyForm:"{\u795e|\u304b\u307f}"},{shortForm:"\u7363",rubyForm:"{\u7363|\u3051\u3082\u306e}"},{shortForm:"\u30c9\u30e9\u30b4\u30f3",rubyForm:"{\u30c9\u30e9\u30b4\u30f3}"},{shortForm:"\u30b5\u30a4\u30ad\u30c3\u30af",rubyForm:"{\u30b5\u30a4\u30ad\u30c3\u30af}"},{shortForm:"\u91cd\u306d\u3066",rubyForm:"{\u91cd|\u304b\u3055}\u306d\u3066"},{shortForm:"\u9b54\u6cd5",rubyForm:"{\u9b54|\u307e}{\u6cd5|\u307b\u3046}"},{shortForm:"\u6226\u58eb",rubyForm:"{\u6226|\u305b\u3093}{\u58eb|\u3057}"},{shortForm:"\u53ec\u559a",rubyForm:"{\u53ec|\u3057\u3087\u3046}{\u559a|\u304b\u3093}"},{shortForm:"\u5408\u8a08",rubyForm:"{\u5408|\u3054\u3046}{\u8a08|\u3051\u3044}"},{shortForm:"\u4ee5\u4e0a",rubyForm:"{\u4ee5|\u3044}{\u4e0a|\u3058\u3087\u3046}"},{shortForm:"\u4e0a\u8a18",rubyForm:"{\u4e0a|\u3058\u3087\u3046}{\u8a18|\u304d}"},{shortForm:"\u5834\u5408",rubyForm:"{\u5834|\u3070}{\u5408|\u3042\u3044}"},{shortForm:"\u964d\u81e8",rubyForm:"{\u964d|\u3053\u3046}{\u81e8|\u308a\u3093}"},{shortForm:"\u4ee5\u5916",rubyForm:"{\u4ee5|\u3044}{\u5916|\u304c\u3044}"},{shortForm:"\u4f7f\u7528",rubyForm:"{\u4f7f|\u3057}{\u7528|\u3088\u3046}"},{shortForm:"\u5b58\u5728",rubyForm:"{\u5b58|\u305d\u3093}{\u5728|\u3056\u3044}"},{shortForm:"\u6700\u5927",rubyForm:"{\u6700|\u3055\u3044}{\u5927|\u3060\u3044}"},{shortForm:"\u6210\u529f",rubyForm:"{\u6210|\u305b\u3044}{\u529f|\u3053\u3046}"},{shortForm:"\u81ea\u8eab",rubyForm:"{\u81ea|\u3058}{\u8eab|\u3057\u3093}"},{shortForm:"\u4ee5\u4e0b",rubyForm:"{\u4ee5|\u3044}{\u4e0b|\u304b}"},{shortForm:"\u7d42\u4e86",rubyForm:"{\u7d42|\u3057\u3085\u3046}{\u4e86|\u308a\u3087\u3046}"},{shortForm:"\u5168\u3066",rubyForm:"{\u5168|\u3059\u3079}\u3066"},{shortForm:"\u6368\u3066",rubyForm:"{\u6368|\u3059}\u3066"},{shortForm:"CNo\uff0e",regexForm:"(?<![a-zA-Z])CNo\uff0e(?![a-zA-Z])",rubyForm:"{CNo\uff0e||\u30ab\u30aa\u30b9\u30ca\u30f3\u30d0\u30fc\u30ba}",rubyFormName:"{CNo||\u30ab\u30aa\u30b9\u30ca\u30f3\u30d0\u30fc\u30ba}\uff0e"},{shortForm:"No\uff0e",regexForm:"(?<![a-zA-Z])No\uff0e(?![a-zA-Z])",rubyForm:"{No\uff0e||\u30ca\u30f3\u30d0\u30fc\u30ba}",rubyFormName:"{No||\u30ca\u30f3\u30d0\u30fc\u30ba}\uff0e"},{shortForm:"CX",regexForm:"(?<![a-zA-Z])CX(?![a-zA-Z])",rubyForm:"{CX|\u30ab\u30aa\u30b9\u30a8\u30af\u30b7\u30fc\u30ba}"},{shortForm:"\u9069\u7528",rubyForm:"{\u9069|\u3066\u304d}{\u7528|\u3088\u3046}"},{shortForm:"\u6570\u5024",rubyForm:"{\u6570|\u3059\u3046}{\u5024|\u3061}"},{shortForm:"\u8a08\u7b97",rubyForm:"{\u8a08|\u3051\u3044}{\u7b97|\u3055\u3093}"},{shortForm:"\u5fc5\u8981",rubyForm:"{\u5fc5|\u3072\u3064}{\u8981|\u3088\u3046}"},{shortForm:"\u9078\u629e",rubyForm:"{\u9078|\u305b\u3093}{\u629e|\u305f\u304f}"},{shortForm:"\u534a\u5206",rubyForm:"{\u534a|\u306f\u3093}{\u5206|\u3076\u3093}"},{shortForm:"\u958b\u59cb",rubyForm:"{\u958b|\u304b\u3044}{\u59cb|\u3057}"},{shortForm:"\u88cf\u8868",rubyForm:"{\u88cf|\u3046\u3089}{\u8868|\u304a\u3082\u3066}"},{shortForm:"\u56de\u5fa9",rubyForm:"{\u56de|\u304b\u3044}{\u5fa9|\u3075\u304f}"},{shortForm:"\u6307\u5b9a",rubyForm:"{\u6307|\u3057}{\u5b9a|\u3066\u3044}"},{shortForm:"\u4f4d\u7f6e",rubyForm:"{\u4f4d|\u3044}{\u7f6e|\u3061}"},{shortForm:"\u79fb\u52d5",rubyForm:"{\u79fb|\u3044}{\u52d5|\u3069\u3046}"},{shortForm:"\u65b9\u6cd5",rubyForm:"{\u65b9|\u307b\u3046}{\u6cd5|\u307b\u3046}"},{shortForm:"\u5909\u66f4",rubyForm:"{\u5909|\u3078\u3093}{\u66f4|\u3053\u3046}"},{shortForm:"\u767a\u751f",rubyForm:"{\u767a|\u306f\u3063}{\u751f|\u305b\u3044}"},{shortForm:"\u516c\u958b",rubyForm:"{\u516c|\u3053\u3046}{\u958b|\u304b\u3044}"},{shortForm:"\u9806\u756a",rubyForm:"{\u9806|\u3058\u3085\u3093}{\u756a|\u3070\u3093}"},{shortForm:"\u9664\u5916",rubyForm:"{\u9664|\u3058\u3087}{\u5916|\u304c\u3044}"},{shortForm:"\u9806",rubyForm:"{\u9806|\u3058\u3085\u3093}"},{shortForm:"\u4ee3",rubyForm:"{\u4ee3|\u304b}"},{shortForm:"\u8d85",rubyForm:"{\u8d85|\u3053}"},{shortForm:"\u6bce",rubyForm:"{\u6bce|\u3054\u3068}"},{shortForm:"\u524d",rubyForm:"{\u524d|\u307e\u3048}"},{shortForm:"\u9055",rubyForm:"{\u9055|\u3061\u304c}"},{shortForm:"\u7d9a",rubyForm:"{\u7d9a|\u3064\u3065}"},{shortForm:"\u6b8b",rubyForm:"{\u6b8b|\u306e\u3053}"},{shortForm:"\u4ed6",rubyForm:"{\u4ed6|\u307b\u304b}"},{shortForm:"\u5f53",rubyForm:"{\u5f53|\u3042}"},{shortForm:"\u5ea6",rubyForm:"{\u5ea6|\u3069}"},{shortForm:"\u6642",rubyForm:"{\u6642|\u3068\u304d}"},{shortForm:"\u65cf",rubyForm:"{\u65cf|\u305e\u304f}"},{shortForm:"\u6570",rubyForm:"{\u6570|\u304b\u305a}"},{shortForm:"\u4f53",rubyForm:"{\u4f53|\u305f\u3044}"},{shortForm:"\u9650",rubyForm:"{\u9650|\u30b2\u30f3}"},{shortForm:"\u7f6e",rubyForm:"{\u7f6e|\u30c1}"},{shortForm:"\u53d7",rubyForm:"{\u53d7|\u3046}"},{shortForm:"\u679a",rubyForm:"{\u679a|\u307e\u3044}"},{shortForm:"\u5f8c",rubyForm:"{\u5f8c|\u3054}"},{shortForm:"\u9001",rubyForm:"{\u9001|\u304a\u304f}"},{shortForm:"\u4e8b",rubyForm:"{\u4e8b|\u3053\u3068}"},{shortForm:"\u5185",rubyForm:"{\u5185|\u3046\u3061}"},{shortForm:"\u898b",rubyForm:"{\u898b|\u307f}"},{shortForm:"\u4e2d",rubyForm:"{\u4e2d|\u306a\u304b}"},{shortForm:"\u52a0",rubyForm:"{\u52a0|\u304f\u308f}"},{shortForm:"\u9078",rubyForm:"{\u9078|\u3048\u3089}"},{shortForm:"\u4e00",rubyForm:"{\u4e00|\u3044\u3061}"},{shortForm:"\u756a",rubyForm:"{\u756a|\u3070\u3093}"},{shortForm:"\u540c",rubyForm:"{\u540c|\u3069\u3046}"},{shortForm:"\u56de",rubyForm:"{\u56de|\u304b\u3044}"},{shortForm:"\u6271",rubyForm:"{\u6271|\u3042\u3064\u304b}"},{shortForm:"\u661f",rubyForm:"{\u661f|\u30ec\u30d9\u30eb}"},{shortForm:"\u653b",rubyForm:"{\u653b|\u3053\u3046}"},{shortForm:"\u5b88",rubyForm:"{\u5b88|\u3057\u3085}"},{shortForm:"\u623b",rubyForm:"{\u623b|\u3082\u3069}"},{shortForm:"\u4e0a",rubyForm:"{\u4e0a|\u3046\u3048}"},{shortForm:"\u6b21",rubyForm:"{\u6b21|\u3064\u304e}"},{shortForm:"\u5024",rubyForm:"{\u5024|\u3061}"},{shortForm:"\u542b",rubyForm:"{\u542b|\u3075\u304f}"},{shortForm:"\u4e0e",rubyForm:"{\u4e0e|\u3080\u305f}"},{shortForm:"\u5f97",rubyForm:"{\u5f97|\u3048}"},{shortForm:"\u53ca",rubyForm:"{\u53ca|\u304a\u3088}"},{shortForm:"\u7570",rubyForm:"{\u7570|\u3053\u3068}"},{shortForm:"\u8a18",rubyForm:"{\u8a18|\u3057\u308b}"},{shortForm:"\u7e70",rubyForm:"{\u7e70|\u304f}"},{shortForm:"\u8fd4",rubyForm:"{\u8fd4|\u304b\u3048}"},{shortForm:"\u6c7a",rubyForm:"{\u6c7a|\u304d}"},{shortForm:"\u4e92",rubyForm:"{\u4e92|\u305f\u304c}"},{shortForm:"\u6255",rubyForm:"{\u6255|\u306f\u3089}"},{shortForm:"\u591a",rubyForm:"{\u591a|\u304a\u304a}"},{shortForm:"\u6301",rubyForm:"{\u6301|\u304a\u304a}"},{shortForm:"\u6301",rubyForm:"{\u6301|\u3082}"},{shortForm:"\u9593",rubyForm:"{\u9593|\u3042\u3044\u3060}"},{shortForm:"\u6240",rubyForm:"{\u6240|\u3057\u3087}"},{shortForm:"\u9ad8",rubyForm:"{\u9ad8|\u305f\u304b}"},{shortForm:"\u500d",rubyForm:"{\u500d|\u3070\u3044}"},{shortForm:"\u4e0b",rubyForm:"{\u4e0b|\u3057\u305f}"},{shortForm:"\u969b",rubyForm:"{\u969b|\u3055\u3044}"},{shortForm:"\u597d",rubyForm:"{\u597d|\u3059}"},{shortForm:"\u8868",rubyForm:"{\u8868|\u304a\u3082\u3066}"}],T=S.reduce(((e,t)=>(e[t.shortForm]=t,e)),{}),R=[{blendMode:"overlay",opacity:1}],N=[{blendMode:"overlay",opacity:.65},{blendMode:"multiply",opacity:.55}],L={type1:{value:"type1",label:"1",partInstructionMap:{}},type2:{value:"type2",label:"2",partInstructionMap:{}},type3:{value:"type3",label:"3",partInstructionMap:{"art-overlay":R,"art-border":R,"art-border-pendulum":R,"border-pendulum":R,attribute:R,frame:R}},type4:{value:"type4",label:"4",partInstructionMap:{}},type5:{value:"type5",label:"5",partInstructionMap:{}},type6:{value:"type6",label:"6",partInstructionMap:{}},type7:{value:"type7",label:"7",partInstructionMap:{"total-overlay":[{blendMode:"screen",opacity:.175},{blendMode:"color-dodge",opacity:.125}]}},type8:{value:"type8",label:"8",partInstructionMap:{"art-border":N,"art-border-pendulum":N,"border-pendulum":N,frame:N,"frame-background":N,name:N,star:N}},type9:{value:"type9",label:"9",partInstructionMap:{"total-overlay":[{blendMode:"screen",opacity:.45}]}}},M={type1:{value:"type1",label:"1",partInstructionMap:{art:[{}]}},type2:{value:"type2",label:"2",partInstructionMap:{art:[{opacity:.08,blendMode:"darken"},{opacity:.28,blendMode:"color-dodge"},{opacity:.48,blendMode:"multiply"}]}},type3:{value:"type3",label:"3",partInstructionMap:{art:[{opacity:.66,blendMode:"color-dodge"},{opacity:.64,blendMode:"multiply"}]}},type4:{value:"type4",label:"4",partInstructionMap:{art:[{opacity:.31,blendMode:"color-dodge"},{opacity:.6,blendMode:"multiply"}]}},type5:{value:"type5",label:"5",partInstructionMap:{art:[{opacity:.19,blendMode:"color-dodge"},{opacity:.6,blendMode:"multiply"}]}},type6:{value:"type6",label:"6",partInstructionMap:{art:[{opacity:.25,blendMode:"color-dodge"},{opacity:.6,blendMode:"multiply"}]}},type7:{value:"type7",label:"7",partInstructionMap:{art:[{}]}}},E={offsetY:0,capitalLetterRatio:1,squareBracketRatio:1,largeSymbolRatio:1.35,letterSpacing:0,headTextFontRatio:.355,headTextSpacing:.5},I={yOffset:0,yRatio:1},A={headTextHeightRatio:.8,headTextOverflow:"normal",headTextBold:!0,headTextGapRatio:.03125},B={alphabetFont:'"Yu-Gi-Oh! DF Leisho 3"',furiganaFont:"DFHSGothic-W3-WIN-RKSJ-H",headTextFontRatio:.7,headTextHeightRatio:.815,ordinalFont:'"DFKakuTaiHiStd-W4"',symbolFont:"matrix",symbolFontRatio:1,headTextGapRatio:0},$={...B,font:"MatrixBook",headTextHeightRatio:.75,fontStyle:"tcg",fontList:[]},W={...B,font:'"stone-serif-regular"',headTextHeightRatio:.75,fontStyle:"tcg",fontList:[]},P={...B,font:'"Yu-Gi-Oh! DF Leisho 3"',fontStyle:"ocg",metricMethod:"compact",fontList:[]},D={tcg:{...$,fontList:[{bulletSymbolWidth:23,fontSize:24.38,lineHeight:24.7,lineCount:8},{bulletSymbolWidth:23,fontSize:19.94,lineHeight:21.15,lineCount:10}]},"tcg-stat":{...$,fontList:[{bulletSymbolWidth:23,fontSize:25.2,lineHeight:24.9,lineCount:7}]},"tcg-type-stat":{...$,fontList:[{bulletSymbolWidth:23,fontSize:25.2,lineHeight:24.9,lineCount:6},{bulletSymbolWidth:23,fontSize:19.95,lineHeight:21.5,lineCount:7},{bulletSymbolWidth:23,fontSize:18.8,lineHeight:18.8,lineCount:8},{bulletSymbolWidth:19,fontSize:16.7,lineHeight:16.7,lineCount:9},{bulletSymbolWidth:19,fontSize:15,lineHeight:15,lineCount:10}]},"tcg-type":{...$,fontList:[{bulletSymbolWidth:23,fontSize:25.2,lineHeight:24.9,lineCount:7}]},ocg:{...P,fontList:[{bulletSymbolWidth:16,fontSize:22,lineHeight:26,lineCount:7},{bulletSymbolWidth:16,fontSize:22,lineHeight:26,lineCount:8}]},"ocg-stat":{...P,fontList:[{bulletSymbolWidth:16,fontSize:22.05,lineHeight:25.8,lineCount:7}]},"ocg-type-stat":{...P,fontList:[{bulletSymbolWidth:16,fontSize:22.05,lineHeight:25.8,lineCount:6}]},"ocg-type":{...P,fontList:[{bulletSymbolWidth:16,fontSize:22.05,lineHeight:25.8,lineCount:7}]}},z=[{bulletSymbolWidth:23,fontSize:21.8,lineHeight:24.9,lineCount:6},{bulletSymbolWidth:23,fontSize:17.28,lineHeight:21.5,lineCount:7},{bulletSymbolWidth:23,fontSize:16.28,lineHeight:18.8,lineCount:8},{bulletSymbolWidth:19,fontSize:14.46,lineHeight:16.7,lineCount:9},{bulletSymbolWidth:19,fontSize:12.99,lineHeight:15,lineCount:10}],H={tcg:{...$,fontList:[{bulletSymbolWidth:23,fontSize:24.3,lineHeight:24.35,lineCount:5}]},ocg:{...P,fontList:[{bulletSymbolWidth:16,fontSize:22.05,lineHeight:25.2,headTextFontRatio:.4,lineCount:5}]}},K={veryStrict:{1:600,2:620,3:640},strict:{1:645,2:665,3:685},loose:{1:700,2:710,3:720},veryLoose:{1:740,2:770,3:800},relaxed:{1:800,2:850,3:900}},G={Default:{value:"Default",labelKey:"input.name-style.font-type.default",fontData:{alphabetFont:"MatrixRegularSmallCaps",font:"MatrixRegularSmallCaps",furiganaFont:"DFHSGothic-W3-WIN-RKSJ-H",ordinalFont:'"DFKakuTaiHiStd-W4"',fontStyle:"tcg",symbolFont:"matrix",symbolFontRatio:.775,headTextHeightRatio:.55,fontList:[{bulletSymbolWidth:64,fontSize:91.5,headTextFontRatio:.19,letterSpacing:.015,lineCount:1,lineHeight:91.5,offsetY:0}],letterDeviationMap:{i:{yOffset:1,yRatio:1.03},"\xec":{yOffset:1,yRatio:1.03},"\xed":{yOffset:1,yRatio:1.03},"\xee":{yOffset:1,yRatio:1.03},"\xef":{yOffset:1,yRatio:1.03},"\u0129":{yOffset:1,yRatio:1.03},"\u012b":{yOffset:1,yRatio:1.03},"\u012d":{yOffset:1,yRatio:1.03},"\u012f":{yOffset:1,yRatio:1.03},"\u01d0":{yOffset:1,yRatio:1.03},"\u0209":{yOffset:1,yRatio:1.03},"\u020b":{yOffset:1,yRatio:1.03},"\u0268":{yOffset:1,yRatio:1.03},"\u0269":{yOffset:1,yRatio:1.03},"\u1d79":{yOffset:1,yRatio:1.03},"\u1d7c":{yOffset:1,yRatio:1.03},"\u1d96":{yOffset:1,yRatio:1.03},"\u1e2d":{yOffset:1,yRatio:1.03},"\u1e2f":{yOffset:1,yRatio:1.03},"\u1ec9":{yOffset:1,yRatio:1.03},"\u1ecb":{yOffset:1,yRatio:1.03},I:{yOffset:1,yRatio:1.022},"\xcc":{yOffset:1,yRatio:1.022},"\xcd":{yOffset:1,yRatio:1.022},"\xce":{yOffset:1,yRatio:1.022},"\xcf":{yOffset:1,yRatio:1.022},"\u0128":{yOffset:1,yRatio:1.022},"\u012a":{yOffset:1,yRatio:1.022},"\u012c":{yOffset:1,yRatio:1.022},"\u012e":{yOffset:1,yRatio:1.022},"\u0130":{yOffset:1,yRatio:1.022},"\u0196":{yOffset:1,yRatio:1.022},"\u0197":{yOffset:1,yRatio:1.022},"\u01cf":{yOffset:1,yRatio:1.022},"\u0208":{yOffset:1,yRatio:1.022},"\u020a":{yOffset:1,yRatio:1.022},"\u1e2c":{yOffset:1,yRatio:1.022},"\u1e2e":{yOffset:1,yRatio:1.022},"\u1ec8":{yOffset:1,yRatio:1.022},"\u1eca":{yOffset:1,yRatio:1.022}}}},Arial:{value:"Arial",labelKey:"input.name-style.font-type.arial",fontData:{alphabetFont:"Arial",font:"Arial",furiganaFont:"DFHSGothic-W3-WIN-RKSJ-H",ordinalFont:'"DFKakuTaiHiStd-W4"',fontStyle:"tcg",symbolFont:"matrix",symbolFontRatio:.775,headTextHeightRatio:.825,weight:"bold",fontList:[{bulletSymbolWidth:40.67,fontSize:61,headTextFontRatio:.19,letterSpacing:-.14,lineCount:1,lineHeight:61,offsetY:3}]}},OCG:{value:"OCG",labelKey:"input.name-style.font-type.ocg",fontData:{alphabetFont:'"Yu-Gi-Oh! DF Leisho 3"',font:'"Yu-Gi-Oh! DF Leisho 3"',furiganaFont:"DFHSGothic-W3-WIN-RKSJ-H",headTextHeightRatio:.775,headTextOverflow:"condense",headTextBold:!0,metricMethod:"name",numberFont:"DFKakuTaiHiStd-W4",numberFontRatio:1,ordinalFont:'"DFKakuTaiHiStd-W4"',symbolFont:"matrix",symbolFontRatio:.775,fontStyle:"ocg",fontList:[{bulletSymbolWidth:42.67,fontSize:64,headTextFontRatio:.175,headTextSpacing:3,letterSpacing:-.03,lineCount:1,lineHeight:64,offsetY:0}]}}},Y={tcg:{font:"stone-serif-regular",alphabetFont:"stone-serif-regular",symbolFont:"matrix",symbolFontRatio:.8,ordinalFont:"stone-serif-regular",furiganaFont:"DFHSGothic-W3-WIN-RKSJ-H",fontStyle:"tcg",fontList:[{offsetY:-1,bulletSymbolWidth:20.05,fontSize:21.2,lineHeight:21.2,lineCount:1,letterSpacing:-.01,headTextFontRatio:.4,largeSymbolRatio:1.25},{bulletSymbolWidth:20.05,fontSize:20,lineHeight:20,lineCount:1,letterSpacing:-.01,headTextFontRatio:.4,largeSymbolRatio:1.25}]},ocg:{font:'"FOT-Rodin Pro M"',alphabetFont:'"FOT-Rodin Pro M"',symbolFont:"matrix",symbolFontRatio:.8,ordinalFont:'"DFKakuTaiHiStd-W4"',furiganaFont:"DFHSGothic-W3-WIN-RKSJ-H",metricMethod:"creator",fontStyle:"ocg",fontList:[{bulletSymbolWidth:18,fontSize:19,letterSpacing:-.11,lineHeight:20.5,lineCount:1,headTextFontRatio:0,wordLetterSpacing:.11}]}},X={font:"YuGiOhITCStoneSerifBSc",alphabetFont:"YuGiOhITCStoneSerifBSc",symbolFont:"matrix",symbolFontRatio:.8,ordinalFont:"YuGiOhITCStoneSerifBSc",furiganaFont:"DFHSGothic-W3-WIN-RKSJ-H",fontStyle:"tcg",fontList:[{bulletSymbolWidth:20.05,fontSize:31.5,lineHeight:31.5,lineCount:1,iconSymbolWidth:26,capitalLetterRatio:.95,letterSpacing:.02,headTextFontRatio:.4},{bulletSymbolWidth:21.8,fontSize:32.75,lineHeight:32.75,lineCount:1,iconSymbolWidth:26,capitalLetterRatio:.95,letterSpacing:-.03,headTextFontRatio:.4},{bulletSymbolWidth:14.8,fontSize:44.5,lineHeight:44.5,lineCount:1,iconSymbolWidth:45,capitalLetterRatio:.90001,squareBracketRatio:.94001,letterSpacing:-.03,headTextFontRatio:.4}]},V={font:'"Yu-Gi-Oh! DF Leisho 3"',alphabetFont:'"Yu-Gi-Oh! DF Leisho 3"',symbolFont:"matrix",symbolFontRatio:.8,headTextHeightRatio:.775,ordinalFont:'"DFKakuTaiHiStd-W4"',furiganaFont:"DFHSGothic-W3-WIN-RKSJ-H",fontStyle:"ocg",fontList:[{bulletSymbolWidth:20.05,fontSize:25.2,lineHeight:25.2,lineCount:1,iconSymbolWidth:26,headTextFontRatio:.3},{bulletSymbolWidth:21.8,fontSize:26.5,lineHeight:26.5,lineCount:1,iconSymbolWidth:26,headTextFontRatio:.3},{bulletSymbolWidth:36.8,fontSize:48,lineHeight:48,lineCount:1,iconSymbolWidth:45,headTextFontRatio:.25,headTextSpacing:3,letterSpacing:-.07,squareBracketRatio:1.02501}]},U={"\uff10":"0","\uff11":"1","\uff12":"2","\uff13":"3","\uff14":"4","\uff15":"5","\uff16":"6","\uff17":"7","\uff18":"8","\uff19":"9","\uff41":"a","\uff42":"b","\uff43":"c","\uff44":"d","\uff45":"e","\uff46":"f","\uff47":"g","\uff48":"h","\uff49":"i","\uff4a":"j","\uff4b":"k","\uff4c":"l","\uff4d":"m","\uff4e":"n","\uff4f":"o","\uff50":"p","\uff51":"q","\uff52":"r","\uff53":"s","\uff54":"t","\uff55":"u","\uff56":"v","\uff57":"w","\uff58":"x","\uff59":"y","\uff5a":"z","\uff21":"A","\uff22":"B","\uff23":"C","\uff24":"D","\uff25":"E","\uff26":"F","\uff27":"G","\uff28":"H","\uff29":"I","\uff2a":"J","\uff2b":"K","\uff2c":"L","\uff2d":"M","\uff2e":"N","\uff2f":"O","\uff30":"P","\uff31":"Q","\uff32":"R","\uff33":"S","\uff34":"T","\uff35":"U","\uff36":"V","\uff37":"W","\uff38":"X","\uff39":"Y","\uff3a":"Z","\u300c":"\uff62","\u300d":"\uff63","\u3001":"\uff64",":":"\uff1a","\u2200":"\u2c6f","\ua4ef":"\u2c6f","\ua4db":"\u0186","\ua4f1":"\u018e","\ua4de":"\u2132","\ua4e8":"\u2141","\ua4d8":"\ua7b0","\ua4f6":"\ua780","\u2142":"\ua780","\ua4d2":"\u0500","\ua4d5":"\ua7b1","\u0548":"\ua4f5","\ua4e5":"\u0245","\uff1c":"<","\uff1e":">","\uff01":"!","\uff08":"(","\uff09":")","\uff06":"&","\uff07":"'","\uff20":"@"},q={"\uff10":"0","\uff11":"1","\uff12":"2","\uff13":"3","\uff14":"4","\uff15":"5","\uff16":"6","\uff17":"7","\uff18":"8","\uff19":"9","\uff41":"a","\uff42":"b","\uff43":"c","\uff44":"d","\uff45":"e","\uff46":"f","\uff47":"g","\uff48":"h","\uff49":"i","\uff4a":"j","\uff4b":"k","\uff4c":"l","\uff4d":"m","\uff4e":"n","\uff4f":"o","\uff50":"p","\uff51":"q","\uff52":"r","\uff53":"s","\uff54":"t","\uff55":"u","\uff56":"v","\uff57":"w","\uff58":"x","\uff59":"y","\uff5a":"z","\uff21":"A","\uff22":"B","\uff23":"C","\uff24":"D","\uff25":"E","\uff26":"F","\uff27":"G","\uff28":"H","\uff29":"I","\uff2a":"J","\uff2b":"K","\uff2c":"L","\uff2d":"M","\uff2e":"N","\uff2f":"O","\uff30":"P","\uff31":"Q","\uff32":"R","\uff33":"S","\uff34":"T","\uff35":"U","\uff36":"V","\uff37":"W","\uff38":"X","\uff39":"Y","\uff3a":"Z","\uff62":"\u300c","\uff63":"\u300d","\uff64":"\u3001","\uff1a":":","\u2200":"\u2c6f","\ua4ef":"\u2c6f","\ua4db":"\u0186","\ua4f1":"\u018e","\ua4de":"\u2132","\ua4e8":"\u2141","\ua4d8":"\ua7b0","\ua4f6":"\ua780","\u2142":"\ua780","\ua4d2":"\u0500","\ua4d5":"\ua7b1","\u0548":"\ua4f5","\ua4e5":"\u0245","\uff1c":"<","\uff1e":">","\uff01":"!","\uff08":"(","\uff09":")","\uff06":"&","\uff07":"'","\uff20":"@"},J={"(\uff11)":"\u2460","(\uff12)":"\u2461","(\uff13)":"\u2462","(\uff14)":"\u2463","(\uff15)":"\u2464","(\uff16)":"\u2465","(\uff17)":"\u2466","(\uff18)":"\u2467","(\uff19)":"\u2468","(\uff11\uff10)":"\u2469","(\uff11\uff11)":"\u246a","(\uff11\uff12)":"\u246b","(\uff11\uff13)":"\u246c","(\uff11\uff14)":"\u246d","(\uff11\uff15)":"\u246e","(\uff11\uff16)":"\u246f","(\uff11\uff17)":"\u2470","(\uff11\uff18)":"\u2471","(\uff11\uff19)":"\u2472","(\uff12\uff10)":"\u2473","(1)":"\u2460","(2)":"\u2461","(3)":"\u2462","(4)":"\u2463","(5)":"\u2464","(6)":"\u2465","(7)":"\u2466","(8)":"\u2467","(9)":"\u2468","(10)":"\u2469","(11)":"\u246a","(12)":"\u246b","(13)":"\u246c","(14)":"\u246d","(15)":"\u246e","(16)":"\u246f","(17)":"\u2470","(18)":"\u2471","(19)":"\u2472","(20)":"\u2473"},_={"\u6c34\u65cf":"Aqua","\u7363\u65cf":"Beast","\u7363\u6226\u58eb\u65cf":"Beast-Warrior","\u5275\u9020\u795e\u65cf":"Creator God","\u30b5\u30a4\u30d0\u30fc\u30b9\u65cf":"Cyberse","\u6050\u7adc\u65cf":"Dinosaur","\u5e7b\u795e\u7363\u65cf":"Divine-Beast","\u30c9\u30e9\u30b4\u30f3\u65cf":"Dragon","\u5929\u4f7f\u65cf":"Fairy","\u60aa\u9b54\u65cf":"Fiend","\u9b5a\u65cf":"Fish","\u30ae\u30e3\u30e9\u30af\u30b7\u30fc\u65cf":"Galaxy","\u5e7b\u60f3\u9b54\u65cf":"Illusion","\u6606\u866b\u65cf":"Insect","\u6a5f\u68b0\u65cf":"Machine","\u690d\u7269\u65cf":"Plant","\u30b5\u30a4\u30ad\u30c3\u30af\u65cf":"Psychic","\u708e\u65cf":"Pyro","\u722c\u866b\u985e\u65cf":"Reptile","\u5ca9\u77f3\u65cf":"Rock","\u6d77\u7adc\u65cf":"Sea Serpent","\u9b54\u6cd5\u4f7f\u3044\u65cf":"Spellcaster","\u96f7\u65cf":"Thunder","\u6226\u58eb\u65cf":"Warrior","\u9ce5\u7363\u65cf":"Winged Beast","\u5e7b\u7adc\u65cf":"Wyrm","\u30a2\u30f3\u30c7\u30c3\u30c8\u65cf":"Zombie","\u30b5\u30a4\u30dc\u30fc\u30b0\u65cf":"Cyborg","\u5929\u754c\u6226\u58eb\u65cf":"Celestial Warrior","\u30cf\u30a4\u30c9\u30e9\u30b4\u30f3\u65cf":"High Dragon","\u9b54\u5c0e\u9a0e\u58eb\u65cf":"Magical Knight","\u30aa\u30e1\u30ac\u30b5\u30a4\u30ad\u30c3\u30af\u65cf":"Omega Psychic","\u30e2\u30f3\u30b9\u30bf\u30fc":"Monster","\u9b54\u6cd5\u30ab\u30fc\u30c9":"Spell Card","\u7f60\u30ab\u30fc\u30c9":"Trap Card","\u30a2\u30af\u30b7\u30e7\u30f3":"Action","\u901a\u5e38":"Normal","\u52b9\u679c":"Effect","\u5100\u5f0f":"Ritual","\u30d5\u30e5\u30fc\u30b8\u30e7\u30f3":"Fusion","\u878d\u5408":"Fusion","\u30b7\u30f3\u30af\u30ed":"Synchro","\u30a8\u30af\u30b7\u30fc\u30ba":"Xyz","\u30da\u30f3\u30c7\u30e5\u30e9\u30e0":"Pendulum","\u30ea\u30f3\u30af":"Link","\u30de\u30ad\u30b7\u30de\u30e0":"Maximum","\u30c8\u30fc\u30af\u30f3":"Token","\u7279\u6b8a\u53ec\u559a":"Special Summon","\u30c0\u30fc\u30af\u30b7\u30f3\u30af\u30ed\u30e2\u30f3\u30b9\u30bf\u30fc":"Dark Synchro","\u30c1\u30e5\u30fc\u30ca\u30fc":"Tuner","\u30c7\u30e5\u30a2\u30eb":"Gemini","\u30ea\u30d0\u30fc\u30b9":"Flip","\u30c8\u30a5\u30fc\u30f3":"Toon","\u30b9\u30d4\u30ea\u30c3\u30c8":"Spirit","\u30e6\u30cb\u30aa\u30f3":"Union","\xa9\u9ad8\u6a4b\u548c\u5e0c \u30b9\u30bf\u30b8\u30aa\u30fb\u30c0\u30a4\u30b9\uff0f\u96c6\u82f1\u793e":"\xa91996 KAZUKI TAKAHASHI","\xa9\u30b9\u30bf\u30b8\u30aa\u30fb\u30c0\u30a4\u30b9\uff0f\u96c6\u82f1\u793e\u30fb\u30c6\u30ec\u30d3\u6771\u4eac\u30fbKONAMI":"\xa92020 Studio Dice/SHUEISHA, TV TOKYO, KONAMI","{\u7d14|\u30b8\u30e5\u30f3}{\u72d0|\u3053}":"Junko","\u81ea\u5206\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u52b9\u679c\u30e2\u30f3\u30b9\u30bf\u30fc\xd7\uff12\u4f53\u4ee5\u4e0a\n\u2460\uff1a\u3053\u306e\u30ab\u30fc\u30c9\u304c\u30e2\u30f3\u30b9\u30bf\u30fc\u30be\u30fc\u30f3\u306b\u5b58\u5728\u3059\u308b\u9650\u308a\u3001\u76f8\u624b\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u30e2\u30f3\u30b9\u30bf\u30fc\u304c\u52b9\u679c\u3092\u767a\u52d5\u3059\u308b\u5ea6\u306b\u3001\u305d\u306e\u76f8\u624b\u306e\u8868\u5074\u8868\u793a\u30e2\u30f3\u30b9\u30bf\u30fc\u306b\u30d4\u30e5\u30a2\u30ab\u30a6\u30f3\u30bf\u30fc\u3092\uff11\u3064\u7f6e\u304f(\u6700\u5927\uff11\u3064\u307e\u3067\uff09\u3002\u2461\uff1a\u3053\u306e\u30ab\u30fc\u30c9\u306f\u30d4\u30e5\u30a2\u30ab\u30a6\u30f3\u30bf\u30fc\u304c\u7f6e\u304b\u308c\u3066\u3044\u308b\u30e2\u30f3\u30b9\u30bf\u30fc\u304c\u767a\u52d5\u3057\u305f\u52b9\u679c\u3092\u53d7\u3051\u306a\u3044\u3002\u2462\uff1a\u3053\u306e\u30ab\u30fc\u30c9\u306f\u30d4\u30e5\u30a2\u30ab\u30a6\u30f3\u30bf\u30fc\u304c\u7f6e\u304b\u308c\u3066\u3044\u308b\u30e2\u30f3\u30b9\u30bf\u30fc\u3068\u306e\u6226\u95d8\u3067\u306f\u7834\u58ca\u3055\u308c\u306a\u3044\u3002":"[2+ Effect Monsters on your field]\nEach time an opponent's monster activates its effect, place 1 Pure Counter on that opponent's monster (max. 1) after that effect resolves. Unaffected by activated effects from monster with a Pure Counter. Cannot be destroyed by battle with monsters with a Pure Counter.","\u2460\uff1a\uff11\u30bf\u30fc\u30f3\u306b\uff11\u5ea6\u3001\uff18\uff10\uff10\uff2c\uff30\u3092\u6255\u3063\u3066\u767a\u52d5\u3067\u304d\u308b\u3002\u3053\u306e\u30ab\u30fc\u30c9\u306e\uff30\u30b9\u30b1\u30fc\u30eb\u30921\u3064\u4e0a\u3052\u308b\u3002":"Once per turn: You can pay 800 LP, increase this card's Pendulum Scale by 1."},Z=Object.entries(_).reduce(((e,t)=>{const[a,r]=t;return e[r]=a,e}),{"Once per turn: You can pay 800 LP, increase this card\u2019s Pendulum Scale by 1.":"\u2460\uff1a\uff11\u30bf\u30fc\u30f3\u306b\uff11\u5ea6\u3001\uff18\uff10\uff10\uff2c\uff30\u3092\u6255\u3063\u3066\u767a\u52d5\u3067\u304d\u308b\u3002\u3053\u306e\u30ab\u30fc\u30c9\u306e\uff30\u30b9\u30b1\u30fc\u30eb\u30921\u3064\u4e0a\u3052\u308b\u3002"}),Q={normal:{name:"normal",nameKey:"input.frame.normal",labelColor:"#ffffff",edition:"normal",labelBackgroundColor:"#c49c5e"},effect:{name:"effect",nameKey:"input.frame.effect",labelColor:"#ffffff",edition:"normal",labelBackgroundColor:"#b96c49"},fusion:{name:"fusion",nameKey:"input.frame.fusion",labelColor:"#ffffff",edition:"normal",labelBackgroundColor:"#8948a4"},synchro:{name:"synchro",nameKey:"input.frame.synchro",labelColor:"#000",edition:"normal",labelBackgroundColor:"#efefef"},xyz:{name:"xyz",nameKey:"input.frame.xyz",labelColor:"#ffffff",edition:"normal",labelBackgroundColor:"#000000"},link:{name:"link",nameKey:"input.frame.link",labelColor:"#ffffff",edition:"normal",labelBackgroundColor:"#0c8ac6"},ritual:{name:"ritual",nameKey:"input.frame.ritual",labelColor:"#ffffff",edition:"normal",labelBackgroundColor:"#5e85c9"},spell:{name:"spell",nameKey:"input.frame.spell",labelColor:"#ffffff",edition:"normal",labelBackgroundColor:"#1b8f83"},trap:{name:"trap",nameKey:"input.frame.trap",labelColor:"#ffffff",edition:"normal",labelBackgroundColor:"#c32a8c"},token:{name:"token",nameKey:"input.frame.token",labelColor:"#ffffff",edition:"normal",labelBackgroundColor:"#6f6c6b"},"dark-synchro":{name:"dark-synchro",nameKey:"input.frame.dark-synchro",labelColor:"#ffffff",edition:"extendend",labelBackgroundColor:"#4d4543"},obelisk:{name:"obelisk",nameKey:"input.frame.obelisk",labelColor:"#ffffff",edition:"extendend",labelBackgroundColor:"#515eb0"},osiris:{name:"osiris",nameKey:"input.frame.osiris",labelColor:"#ffffff",edition:"extendend",labelBackgroundColor:"#bd5044"},ra:{name:"ra",nameKey:"input.frame.ra",labelColor:"#000",edition:"extendend",labelBackgroundColor:"#b9ad34"},raviel:{name:"raviel",nameKey:"input.frame.raviel",labelColor:"#ffffff",edition:"extendend",labelBackgroundColor:"#313c5f"},uria:{name:"uria",nameKey:"input.frame.uria",labelColor:"#ffffff",edition:"extendend",labelBackgroundColor:"#623320"},hamon:{name:"hamon",nameKey:"input.frame.hamon",labelColor:"#ffffff",edition:"extendend",labelBackgroundColor:"#534a19"},"lg-dragon":{name:"lg-dragon",nameKey:"input.frame.lg-dragon",labelColor:"#ffffff",edition:"extendend",labelBackgroundColor:"#4e84a4"},"speed-skill":{name:"speed-skill",nameKey:"input.frame.speed-skill",labelColor:"#ffffff",edition:"extendend",labelBackgroundColor:"#199cd5"},zarc:{name:"zarc",nameKey:"input.frame.zarc",labelColor:"#000",edition:"extendend",labelBackgroundColorList:["rgba(185,108,73,1)","rgba(137,72,164,1)","rgba(239,239,239,1)","rgba(0,0,0,1)"],labelBackgroundImage:`linear-gradient(90deg, ${["rgba(185,108,73,1) 23%","rgba(137,72,164,1) 27%","rgba(137,72,164,1) 48%","rgba(239,239,239,1) 52%","rgba(239,239,239,1) 73%","rgba(0,0,0,1) 77%"].join(", ")})`}},ee=Object.values(Q),te=[{top:175,left:55,width:100,height:100},{top:165,left:323,width:170,height:80},{top:175,left:655,width:100,height:100},{top:442,left:45,width:70,height:170},{top:0,left:0,width:0,height:0},{top:442,left:700,width:70,height:170},{top:775,left:55,width:100,height:100},{top:810,left:323,width:170,height:80},{top:775,left:655,width:100,height:100}],ae=new RegExp("[A-Z\uff21-\uff3a]"),re=new RegExp("[\\[\\]\u3010\u3011]"),oe="[#@\u221ea-z\uff41-\uff5aA-Z\uff21-\uff3a0-9\uff10-\uff19!\uff01+\xd7\uff03#@\u221e\u2018\u201c\u2019\u201d:;\\[\\]\\(\\)\u3010\u3011\\.,]+",ne=new RegExp(oe),le=new RegExp(`({[^{}]+?}|${oe}|.)`),ie="\u2989",se="\u298a",ce="\u27c5",de="\u27c6",ue="\u27ec",pe="\u27ed",me=new RegExp(`[${[ie,se,ce,de,ue,pe].join("")}]|(\\|[^}]+})`,"g"),be=`${ie}|${se}`,fe=new RegExp(be),he=`(\\n^[\\r\\t\\f\\v \\u00a0\\u1680\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000\\ufeff]*\\n${ie}?\\([\\w\\W]+\\)${se}?)\\s*$`,ge=new RegExp("[#\u2605@\u221e]"),ye=`(${S.map((e=>{var t;return null!==(t=e.regexForm)&&void 0!==t?t:e.shortForm})).join("|")})(?![^{]*})`,ve="\u30fd\u30fe\u30fc\u30a1\u30a3\u30a5\u30a7\u30a9\u30c3\u30e3\u30e5\u30e7\u30ee\u30f5\u30f6\u3041\u3043\u3045\u3047\u3049\u3063\u3083\u3085\u3087\u308e\u3095\u3096\u31f0\u31f1\u31f2\u31f3\u31f4\u31f5\u31f6\u31f7\u31f8\u31f9\u31fa\u31fb\u31fc\u31fd\u31fe\u31ff\u3005\u303b",xe=new RegExp(`[${ve}]`),je=`.[${ve})\\]\uff5d\u3015\u3009\u300b\u300d\uff63\u300f\u3011\u3019\u3017\u301f'"\u2019\u201d\uff60\xbb\u2010\u30a0\u2013\u301c\uff1f!\u203c\u2047\u2048\u2049\u30fb\u3001:;,\u3002.\uff61\uff64]+`,we=new RegExp("[\uff21-\uff3a\uff41-\uff5a]"),Oe=new RegExp("[\uff10-\uff19]"),Fe=new RegExp("[0-9]"),ke=/[\u3042\u3044\u3046\u3048\u304a\u304b\u304c\u304d\u304e\u304f\u3050\u3051\u3052\u3053\u3054\u3055\u3056\u3057\u3058\u3059\u305a\u305b\u305c\u305d\u305e\u305f\u3060\u3061\u3062\u3064\u3065\u3066\u3067\u3068\u3069\u306a\u306b\u306c\u306d\u306e\u306f\u3070\u3071\u3072\u3073\u3074\u3075\u3076\u3077\u3078\u3079\u307a\u307b\u307c\u307d\u307e\u307f\u3080\u3081\u3082\u3084\u3086\u3088\u3089\u308a\u308b\u308c\u308d\u308f\u3090\u3091\u3092\u3093\u3094]/,Ce=/[\u30a2\u30a4\u30a6\u30a8\u30aa\u30ab\u30ac\u30ad\u30ae\u30af\u30b0\u30b1\u30b2\u30b3\u30b4\u30b5\u30b6\u30b7\u30b8\u30b9\u30ba\u30bb\u30bc\u30bd\u30be\u30bf\u30c0\u30c1\u30c2\u30c4\u30c5\u30c6\u30c7\u30c8\u30c9\u30ca\u30cb\u30cc\u30cd\u30ce\u30cf\u30d0\u30d1\u30d2\u30d3\u30d4\u30d5\u30d6\u30d7\u30d8\u30d9\u30da\u30db\u30dc\u30dd\u30de\u30df\u30e0\u30e1\u30e2\u30e4\u30e6\u30e8\u30e9\u30ea\u30eb\u30ec\u30ed\u30ef\u30f0\u30f1\u30f2\u30f3\u30f4\u30f7\u30f8\u30f9\u30fa]/,Se=new RegExp("[\u30fb]"),Te=new RegExp("[\u30fc]"),Re=new RegExp("[\u2015]"),Ne=new RegExp("[\uff1a]"),Le=new RegExp("[\u3002\uff64]"),Me=new RegExp("[\uff1a]"),Ee={"\u3002":-.2,"\uff64":-.2,"\uff62":0,"\uff63":0,"\uff1a":.5,">":.25,"<":-.25},Ie={"\u3002":-.5,"\uff1a":-.75},Ae={">":.125,"<":.125},Be={"\\":-.025},$e={},We={"\\":.3},Pe=e=>"tcg"===e?7:1,De=/{[^{}]+?}/,ze="\\s\\-/",He=-2.25,Ke=()=>({version:0,format:"tcg",frame:"fusion",foil:"normal",opacity:c(),finish:[],artFinish:"normal",name:"Junko",nameStyleType:"auto",nameStyle:{font:"Default",fillStyle:"#000000",headTextFillStyle:"#000000",shadowColor:"#000000",shadowOffsetY:0,shadowOffsetX:0,shadowBlur:0,hasShadow:!1,lineColor:"#000000",lineWidth:0,lineOffsetY:0,lineOffsetX:0,hasOutline:!1,gradientAngle:0,gradientColor:"0.000|#eef10b,0.5|#d78025,1.000|#7e20cf",hasGradient:!1,preset:"commonB",pattern:"none"},attribute:"LIGHT",subFamily:h,cardIcon:"auto",star:6,starAlignment:"auto",art:"https://i.imgur.com/h5kXZeC.png",artCrop:{x:0,y:4,width:100,height:89.5,unit:"%",aspect:1},hasBackground:!1,background:"",backgroundType:"fit",backgroundCrop:{x:0,y:4,width:100,height:89.5,unit:"%",aspect:1},linkMap:["1","3","7","9"],isPendulum:!1,pendulumFrame:"auto",pendulumEffect:"Once per turn: You can pay 800 LP, increase this card's Pendulum Scale by 1.",pendulumScaleRed:"4",pendulumScaleBlue:"4",typeAbility:["Fairy","Fusion","Effect"],effectStyle:{condenseTolerant:"strict"},effect:"[2+ Effect Monsters on your field]\nEach time an opponent's monster activates its effect, place 1 Pure Counter on that opponent's monster (max. 1) after that effect resolves. Unaffected by activated effects from monster with a Pure Counter. Cannot be destroyed by battle with monsters with a Pure Counter.",setId:"YGOC-EN001",atk:"2000",def:"2000",password:"18111996",sticker:"holo5",isFirstEdition:!0,isSpeedCard:!1,isDuelTerminalCard:!1,creator:"\xa92020 Studio Dice/SHUEISHA, TV TOKYO, KONAMI",furiganaHelper:!0,statTextStyle:[!1,"#000000",!1,"#000000"],typeTextStyle:[!1,"#000000",!1,"#000000"],effectTextStyle:[!1,"#000000",!1,"#000000"],pendulumTextStyle:[!1,"#000000",!1,"#000000"]}),Ge=()=>({version:0,format:"tcg",frame:"effect",foil:"normal",opacity:c(),finish:[],artFinish:"normal",name:"",nameStyleType:"auto",nameStyle:{font:"Default",fillStyle:"#000000",headTextFillStyle:"#000000",shadowColor:"#000000",shadowOffsetY:0,shadowOffsetX:0,shadowBlur:0,hasShadow:!1,lineColor:"#000000",lineWidth:0,lineOffsetY:0,lineOffsetX:0,hasOutline:!1,gradientAngle:0,gradientColor:"0.000|#eef10b,0.5|#d78025,1.000|#7e20cf",hasGradient:!1,preset:"commonB",pattern:"none"},attribute:"LIGHT",subFamily:h,cardIcon:"auto",star:6,starAlignment:"auto",art:"https://i.imgur.com/jjtCuG5.png",artCrop:{x:0,y:4,width:100,height:89.5,unit:"%",aspect:1},hasBackground:!1,background:"",backgroundType:"fit",backgroundCrop:{x:0,y:4,width:100,height:89.5,unit:"%",aspect:1},linkMap:[],isPendulum:!1,pendulumFrame:"auto",pendulumEffect:"",pendulumScaleRed:"4",pendulumScaleBlue:"4",typeAbility:[],effectStyle:{condenseTolerant:"strict"},effect:"",setId:"",atk:"0",def:"0",password:"",sticker:"no-sticker",isFirstEdition:!1,isSpeedCard:!1,isDuelTerminalCard:!1,creator:"",furiganaHelper:!0,statTextStyle:[!1,"#000000",!1,"#000000"],typeTextStyle:[!1,"#000000",!1,"#000000"],effectTextStyle:[!1,"#000000",!1,"#000000"],pendulumTextStyle:[!1,"#000000",!1,"#000000"]}),Ye=[{type:"body",subType:"artBorder",label:"Card",labelKey:"input.opacity.body.label",tooltipKey:"input.opacity.art-border.tooltip"},{type:"name",subType:"nameBorder",label:"Name",labelKey:"input.opacity.name.label",tooltipKey:"input.opacity.name-border.tooltip"},{type:"pendulum",label:"Pendulum",labelKey:"input.opacity.pendulum.label",tooltipKey:null},{type:"text",label:"Effect",labelKey:"input.opacity.effect.label",tooltipKey:null}],Xe=["#4D4D4D","#999999","#FFFFFF","#FF7F7F","#FFD27F","#FFFF7F","#7FFF7F","#7FBF7F","#7FFFFF","#7F7FFF","#BF7FBF","#FF7FFF","#333333","#808080","#cccccc","#7F0000","#7F5200","#7F7F00","#007F00","#004000","#007F7F","#00007F","#400040","#7F007F","#000000","#666666","#B3B3B3","#FF0000","#FFA500","#FFFF00","#00FF00","#008000","#00FFFF","#0000FF","#800080","#FF00FF"],Ve=e=>"xyz"===e.frame,Ue=e=>"link"===e.frame&&Je(e),qe=e=>"speed-skill"===e.frame&&!Je(e),Je=e=>"spell"!==e.frame&&"trap"!==e.frame&&"speed-skill"!==e.frame,_e=e=>!Je({frame:e})||Ze(e),Ze=e=>["link","xyz","dark-synchro","speed-skill","hamon","uria","raviel"].includes(e),Qe=1e3,et=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,a=Qe;const r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qe,a=t,r=a,o=30,n=100;const l=()=>o=-1;return{reset:function(){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,t=l,a=l,o=30,n=100,r=l},searchDown:()=>(a-=n,o-=1,a),reverseSearch:()=>(1===n?l():(a+=n,n/=10,a-=n),Math.min(a,t)),finish:l,getMedian:()=>a,setMedian:e=>a=e,setLastEffective:function(){return r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a},getLastEffective:()=>r,applyLastEffective:()=>(a=r,o=-1,a),getIterateCount:()=>o}}();for(;r.getIterateCount()>=0;){if(r.getIterateCount()<=0){a=r.getMedian();break}if(!e(r.getMedian())&&r.getMedian()>0)r.searchDown();else{if(r.getMedian()===Qe)break;a=r.reverseSearch()}}const o=Math.max(t,Math.min(a,Qe));return o!==a&&e(o),o},tt=e=>{const{defaultWeight:t="",defaultStyle:a="",defaultSize:r="10px",defaultFamily:o="Arial"}=null!==e&&void 0!==e?e:{};let n=t,l=a,i="number"===typeof r?`${r}px`:r,s="number"===typeof r?r:parseFloat(r.replaceAll("px","")),c=o;return{getFont:()=>`${[l,n,i,c].filter((e=>""!==e)).join(" ")}, Arial`,getFontInfo:()=>({style:l,size:i,family:c,sizeAsNumber:s,weight:n}),setWeight(e){return n=e,this},setStyle(e){return l=e,this},setSize(e){const t="function"===typeof e?e(s):e;return i="number"===typeof t?`${t}px`:t,s="number"===typeof t?t:parseFloat(t.replaceAll("px","")),this},setFamily(e){return c=e,this}}},at=()=>ot("0.000|#eef10b,0.5|#d78025,1.000|#7e20cf"),rt=e=>(null!==e&&void 0!==e?e:[]).map((e=>{let{color:t,offset:a}=e;return`${a}|${t}`})).join(","),ot=e=>e?e.split(",").map(((e,t)=>{const[a,r]=e.split("|");return{color:r,offset:a,id:t+1}})):ot("0.000|#eef10b,0.5|#d78025,1.000|#7e20cf"),nt=e=>{let{debug:t,optionLength:a,stopPropagation:r=!1,setFocus:o,onTrigger:n,onCancel:l,onKeyPress:i}=e;return{tabIndex:0,onFocus:()=>{t&&console.info("Navigation Focus",t),o(0)},onBlur:()=>{t&&console.info("Navigation Blur",t),o(-1)},onKeyDown:e=>{r&&e.stopPropagation(),t&&console.info("Navigation Keydown",t,e.key),!1!==(null===i||void 0===i?void 0:i(e))&&("ArrowRight"===e.key||"ArrowDown"===e.key?(e.preventDefault(),o((e=>Math.max(0,a+e+1)%a))):"ArrowLeft"===e.key||"ArrowUp"===e.key?(e.preventDefault(),o((e=>Math.max(0,a+e-1)%a))):"Enter"===e.key||" "===e.key?n():"Escape"===e.key&&(null===l||void 0===l||l()))}}};var lt=a(443);const it=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const a=[['"',"'"],["':","!"],[",'","~"],["}",")","\\","\\"],["{","(","\\","\\"]],r=(e,t)=>e.replace(new RegExp(`${(t[2]?t[2]:"")+t[0]}|${(t[3]?t[3]:"")+t[1]}`,"g"),(e=>e===t[0]?t[1]:t[0]));if(t)for(t=0;t<a.length;++t)e=r(e,a[t]);else for(t=a.length;t--;)e=r(e,a[t]);return e},st={version:"ve",format:"fm",frame:"fr",foil:"fo",opacity:{_newKey:"op",body:"opbd",pendulum:"oppd",name:"opnm",text:"optx",boundless:"opbl",artFrame:"opaf",artBorder:"opab",nameBorder:"opnb",baseFill:"opbf"},finish:"fn",art:"ar",artFinish:"afn",artCrop:{_newKey:"arc",x:"arx",y:"ary",width:"arw",height:"arh",unit:"aru",aspect:"ara"},hasBackground:"hbg",background:"bg",backgroundType:"bgt",backgroundCrop:{_newKey:"bgc",x:"bgx",y:"bgy",width:"bgw",height:"bgh",unit:"bgu",aspect:"bga"},name:"na",nameStyleType:"nst",effectStyle:{_newKey:"es",condenseTolerant:"cdtl"},nameStyle:{_newKey:"ns",font:"nsft",fillStyle:"nsfs",headTextFillStyle:"nshfs",shadowColor:"nssc",shadowOffsetY:"nssoy",shadowOffsetX:"nssox",shadowBlur:"nssb",hasShadow:"nshs",lineColor:"nslc",lineWidth:"nslw",lineOffsetY:"nsloy",lineOffsetX:"nslox",hasOutline:"nshl",gradientAngle:"nsgd",gradientColor:"nscg",hasGradient:"nshg",preset:"nspr",pattern:"nspt"},attribute:"at",subFamily:"sf",star:"st",starAlignment:"sa",cardIcon:"it",linkMap:"lm",isPendulum:"ip",pendulumFrame:"pf",pendulumEffect:"pe",pendulumScaleRed:"rs",pendulumScaleBlue:"bs",typeAbility:"ta",effect:"ef",setId:"si",atk:"atk",def:"def",password:"pw",sticker:"sti",isFirstEdition:"ife",isSpeedCard:"isp",isDuelTerminalCard:"idt",creator:"cr",furiganaHelper:"fh",effectTextStyle:"ets",pendulumTextStyle:"pts",statTextStyle:"sts",typeTextStyle:"tts",passcode:"pc",picture:"pt",pictureCrop:{_newKey:"ptc",x:"ptx",y:"pty",width:"ptw",height:"pth",unit:"ptu",aspect:"pta"}},ct=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:st,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r={},o={...e};return Object.keys(o).forEach((e=>{const a=o[e];if("object"!==typeof a||null===a||Array.isArray(a)){const o=t[e];"string"===typeof o&&(r[o]=a)}else{var n;const o=null===(n=t[e])||void 0===n?void 0:n._newKey;o&&(r[o]=ct(a,t[e],!1))}})),a?JSON.stringify(r):r},dt=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:st;const a={};return Object.keys(t).forEach((r=>{const o=t[r];if("object"!==typeof o||null===o||Array.isArray(o))null!=e[o]&&(a[r]=e[o]);else{const n=null===o||void 0===o?void 0:o._newKey;n&&e[n]&&(a[r]=dt(e[n],t[r]))}})),a},ut=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:st;const a="string"===typeof e?JSON.parse((e=>{var t=(e=e.substring(0,e.length-1)).split("\x01");if(e=t[0],1<t.length){t=t[1];for(let a of t)e=(e=e.split(a)).join(e.pop())}return it(e,0)})(decodeURIComponent(e))):e,r={};return Object.keys(t).forEach((e=>{const o=t[e];if("object"!==typeof o||null===o||Array.isArray(o))null!=a[o]&&(r[e]=a[o]);else{const n=null===o||void 0===o?void 0:o._newKey;n&&a[n]&&(r[e]=ut(a[n],t[e]))}})),r},pt=function(e){var t,a;const r={...arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ge(),...Object(lt.a)(e)};return null==r.effectStyle&&(r.effectStyle={...Ge().effectStyle}),null==r.version&&(r.version=1),null==r.format&&(r.format="tcg"),null==r.pendulumFrame&&(r.pendulumFrame="auto"),null==r.finish&&(r.finish=[]),null==r.artFinish&&(r.artFinish="normal"),r.picture&&!e.art&&(r.art=r.picture),delete r.picture,r.pictureCrop&&!e.artCrop&&(r.artCrop=r.pictureCrop),delete r.pictureCrop,""===(null!==(t=r.art)&&void 0!==t?t:"")&&(r.art=""),"boolean"===typeof r.opacity.artFrame&&null==r.opacity.boundless&&(r.opacity.boundless=!r.opacity.artFrame,delete r.opacity.artFrame),r.opacity={...c(),...r.opacity},""===(null!==(a=r.background)&&void 0!==a?a:"")&&(r.background=""),null==r.hasBackground&&(r.background||r.opacity.baseFill)&&(r.hasBackground=!0),r.kanjiHelper&&!e.furiganaHelper&&(r.furiganaHelper=r.kanjiHelper),delete r.kanjiHelper,void 0===r.furiganaHelper&&(r.furiganaHelper=!0),r.passcode&&!e.password&&(r.password=r.passcode),delete r.passcode,r.effectTextStyle||(r.effectTextStyle=[!1,"#000000",!1,"#000000"]),r.pendulumTextStyle||(r.pendulumTextStyle=[!1,"#000000",!1,"#000000"]),r.typeTextStyle||(r.typeTextStyle=[!1,"#000000",!1,"#000000"]),r.statTextStyle||(r.statTextStyle=[!1,"#000000",!1,"#000000"]),r.starAlignment||(r.starAlignment="auto"),r},mt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a="";const r=e.length;for(let o=0;o<t;o++)a+=e.charAt(Math.floor(Math.random()*r));return a};const bt=e=>e.replaceAll(/\{([^{}|]*)\|+?[^{}|]*\}/g,"$1"),ft=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".radio-train-input-group";null===(e=document.querySelector(t))||void 0===e||e.focus()},ht=/^#[a-fA-F0-9]{3}([a-fA-F0-9]{3})?$/,gt=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{const n=e.replace("#","");let l=[0,0,0,1];var a,r,o;if(3===n.length||4===n.length)l=[parseInt(`${n[0]}${n[0]}`,16),parseInt(`${n[1]}${n[1]}`,16),parseInt(`${n[2]}${n[2]}`,16),parseInt(`${null!==(a=n[3])&&void 0!==a?a:"f"}${null!==(r=n[3])&&void 0!==r?r:"f"}`,16)];if(6===n.length||8===n.length)l=[parseInt(n.slice(0,2),16),parseInt(n.slice(2,4),16),parseInt(n.slice(4,6),16),parseInt(null!==(o=n.slice(6,8))&&void 0!==o?o:"ff",16)];return l.map((e=>isNaN(e)?255:e)).slice(0,t?4:3)}catch(n){return[0,0,0,1].slice(0,t?4:3)}},yt=()=>{let e=!1;var t;return t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(t.substr(0,4)))&&(e=!0),e};function vt(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter(Boolean).join(" ")}var xt=a(9),jt=a(444),wt=a(88),Ot=a(441),Ft=a(190),kt=a.n(Ft),Ct=a(450),St=a(451),Tt=a(437);const Rt=xt.b.div`
    display: flex;
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	background-image: linear-gradient(#fafafaaa, #fafafaaa);
    justify-content: center;
    align-items: center;
    z-index: 999;
`,Nt=()=>Object(m.jsx)(Tt.a,{});Nt.FullView=()=>Object(m.jsx)(Rt,{className:"loading-fullview",children:Object(m.jsx)(Tt.a,{size:"large"})});const Lt=xt.b.span`
    display: inline-flex;
    align-items: center;
    justify-content: center;
    margin-left: var(--spacing-xs);
    width: 24px;
    height: 24px;
    border: var(--bw) solid var(--sub-level-1);
    background-color: var(--main-level-4);
    border-radius: var(--br-lg);
    box-shadow: var(--bs-button);
	cursor: pointer;
	&:hover {
		background-color: var(--sub-level-4);
	}
`,Mt=e=>{let{Icon:t,onClick:a,iconProps:r,tooltipProps:o,containerProps:n}=e;const{className:l,onClick:i,onKeyDown:s,...c}=null!==n&&void 0!==n?n:{};return Object(m.jsx)(wt.a,{...o,children:Object(m.jsx)(Lt,{tabIndex:0,...c,onClick:e=>{a(),null===i||void 0===i||i(e)},onKeyDown:e=>{null===s||void 0===s||s(e),"Enter"===e.key&&a()},className:["icon-button",null!==l&&void 0!==l?l:""].join(" "),children:Object(m.jsx)(t,{...r})})})};a(262),a(263);const Et=(e,t)=>{var a,r,o,n;const{creator:l,effect:i,pendulumEffect:s,format:c,isFirstEdition:d,name:u,setId:p,typeAbility:m}=e;if(c===t)return e;const b="ocg"===t?Z:_,f="ocg"===t&&/-EN/.test(p)?p.replace("-EN","-JP"):"tcg"===t&&/-JP/.test(p)?p.replace("-JP","-EN"):p;return{...e,name:null!==(a=b[u])&&void 0!==a?a:u,format:t,effect:null!==(r=b[i])&&void 0!==r?r:i,pendulumEffect:null!==(o=b[s])&&void 0!==o?o:s,typeAbility:m.map((e=>{var t;return null!==(t=b[e])&&void 0!==t?t:e})),creator:null!==(n=b[l])&&void 0!==n?n:l,setId:f,isFirstEdition:"ocg"!==t&&d}};var It=a(84),At=a(83),Bt=a.n(At),$t=a(197),Wt=a.n($t),Pt=a(217);const Dt=function(e){const t={...arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},...e.rawDictionary},a=e=>{var a;return null!==(a=t[e])&&void 0!==a?a:""},r=(e,t)=>{const a=new RegExp(`\\{(${Object.keys(t).join("|")})\\}`),r=e.split(a);return Object(m.jsx)(m.Fragment,{children:r.map(((e,a)=>a%2===0?Object(m.jsx)(o.a.Fragment,{children:e},`${e}-${a}`):t[e]))})},n={"error.load.font.tcg":e=>a("error.load.font.tcg").replaceAll("{familyName}",e),"error.load.font.ocg":e=>a("error.load.font.ocg").replaceAll("{familyName}",e),"contributor.disclaimer.line-1":e=>r(a("contributor.disclaimer.line-1"),{siteLink:e}),"contributor.disclaimer.line-5":(e,t)=>r(a("contributor.disclaimer.line-5"),{author1:e,author2:t}),"contributor.template-maker":(e,t,o,n)=>r(a("contributor.template-maker"),{artist1:e,artist2:t,artist3:o,artist4:n}),"guide.format.introduction":e=>r(a("guide.format.introduction"),{settingIcon:e}),"guide.format.section-1.content":(e,t,o,n)=>r(a("guide.format.section-1.content"),{openTag:e,closeTag:t,hotkey:o,hotkeyAlternative:n}),"guide.format.section-2.content":(e,t,o,n)=>r(a("guide.format.section-2.content"),{openTag:e,closeTag:t,hotkey:o,hotkeyAlternative:n}),"guide.format.section-3.content":(e,t,o)=>r(a("guide.format.section-3.content"),{separator:e,hotkey:t,hotkeyAlternative:o}),"guide.format.section-4.content":(e,t,o)=>r(a("guide.format.section-4.content"),{separator:e,hotkey:t,hotkeyAlternative:o}),"guide.format.section-5.content":(e,t,o,n)=>r(a("guide.format.section-5.content"),{openTag:e,closeTag:t,hotkey:o,hotkeyAlternative:n}),"input.scale.label":e=>r(a("input.scale.label"),{scaleType:e})};return{...e,rawDictionary:t,dictionary:{...t,...n}}},zt=Object(It.create)(((e,t)=>{const a=(()=>{const e=new URL(window.location.href),t=e.searchParams,a=t.get("language");if(t.delete("language"),window.history.replaceState(window.history.state,"",e.href),a)return a;try{const e=window.localStorage.getItem("language");return e||"eng"}catch(r){return console.error("useSetting: Error when getting cached language",r),"eng"}})(),r={},o=Dt({name:"Default",formalName:"Default",codeName:"def",initialMessage:"",order:1e3,active:!1,rawDictionary:{}}),n=async e=>{if(r[e])return null;try{var t;const a=await fetch(`/ygocarder/asset/i18n/${e}.json`,{headers:{"Content-Type":"application/json",Accept:"application/json"}}),o=await a.json();if(!o.rawDictionary)throw new Error("No dictionary found");const n=Dt(o,null===(t=r.eng)||void 0===t?void 0:t.rawDictionary);return r[e]=n,n}catch(a){return console.error("loadLanguage: Could not load language, revert back to default",a),null}},l=async a=>{const l=t().languageMetadataMap[a];if(!l)return;const i=r[a]?r[a]:await n(a);i?(e({languageInfo:t().languageMetadataMap[a],language:i.dictionary}),window.localStorage.setItem("language",a),e({isLoading:!1,languageInfo:l})):e({isLoading:!1,languageInfo:t().languageMetadataMap.eng,language:o.dictionary})};return{languageMetadataMap:{},languageInfo:{name:"Default",formalName:"Default",codeName:"def",initialMessage:"",order:1e3,active:!1},language:o.dictionary,error:null,isInitiating:!0,isLoading:!0,isMetadataReady:!1,initiate:async()=>{(async()=>{try{const t=await fetch("/ygocarder/asset/i18n/metadata.json",{headers:{"Content-Type":"application/json",Accept:"application/json"}}),a=await t.json();if(!a)throw new Error("No metadata found");e({languageMetadataMap:a,isMetadataReady:!0})}catch(t){console.error("loadLanguageMetadata: Could not load language metadata, try to use English",t),e({languageMetadataMap:{eng:{name:"English",formalName:"English",codeName:"eng",initialMessage:"Loading fonts and scripts\u2026",order:1,active:!0}},isMetadataReady:!0})}})()},loadDefaultLanguage:async()=>{await n("eng"),await l(a),e({isInitiating:!1})},loadLanguage:n,changeLanguage:l}})),Ht=()=>zt((e=>{let{language:t}=e;return t})),Kt=()=>zt.getState().language,Gt=(e,t)=>{let a=Ge();if(!e)return a;try{a=((e,t)=>{const a="string"===typeof e?JSON.parse(e):e,r=dt(a);return pt(r,t)})(e,t)}catch(r){console.error("decodedCard",e,r);try{a=function(e){let t;return t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?ut(e):"string"===typeof e?JSON.parse(e):e,pt(t)}(e,!0),Pt.a.info({message:Kt()["service.decode.outdated.message"],description:Kt()["service.decode.outdated.description"]})}catch(r){console.error("cardData",e,r),Pt.a.error({message:Kt()["service.decode.error.message"],description:Kt()["service.decode.error.description"]})}}return a},Yt={debounce:{type:"debounce",wait:400},throttle:{type:"throttle",wait:1e3}},Xt=Object(It.create)(((e,t)=>({card:Ke(),setCard:t=>{e("function"===typeof t?e=>({card:t(e.card)}):{card:t})},getUpdater:function(e){var a;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e,o=arguments.length>2?arguments[2]:void 0;const{setCard:n}=t(),l=t=>{n((a=>{var o;return{...a,[e]:r("string"===typeof t||"number"===typeof t||Array.isArray(t)?t:null===t||void 0===t||null===(o=t.target)||void 0===o?void 0:o.value)}}))};if(!o)return l;const i="string"===typeof o?null!==(a=Yt[o])&&void 0!==a?a:void 0:o;if(!i)return l;const{wait:s,type:c}=i;return"debounce"===c?Bt()(l,s):"throttle"===c?Wt()(l,s):l}}))),Vt=Object(It.create)((e=>{const{resolution:t,allowHotkey:a,reduceMotionColor:r,showCreativeOption:o,showExtraDecorativeOption:n}=(()=>{try{var e;const t=JSON.parse(null!==(e=window.localStorage.getItem("setting"))&&void 0!==e?e:"{}");return t&&"object"===typeof t&&!Array.isArray(t)?t:{}}catch(t){return console.error("useSetting: Error when getting cached setting",t),{}}})();return{setting:{resolution:Array.isArray(t)&&"number"===typeof t[0]&&"number"===typeof t[1]?t:[i.width,i.height],allowHotkey:"boolean"!==typeof a||a,reduceMotionColor:"boolean"===typeof r&&r,showCreativeOption:"boolean"!==typeof o||o,showExtraDecorativeOption:"boolean"!==typeof n||n},updateSetting:t=>{e((e=>{const a="function"===typeof t?t(e.setting):{...e.setting,...t};return window.localStorage.setItem("setting",JSON.stringify(a)),{setting:a}}))}}})),Ut=e=>{let{isTainted:t,isInitializing:a,drawCanvasRef:o,exportRef:n,onExport:l,onDownloadError:i,onDownloadComplete:s}=e;const{card:c}=Xt(),d=Vt((e=>e.setting.resolution)),{opacity:u,name:p,isPendulum:m}=c,b=Object(r.useRef)(!1),f=Object(r.useCallback)((function(){var e;let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;const r=o.current,n=null===r||void 0===r?void 0:r.cloneNode(),l=null===r||void 0===r?void 0:r.getContext("2d"),c=null===n||void 0===n?void 0:n.getContext("2d");if(r&&l&&n&&c&&!t)try{a&&(n.width=a[0],n.height=a[1]),c.drawImage(r,0,0,r.width,r.height,0,0,n.width,n.height);const e=bt(p);var u=document.createElement("a");u.download=e?`${e}.png`:"card.png",u.href=n.toDataURL("image/png"),u.click()}catch(m){i()}null===(e=document.querySelector("#export-canvas-guard"))||void 0===e||e.classList.remove("guard-on"),s()}),[o,t,p,d,s,i]);return Object(r.useEffect)((()=>{let e=!0;return setTimeout((()=>{const t=bt(p);e&&(document.title=t?`${t} - Yu-Gi-Oh Carder`:"Yu-Gi-Oh Carder")}),500),()=>{e=!1}}),[p]),Object(r.useEffect)((()=>{let e=!0,t=e=>(e.preventDefault(),"Leave right now may make you lose unsaved progress, proceed?");var r;!1===a&&(localStorage.setItem("card-data",JSON.stringify(c)),localStorage.setItem("card-version",null!==(r="2.0.11")?r:"unknown"),(async()=>{var a,r,i;if(o.current&&(window.addEventListener("beforeunload",t),null===(a=document.getElementById("export-canvas"))||void 0===a||a.classList.remove("js-export-available"),null===(r=document.getElementById("export-canvas-guard"))||void 0===r||r.setAttribute("style",""),null===(i=document.getElementById("save-button-waiting"))||void 0===i||i.setAttribute("style","display: block"),n.current.pipelineRunning=!0,await n.current.currentPipeline,e&&(n.current.currentPipeline=l({isPendulum:m,opacity:u,isRelevant:()=>e}),await n.current.currentPipeline,e))){var s,d,p;const e=ct(c);"string"===typeof e&&function(e,t){if(window.history.pushState){let a=new URLSearchParams(window.location.search);a.set(e,t);let r=window.location.protocol+"//"+window.location.host+window.location.pathname+"?"+a.toString();window.history.pushState({path:r},"",r)}}("data",e),null===(s=document.getElementById("export-canvas"))||void 0===s||s.classList.add("js-export-available"),null===(d=document.getElementById("export-canvas-guard"))||void 0===d||d.setAttribute("style","display: none"),null===(p=document.getElementById("save-button-waiting"))||void 0===p||p.setAttribute("style","display: none"),window.removeEventListener("beforeunload",t),n.current.pipelineRunning=!1,b.current&&(b.current=!1,f())}})());return()=>{window.removeEventListener("beforeunload",t),e=!1}})),{onSave:e=>{var t;null===(t=document.querySelector("#export-canvas-guard"))||void 0===t||t.classList.add("guard-on");const a=e?[...e]:void 0;setTimeout((()=>{!1===n.current.pipelineRunning?f(a):b.current=!0}),200)}}},{height:qt,width:Jt}=i,_t=()=>"#000000".replace(/0/g,(()=>(~~(12*Math.random()+2)).toString(16))),Zt=e=>{let{ctx:t,color:a=_t(),width:r,offset:o=4,edge:n,baseline:l,xRatio:i}=e;const s=t.fillStyle;t.fillStyle=a,t.beginPath(),t.rect(n/i,l+1+Math.random()*o,r/i,2),t.fillStyle=s},Qt=(e,t,a,r,o,n)=>{if(!e||!t)return r;const{stroke:l=!1}=null!==n&&void 0!==n?n:{};e.textAlign="left";const i=t.split("");let s=r;return i.forEach((t=>{e.fillText(t,s,o),l&&e.strokeText(t,s,o),s+=e.measureText(t).width*(2+a)/2})),s},ea=(e,t,a,r,o,n)=>{if(!e||!t)return r;const{stroke:l=!1}=null!==n&&void 0!==n?n:{};e.textAlign="right";const i=t.split("");let s=r;return i.forEach(((t,r)=>{const n=i[i.length-r-1];e.fillText(n,s,o),l&&e.strokeText(n,s,o),s-=e.measureText(n).width*(2+a)/2})),s},ta=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jt,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qt;return!!e&&(e.clearRect(0,0,t,a),!0)},aa=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L;return async(a,r,o)=>{if(!a||!Array.isArray(e)||e.length<=0)return Promise.resolve();for(const l of e){const e=t[l];if(o&&t[l]){var n;const{partInstructionMap:t}=e,i=r&&null!==(n=t[r])&&void 0!==n?n:[];if(i.length)for(const{blendMode:e="source-over",opacity:r=1}of i)a.globalCompositeOperation=e,a.globalAlpha=r,await o(l);else await o(l);a.globalAlpha=1,a.globalCompositeOperation="source-over"}}a.globalAlpha=1,a.globalCompositeOperation="source-over"}},ra=0,oa=0,na=0,la="#000000",ia="#000000",sa=e=>{let{ctx:t,x:a=ra,y:r=oa,blur:o=na,color:n=ia,shadowColor:l=la}=e;return t.shadowOffsetX=a,t.shadowOffsetY=r,t.shadowBlur=o,t.shadowColor=l,t.fillStyle=n,()=>{t.shadowOffsetX=ra,t.shadowOffsetY=oa,t.shadowBlur=na,t.shadowColor=la,t.fillStyle=ia}},ca={},da=async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return await async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return new Promise(e&&""!==t?o=>{var n;if(!0===(null===(n=ca[t])||void 0===n?void 0:n.ready)){const n=ca[t].image,l="number"===typeof a?a:a(n),i="number"===typeof r?r:r(n);e.drawImage(n,l,i),o(!0)}else{var l;if(null!==(l=ca[t])&&void 0!==l&&l.error)return void o(!0);const n=ca[t]&&(ca[t].cache||ca[t].ready),i=n?ca[t].image:new Image;n||(i.src="/ygocarder"+t),i.addEventListener("load",(()=>{const n="number"===typeof a?a:a(i),l="number"===typeof r?r:r(i);e.drawImage(i,n,l),ca[t].ready=!0,ca[t].error=!1,o(!0)}),{once:!0}),i.addEventListener("error",(()=>{ca[t].error=!0,o(!1)}),{once:!0}),n||(ca[t]={image:i,ready:!1,error:!1,cache:!0})}}:e=>e(!1))}(e,"/asset/image/"+t,a,r)},ua=async(e,t,a,r,o,n)=>await(async(e,t,a,r,o,n)=>new Promise(e&&""!==t?l=>{var i;if(!0===(null===(i=ca[t])||void 0===i?void 0:i.ready)){const i=ca[t].image,s="number"===typeof a?a:a(i),c="number"===typeof r?r:r(i),d="number"===typeof o?o:o(i),u="number"===typeof n?n:n(i);e.drawImage(i,s,c,d,u),l(!0)}else{var s;if(null!==(s=ca[t])&&void 0!==s&&s.error)return void l(!0);const i=ca[t]&&(ca[t].cache||ca[t].ready),c=i?ca[t].image:new Image;i||(c.src="/ygocarder"+t),c.addEventListener("load",(()=>{const i="number"===typeof a?a:a(c),s="number"===typeof r?r:r(c),d="number"===typeof o?o:o(c),u="number"===typeof n?n:n(c);e.drawImage(c,i,s,d,u),ca[t].ready=!0,ca[t].error=!1,l(!0)}),{once:!0}),c.addEventListener("error",(()=>{ca[t].error=!0,l(!1)}),{once:!0}),i||(ca[t]={image:c,ready:!1,error:!1,cache:!0})}}:e=>e(!1)))(e,"/asset/image/"+t,a,r,o,n),pa=e=>{var t,a;let{ctx:r,letter:o,isLastOfLine:n=!1,debug:l,fontStyle:i,xRatio:s,metricMethod:c="standard"}=e;if(fe.test(o))return{width:0,boundWidth:0};const d="tcg"===i?We:Ae,u="tcg"===i?Be:Ee,p="tcg"===i?$e:Ie,m=r.measureText(o),{width:b,actualBoundingBoxLeft:f,actualBoundingBoxRight:h}=m,g=f+h;let y=1;"name"===c&&(y=1+8*(1-s));const v="name"===c||"compact"===c||"furigana"===c?.046875:0;let x=g,j=null!==(t=n?p[o]:u[o])&&void 0!==t?t:0;if("tcg"===i){var w;return{width:b,actualBoundWidth:g,boundWidth:b+2*((null!==(w=d[o])&&void 0!==w?w:0)*b),metric:m,offsetRatio:j}}let O=(null!==(a=d[o])&&void 0!==a?a:0)*b+("furigana"===c?0:Math.min(.075*b,Math.max(.45,b*v)*y)),F=1;Se.test(o)?(x="furigana"===c?g:g*("creator"===c?1.75:2.5),F=.6):Te.test(o)?(x="furigana"===c?g:Math.max(g,.75*b),O=2):xe.test(o)?x="furigana"===c?g:Math.max(g,.7*b):Oe.test(o)?x=b:Ne.test(o)?x=2*g:Le.test(o)?x=1.25*g*(n?.5:1):ke.test(o)?x="furigana"===c?g:Math.max(g,.75*b):Ce.test(o)?x=Math.max(g,.69*b)*("creator"===c?.975:1):Re.test(o)?(x=b,O=0):x="furigana"===c?g:Math.max(g,.75*b),O="furigana"===c?0:O;const k=1*b*1;return l&&console.info(`getLetterWidth ${l}`,o,m,1,1,"|",k),{width:b,actualBoundWidth:g,boundWidth:"standard"===c?b*F:x+2*O,metric:m,offsetRatio:j}},ma=e=>{let{ctx:t,baseline:a,edge:r,letter:o,xRatio:n,deviation:l={},letterMetric:i,textDrawer:s}=e;const{boundWidth:c,metric:d=t.measureText(o),offsetRatio:u=0}=null!==i&&void 0!==i?i:{},{yOffset:p=I.yOffset,yRatio:m=I.yRatio}=n<1?{}:l,b=d.width*n,f=c?c*n:b,h=null!==s&&void 0!==s?s:e=>{let{ctx:t,letter:a,scaledBaseline:r,scaledEdge:o}=e;t.fillText(a,o,r)},g=(b-f)/2,y=f*u;t.scale(1,m),h({ctx:t,letter:o,scaledEdge:r/n-g-y,scaledBaseline:(a+p)/m}),t.scale(1,1/m)},ba=function(e){const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?new RegExp(`([${ze}])|(${ie}[\\w\\W]+?${se})|(.+?)`):new RegExp(`([${ze}])|${ie}([\\w\\W]+?)${se}|(.+?)`);return e.split(t).filter((e=>null!=e&&""!==e))},fa=(e,t,a,r)=>{const{fontSize:o,headTextFontRatio:n=E.headTextFontRatio}=a,{font:l,ordinalFont:i,symbolFont:s,symbolFontRatio:c,numberFont:d=l,numberFontRatio:u=1,furiganaFont:p}=t;let m=r.getFontInfo();let b=r.getFontInfo();let f=r.getFontInfo();let h=r.getFontInfo();let g=r.getFontInfo();return{applyNumberFont:()=>{m=r.getFontInfo(),e.font=r.setFamily(d).setSize(o*u).getFont()},stopApplyNumberFont:()=>{e.font=r.setFamily(m.family).setSize(m.size).getFont()},applyLargerText:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;g=r.getFontInfo(),e.font=r.setSize(o*t).getFont()},stopApplyLargerText:()=>{e.font=r.setSize(g.size).getFont()},applySymbolFont:()=>{b=r.getFontInfo(),e.font=r.setFamily(s).setSize(o*c).getFont()},stopApplySymbolFont:()=>{e.font=r.setFamily(b.family).setSize(b.size).getFont()},applyOrdinalFont:()=>{f=r.getFontInfo(),e.font=r.setFamily(i).setSize(o/1.1).getFont()},stopApplyOrdinalFont:()=>{e.font=r.setFamily(f.family).setSize(f.size).getFont()},applyFuriganaFont:function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];h=r.getFontInfo(),e.font=r.setFamily(p).setWeight(t?"bold":"").setSize(o*n).getFont()},stopApplyFuriganaFont:()=>{e.font=r.setFamily(h.family).setWeight(h.weight).setSize(h.size).getFont()},applyAsymmetricScale:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;e.scale(t,a)},applyScale:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;e.scale(t,a)},resetScale:()=>{e.setTransform(1,0,0,1,0,0)},reverseScale:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;e.scale(1/t,1/t)}}},ha=(e,t,a,r,o)=>{const n=(r-o)/2;e.beginPath(),e.arc(t+n,a-n-1,n,0,2*Math.PI,!1),e.fill(),e.lineWidth=1,e.strokeStyle="#003300",e.stroke()},ga=e=>{let{footText:t,footTextWidth:a,headText:r,headTextLetterWidth:o,headTextGap:n,headTextSpacing:l,gapPadding:i,debug:s,fitFootText:c,sentenceXRatio:d,xRatio:u}=e;const p=0===r.length,m=o/a*d;let b=l,f=0;m<=.95?b=l:m<=1.175?b=l>=0?0:3*l:m<=1.56?b=l>=0?-1*l/4:3*l:(f=.66,b=l>=0?-1*l/4:2*l),(c||u>0&&u<1)&&(b=l);const h=o*(u&&!c?u:!f||c?1:f)+b*(r.length-1),g=p?0:(a-o)/r.length,y=a,v=1===t.length||2*i+h>a?"center":"space-around",x="center"===v?b:g,j="center"===v?2*i+h:y,w=c?Math.min(j,a):j,O="center"===v?(h-a)/2:0,F=Math.max(n,c?Math.min(O,0):O);return s&&console.info(`analyzeHeadText ${s}`,v,x,"|",r,w,j,t,a,F),{gapPadding:i,letterSpacing:x,trueHeadTextWidth:j,headTextWidth:w,alignment:v,halfGap:F,headTextXRatio:"center"===v?f:0}},ya=(e,t)=>e>=0?t>=0?0:-1*Math.max(-1*e,t):t>=0?-1*Math.max(e,-1*t):0,va=e=>{let{ctx:t,token:a,nextToken:r,xRatio:o,previousTokenGap:n=0,letterSpacing:l=E.letterSpacing,format:i,textData:s}=e;if(!t||!a)return{totalWidth:0,leftMostLetter:"",spaceCount:0,spaceAtEnd:!1,rightGap:0,leftGap:0};const{currentFont:c,fontData:d,fontLevel:u}=s,{metricMethod:p,headTextGapRatio:m=A.headTextGapRatio,headTextOverflow:b=A.headTextOverflow,fontStyle:f}=d,h=d.fontList[u],{bulletSymbolWidth:g,capitalLetterRatio:y,fontSize:v,iconSymbolWidth:x=g,largeSymbolRatio:j=E.largeSymbolRatio,headTextSpacing:w=E.headTextSpacing,squareBracketRatio:O,wordLetterSpacing:F}=h,k=-.5*v,{applyScale:C,reverseScale:S,applyLargerText:T,stopApplyLargerText:R,applyFuriganaFont:N,stopApplyFuriganaFont:L,applyOrdinalFont:M,stopApplyOrdinalFont:I,applySymbolFont:B,stopApplySymbolFont:$,applyNumberFont:W,stopApplyNumberFont:P}=fa(t,d,h,c),D=1+l/2;let z="",H=0,K=0,G=!1;const Y=void 0===r;let X=null!==n&&void 0!==n?n:0,V=!1,U=0;const q=a.replaceAll(new RegExp(be,"g"),"").split(le).filter((e=>null!=e&&""!==e));for(let E=0;E<q.length;E++){const e=0===E,a=q[E];if("\u29be"===a){X=0;H+=x/o*D,e&&(U=0,z=a[0])}else if("\u25cf"===a){X=0;H+=g/o*D,e&&(U=0,z=a[0])}else if(/[\xa9]/.test(a)){X=0,T(j);const r=t.measureText(a).width/o;R(),H+=r*D,e&&(U=0,z=a[0])}else if(/[\u2460-\u2473]/.test(a)){X=0,M();const r=t.measureText(a).width/o;I(),H+=r*D,K+=1,e&&(U=0,z=a[0])}else if(De.test(a)){const[n,c,d=""]=a.replaceAll(/{|}/g,"").split(/(\|+)/),u="||"===c,{totalWidth:p}=va({ctx:t,token:n,nextToken:r,xRatio:o,letterSpacing:l,previousTokenGap:0,format:i,textData:s});N();const h=d.split("").map((e=>pa({ctx:t,letter:e,fontStyle:f,metricMethod:"furigana",xRatio:1}).boundWidth)).reduce(((e,t)=>e+t),0);L();const{halfGap:g,headTextWidth:y}=ga({headText:d,headTextLetterWidth:h/o,footText:n,footTextWidth:p,headTextGap:k/o,headTextSpacing:w,gapPadding:m*v/o,fitFootText:u,sentenceXRatio:o,xRatio:"condense"===b&&n.length>1?Math.min(1,o+.1):0}),x=0===d.length?Math.max(k,p/He):g,j=x,O=x,F=Math.max(y,p),C=ya(X,j);X=O,H+=F-C,K+=1,e&&(V=!0,U=j,z=n[0])}else if(ne.test(a)){const r=F?1+F/2:D;t.letterSpacing=(r-1)*c.getFontInfo().sizeAsNumber+"px";let o=a,n=0;for(;""!==o;){let e=o[0],a=o.slice(1),r=t.measureText(o).width-t.measureText(a).width;re.test(e)?(C(O),r=t.measureText(o).width-t.measureText(a).width,S(O)):ae.test(e)?(C(y),r=t.measureText(o).width-t.measureText(a).width,S(y)):Fe.test(e)?(W(),r=t.measureText(o).width-t.measureText(a).width,P()):ge.test(e)&&"tcg"===f?(B(),r=t.measureText(o).width-t.measureText(a).width,$()):r=t.measureText(o).width-t.measureText(a).width,n+=r,o=a}const l=Math.max(k,n/He),i=l;H+=n-ya(X,l),X=i,e&&(U=l,z=a[0]),t.letterSpacing="0px"}else if(ge.test(a)&&"tcg"===f){B();const r=t.measureText(a).width*D;$();const o=Math.max(k,r/He),n=o;H+=r-ya(X,o),X=n,e&&(U=o,z=a[0])}else{const{boundWidth:r}=pa({ctx:t,letter:a,isLastOfLine:Y,fontStyle:f,metricMethod:p,xRatio:o}),n=r*D,l=Math.max(k,n/He),s=l;H+=n-ya(X,l),X=s,("ocg"===i||"tcg"===i&&/\s+/.test(a))&&!1===Re.test(a)&&(K+=1,E===q.length-1&&(G=!0)),e&&(U=l,z=a[0]),Me.test(a)&&(U=0,X=0)}}return{totalWidth:H,spaceCount:K,spaceAtEnd:G,leftMostLetter:z,rightGap:X,leftGap:U,offsetable:V}},xa=e=>{let{ctx:t,line:a,width:r,xRatio:o,format:n,isLast:l,textData:i}=e;const s=ba(a);let c=0,d=0,u=0;for(let m=0,b=o;m<s.length;m++){const e=s[m],a=s[m+1];if(e===ue){b=1;continue}if(e===pe){b=o;continue}const{spaceCount:r,totalWidth:l,spaceAtEnd:p,leftGap:f,rightGap:h,leftMostLetter:g}=va({ctx:t,token:e,nextToken:a,xRatio:b,previousTokenGap:u/b,textData:i,format:n});u=h*b,c+=l*b+((0===m&&f>0?-1*Math.min(20,f*b):0)+(0===m&&we.test(g)?4*b:0)),d+=r-(p&&void 0===a?1:0)}const p=d>0?(r-c)/d:0;return{tokenList:s,spaceWidth:l?"tcg"===n?p>1.5?0:p:p>3.65?0:p:p}},ja=e=>{let{ctx:t,median:a,paragraphList:r,additionalLineCount:o=0,width:n,format:l,textData:i}=e;const{fontData:s,fontLevel:c}=i,{letterSpacing:d}=s.fontList[c],u=[],p=r.reduce(((e,r)=>{const o=(a<=100?100:a)/1e3,s=n/o,c=ba(r,!0);let p=1,m=[],b=0,f=0,h=0;for(let n=0,y=o;n<c.length;n++){const e=c[n],r=c[n+1];e===ue?(h+=1,y=1):e===pe&&(h-=1,y=o);let{leftMostLetter:g,totalWidth:v,rightGap:x,leftGap:j}=va({ctx:t,token:e,nextToken:r,xRatio:y,previousTokenGap:f,format:l,letterSpacing:d,textData:i});let w=v/(h>0?o:1)+(0===n?(j>0?-1*Math.min(20/y,j):0)+(we.test(g)?4:0):0);if(b+w>s){let o=m.join("").trim();h>0&&(o+=pe),h<0&&(o=ue+o),h=0,u.push({line:o,effectiveMedian:a,isLast:!1,actualLineWidth:b});let{totalWidth:n,rightGap:s,leftGap:c}=va({ctx:t,token:e,nextToken:r,xRatio:y,previousTokenGap:0,format:l,textData:i});b=n+((c>0?-1*Math.min(20/y,c):0)+(we.test(g)?4:0)),f=s,m=[e],p+=1}else b+=w,f=x,m.push(e)}let g=m.join("").trim();return h>0&&(g+=pe),h<0&&(g=ue+g),h=0,u.push({line:g,effectiveMedian:a,isLast:!0,actualLineWidth:b}),e+p}),0)+(null!==o&&void 0!==o?o:0);return{currentLineList:u,currentLineCount:p}},wa=e=>{let{ctx:t,fontSize:a,edge:r,baseline:o,headText:n,headTextLetterWidth:l,footText:i,footTextWidth:s,headTextGap:c,headTextSpacing:d,headTextHeightRatio:u,headTextBold:p,headTextGapRatio:m,xRatio:b,fontStyle:f,textWorker:h,fitFootText:g,headTextOverflow:y}=e;const{applyFuriganaFont:v,stopApplyFuriganaFont:x,resetScale:j,applyScale:w}=h,O="condense"===y&&i.length>1?Math.min(1,b+.1):0,{gapPadding:F,letterSpacing:k,trueHeadTextWidth:C,halfGap:S,alignment:T,headTextXRatio:R}=ga({headText:n,headTextLetterWidth:l,footText:i,footTextWidth:s*b,headTextGap:c,headTextSpacing:d*b,gapPadding:a*m,fitFootText:g,sentenceXRatio:b,xRatio:O}),N=C>s*b;if(0===n.length)return{trueHeadTextWidth:C,halfGap:S};const L=g?Math.min(1,s*b/C):1,M=g?L:O&&"center"===T?O:R;let E=r;j(),(g||M)&&(w(M,1),E=r/M),"center"===T?(E+=F,N?M>L&&(E+=(s*b/M-C)/2/M):E+=(s*b-C)/2):E+=k/2;for(const I of n){v();const{width:e,boundWidth:r}=pa({ctx:t,letter:I,fontStyle:f,metricMethod:"furigana",xRatio:1}),n=(e-r)/2;x(),v(p),t.fillText(I,E-n,o-a*u),x(),E+=r+k}return(g||M)&&j(),w(b,1),{trueHeadTextWidth:C,halfGap:S}},Oa=e=>{let{ctx:t,tokenList:a,trueEdge:r,trueBaseline:o,spaceWidth:n=0,xRatio:l,yRatio:i=1,textData:s,format:c,textDrawer:d,debug:u=!1}=e;const{currentFont:p,fontData:m,fontLevel:b}=s,f=m.fontList[b],{headTextFillStyle:h,headTextBold:g=A.headTextBold,headTextHeightRatio:y=A.headTextHeightRatio,headTextOverflow:v=A.headTextOverflow,headTextGapRatio:x=A.headTextGapRatio,metricMethod:j,fontStyle:w,letterDeviationMap:O={}}=m,{letterSpacing:F=E.letterSpacing,wordLetterSpacing:k,capitalLetterRatio:C=E.capitalLetterRatio,squareBracketRatio:S=E.squareBracketRatio,fontSize:T,bulletSymbolWidth:R,iconSymbolWidth:N=R,largeSymbolRatio:L=E.largeSymbolRatio,headTextSpacing:M=E.headTextSpacing}=f,I=fa(t,m,f,p),{stopApplyFuriganaFont:B,applyFuriganaFont:$,stopApplyLargerText:W,applyLargerText:P,stopApplyNumberFont:D,applyNumberFont:z,stopApplyOrdinalFont:H,applyOrdinalFont:K,applyScale:G,reverseScale:Y,applySymbolFont:X,stopApplySymbolFont:V,applyAsymmetricScale:U,resetScale:q}=I,J=1+F/2,_=o/i;let Z=0,Q=[],ee=0,te=r;for(let E=0,A=l;E<a.length;E++){const e=a[E];if(e===ue){A=1,t.setTransform(1,0,0,1,0,0);continue}if(e===pe){A=l,t.scale(A,1);continue}const r=-.5*A,m=T*r,b=a[E+1],f=a[E+2],se={ctx:t,xRatio:A,letterSpacing:F,format:c,textData:s},ce={ctx:t,baseline:_,xRatio:A,textDrawer:d},de=e.split(le).filter((e=>null!=e&&""!==e)),{leftMostLetter:me,leftGap:be,rightGap:fe,totalWidth:he,spaceCount:ye}=va({token:e,nextToken:b,previousTokenGap:Z/A,...se}),ve=0===E?(be>0?-1*Math.min(20,be*A):0)+(we.test(me)?4:0):0;let xe=te+ve,je=Z;for(let a=0;a<de.length;a++){var oe,ie;const l=de[a],u=null!==(oe=de[a+1])&&void 0!==oe?oe:b,F=null!==(ie=de[E+2])&&void 0!==ie?ie:f;if(e===ue||e===pe);else if("\u29be"===l)Q.push({edge:xe,size:N,baseline:_}),xe+=N*J,je=0,ee=0;else if("\u25cf"===l)q(),ha(t,xe,o,R,Pe(c)),xe+=R*J,U(A,i),je=0,ee=0;else if(/[\xa9]/.test(l))q(),P(L),ma({...ce,letter:l,edge:xe*A,baseline:o+("tcg"===c?1:2)}),xe+=t.measureText(l).width*J,W(),U(A,i),je=0,ee=0;else if(/[\u2460-\u2473]/.test(l))q(),K(),ma({...ce,letter:l,edge:xe*A,baseline:o-2}),xe+=t.measureText(l).width*J,H(),U(A,i),xe+=n,je=0,ee=0;else if(De.test(l)){const[e,a,o=""]=l.replaceAll(/{|}/g,"").split(/(\|+)/),p="||"===a,{totalWidth:b}=va({token:e,nextToken:u,previousTokenGap:0,...se});$();const f=o.split("").map((e=>pa({ctx:t,letter:e,fontStyle:w,metricMethod:"furigana",xRatio:1}).boundWidth)).reduce(((e,t)=>e+t),0);B();const{headTextWidth:j,halfGap:O}=ga({headText:o,headTextLetterWidth:f,footText:e,footTextWidth:b*A,headTextGap:m,headTextSpacing:M*A,gapPadding:T*x,fitFootText:p,sentenceXRatio:A,xRatio:"condense"===v&&e.length>1?Math.min(1,A+.1):0}),k=0===o.length?Math.max(m,b*r):O,C=k,S=k,R=ya(je,S),N=S>0?S-R:0,{offsetable:L,leftGap:E}=va({token:u,nextToken:F,previousTokenGap:C/A,...se}),W=E*A,P=ya(C,W),D=N+(C>0?C-P:0);let z=0,H=0;D>0&&W>=-2&&L?(z=(D+2*Math.max(W,0))/3,H=Math.max(W,0)-z):z=N;const K=xe+(k<0?-R:ve?-ve:z)+ee;ee=H,Oa({ctx:t,format:c,textData:s,tokenList:ba(e),trueBaseline:_,trueEdge:K,xRatio:A,yRatio:i,spaceWidth:0,textDrawer:d,debug:!1});const G=t.fillStyle,Y=t.strokeStyle,X=t.shadowColor,V=t.shadowOffsetX,U=t.shadowOffsetY,q=t.shadowBlur;h&&(t.fillStyle=h,t.strokeStyle="",t.shadowColor="",t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0);wa({ctx:t,fontSize:T,edge:xe-R,baseline:_,headText:o,headTextLetterWidth:f,footText:e,footTextWidth:b,headTextGap:m,headTextSpacing:M,headTextHeightRatio:y,headTextBold:g,headTextGapRatio:x,xRatio:A,fontStyle:w,textWorker:I,fitFootText:p,headTextOverflow:v}),t.fillStyle=G,t.strokeStyle=Y,t.shadowColor=X,t.shadowOffsetX=V,t.shadowOffsetY=U,t.shadowBlur=q,xe+=Math.max(b*A,j)-R+n,je=C}else if(ne.test(l)){const e=k?1+k/2:J;t.letterSpacing=(e-1)*p.getFontInfo().sizeAsNumber+"px";const a=t.measureText(l).width*A,o=Math.max(m,a*r),n=o;xe-=ya(je,o);let i=l,s=xe;for(;""!==i;){let e=i[0],a=i.slice(1),r=0;const o={...ce,deviation:O[e],letter:e,edge:s};if(re.test(e))G(S),r=t.measureText(i).width-t.measureText(a).width,ma({...o,edge:s/S,baseline:_/S}),Y(S);else if(ae.test(e)){G(C),r=t.measureText(i).width-t.measureText(a).width;const n=r>t.measureText(e).width*C?Math.round(r*(1-C))/2:0;ma({...o,edge:s/C+n,baseline:_/C}),Y(C)}else Fe.test(e)?(z(),r=t.measureText(i).width-t.measureText(a).width,ma(o),D()):ge.test(e)&&"tcg"===w?(X(),r=t.measureText(i).width-t.measureText(a).width,ma(o),V()):(r=t.measureText(i).width-t.measureText(a).width,ma(o));s+=r*A,i=a}xe=s,je=n,ee=0,t.letterSpacing="0px"}else if(ge.test(l)&&"tcg"===w){const e=l;X();const a=t.measureText(e).width*J*A,o=Math.max(m,a*r),n=o;xe-=ya(je,o),ma({...ce,letter:e,edge:xe}),xe+=a,V(),je=n,ee=0}else{const e=l,a=pa({ctx:t,letter:e,fontStyle:w,metricMethod:j,isLastOfLine:void 0===u,xRatio:A}),o=a.boundWidth*J*A,i=Math.max(m,o*r),s=i;xe-=ya(je,i),ma({...ce,letter:e,edge:xe,deviation:O[e],letterMetric:a}),xe+=o,("ocg"===c||"tcg"===c&&/\s+/.test(e))&&!0!==Re.test(e)&&(xe+=n),Me.test(e)||(je=s),ee=0}}Z=fe*A,u&&Zt({ctx:t,baseline:_,edge:te,width:he*A,xRatio:A}),te+=he*A+ye*n+ve}return{tokenEdge:te,iconPositionList:Q}},Fa=(e,t,a)=>{const{multiline:r=!0,furiganaHelper:o=!0,dictionaryType:n="rubyForm"}=null!==a&&void 0!==a?a:{},l=null!==e&&void 0!==e?e:"";let i="",s="ocg"===t?U:q;for(const f of l){var c;i+=null!==(c=s[f])&&void 0!==c?c:f}const d=i,u=(r?d.replace(/^\[([\w\W]*?)\](?=(\n|$))/gm,`${ce}$1${de}`):d).replace(/(^|[-\u2014\s(["])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/[(\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/--/g,"\u2014").replace(/\u25cf /g,"\u25cf").replace(/(\([\uff10-\uff190-9]{1,2}\))/g,(e=>{const t=J[e];return null!==t&&void 0!==t?t:e})).replaceAll(new RegExp("{{([^{}]+?)}}","g"),(e=>e.replaceAll("{{",ue).replaceAll("}}",pe))).replaceAll(new RegExp("{[^{}]+?}","g"),(e=>`${ie}${e}${se}`)),p=("tcg"===t||!1===o?u:u.replaceAll(new RegExp(ye,"g"),(e=>{var t;const a=null!==(t=T[e][n])&&void 0!==t?t:T[e].rubyForm;return`${ie}${a}${se}`}))).replaceAll(new RegExp(oe,"g"),(e=>`${ie}${e}${se}`)).replaceAll(new RegExp("[(\\[\uff5b\u3014\u3008\u300a\u300c\uff62\u300e\u3010\u3018\u3016\u301d'\"\u2018\u201c\uff5f\xab\u25cf]+.","g"),(e=>`${ie}${e}${se}`)).replaceAll(new RegExp(je,"g"),(e=>`${ie}${e}${se}`)).replaceAll(new RegExp(".[\u2014...\u2025\u3033\u3034\u3035)]+[^\\s]","g"),(e=>`${ie}${e}${se}`)).replaceAll(new RegExp("[\u2460-\u2473]\uff1a.","g"),(e=>`${ie}${e}${se}`));let m=[],b=0;for(const f of p)f===ie?(0===b&&m.push(f),b+=1):f===se?(b-=1,0===b&&m.push(f)):m.push(f);return m.join("").replaceAll(`${de}${se}`,`${se}${de}`).replaceAll(`${ie}${ce}`,`${ce}${ie}`).replaceAll(`${ue}${se}`,`${se}${ue}`).replaceAll(`${ie}${pe}`,`${pe}${ie}`).replaceAll(`${ce}${de}`,"").replaceAll(`${ie}${se}`,"")},ka=e=>{let{format:t,isNormal:a,statInEffect:r,typeInEffect:o}=e;const n=[t,o?"type":"",r?"stat":""].filter((e=>""!==e)).join("-"),l=[t,o?"type":"",r?"stat":""].filter((e=>""!==e)).join("-");let i=D[l];return r&&o&&a&&"tcg"===t&&(i=W,i.fontList=z),{fontData:i,sizeList:O[n]}},{width:Ca}=i,Sa=e=>{var t,a;let{ctx:r,content:o,isNormal:n=!1,fontData:l=D.tcg,textStyle:i,sizeList:s=O["tcg-type"],condenseTolerant:c="strict",format:d,furiganaHelper:u}=e,p=0;if(!r||!o)return p;const m=Fa(o.trim(),d,{furiganaHelper:u}),b="tcg"===d?null!==(t=K[c])&&void 0!==t?t:K.strict:{1:800,2:800,3:800},{effectText:f,effectFlavorCondition:h,fullLineList:g}=function(e){var t;let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e,o=[];const n=new RegExp(`^(${ce}([^${de}]*)${de}\\s*)`);let l,i;do{var s,c;l=null===(s=n.exec(r))||void 0===s?void 0:s[1],i=null===(c=n.exec(r))||void 0===c?void 0:c[2],i&&l&&(o.push(i),r=r.replace(l,""))}while(l&&i);let d="";const u=null===(t=new RegExp(he,"m").exec(e))||void 0===t?void 0:t[1];return u&&a?(d=u,r=r.replace(u,"")):d="",{fullLineList:o,effectText:r,effectFlavorCondition:d}}(m,n),y=(null!==(a=g.length)&&void 0!==a?a:0)+(h.length>0?1:0),v=f?f.split("\n"):[],{font:x,fontList:j}=l;for(;p<j.length;){var w,F;const e=j[p],{fontSize:t,lineHeight:a,lineCount:o}=e,{trueEdge:c,trueWidth:u,trueBaseline:m}=null!==(w=s[p])&&void 0!==w?w:s[s.length-1],f=n&&"tcg"===d?u-2:u,O=tt();r.font=O.setStyle(n&&"tcg"===d?"italic":"").setWeight("").setSize(t).setFamily(x).getFont(),r.textAlign="left";const k={fontData:l,fontLevel:p,currentFont:O};let C=[];const S=et((e=>{const{currentLineList:t,currentLineCount:a}=ja({ctx:r,median:e,paragraphList:v,additionalLineCount:y,format:d,textData:k,width:f});return C=t,!(a>o)}),200),T=sa({ctx:r,...i});if(!(S<(null!==(F=b[`${v.length}`])&&void 0!==F?F:b[3])&&p<j.length-1)){r.clearRect(0,0,Ca,1111);let e=m+a;if([...g.map((e=>({line:e,isLast:!0,effectiveMedian:et((t=>{const{currentLineCount:a}=ja({ctx:r,median:t,paragraphList:[e],format:d,textData:k,width:f});return!(a>1)}))}))),...C].forEach((t=>{let{line:o,isLast:n,effectiveMedian:l}=t;const i=l/1e3,{tokenList:s,spaceWidth:u}=xa({ctx:r,line:o,xRatio:i,format:d,isLast:n,textData:k,width:f});r.scale(i,1),Oa({ctx:r,tokenList:s,xRatio:i,yRatio:1,trueEdge:c,trueBaseline:e,spaceWidth:u,textData:k,format:d}),e+=a,r.setTransform(1,0,0,1,0,0)})),h.length>0){const t=et((e=>{const{currentLineCount:t}=ja({ctx:r,median:e,paragraphList:[h],format:d,textData:k,width:f});return!(t>1)}))/1e3;r.scale(t,1),r.font=O.setStyle("").getFont();let o=ba(h);o="\n"===o[0]?o.slice(1):o,Oa({ctx:r,tokenList:o,xRatio:t,yRatio:1,trueEdge:c,trueBaseline:e,textData:k,format:d}),e+=a,r.setTransform(1,0,0,1,0,0)}break}p+=1,T()}return p},{width:Ta}=i,{topToPendulumStructure:Ra,pendulumStructureHeight:Na,leftToPendulumStructure:La}=i,Ma=e=>{let{canvas:t,artworkCanvas:a,backgroundCanvas:r,format:o,hasBackground:n,frame:l,bottomFrame:i,backgroundType:s,cardIcon:c,attribute:d,star:p,foil:m,pendulumSize:f,opacity:h,isLink:g,isSpeedSkill:y,isXyz:v,isPendulum:x,loopFinish:j,loopArtFinish:w}=e;const O=t.getContext("2d"),{artBorder:F,nameBorder:k,body:C,name:S,pendulum:T,text:R,boundless:N}=h,{artX:L,artY:M,artFinishX:E,artFinishY:I,artWidth:A}=u(x,h),B=C>0||F,$=860,W="normal"!==m,P=v||y?l:"normal",D=P,z=!N&&B,H={calculateCardArtRedrawCoordination(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0;const o=null!==t&&void 0!==t?t:h,{body:n}=o,{artX:l,artY:i,artWidth:s}=u(x,o,r),{width:c,height:d}=e,p=s/c,m=n<100?(La-l)/p:0,b=m*p,f=n<100?(Ra-i)/p:0,g=f*p,y=n<100?d-Na/p:0;return{imageScaledRatio:p,sourceOffsetX:m,sourceOffsetY:f,destinationOffsetX:b,destinationOffsetY:g,offsetHeight:y,destinationX:l+b,destinationY:i+g,destinationWidth:s-2*b,destinationHeight:s/(c/d)*a-y*p}},drawFrame:async()=>{O&&(O.globalAlpha=C/100,await da(O,`frame/frame-${l}.png`,0,0),await da(O,`frame-pendulum/frame-pendulum-${i}.png`,0,0),O.globalAlpha=1)},drawCardArt:()=>{if(!a||!O)return;const{width:e,height:t}=a;t<=0||O.drawImage(a,0,0,e,t,L,M,A,A/(e/t))},drawBackground:e=>{if(!r||!O||!n)return;const{width:t,height:a}=r;if(a<=0)return;if("pendulum"===e){let e=H.calculateCardArtRedrawCoordination(r);"full"===s?e=H.calculateCardArtRedrawCoordination(r,{...h,body:0},void 0,"full"):"fit"===s&&(e=H.calculateCardArtRedrawCoordination(r,h,void 0,"fit"));const{sourceOffsetX:o,sourceOffsetY:n,offsetHeight:l,destinationX:i,destinationY:c,destinationWidth:d,destinationHeight:u}=e;return void O.drawImage(r,o,n,t-2*o,a-l,i,c,d,u)}const{artX:o,artY:l,artWidth:i}=u(x,{...h,boundless:!0},s);O.drawImage(r,0,0,t,a,o,l,i,i/(t/a))},drawAttribute:async()=>{await da(O,`attribute/attr-${o}-${d.toLowerCase()}.png`,678,55)},drawStar:async e=>{let{style:t,starAlignment:a}=e;const r="auto"===c?(e=>"spell"===e||"trap"===e?"st":"xyz"===e?"rank":"dark-synchro"===e?"negative-level":"speed-skill"===e?"none":"level")(l):c;await(async e=>{let{ctx:t,cardIcon:a,text:r,star:o,starAlignment:n="auto",style:l,onStarDraw:i}=e,s="string"===typeof o?""===o?0:1:"number"===typeof o?o:0,c=50*s+4*(s-1),d="right";["rank","negative-level"].includes(a)&&(d="left"),d="auto"===n?d:n,s>12&&(d="center"),r&&"center"===d&&(s=0,c=0);const u="center"===d?(Ta+c)/2:"left"===d?85.9125+c:728.775;let p=-54;if(t&&r&&"st"!==a){const e=50,a=sa({ctx:t,...l});t.textAlign="left"===d||"right"===d?d:"left",t.font=`bold ${e}px RoGSanSrfStd-Bd`;const o="center"===d?t.measureText(r).width/-2:"left"===d?4:-58;t.fillText(r,u+o,145+.9*e),t.textAlign="left",a()}return await Promise.all([...Array(s)].map((async()=>{p+=54;let e=[u-(50+p),145];return await da(t,`subfamily/subfamily-${a}.png`,...e),await i(e)})))})({ctx:O,cardIcon:r,text:"string"===typeof p?p:null,star:p,starAlignment:a,style:t,onStarDraw:async e=>"st"===r?Promise.resolve():await j(O,"star",(async t=>da(O,`finish/finish-${t}-star.png`,...e)))})},drawPendulumScaleIcon:async()=>{await da(O,`frame-pendulum/pendulum-scale-${f}.png`,0,750)},drawLinkArrowMap:async e=>{await Promise.all([1,2,3,4,6,7,8,9].map((async t=>{const{left:a,top:r,height:o,width:n}=te[t-1],l=e.includes(`${t}`),i=`link/link-inactive-${t}`,s=`link/link-active-${t}`,c=[a,r,n,o];return await ua(O,`${i}-base${N?"-full":""}.png`,...c),await ua(O,`${i}-core.png`,...c),l?(await ua(O,`${s}-base.png`,...c),ua(O,`${s}-core.png`,...c)):void 0})))},drawStatBorder:async e=>{const a=gt(e),r=document.createElement("canvas"),o=813,n=20;r.width=o,r.height=n;const l=r.getContext("2d",{willReadFrequently:!0});if(!l||!O)return;await da(l,"frame/frame-stat-border.png",0,0);const i=l.getImageData(0,0,o,n).data;l.clearRect(0,0,o,n),l.drawImage(t,0,1070,o,n,0,0,o,n);const s=l.getImageData(0,0,o,n),c=s.data;for(let t=0;t<c.length;t+=4)i[t+3]>0&&(c[t+0]=a[0]*(1-i[t+0]/255),c[t+1]=a[1]*(1-i[t+1]/255),c[t+2]=a[2]*(1-i[t+2]/255),c[t+3]=a[3]*(i[t+3]/255));O.putImageData(s,0,1070)},drawNameBackground:async()=>{O&&(O.globalAlpha=S/100,await da(O,`background/background-name-${l}.png`,0,0),O.globalAlpha=1)},drawEffectBackground:async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];O&&(O.globalAlpha=R/100,await da(O,`background/background-text-${i}.png`,54,884),e&&(O.globalAlpha=T/100,await da(O,`background/background-pendulum-${i}.png`,55,738)),O.globalAlpha=1)},drawFrameBorder:async()=>da(O,`frame/frame-border-${P}.png`,0,0),drawNameBorder:async()=>k?da(O,`frame/name-border-${D}.png`,0,0):Promise.resolve(),drawArtBorder:async()=>{if(B){let e="";e=v||y?`frame/art-border-${l}.png`:g||["zarc","hamon","uria","raviel"].includes(l)?"frame/art-border-special.png":"frame/art-border.png",await da(O,e,60,170)}},drawPendulumBorder:async(e,t)=>{await da(O,`frame-pendulum/border-pendulum-${f}-${t}`+(e?"":"-artless")+".png",30,185)},drawEffectBorder:async()=>{W||"speed-skill"!==i?await da(O,"frame/effect-border.png",35,$):await da(O,"frame/effect-border-speed-skill.png",35,$)},drawCardBorder:async()=>{await da(O,`frame/card-border${W?`-${m}`:""}.png`,0,0)},drawArtBorderFoil:async()=>{B&&await da(O,`frame/art-border-${m}.png`,60,170)},drawEffectBorderFoil:async()=>{await da(O,`frame/effect-border-${m}.png`,35,$)},drawLinkMapFoil:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B;await da(O,`link/link-overlay-arrow-${m}${e?"":"-artless"}.png`,0,175)},drawNameFinish:async()=>{(B||k)&&await j(O,"name",(async e=>da(O,`finish/finish-${e}-name.png`,0,0)))},drawAttributeFinish:async()=>{d!==b&&await j(O,"attribute",(async e=>da(O,`finish/finish-${e}-attribute.png`,678,55)))},drawArtFinish:async()=>{z&&await w(O,"art",(async e=>await da(O,`finish/art-finish-${e}${x?`-pendulum-${f}`:""}.png`,E,I)))},drawArtOverlayFinish:async()=>{await j(O,"art-overlay",(async e=>da(O,`finish/finish-${e}-`+(z?"art":"unart")+"-overlay"+(x?`-pendulum-${f}`:"")+".png",E,I)))},drawArtBorderFinish:async()=>{B&&await j(O,"art-border",(async e=>da(O,`finish/finish-${e}-art-border.png`,0,0)))},drawPendulumArtBorderFinish:async()=>{B&&await j(O,"art-border-pendulum",(e=>da(O,`finish/finish-${e}-art-border-pendulum-${f}.png`,0,0)))},drawBorderPendulumFinish:async()=>{await j(O,"border-pendulum",(async e=>da(O,`finish/finish-${e}-border-pendulum-${f}.png`,0,0)))},drawFrameFinish:async()=>{await j(O,"frame",(async e=>da(O,`finish/finish-${e}-frame${x?`-pendulum-${f}`:""}.png`,0,0)))},drawFrameBackgroundFinish:async()=>{await j(O,"frame-background",(async e=>da(O,`finish/finish-${e}-frame-background${x?`-pendulum-${f}`:""}.png`,0,0)))},drawOverlayFinish:async()=>{await j(O,"overlay",(async e=>da(O,`finish/finish-${e}-overlay.png`,0,0)))},drawCardBorderFinish:async()=>{await j(O,"card-border",(async e=>da(O,`finish/finish-${e}-card-border.png`,0,0)))}};return H},Ea=async(e,t,a,r,o,n,l)=>{const{isSpeedSkill:i,format:s,cloneNode:c,frame:d,furiganaHelper:u}=l,p=null===c||void 0===c?void 0:c.getContext("2d");if(e&&p&&t){var m,b,f;const{font:l,fillStyle:h,headTextFillStyle:g,shadowBlur:y,hasShadow:v,shadowColor:x,shadowOffsetX:w,shadowOffsetY:O,hasOutline:F,lineColor:k,lineWidth:C,lineOffsetX:S,lineOffsetY:T,hasGradient:R,gradientAngle:N,gradientColor:L,pattern:M}={font:"Default",fillStyle:"#000000",headTextFillStyle:"#000000",shadowColor:"#000000",shadowOffsetY:0,shadowOffsetX:0,shadowBlur:0,hasShadow:!1,lineColor:"#000000",lineWidth:0,lineOffsetY:0,lineOffsetX:0,hasOutline:!1,gradientAngle:0,gradientColor:"0.000|#eef10b,0.5|#d78025,1.000|#7e20cf",hasGradient:!1,preset:"commonB",pattern:"none",...n},{patternImage:I,blendMode:A}=null!==(m=j[null!==M&&void 0!==M?M:""])&&void 0!==m?m:{},B=F;e.textAlign="left",v&&(e.shadowColor=x,e.shadowOffsetY=O,e.shadowOffsetX=w,e.shadowBlur=y),F&&(e.lineWidth=C,e.strokeStyle=k);const $={...(null!==(b=G[l])&&void 0!==b?b:G.Default).fontData,headTextFillStyle:g},W=tt({defaultFamily:$.font,defaultSize:$.fontList[0].fontSize,defaultWeight:$.weight}),P={fontLevel:0,fontData:$,currentFont:W},D=Fa(t,s,{multiline:!1,furiganaHelper:u,dictionaryType:"rubyFormName"}),z="ocg"===s?[D]:D.split(new RegExp("([^&A-Za-z0-9\\-/\\s\\(\\)!,.\u2018\u201c\u2019\u201d:;<>\\[\\]\\\\])","g")),H=tt({defaultFamily:$.font,defaultSize:$.fontList[0].fontSize,defaultWeight:$.weight}),K=H.getFont(),Y=H.setSize((e=>e*$.symbolFontRatio)).setStyle("small-caps").setFamily($.symbolFont).getFont();let X=0,V=0;z.forEach(((t,a)=>{e.font=a%2===0?K:Y;const r=e.measureText(t.replaceAll(me,""));X=Math.max(X,r.actualBoundingBoxAscent),V=Math.max(V,r.actualBoundingBoxDescent)}),0),e.font=K;let U=0;const q=et((t=>{const{currentLineCount:a,currentLineList:r}=ja({ctx:e,median:t,paragraphList:[D],format:s,textData:P,width:o});return!(a>1)&&(U=r[0].actualLineWidth,!0)}))/1e3,J=1;e.scale(q,J);const _=null!==(f=$.fontList[0].offsetY)&&void 0!==f?f:E.offsetY,Z=ba(D),Q=U>0&&R?((e,t,a,r,o,n,l,i)=>{const s=t%360,c=`${Math.floor(s/90)}`,d=s%90,u=l+i,p=r+o/2,m=n+(i-l)/2;let b=o,f=u;"1"!==c&&"3"!==c||(b=u,f=o);const h=Math.sqrt(b**2/4+f**2/4);if(h>0){const t=90-(180*Math.asin(b/2/h)/Math.PI-d),r=Math.sin(t/180*Math.PI)*h,o=Math.sin(d/180*Math.PI)*r,n=Math.cos(d/180*Math.PI)*r;let l=o,i=n;"1"===c&&(l=n,i=-o),"2"===c&&(l=-o,i=-n),"3"===c&&(l=-n,i=o);const s=p+l,u=m-i,f=p-l,g=m+i,y=e.createLinearGradient(s,u,f,g);return a.forEach((e=>{let{color:t,offset:a}=e;return y.addColorStop(parseFloat(a),t)})),y}})(e,N,ot(L),a,U,r,X,V):void 0;e.fillStyle=null!==Q&&void 0!==Q?Q:h,Oa({ctx:e,tokenList:Z,xRatio:q,yRatio:J,trueEdge:a,trueBaseline:r,textData:P,format:s,textDrawer:e=>{let{ctx:t,letter:a,scaledEdge:r,scaledBaseline:o}=e;t.fillText(a,r,o-(i?_:0))}}),I&&c&&(e.setTransform(1,0,0,1,0,0),await da(p,`frame/frame-${d}.png`,0,0),await da(p,`background/background-name-${d}.png`,0,0),p.globalCompositeOperation=A,await ua(p,`finish-name/${I}.png`,a,r-X,o,X+V),e.globalCompositeOperation="source-in",e.drawImage(c,0,0),e.scale(q,J),e.globalCompositeOperation="source-over",Oa({ctx:e,tokenList:Z,xRatio:q,yRatio:J,trueEdge:a,trueBaseline:r,textData:P,format:s,textDrawer:()=>{}})),B&&(e.globalCompositeOperation="destination-over",Oa({ctx:e,tokenList:Z,xRatio:q,yRatio:J,trueEdge:a,trueBaseline:r,textData:P,format:s,textDrawer:e=>{let{ctx:t,letter:a,scaledEdge:r,scaledBaseline:o}=e;t.lineJoin="round",t.strokeText(a,r+S,o+T-(i?_:0))}})),e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0);const ee={font:"Default",fillStyle:"#000000",headTextFillStyle:"#000000",shadowColor:"#000000",shadowOffsetY:0,shadowOffsetX:0,shadowBlur:0,hasShadow:!1,lineColor:"#000000",lineWidth:0,lineOffsetY:0,lineOffsetX:0,hasOutline:!1,gradientAngle:0,gradientColor:"0.000|#eef10b,0.5|#d78025,1.000|#7e20cf",hasGradient:!1,preset:"commonB",pattern:"none"};e.fillStyle=ee.fillStyle,e.shadowColor=ee.shadowColor,e.shadowOffsetY=ee.shadowOffsetY,e.shadowOffsetX=ee.shadowOffsetX,e.shadowBlur=ee.shadowBlur,e.lineWidth=ee.lineWidth,e.strokeStyle=ee.lineColor,e.lineJoin="miter",e.globalCompositeOperation="source-over"}},Ia={small:0,medium:1,large:2},Aa=e=>{var t,a;let{ctx:r,value:o,format:n,metricMethod:l,size:i,furiganaHelper:s}=e;const{edgeAlignment:c="left",trueEdge:d,trueBaseline:u,trueWidth:p}=null!==(t=null===(a=k[n])||void 0===a?void 0:a[i])&&void 0!==t?t:k.tcg.medium,m={tcg:X,ocg:V}[n];l&&(m.metricMethod=l);const{font:b}=m,f=Ia[i],h=m.fontList[f],g=tt({defaultFamily:b,defaultSize:`${h.fontSize}px`}),y={fontLevel:f,fontData:m,currentFont:g};let v=0;r.font=g.getFont(),r.textAlign="left";const x=Fa(o,n,{multiline:!1,furiganaHelper:s}),j=et((e=>{const{currentLineCount:t,currentLineList:a}=ja({ctx:r,median:e,paragraphList:[x],format:n,textData:y,width:p});return!(t>1)&&(v=a[0].actualLineWidth,!0)}))/1e3;r.scale(j,1);const w=Oa({ctx:r,tokenList:ba(x),xRatio:j,yRatio:1,trueEdge:"left"===c?d:d-v*j,trueBaseline:u,textData:y,format:n,textDrawer:e=>{let{ctx:t,letter:a,scaledEdge:r,scaledBaseline:o}=e;t.fillText(a,r,o)}});return r.setTransform(1,0,0,1,0,0),{...w,xRatio:j}},Ba=(e,t,a,r)=>{if(e&&t){const o=60.5;e.font=`${o}px MatrixBoldSmallCaps`,e.textAlign="left";const n=.65,l=`${t}`.split("");let i=0;l.forEach((t=>{i+=e.measureText(t).width*("1"===t?n:1)}));let s=a-i/2;l.forEach((t=>{e.fillText(t,"1"===t?s-3:s,r+o),s+=e.measureText(t).width*("1"===t?n:1)}))}},$a=(e,t,a,r)=>{if(!e)return;e.scale(1,.98),e.font="bold 35.73px Matrix-Bold";const o=Qt(e,t,.075,a,r/.98);e.setTransform(1,0,0,1,0,0),e.scale(1,1.01),e.font="bold 34.74px Matrix-Bold",Qt(e,"/",.15,o+5,r/1.01),e.setTransform(1,0,0,1,0,0)},Wa=(e,t,a,r)=>{if(!e||null==t)return;const o=73.97;if("\u221e"===t)e.textAlign="right",e.font="bold 37px matrix",e.fillText(t,a+o,r);else if("?"===t)e.textAlign="right",e.font="bold 34px matrix",e.fillText(t,a+o,r);else{e.textAlign="left";const n=`${t}`.split("?");let l=n.reduce(((t,a,r)=>{e.font="37px MatrixBoldSmallCaps";let o=t+e.measureText(a).width;return r<n.length-1&&(e.font="37px matrix",o+=e.measureText("?").width),o}),0);if(l>0){const t=Math.min(o/l,1);e.scale(t,1),n.reduce(((a,o,l,i)=>{const s=i[i.length-1-l];let c=a;return e.font="37px MatrixBoldSmallCaps",c-=e.measureText(s).width*t,e.fillText(s,c/t,r),l<n.length-1&&(e.font="bold 37px matrix",c-=e.measureText("?").width*t,e.fillText("?",c/t,r)),c}),a+o),e.scale(1/t,1)}}},{height:Pa,width:Da}=i,za=(e,t,a)=>{const{card:o}=Xt(),{drawCanvasRef:n,artworkCanvasRef:l,backgroundCanvasRef:p,frameCanvasRef:m,creatorCanvasRef:f,effectCanvasRef:g,nameCanvasRef:y,passwordCanvasRef:x,pendulumEffectCanvasRef:j,pendulumScaleCanvasRef:w,setIdCanvasRef:O,statCanvasRef:k,stickerCanvasRef:S,cardIconCanvasRef:T,typeCanvasRef:R,finishCanvasRef:N,lightboxCanvasRef:I}=t,{format:A,hasBackground:B,backgroundType:$,frame:W,foil:P,finish:D,artFinish:z,opacity:K,name:G,nameStyle:X,nameStyleType:V,effectTextStyle:U,pendulumTextStyle:q,typeTextStyle:J,statTextStyle:_,effect:Z,effectStyle:Q,typeAbility:ee,isPendulum:te,pendulumFrame:ae,pendulumEffect:re,pendulumScaleBlue:oe,pendulumScaleRed:ne,atk:le,def:ie,linkMap:se,attribute:ce,cardIcon:de,subFamily:ue,star:pe,starAlignment:me,setId:be,password:fe,creator:he,sticker:ge,isFirstEdition:ye,isDuelTerminalCard:ve,isSpeedCard:xe,furiganaHelper:je}=o,we="auto"===ae?te?"spell":W:ae,Oe=null===Q||void 0===Q?void 0:Q.condenseTolerant,Fe=(e=>"normal"===e.frame&&Je(e))(o),ke=Ve(o),Ce=Ue(o),Se=Je(o),Te=qe(o),{body:Re=100,boundless:Ne}=K,Le=!!(Re<50||Ne),Me=["xyz","dark-synchro","speed-skill","hamon","uria","raviel"].includes(we),Ee=_e(W),{levelStyle:Ie,resolvedEffectTextStyle:Ae,resolvedPendulumEffectTextStyle:Be,resolvedStatTextStyle:$e,resolvedTypeTextStyle:We}=Object(r.useMemo)((()=>(e=>{let{lightFooter:t,lightHeader:a,requireShadow:r,effectTextStyle:o,pendulumTextStyle:n,statTextStyle:l,typeTextStyle:i}=e;const s={color:a?"#ffffff":"#000000"},c=r?{blur:2,y:1,shadowColor:a?"#000000":"#ffffff",...s}:s,[d,u,p,m]=o,b=d?{...p?{y:0,blur:4,shadowColor:m}:{},color:u}:{},[f,h,g,y]=n,v=f?{...g?{y:0,blur:4,shadowColor:y}:{},color:h}:{},[x,j,w,O]=i,F=x?{...w?{y:1,blur:1,shadowColor:O}:{},color:j}:{},[k,C,S,T]=l;return{levelStyle:c,resolvedEffectTextStyle:b,resolvedPendulumEffectTextStyle:v,resolvedTypeTextStyle:F,resolvedStatTextStyle:k?{...S?{y:1,blur:1,shadowColor:T}:{},color:C}:{}}})({lightFooter:Me,lightHeader:Ee,requireShadow:Le,effectTextStyle:U,pendulumTextStyle:q,statTextStyle:_,typeTextStyle:J})),[Me,Ee,Le,U,q,_,J]),Pe=ue.toUpperCase(),De=ee.map((e=>e.trim())).join("ocg"===A?"\uff0f":"/"),ze="auto"!==ae||te?!!(le||ie||Ce&&se.length):Se,He="auto"===de?Se||Te:"st"!==de||Ce,{isInitializing:Ke,imageChangeCount:Ge,pendulumSize:Ye="medium"}=a,Xe=e&&!1===Ke,Qe=Object(r.useMemo)((()=>aa(D,L)),[D]),at=Object(r.useMemo)((()=>aa([z],M)),[z]),rt=Object(r.useRef)({frame:{name:"frame",order:1,rerun:0,instructor:()=>Promise.resolve()},attribute:{name:"attribute",order:2,rerun:0,instructor:()=>Promise.resolve()},sticker:{name:"sticker",order:3,rerun:0,instructor:()=>Promise.resolve()},name:{name:"name",order:4,rerun:0,instructor:()=>Promise.resolve()},typeAbility:{name:"typeAbility",order:5,rerun:0,instructor:()=>Promise.resolve()},overlay:{name:"overlay",order:6,rerun:0,instructor:()=>Promise.resolve()}});Object(r.useEffect)((()=>{var e;if(!Xe)return;const t=null===(e=m.current)||void 0===e?void 0:e.getContext("2d"),a=l.current,r=p.current;rt.current.frame.rerun+=1,rt.current.frame.instructor=async()=>{var e;if(!m.current||!ta(t))return;const o={...c(),...K},{artBorder:n,body:l,boundless:i,baseFill:u}=o,p=(e,a,r,o)=>{t.fillStyle=B?u:s,t.fillRect(e,a,r,o)},b=l>0||n;p(0,0,Da,Pa);const{drawFrame:f,drawCardArt:h,drawBackground:g,drawPendulumScaleIcon:y,drawLinkArrowMap:v,drawStar:x,drawAttribute:j,drawNameBackground:w,drawEffectBackground:O,drawFrameBorder:F,drawNameBorder:k,drawArtBorder:C,drawPendulumBorder:S,drawBorderPendulumFinish:T,drawEffectBorder:R,drawCardBorder:N,drawStatBorder:L,drawAttributeFinish:M,drawArtBorderFoil:E,drawEffectBorderFoil:I,drawLinkMapFoil:D,drawNameFinish:z,drawArtFinish:H,drawArtOverlayFinish:G,drawArtBorderFinish:Y,drawPendulumArtBorderFinish:X,drawFrameFinish:V,drawFrameBackgroundFinish:U,drawOverlayFinish:q,drawCardBorderFinish:J,calculateCardArtRedrawCoordination:_}=Ma({canvas:m.current,artworkCanvas:a,backgroundCanvas:r,format:A,frame:W,bottomFrame:we,hasBackground:B,backgroundType:$,attribute:ce,cardIcon:de,star:pe,foil:P,pendulumSize:Ye,opacity:o,isLink:Ce,isSpeedSkill:Te,isXyz:ke,isPendulum:te,loopFinish:Qe,loopArtFinish:at});if(r&&t&&g(),a&&t&&!i&&h(),await f(),await N(),await J(),te||(i||(await w(),await O(),await R(),await I()),await C(),await E(),await Y()),te&&!Ce&&!i){if(a&&t&&a.height>0){const{width:e,height:r}=a,{sourceOffsetX:o,sourceOffsetY:n,offsetHeight:l,destinationX:i,destinationY:s,destinationWidth:c,destinationHeight:d}=_(a);p(i,s,c,d),g("pendulum"),t.drawImage(a,o,n,e-2*o,r-l,i,s,c,d)}await w(),await O(!0)}if(await H(),await G(),!te||Ce||i||(await y(),await S(b,"normal"),await S(b,P),await X(),b&&await T()),i||(await V(),await z()),b&&await U(),i){if(Ce)await Y();else if(te){const e=d.fullCard.ratio/d.extendedPendulum.ratio;if(a&&t&&a.height>0){const{destinationX:t,destinationY:r,destinationWidth:o,destinationHeight:n}=_(a,{...c(),...K,body:100,boundless:!1},e);p(t,r,o,n),g("pendulum")}b&&(await S(b,"normal"),await S(b,P)),await X()}await w(),await z(),await k(),a&&t&&h(),await G(),te&&!Ce?(await O(!0),await y(),await S(!1,"normal"),await S(!1,P),await T()):(await O(),await R(),await I()),await V()}ze&&await L(null!==(e=$e.color)&&void 0!==e?e:"#000000"),!te&&Ce&&(await v(se),await D(!1),await(async(e,t)=>{e&&Array.isArray(t)&&(await da(e,"link/link-text.png",600,1080),e.textAlign="right",e.scale(1.2,1),e.font="bold 26.55px RoGSanSrfStd-Bd",e.fillStyle="#000000",e.fillText(`${t.length}`,622.75,1105),e.setTransform(1,0,0,1,0,0),e.textAlign="left")})(t,se)),await j(),await M(),Ce||await x({style:Ie,starAlignment:me}),i||await k(),await F(),await(async e=>{let{ctx:t,type:a,isPendulum:r,isLink:o,isDuelTerminalCard:n,isSpeedCard:l,bordered:i}=e;if(t){if(n){const e=r?[250,1087,180,20]:o?[151,848,216,24]:[80,843,270,30];await ua(t,`text/text-duel-terminal-${a}${i?"-bordered":""}.png`,...e)}if(l){const e=r?[250,1090,176.4,18]:o?[151,855,215.6,22]:[80,850,245,25];await ua(t,`text/text-speed-duel-${a}${i?"-bordered":""}.png`,...e)}}})({ctx:t,type:Me&&!te?"white":"black",bordered:(l<50||i)&&!te,isDuelTerminalCard:ve,isSpeedCard:xe,isLink:Ce,isPendulum:te}),await q()}}),[Xe,l,p,m,W,A,B,$,ce,we,P,pe,me,de,ve,Ce,te,xe,Te,ke,Me,se,$e,at,Qe,K,Ye,ze,Ie,Ge]),Object(r.useEffect)((()=>{var e;if(!Xe)return;const t=null===(e=w.current)||void 0===e?void 0:e.getContext("2d");ta(t)&&te&&(Ba(t,null!==oe&&void 0!==oe?oe:0,84.4,790),Ba(t,null!==ne&&void 0!==ne?ne:0,728,790))}),[Xe,te,oe,ne,w]),Object(r.useEffect)((()=>{Xe&&(rt.current.name.rerun+=1,rt.current.name.instructor=async()=>{var e,t;const a=null===(e=y.current)||void 0===e?void 0:e.getContext("2d"),r=null===(t=y.current)||void 0===t?void 0:t.cloneNode();ta(a)&&r&&await Ea(a,G,"tcg"===A?60:68,116,ce===b?"tcg"===A?688:674:"tcg"===A?608:598,(e=>{var t;let{format:a,frame:r,nameStyle:o,nameStyleType:n,foil:l}=e;if("custom"===n)return o;const i=qe({frame:r}),s=_e(r);let c="Default";"ocg"===a&&(c="OCG"),i&&"tcg"===a&&(c="Arial");let d={fillStyle:s?"#ffffff":"#000000",headTextFillStyle:s?"#ffffff":"#000000"};if("predefined"===n){var u,p;const e={...v[null!==(u=o.preset)&&void 0!==u?u:"commonB"].value};return v[null!==(p=e.preset)&&void 0!==p?p:"commonB"].value.font||(e.font=c),{...d,...e}}let m=i?{hasOutline:!0,lineWidth:6,strokeStyle:"#000"}:{};const b="normal"!==l&&null!==(t=v[l].value)&&void 0!==t?t:{},f="zarc"===r?v.animeGold.value:{};return{font:c,...d,...m,...b,...f}})({format:A,frame:W,nameStyle:X,nameStyleType:V,foil:P}),{isSpeedSkill:Te,format:A,cloneNode:r,frame:W,furiganaHelper:je})})}),[Xe,ce,P,A,W,je,Te,G,y,X,V]),Object(r.useEffect)((()=>{var e;if(!Xe)return;const t=null===(e=k.current)||void 0===e?void 0:e.getContext("2d");if(!ta(t)||!ze)return;const a=sa({ctx:t,...$e});$a(t,"ATK",432.1,1106.494),Wa(t,le,508.824,1106.494),Ce||($a(t,"DEF",600.85,1106.494),Wa(t,ie,673.865,1106.494)),a()}),[Xe,le,ie,Ce,Se,$e,k,ze]),Object(r.useEffect)((()=>{var e;if(!Xe)return;const t=null===(e=O.current)||void 0===e?void 0:e.getContext("2d");ta(t)&&((e,t,a)=>{if(!e)return;const{isPendulum:r,isLink:o,withShadow:n,format:l,lightFooter:i}=a;let s=.175,c=0,d=0;e.fillStyle=i&&!r?"#ffffff":"#000000",e.shadowColor=n?i?"#000000":"#ffffff":"#000000",e.shadowOffsetY=0,e.shadowOffsetX=0,e.shadowBlur=n&&!r?3:0,e.font=(n?"bold":"")+" 22px stone-serif-regular","ocg"===l&&(s=.145,c=-1,d=-3),r?Qt(e,t,s,66.65+d,1105.01+c):o?ea(e,t,s,666.56+d,872.94+c):ea(e,t,s,728.78+d,871.5+c)})(t,be,{isLink:Ce,isPendulum:te,withShadow:Le&&!te,format:A,lightFooter:Me})}),[Xe,A,Ce,te,Me,O,be,Te,we,Le]),Object(r.useEffect)((()=>{var e;if(!Xe)return;const t=null===(e=x.current)||void 0===e?void 0:e.getContext("2d");if(!ta(t))return;const a=(e=>{let{ctx:t,password:a,withShadow:r,lightFooter:o}=e;return t?(t.fillStyle=o?"#ffffff":"#000000",t.font=(r?"bold":"")+" 22.219px stone-serif-regular",t.shadowColor=r?o?"#000000":"#ffffff":"#000000",t.shadowOffsetY=0,t.shadowOffsetX=0,t.shadowBlur=r?3:0,Qt(t,a,.1,37.031,1150.931)):0})({ctx:t,password:fe,lightFooter:Me,withShadow:"zarc"===we||Le});ye&&!ve&&(t.fillStyle=Me?"#ffffff":"#000000",function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:99,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{stroke:!1};if(!e)return;const{stroke:o=!1}=null!==r&&void 0!==r?r:{};e.font="bold 23.7px palatino-linotype-bold";let n=t;e.fillText("1",n,1150.93+a),o&&e.strokeText("1",n,1150.93),n+=e.measureText("1").width-2,e.font="bold 17.78px palatino-linotype-bold",e.fillText("st",n,1143.53+a),o&&e.strokeText("st",n,1143.53),n+=e.measureText("st").width,e.font="bold 22.22px palatino-linotype-bold",e.fillText(" Edition",n,1150.93+a),o&&e.strokeText(" Edition",n,1150.93)}(t,Math.max(a+14.813,142.2)-("ocg"===A?10:0),Te?-2:0))}),[Xe,ve,ye,fe,x,Me,A,Le,Te,we]),Object(r.useEffect)((()=>{var e;Xe&&(e=>{var t,a;let{ctx:r,value:o,format:n,alignment:l,baselineOffset:i=0,lightFooter:s,hasShadow:c}=e;if(!ta(r))return;r.fillStyle=s?"#ffffff":"#000000",r.shadowColor=c?s?"#000000":"#ffffff":"#000000",r.shadowOffsetY=0,r.shadowOffsetX=0,r.shadowBlur=c?3:0;const{trueEdge:d,trueBaseline:u,trueWidth:p}=null!==(t=C[n])&&void 0!==t?t:C.tcg,m=Y[n],{font:b}=m,f=Fa(o,n,{multiline:!1,furiganaHelper:!1});let h={fontLevel:0,fontData:m,currentFont:tt()},g=0,y=1e3,v=m.fontList[0];for(let w=0;w<m.fontList.length;w++){v=m.fontList[w];const e=tt({defaultFamily:b,defaultSize:`${v.fontSize}px`,defaultWeight:"ocg"===n||c?"bold":""});let t={fontLevel:w,fontData:m,currentFont:e},a=0;if(r.font=e.getFont(),r.textAlign="left",y=et((e=>{const{currentLineCount:o,currentLineList:l}=ja({ctx:r,median:e,paragraphList:[f],format:n,textData:t,width:p});return!(o>1)&&(a=l[0].actualLineWidth,!0)})),g=a,h=t,y>=1e3)break}const x=y/1e3;r.scale(x,1);const j=Oa({ctx:r,tokenList:ba(f),xRatio:x,yRatio:1,trueEdge:"left"===l?d:d-g*x,trueBaseline:u+(null!==(a=v.offsetY)&&void 0!==a?a:E.offsetY)+i,textData:h,format:n,textDrawer:e=>{let{ctx:t,letter:a,scaledEdge:r,scaledBaseline:o}=e;t.fillText(a,r,o)}});r.setTransform(1,0,0,1,0,0)})({ctx:null===(e=f.current)||void 0===e?void 0:e.getContext("2d"),format:A,value:he,alignment:"right",baselineOffset:Te?-2:0,hasShadow:Le,lightFooter:Me})}),[Xe,te,Me,he,f,A,Le,Te]),Object(r.useEffect)((()=>{Xe&&(rt.current.sticker.rerun+=1,rt.current.sticker.instructor=async()=>{var e;return await(async e=>{let{ctx:t,sticker:a}=e;if(ta(t))return"no-sticker"===a?Promise.resolve():da(t,`sticker/sticker-${a.toLowerCase()}.png`,739.1438,1110.938)})({ctx:null===(e=S.current)||void 0===e?void 0:e.getContext("2d"),sticker:ge})})}),[Xe,ge,S]),Object(r.useEffect)((()=>{var e,t;if(!Xe)return;const a=null===(e=g.current)||void 0===e?void 0:e.getContext("2d"),r=null===(t=R.current)||void 0===t?void 0:t.getContext("2d");rt.current.typeAbility.rerun+=1,rt.current.typeAbility.instructor=async()=>{if(!ta(a)||!ta(r))return;const e=Sa({ctx:a,content:Z,isNormal:Fe,condenseTolerant:Oe,format:A,furiganaHelper:je,...ka({format:A,statInEffect:ze,typeInEffect:He,isNormal:Fe}),textStyle:Ae});await(async e=>{let{ctx:t,typeAbility:a,subFamily:r,format:o,frame:n,size:l,isMonster:i,textStyle:s,furiganaHelper:c}=e;if(!ta(t))return;const d=a.length>0,u=r!==h&&"large"===l,p=a+(u?"\u29be":""),m=d?"tcg"===o?"large"===l?`[\u200a\u200a${p}\u200a\u200a]`:`[${p}]`:`\u3010${p}\u3011`:"";if(!d)return;const b={color:Ze(n)&&!qe({frame:n})&&"large"===l?"#ffffff":"#000000",...s},f=sa({ctx:t,...b}),{iconPositionList:g,xRatio:y}=Aa({ctx:t,format:o,size:l,value:m,metricMethod:i?void 0:"compact",furiganaHelper:c});f();let v="ocg"===o?-4:0,x="ocg"===o?-3:0;if(u){const{edge:e,baseline:a}=g[0];await ua(t,`subfamily/subfamily-${r.toLowerCase()}.png`,(t=>e+.175*t.naturalWidth*y+x),(e=>a-.8*e.naturalWidth+v),(e=>e.naturalWidth),(e=>e.naturalWidth))}})({ctx:r,format:A,frame:W,furiganaHelper:je,isMonster:Se,textStyle:We,size:He?0===e?"medium":"small":"large",subFamily:Pe,typeAbility:De})}}),[Xe,He,ze,Oe,Z,g,A,W,je,Se,Fe,We,Ae,Pe,De,R]),Object(r.useEffect)((()=>{var e;if(!Xe)return;const t=null===(e=j.current)||void 0===e?void 0:e.getContext("2d");ta(t)&&te&&Sa({ctx:t,content:re,isNormal:!1,fontData:H[A],textStyle:Be,sizeList:F,condenseTolerant:Oe,format:A,furiganaHelper:je})}),[Xe,Oe,A,te,j,re,je,Be]),Object(r.useEffect)((()=>{var e;if(!Xe)return;const t=null===(e=N.current)||void 0===e?void 0:e.getContext("2d");rt.current.overlay.rerun+=1,rt.current.overlay.instructor=async()=>{ta(t)&&await Qe(t,"total-overlay",(e=>da(t,`finish/finish-${e}-total-overlay.png`,0,0)))}}),[Xe,N,Qe,G]);const ot=Object(r.useRef)({}),nt=Object(r.useCallback)((async e=>{const{isPendulum:t=!1,opacity:a}=e,r=n.current,o=null===r||void 0===r?void 0:r.getContext("2d"),s=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new Promise((r=>{setTimeout((()=>{if(e.current&&t)try{e.current.toBlob((e=>{if(e){const a=URL.createObjectURL(e);if(a){const e=new Image;e.src=a,e.onload=()=>{t.drawImage(e,0,0),URL.revokeObjectURL(a),r(!0)},e.onerror=()=>{URL.revokeObjectURL(a),r(!1)}}else r(!1)}else r(!1)}))}catch(a){console.error(a),r(!1)}else r(!1)}),25*a)}))};if(r&&o){var c,d;o.clearRect(0,0,i.width,i.height),await Promise.all(Object.values(rt.current).sort(((e,t)=>e.order-t.order)).map((e=>{let{instructor:t,rerun:a,name:r}=e;return 0!==a&&ot.current[r]!==a||!ot.current[r]?(ot.current[r]=a,t()):Promise.resolve()})));const e=l.current;if(e&&o){const{artX:r,artY:n,artWidth:l}=u(t,a),{width:i,height:s}=e;s>0&&o.drawImage(e,0,0,i,s,r,n,l,l/(i/s))}await s(m,o,0),await s(y,o,0),await s(T,o,0),await s(w,o,0),await s(j,o,0),await s(R,o,0),await s(g,o,0),await s(k,o,0),await s(O,o,0),await s(x,o,0),await s(f,o,0),await s(S,o,0),await s(N,o,0),null===(c=I.current)||void 0===c||null===(d=c.getContext("2d"))||void 0===d||d.drawImage(r,0,0)}}),[l,T,f,n,g,N,I,y,x,j,w,O,m,k,S,R]);return{drawingPipeline:rt,onExport:nt}};var Ha=a(121),Ka=a.n(Ha),Ga=a(25);const Ya=(e,t,a)=>{if(!t)return e;const{width:r,height:o,x:n=0,y:l=0,unit:i}=e;if("px"===i){const e=.8,o=400/300,{width:i,height:s}=t,c=s/i>=e?o:1,d=Math.min((null!==n&&void 0!==n?n:0)*c,i),u=Math.min((null!==l&&void 0!==l?l:0)*c,s),p=Math.min((null!==r&&void 0!==r?r:0)*c,i);return{unit:"%",x:d/i*100,y:u/s*100,width:p/i*100,height:p/(null!==a&&void 0!==a?a:1)/s*100,aspect:a}}if(n<0)return{...e,x:0};if(l<0)return{...e,y:0};const{naturalHeight:s,naturalWidth:c}=t,d=null!==r&&void 0!==r?r:0,u=null!==o&&void 0!==o?o:0,p=.05*(s>c?s:c),m=Math.abs(u*s*a-d*c)<=p;return{...e,x:n<0?0:n,y:l<0?0:l,height:m?u:d*t.naturalWidth/a/t.naturalHeight,aspect:a}},Xa=o.a.forwardRef(((e,t)=>{let{title:a,backgroundColor:o,className:n,defaultExternalSource:l="",receivingCanvas:i,children:s,beforeCropper:c,defaultCropInfo:d,ratio:u,onSourceLoaded:p=()=>{},onSourceChange:b=()=>{},onCropChange:f=()=>{},onTainted:h=()=>{}}=e;const g=Ht(),[y]=Object(r.useState)("anonymous"),[v,x]=Object(r.useState)(0),[j,w]=Object(r.useState)("external"),[O,F]=Object(r.useState)("external"),[k,C]=Object(r.useState)(""),[S,T]=Object(r.useState)(!1),[R,N]=Object(r.useState)(null),[L,M]=Object(r.useState)(l),E=Object(r.useRef)(null),[I,A]=Object(r.useState)({current:d,completed:null}),[B,$]=Object(r.useState)("%"===d.unit),{current:W,completed:P}=I,D=Object(r.useRef)({source:"",crop:null}),z=Object(r.useCallback)((e=>{if(T(!1),N(null),p(),E.current=e,e.src===D.current.source&&D.current.crop){const t=H.current;setTimeout((()=>{if(t!==H.current||!D.current.crop)return;const a=Ya(D.current.crop,e,u);A({completed:a,current:a}),$(!0),D.current={source:"",crop:null}}),250)}else setTimeout((()=>{A((t=>{const a=Ya(t.current,e,u);return{completed:a,current:a}})),$(!0)}),250)}),[p,u]);Object(r.useEffect)((()=>{var e,t,a,r,o,n;const l=E.current;if(!P||!i||!l)return;const{aspect:s}=P;i.style.transform="scale(2)";const c=i.getContext("2d");if(!c||"number"!==typeof s||s<=0)return;const{naturalHeight:d,naturalWidth:u}=l,p=u/l.width,m=d/l.height,b=null!==(e=P.unit)&&void 0!==e?e:"px",h=window.devicePixelRatio;c.setTransform(h,0,0,h,0,0);let g,y=Math.floor((null!==(t=P.width)&&void 0!==t?t:0)*("px"===b?p:u/100)),v=Math.min(u,y),x=Math.floor(y/s),w=Math.min(d,x),O=Math.min(u,Math.floor((null!==(a=P.x)&&void 0!==a?a:0)*("px"===b?p:u/100))),F=Math.min(d,Math.floor((null!==(r=P.y)&&void 0!==r?r:0)*("px"===b?m:d/100)));if(c.imageSmoothingQuality="high",!(v<=0||w<=0)){if(O+v>u||F+w>d||O<0||F<0||Math.abs((y-v)/v)>.01||Math.abs((x-w)/w)>.01){"width"===(s*d>u?"width":"height")?(v=u,w=v/s,O=0,F=(d-w)/2,g={unit:"%",aspect:s,height:w/d*100,width:v/u*100,x:0,y:F/d*100}):(v=d*s,w=d,O=(u-v)/2,F=0,g={unit:"%",aspect:s,height:w/d*100,width:v/u*100,x:O/u*100,y:0})}i.width=null!==(o=v)&&void 0!==o?o:0,i.height=null!==(n=w)&&void 0!==n?n:0,c.drawImage(l,O,F,v,w,0,0,v,w),"internal"===j&&(null!==k&&void 0!==k?k:"").length<=0||s===P.aspect&&f(P,j),g&&A((e=>({...e,current:g})))}}),[P,i,v]),Object(r.useEffect)((()=>{A((e=>{if(null!=E.current&&e.current){const t=Ya(e.current,E.current,u);return{current:t,completed:t}}return e}))}),[u]);const H=Object(r.useRef)(0);Object(r.useImperativeHandle)(t,(()=>({setRatio:e=>{},forceExternalSource:(e,t)=>{("internal"===j?k:L)!==e&&(T(!0),w("external"),F("external"),b(e),M(e)),$("%"===t.unit),H.current+=1,D.current={source:e,crop:t},x((e=>e+1))}})));const K=i&&!S&&(null===P||void 0===P?void 0:P.width)&&(null===P||void 0===P?void 0:P.height);return Object(m.jsxs)("div",{className:`card-image-cropper ${n}`,children:[Object(m.jsxs)("div",{className:"card-image-source-input",children:[s,Object(m.jsxs)("div",{className:"card-image-source-input-container",children:[Object(m.jsxs)("div",{className:"card-image-source-input-title",children:[Object(m.jsxs)("span",{className:"field-title",children:[a," ",Object(m.jsx)(Mt,{Icon:Ct.a,containerProps:{className:K?"":"disabled"},tooltipProps:{overlay:K?"Download cropped image":"Image is not loaded yet"},onClick:()=>K&&i&&function(e,t){t&&e&&e.toBlob((e=>{if(null!==e){const t=window.URL.createObjectURL(e),a=document.createElement("a");a.download="crop-preview.png",a.href=URL.createObjectURL(e),a.click(),window.URL.revokeObjectURL(t)}}),"image/png",1)}(i,P)})]}),Object(m.jsxs)(jt.a.Group,{className:"card-image-source-type-input",onChange:e=>{const t=e.target.value;F(t),((null!==k&&void 0!==k?k:"").length>0&&"internal"===t||(null!==L&&void 0!==L?L:"").length>0&&"external"===t)&&w(t)},value:O,children:[Object(m.jsx)(jt.a.Button,{value:"external",checked:"external"===O,children:g["image-cropper.source.online.tooltip"]}),Object(m.jsx)(wt.a,{title:Object(m.jsx)("div",{className:"image-warning",children:g["image-cropper.offline-warning"]}),children:Object(m.jsxs)(jt.a.Button,{value:"internal",checked:"internal"===O,children:[g["image-cropper.source.offline.tooltip"]," ",Object(m.jsx)(St.a,{})]})})]})]}),Object(m.jsxs)("div",{className:["card-image-input","external"===O?"":"input-inactive"].join(" "),children:[Object(m.jsx)(Ot.a,{placeholder:g["image-cropper.placeholder"],value:L,onChange:e=>{const t=e.target.value;T(!0),w("external"),F("external"),b(t),M(t)},maxLength:512,allowClear:!0},"key"),R?Object(m.jsx)("div",{className:"online-image-tip image-warning",children:g["image-cropper.not-found-warning"]}):Object(m.jsx)("div",{className:"online-image-tip",children:g["image-cropper.online-tip"]})]}),Object(m.jsxs)("div",{className:["card-image-input","internal"===O?"":"input-inactive"].join(" "),children:[Object(m.jsx)(Ot.a,{type:"file",accept:"image/*",onChange:e=>{if(e.target.files&&e.target.files.length>0){T(!0);const t=new FileReader;t.addEventListener("load",(()=>{"string"===typeof t.result&&(C(t.result),w("internal"),F("internal"))})),t.readAsDataURL(e.target.files[0])}else alert("No file uploaded")}}),Object(m.jsx)("hr",{}),g["image-cropper.offline-warning"]]})]})]}),c,Object(m.jsxs)("div",{className:"card-cropper",children:[S&&Object(m.jsx)(Nt.FullView,{}),Object(m.jsx)(kt.a,{src:"internal"===j?k:L,imageStyle:o?{backgroundColor:o}:{backgroundImage:'url("/ygocarder/asset/image/texture/transparent-tile.png")'},onImageLoaded:z,onImageError:()=>{if(D.current={source:"",crop:null},N("Image error"),T(!1),"external"===j&&""===(null!==L&&void 0!==L?L:"")&&i){const{width:e,height:t}=i,a=i.getContext("2d");null===a||void 0===a||a.clearRect(0,0,e,t),P&&f(P,j),p()}else h()},crop:W,onChange:(e,t)=>{const a=E.current;D.current.crop||(B?A((e=>({...e,current:Ya(t,a,u)}))):($(!0),A((t=>({...t,current:Ya(e,a,u)})))))},onComplete:(e,t)=>{D.current.crop||A((e=>({...e,completed:t})))},ruleOfThirds:!0,crossorigin:y},`${j}-${B}-${v}`)]})]})}));a(298);const Va=e=>{let{defaultValue:t=[],onChange:a=()=>{}}=e;const[o,n]=Object(r.useState)(t),l=[-45,0,45,-90,0,90,-135,180,135],i=Ht(),s=JSON.stringify(o);return Object(r.useEffect)((()=>{a(o)}),[s]),Object(m.jsxs)("div",{className:"link-marker-chooser",children:[Object(m.jsx)("div",{className:"title",children:i["link-picker.label"]}),Object(m.jsx)("div",{className:"container",children:[...Array(9)].map(((e,t)=>{const a=`${t+1}`;return"5"===a?Object(m.jsx)(wt.a,{overlay:i["link-picker.reset.tooltip"],children:Object(m.jsx)("div",{className:"link-marker-reset",onClick:()=>{n([])},children:Object(m.jsx)(p.a,{})})},"5"):Object(m.jsx)("div",{className:`link-marker-button marker-${t+1} ${o.includes(a)?"marker-checked":""}`,onClick:()=>{n((e=>{let t=[...e];return t.includes(a)?t=t.filter((e=>e!==a)):t.push(a),t}))},children:Object(m.jsx)("div",{className:`link-marker-icon link-marker-icon-${t+1}`,style:{transform:`rotate(${l[t]}deg)`}})},a)}))})]})};var Ua=a(448);a(299);const qa=e=>{let{overlayClassName:t,iconProps:a,...r}=e;const{className:o,...n}=null!==a&&void 0!==a?a:{};return Object(m.jsx)(Ua.a,{overlayClassName:["explanation-overlay",null!==t&&void 0!==t?t:""].join(" "),...r,children:Object(m.jsx)(St.a,{className:["explanation-icon",null!==o&&void 0!==o?o:""].join(" "),...n})})};var Ja=a(445),_a=a(54),Za=a(452),Qa=a(453);a(300);const er=xt.b.span`
    background: var(--main-level-1);
    padding: var(--spacing-px) var(--spacing-xxs);
    border: var(--bw) solid #4e84a4;
    border-radius: var(--br);
    font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New', monospace;
`,tr=xt.b.div`
    white-space: pre-line;
`,ar=xt.b.div`
    display: grid;
    grid-template-columns: 615fr 703fr;
    gap: var(--spacing-sm);
    padding: var(--spacing-sm) 0;
    overflow: hidden;
    .panel-box {
        min-width: 0;
        position: relative;
        overflow: hidden;
    }
`,rr=xt.b.div`
    min-width: 0;
    position: relative;
    overflow: hidden;
    .caption {
        position: absolute;
        right: 0;
        bottom: 0;
        padding: var(--spacing-px) var(--spacing-sm);
        background: var(--main-level-5);
        border-radius: var(--br-lg) 0 0 0;
        box-shadow: var(--bs-block);
    }
    > img {
        max-width: 100%;
        border: var(--bw) solid var(--sub-level-1);
        border-radius: var(--br-lg);
    }
`,or=e=>{let{caption:t,containerProps:a,alt:r,...o}=e;const{className:n}=null!==a&&void 0!==a?a:{};return Object(m.jsxs)(rr,{className:`image-with-caption ${n}`,children:[Object(m.jsx)("img",{alt:r,...o}),Object(m.jsx)("div",{className:"caption",children:t})]})},nr=()=>{const[e,t]=Object(r.useState)(!1),a=Ht();return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Ja.a,{footer:null,visible:e,width:"60%",title:Object(m.jsxs)("div",{className:"overlay-title",children:[a["guide.format.label"]," ",Object(m.jsx)(_a.a,{size:"small",type:"primary",onClick:()=>{t(!1)},children:a["guide.format.close"]})]}),className:"formattting-guide-overlay",onClose:()=>{t(!1)},children:Object(m.jsxs)(tr,{children:[Object(m.jsxs)("p",{children:[a["guide.format.introduction"](Object(m.jsx)(Za.a,{},"icon")),"."]}),Object(m.jsx)("h2",{children:a["guide.format.section-1.label"]}),a["guide.format.section-1.content"](Object(m.jsx)(er,{children:"["},"open-tag"),Object(m.jsx)(er,{children:"]"},"close-tag"),Object(m.jsx)(er,{children:"Ctrl-1"},"hotkey"),Object(m.jsx)(er,{children:"\u2318-1"},"hokey-alternative")),Object(m.jsxs)(ar,{className:"panel-figure",children:[Object(m.jsx)(or,{containerProps:{className:"panel-box box-raw"},alt:"non-breakable line raw",src:"/ygocarder/asset/image/syntax/syntax-1-raw.jpg",caption:a["guide.format.caption.input"]}),Object(m.jsx)(or,{containerProps:{className:"panel-box box-preview"},alt:"non-breakable line preview",src:"/ygocarder/asset/image/syntax/syntax-1-preview.jpg",caption:a["guide.format.caption.output"]})]}),Object(m.jsx)("h2",{children:a["guide.format.section-2.label"]}),a["guide.format.section-2.content"](Object(m.jsx)(er,{children:"{"},"open-tag"),Object(m.jsx)(er,{children:"}"},"close-tag"),Object(m.jsx)(er,{children:"Ctrl-2"},"hotkey"),Object(m.jsx)(er,{children:"\u2318-2"},"hokey-alternative")),Object(m.jsxs)(ar,{className:"panel-figure",children:[Object(m.jsx)(or,{containerProps:{className:"panel-box box-raw"},alt:"non-breakable line raw",src:"/ygocarder/asset/image/syntax/syntax-2-raw.jpg",caption:a["guide.format.caption.input"]}),Object(m.jsx)(or,{containerProps:{className:"panel-box box-preview"},alt:"non-breakable line preview",src:"/ygocarder/asset/image/syntax/syntax-2-preview.jpg",caption:a["guide.format.caption.output"]})]}),Object(m.jsx)("h2",{children:a["guide.format.section-3.label"]}),a["guide.format.section-3.content"](Object(m.jsx)(er,{children:"|"},"separator"),Object(m.jsx)(er,{children:"Ctrl-3"},"hotkey"),Object(m.jsx)(er,{children:"\u2318-3"},"hokey-alternative")),Object(m.jsxs)(ar,{className:"panel-figure",children:[Object(m.jsx)(or,{containerProps:{className:"panel-box box-raw"},alt:"non-breakable line raw",src:"/ygocarder/asset/image/syntax/syntax-3-raw.jpg",caption:a["guide.format.caption.input"]}),Object(m.jsx)(or,{containerProps:{className:"panel-box box-preview"},alt:"non-breakable line preview",src:"/ygocarder/asset/image/syntax/syntax-3-preview.jpg",caption:a["guide.format.caption.output"]})]}),Object(m.jsx)("h2",{children:a["guide.format.section-4.label"]}),a["guide.format.section-4.content"](Object(m.jsx)(er,{children:"||"},"separator"),Object(m.jsx)(er,{children:"Ctrl-4"},"hotkey"),Object(m.jsx)(er,{children:"\u2318-4"},"hokey-alternative")),Object(m.jsxs)(ar,{className:"panel-figure",children:[Object(m.jsx)(or,{containerProps:{className:"panel-box box-raw"},alt:"non-breakable line raw",src:"/ygocarder/asset/image/syntax/syntax-4-raw.jpg",caption:a["guide.format.caption.input"]}),Object(m.jsx)(or,{containerProps:{className:"panel-box box-preview"},alt:"non-breakable line preview",src:"/ygocarder/asset/image/syntax/syntax-4-preview.jpg",caption:a["guide.format.caption.output"]})]}),Object(m.jsx)("h2",{children:a["guide.format.section-5.label"]}),a["guide.format.section-5.content"](Object(m.jsx)(er,{children:"{{"},"open-tag"),Object(m.jsx)(er,{children:"}}"},"close-tag"),Object(m.jsx)(er,{children:"Ctrl-5"},"hotkey"),Object(m.jsx)(er,{children:"\u2318-5"},"hokey-alternative")),Object(m.jsxs)(ar,{className:"panel-figure",children:[Object(m.jsx)(or,{containerProps:{className:"panel-box box-raw"},alt:"non-breakable line raw",src:"/ygocarder/asset/image/syntax/syntax-5-raw.jpg",caption:a["guide.format.caption.input"]}),Object(m.jsx)(or,{containerProps:{className:"panel-box box-preview"},alt:"non-breakable line preview",src:"/ygocarder/asset/image/syntax/syntax-5-preview.jpg",caption:a["guide.format.caption.output"]})]})]})}),Object(m.jsxs)(_a.a,{className:"formatting-help-button",type:"primary",onClick:()=>{t(!0)},children:[a["guide.format.label"]," ",Object(m.jsx)(Qa.a,{})]})]})},lr=xt.b.div`
    display: grid;
    ${e=>{let{$withPillar:t}=e;return t?"grid-template-columns: max-content 1fr;":"grid-template-columns: 1fr;"}}
    > label {
        cursor: pointer;
        padding: 0 var(--spacing-xxs);
        text-align: center;
    }
`,ir=xt.b.div`
    display: inline-block;
    width: 10px;
`,sr=e=>{let{nameKey:t,labelBackgroundColor:a,labelBackgroundColorList:r,className:o}=e;const n=Ht();return Object(m.jsxs)(lr,{className:`frame-info-block ${null!==o&&void 0!==o?o:""}`,$withPillar:!(!a&&!r),children:[r?Object(m.jsx)(ir,{children:r.map((e=>Object(m.jsx)("div",{style:{backgroundColor:e,height:100/r.length+"%"}},e)))}):a?Object(m.jsx)(ir,{style:{backgroundColor:a}}):null,Object(m.jsx)("label",{className:"frame-info-block-label",children:n[t]})]})};var cr=a(446);const dr=xt.c`
    to {
        transform: rotate(360deg);
    }
`,ur=xt.b.div`
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--spacing-sm);
    background-color: var(--main-level-3);
    padding: var(--spacing-sm);
    border: var(--bw) solid var(--sub-level-1);
    border-radius: var(--br-lg);
    color: var(--color);
`,pr=xt.b.div`
    cursor: pointer;
    .setting-button-label {
        display: grid;
        label {
            cursor: pointer;
            line-height: 1;
            font-size: var(--fs-xs);
            margin-top: var(--spacing-xs);
        }
    }
    .anticon-setting {
        font-size: var(--fs-xl);
        justify-self: center;
        > svg {
            ${e=>{let{$softMode:t}=e;return t?"":xt.a`animation: ${dr} 12s linear infinite;`}}
        }
    }
    &:hover {
        color: var(--main-active);
        .anticon-setting {
            color: var(--sub-active);
        }
    }
`,mr=()=>{const e=Ht(),{setting:t,updateSetting:a}=Vt((e=>{let{setting:t,updateSetting:a}=e;return{setting:t,updateSetting:a}})),{allowHotkey:r,reduceMotionColor:o,showCreativeOption:n,showExtraDecorativeOption:l}=t;return Object(m.jsx)(pr,{className:"setting-button",$softMode:o,children:Object(m.jsx)(Ua.a,{trigger:["click"],overlayClassName:"setting-button-overlay",content:Object(m.jsxs)(ur,{children:[Object(m.jsx)("div",{children:Object(m.jsx)(cr.a,{checked:o,onChange:e=>a({reduceMotionColor:e.target.checked}),children:e["setting.option.soft-mode.label"]})}),Object(m.jsx)("div",{children:Object(m.jsx)(cr.a,{checked:l,onChange:e=>a({showExtraDecorativeOption:e.target.checked}),children:e["setting.option.extra-decorative.label"]})}),Object(m.jsx)("div",{children:Object(m.jsx)(cr.a,{checked:n,onChange:e=>a({showCreativeOption:e.target.checked}),children:e["setting.option.creative.label"]})}),Object(m.jsx)("div",{children:Object(m.jsx)(wt.a,{title:e["setting.option.hotkey.tooltip"],placement:"left",children:Object(m.jsx)(cr.a,{checked:r,onChange:e=>a({allowHotkey:e.target.checked}),children:e["setting.option.hotkey.label"]})})}),Object(m.jsx)("div",{children:Object(m.jsx)("small",{children:e["setting.alert"]})})]}),children:Object(m.jsxs)("div",{className:"setting-button-label",children:[Object(m.jsx)(Za.a,{}),Object(m.jsx)("label",{children:e["setting.button.label"]})]})})})};var br=a(454);a(301);const fr=()=>{var e;return Object(m.jsxs)("div",{className:"affiliation",children:[Object(m.jsxs)("span",{className:"version",children:["v",null!==(e="2.0.11")?e:"unknown"]}),Object(m.jsx)("div",{className:"affiliation-link",children:Object(m.jsx)("a",{href:"https://github.com/lauqerm/ygocarder",target:"_blank",rel:"noreferrer",children:Object(m.jsx)(br.a,{})})})]})},hr=xt.b.div`
    align-content: center;
    align-self: center;
    border-left: var(--bw) dashed #b1b1b1;
    padding-left: var(--spacing);
    margin-left: var(--spacing);
`,gr=()=>{const{language:e,languageInfo:t,languageMetadataMap:a,changeLanguage:r}=zt((e=>{let{languageInfo:t,language:a,languageMetadataMap:r,changeLanguage:o}=e;return{languageInfo:t,language:a,languageMetadataMap:r,changeLanguage:o}}));return Object(m.jsxs)("div",{className:"app-header",children:[Object(m.jsx)("img",{alt:"app-logo",src:"/ygocarder/logo192.png",width:35}),Object(m.jsxs)("div",{className:"app-description",children:[Object(m.jsxs)("div",{className:"header-language",children:[Object(m.jsx)("h1",{children:"Yugioh Carder"}),Object(m.jsx)(jt.a.Group,{value:t.codeName,size:"small",children:Object.values(a).filter((e=>{let{active:t}=e;return t})).map((e=>{let{codeName:t,name:a}=e;return Object(m.jsx)(jt.a.Button,{value:t,onChange:e=>r(e.target.value),children:a},t)}))})]}),Object(m.jsxs)("div",{className:"app-contribution",children:[Object(m.jsxs)("span",{className:"app-creator",children:[e["contributor.gui.label"],": ",Object(m.jsx)("a",{href:"https://github.com/lauqerm/ygocarder",target:"_blank",rel:"noreferrer",children:Object(m.jsx)("b",{children:"Lauqerm"})}),"\xa0",Object(m.jsx)(qa,{content:Object(m.jsxs)("div",{className:"disclaimer",children:[Object(m.jsx)("h2",{children:e["contributor.disclaimer.label"]}),Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{children:e["contributor.disclaimer.line-1"](Object(m.jsx)("a",{href:"https://lauqerm.github.io/ygocarder",children:"lauqerm.github.io/ygocarder"},"app-author"))}),Object(m.jsx)("li",{children:e["contributor.disclaimer.line-2"]}),Object(m.jsx)("li",{children:e["contributor.disclaimer.line-3"]}),Object(m.jsx)("li",{children:e["contributor.disclaimer.line-4"]}),Object(m.jsx)("li",{children:e["contributor.disclaimer.line-5"](Object(m.jsx)("a",{href:"https://www.deviantart.com/grezar",target:"_blank",rel:"noreferrer",children:"Grezar"},"template-maker-1"),Object(m.jsx)("a",{href:"https://www.deviantart.com/9558able",target:"_blank",rel:"noreferrer",children:"9558able"},"template-maker-2"))}),Object(m.jsx)("li",{children:e["contributor.disclaimer.line-6"]})]})]})})]}),Object(m.jsx)("span",{className:"template-creator",children:e["contributor.template-maker"](Object(m.jsx)("a",{href:"https://www.deviantart.com/grezar/art/SKILL-UPDATE-Series-10-Card-Proxy-Template-686736691",target:"_blank",rel:"noreferrer",children:Object(m.jsx)("b",{children:"Grezar"})},"artist-1"),Object(m.jsx)("a",{href:"https://www.deviantart.com/9558able/art/Yugioh-Series-10-Proxy-Template-DELUXE-EDITION-843282421",target:"_blank",rel:"noreferrer",children:Object(m.jsx)("b",{children:"9558able"})},"artist-2"),Object(m.jsx)("a",{href:"https://www.deviantart.com/slackermagician",target:"_blank",rel:"noreferrer",children:Object(m.jsx)("b",{children:"SlackerMagician"})},"artist-3"),Object(m.jsx)("a",{href:"https://www.deviantart.com/icycatelf",target:"_blank",rel:"noreferrer",children:Object(m.jsx)("b",{children:"icycatelf"})},"artist-4"))})]})]}),Object(m.jsx)(hr,{className:"app-setting",children:Object(m.jsx)(mr,{})})]})},yr=()=>{const e=Ht();return Object(m.jsx)(qa,{overlayClassName:"disclaimer-overlay",content:Object(m.jsxs)("div",{className:"disclaimer",children:[Object(m.jsx)("h2",{children:e["alert.explaination.tainted.first-question"]}),Object(m.jsx)("p",{children:e["alert.explaination.tainted.first-answer"]}),Object(m.jsx)("h2",{children:e["alert.explaination.tainted.second-question"]}),Object(m.jsx)("p",{children:e["alert.explaination.tainted.second-answer"]}),Object(m.jsx)("h2",{children:e["alert.explaination.tainted.third-question"]}),Object(m.jsx)("p",{children:e["alert.explaination.tainted.third-answer"]})]})})},vr=xt.b.div`
    font-weight: 500;
    border-color: transparent;
    background-color: transparent;
    color: var(--color-vendor);
    text-shadow: var(--ts);
    user-select: none;
    display: inline-block;
    height: 32px;
    width: var(--width-label);
    line-height: 30px;
    position: relative;
    min-width: var(--width-label);
    text-align: right;
    padding-right: var(--spacing-antd);
`,xr=xt.b.div`
    display: flex;
    align-items: center;
    padding: var(--spacing-xs) var(--spacing);
    cursor: pointer;
    &:hover {
        background-color: var(--sub-active);
    }
    &.menu-active {
        background-color: var(--main-active);
        &:hover {
            background-color: var(--sub-active);
        }
    }
`,jr={Container:xt.b.div`
    border: var(--bw) solid var(--sub-level-1);
    border-radius: var(--br-lg);
    background-color: var(--main-level-3);
    box-shadow: 0 3px 6px -4px rgba(0, 0, 0, 0.12), 0 6px 16px 0 rgba(0, 0, 0, 0.08), 0 9px 28px 8px rgba(0, 0, 0, 0.05); // Mimic antd
    padding: var(--spacing-xs) 0;
    color: var(--color);
`,Option:xr},wr=[{label:"OCG",value:"ocg",props:{className:"ocg-button",style:{fontWeight:"bold"}}},{label:"TCG",value:"tcg",props:{className:"tcg-button",style:{fontWeight:"bold"}}}],Or=Object.values(L).map((e=>{let{value:t,label:a}=e;return{label:a,value:t}})),Fr=[{value:"normal",label:Object(m.jsx)(p.a,{})},...Object.values(M).map((e=>{let{value:t,label:a}=e;return{label:a,value:t}}))],kr=()=>ee.map((e=>{let{name:t,nameKey:a,labelBackgroundColor:r,labelBackgroundColorList:o,edition:n}=e;return{label:Object(m.jsx)(sr,{labelBackgroundColor:r,labelBackgroundColorList:o,nameKey:a}),value:t,edition:n}})),Cr=[...Array(14)].map(((e,t)=>({label:t,value:t}))),Sr={auto:{value:"auto",labelKey:"input.icon-type.auto.label",fullLabelKey:"input.icon-type.auto.label",icon:null},st:{value:"st",labelKey:"input.icon-type.icon.label",fullLabelKey:"input.icon-type.icon.label",icon:Object(m.jsx)("img",{alt:"s/t-icon",src:"/ygocarder/asset/image/subfamily/subfamily-continuous.png"})},level:{value:"level",labelKey:"input.icon-type.level.label",fullLabelKey:"input.icon-type.level.label",icon:Object(m.jsx)("img",{alt:"s/t-icon",src:"/ygocarder/asset/image/subfamily/subfamily-level.png"})},"negative-level":{value:"negative-level",labelKey:"input.icon-type.negative-level.label",fullLabelKey:"input.icon-type.negative-level.label",icon:Object(m.jsx)("img",{alt:"s/t-icon",src:"/ygocarder/asset/image/subfamily/subfamily-negative-level.png"})},rank:{value:"rank",labelKey:"input.icon-type.rank.label",fullLabelKey:"input.icon-type.rank.label",icon:Object(m.jsx)("img",{alt:"s/t-icon",src:"/ygocarder/asset/image/subfamily/subfamily-rank.png"})}},Tr=Object.values(Sr),Rr=["no-sticker","gold","silver","beta","holo5","holo4","holo3","holo2","holo1","limited","unlimited"].map((e=>({label:"no-sticker"===e?Object(m.jsx)(p.a,{}):Object(m.jsx)("img",{alt:e,src:`/ygocarder/asset/image/sticker/sticker-${e.toLowerCase()}.png`}),value:e}))),Nr=Object.entries({veryStrict:{label:"5",order:1},strict:{label:"4",order:2},loose:{label:"3",order:3},veryLoose:{label:"2",order:4},relaxed:{label:"1",order:5}}).map((e=>{let[t,{label:a,order:r}]=e;return{label:a,value:t,order:r}})).sort(((e,t)=>e.order-t.order));const Lr=xt.b.div`
    z-index: 10;
    display: inline-grid;
    grid-template-columns: 1fr max-content;
    align-items: center;
    column-gap: var(--spacing-sm);
    .char-picker-guideline {

    }
    .char-picker {
        z-index: 1;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(40px, 1fr));
        .handler,
        .ant-btn {
            background-color: var(--main-level-1);
            color: var(--color-heavy);
            text-shadow: var(--ts);
            font-family: Segoe UI Symbol, sans-serif;
            border: 1px solid var(--sub-level-1);
            border-radius: 0;
            padding: 0 var(--spacing);
            + .ant-btn {
                border-left-width: 0;
            }
            &:hover {
                color: var(--main-active);
            }
            &:first-child {
                border-radius: var(--br) 0 0 var(--br);
            }
            &:last-child {
                border-radius: 0 var(--br) var(--br) 0;
            }
        }
        /** Currently char picker no longer movable */
        /* .handler {
            cursor: grabbing;
            background-color: var(--main-level-2);
            height: unset;
            font-size: var(--fs-xl);
            height: var(--fs-xl);
            line-height: 1;
            padding: 0;
            text-align: center;
        } */
    }
    .moveable-control-box {
        .moveable-control.moveable-origin,
        .moveable-line.moveable-direction {
            border-color: transparent;
            background: none;
        }
    }
`,Mr=e=>{let{targetId:t="",onPick:a=()=>{}}=e;const r=Ht(),o=e=>{const r=document.getElementById(t);if(r){const{value:t}=function(e,t){if(document.selection)return e.focus(),document.selection.createRange().text=t,{value:e.value,position:0};if(e.selectionStart||0===e.selectionStart){const a=e.selectionStart,r=e.selectionEnd;return e.value=e.value.substring(0,a)+t+e.value.substring(r,e.value.length),e.selectionStart=a+t.length,e.selectionEnd=a+t.length,e.focus(),{value:e.value,position:a+t.length}}return e.value+=t,{value:e.value,position:0}}(r,e);a(t,e)}};return Object(m.jsxs)(Lr,{tabIndex:-1,className:"char-picker-container",children:[Object(m.jsx)("div",{id:"char-picker",className:"char-picker",children:["\u221e","\u2606","\u25cf","\xa9","\u2122","\u2c6f","\u042f"].map((e=>Object(m.jsx)("button",{tabIndex:-1,className:"ant-btn",onClick:()=>o(e),children:e},e)))}),Object(m.jsx)("div",{className:"char-picker-guideline",children:Object(m.jsx)(qa,{content:Object(m.jsxs)(m.Fragment,{children:[r["input.char-picker.guide.header"],Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{children:r["input.char-picker.guide.instruction-1"]}),Object(m.jsx)("li",{children:r["input.char-picker.guide.instruction-2"]})]})]})})})]})};var Er=a(53),Ir=a(455),Ar=a(447),Br=a(151);a(406),a(407);const $r=Object(r.forwardRef)(((e,t)=>{let{color:a,onSelect:o,onOffsetChange:n,onRemove:l}=e;const i=Ht(),[s,c]=Object(r.useState)(a),[d,u]=Object(r.useState)(0),[p,b]=Object(r.useState)(-1),f=Object(r.useRef)(Bt()(u,250)).current;return Object(r.useImperativeHandle)(t,(()=>({setColor:e=>{let{color:t,offset:a,id:r}=e;const{min:o,max:n,round:l}=Math;c(t),u(n(0,o(100,l(100*parseFloat(a))))),b(r)},setCurrentOffset:(e,t)=>{const{min:a,max:r,round:o}=Math;e===p&&u(r(0,a(100,o(100*parseFloat(t)))))}}))),Object(r.useEffect)((()=>{p>0&&(null===n||void 0===n||n(p,""+d/100))}),[p,d,n]),Object(m.jsxs)("div",{className:"stop-point-control-panel",children:[Object(m.jsxs)("div",{className:"stop-point-offset-input",children:[Object(m.jsxs)("div",{children:[i["input.name-style.gradient.color-stop.label"],": ",Object(m.jsx)(Ar.a,{value:d,size:"small",max:100,min:0,onChange:e=>f("string"===typeof e?parseInt(e):null!==e&&void 0!==e?e:0)})]}),Object(m.jsx)(_a.a,{className:"remove-stop-color",size:"small",onClick:()=>null===l||void 0===l?void 0:l(p),children:i["input.name-style.gradient.color-remove.label"]})]}),Object(m.jsx)(Er.a,{styles:{default:{picker:{color:"#000000",background:"var(--main-level-3)",boxShadow:"none"},body:{padding:"var(--spacing) var(--spacing)"}}},disableAlpha:!0,color:s,onChange:e=>c(e.hex),onChangeComplete:e=>{c(e.hex),null===o||void 0===o||o(e.hex)}})]})})),Wr=e=>({colorList:e,raw:rt(e)}),Pr=e=>{var t,a;let{palette:o=rt(at()),angle:n=180,memoizedOnChange:l}=e;const i=Ht(),s=Object(r.useRef)(null),[c,d]=Object(r.useState)(n),[u,p]=Object(r.useState)((()=>{var e,t;const a=ot(o);return{raw:o,colorList:a,currentControlId:null!==(e=null===(t=a[0])||void 0===t?void 0:t.id)&&void 0!==e?e:-1}})),b=Object(r.useCallback)(((e,t)=>p((a=>{const r=a.colorList.map((a=>a.id===e?{...a,offset:t}:a));return{...a,...Wr(r)}}))),[]);Object(r.useEffect)((()=>{d(n)}),[n]),Object(r.useEffect)((()=>{var e,t;const a=ot(o);p({raw:o,colorList:a,currentControlId:null!==(e=null===(t=a[0])||void 0===t?void 0:t.id)&&void 0!==e?e:-1})}),[o]);const f=Object(r.useRef)(!1);return Object(r.useEffect)((()=>{var e;u.colorList[0]&&f.current&&(f.current=!0,null===(e=s.current)||void 0===e||e.setColor(u.colorList[0]))}),[u.colorList]),Object(r.useEffect)((()=>{let e=!0;return setTimeout((()=>{const{colorList:t,currentControlId:a}=u;if(e&&a>=0){var r;const e=t.find((e=>e.id===a));e&&(null===(r=s.current)||void 0===r||r.setCurrentOffset(a,e.offset))}}),100),()=>{e=!1}}),[u]),Object(r.useEffect)((()=>{let e=!0;return setTimeout((()=>{e&&l(u.colorList,c)}),200),()=>{e=!1}}),[u,c,l]),Object(m.jsxs)("div",{className:"controls-wrapper gradient-picker-container",children:[Object(m.jsxs)("div",{className:"gradient-angle-control",children:[Object(m.jsx)("h2",{children:i["input.name-style.gradient.color-point.label"]}),Object(m.jsxs)(_a.a,{size:"small",className:"add-stop-color",disabled:(null!==(t=null===(a=u.colorList)||void 0===a?void 0:a.length)&&void 0!==t?t:1e4)>20,onClick:()=>{p((e=>{const t=[...e.colorList,{offset:"0.5",color:"#ffffff",id:e.colorList.length+1}].sort(((e,t)=>Number(e.offset)-Number(t.offset)));return{...e,...Wr(t)}}))},children:[i["input.name-style.gradient.add-point.label"]," (",u.colorList.length,"/",20,")"]}),Object(m.jsxs)("div",{className:"angle-picker-container",children:[Object(m.jsx)("h2",{children:i["input.name-style.gradient.gradient-direction.label"]}),Object(m.jsx)(Br.AnglePicker,{angle:c,size:120,setAngle:d})]})]}),Object(m.jsx)("div",{className:"stop-color-picker-container",children:Object(m.jsx)(Br.GradientPicker,{width:370,paletteHeight:32,maxStops:20,minStops:2,stopRemovalDrop:99999,palette:u.colorList,onPaletteChange:e=>p((t=>({...t,...Wr(e)}))),onColorStopSelect:e=>{var t;p((t=>({...t,currentControlId:e.id}))),null===(t=s.current)||void 0===t||t.setColor(e)},children:Object(m.jsx)($r,{ref:s,onOffsetChange:b,onRemove:e=>{p((t=>{var a,r;const o=t.colorList.filter((t=>t.id!==e)),n=null!==(a=null===o||void 0===o?void 0:o[0].id)&&void 0!==a?a:-1;return n>0&&(null===(r=s.current)||void 0===r||r.setColor(u.colorList[n])),{...Wr(o),currentControlId:n}}))}})})})]})},Dr=xt.b.div`
    background-color: var(--main-level-4);
    ${e=>{let{$active:t}=e;return t?"border: var(--bw) solid var(--main-active);":"border: var(--bw) solid var(--sub-level-1);"}}
    padding: var(--spacing-xxs) var(--spacing-xs);
    margin: calc(-1 * var(--spacing-xxs)) 0;
    border-radius: var(--br-lg);
    box-shadow: var(--bs-button);
    color: var(--color-heavy);
    cursor: pointer;
    ${e=>{let{$softMode:t,$active:a}=e;return t?`\n                border: var(--bw) solid var(--main-level-4);\n                ${a?"outline: var(--bw) solid var(--main-active);":""}\n            `:""}}
    &:hover {
        background-color: var(--sub-level-4);
    }
`,zr=Object(xt.b)(jr.Container)`
    display: grid;
    grid-template-columns: repeat(2, 200px);
    gap: var(--spacing-sm);
    padding: var(--spacing-xs);
    .alert {
        grid-column: span 2;
        font-size: var(--fs-sm);
        text-align: center;
    }
`,Hr=xt.b.div`
    line-height: 0;
    cursor: pointer;
    align-self: center;
    text-align: center;
    &:not(.menu-off) {
        min-height: 23.2px;
        &.menu-active {
            outline: var(--bw-lg) solid var(--main-active);
            &:hover {
                outline: var(--bw-lg) solid var(--sub-active);
            }
        }
        :hover {
            outline: var(--bw-lg) solid var(--sub-active);
        }
    }
    &.menu-off {
        &:hover {
            color: var(--main-link);
            .anticon {
                color: var(--main-link);
            }
        }
    }
    img {
        max-width: 100%;
        border: var(--bw) solid var(--sub-level-1);
    }
`,Kr=Object(xt.b)(jr.Container)`
    display: grid;
    grid-template-columns: repeat(4, 120px);
    gap: var(--spacing-sm);
    padding: var(--spacing-xs);
    &:focus-visible {
        outline: none;
        box-shadow: 0 0 0 2px var(--focus) inset;
    }
`,Gr=xt.b.div`
    line-height: 0;
    cursor: pointer;
    min-height: 26.13px;
    &.menu-active {
        outline: var(--bw-lg) solid var(--main-active);
        &:hover {
            outline: var(--bw-lg) solid var(--sub-active);
        }
    }
    &.preset-item-focused {
        outline: var(--bw-lg) solid var(--sub-active);
    }
    :hover {
        outline: var(--bw-lg) solid var(--sub-active);
    }
    img {
        max-width: 100%;
    }
`;var Yr=a(438),Xr=a(213);const Vr=Object(r.forwardRef)(((e,t)=>{let{className:a,defaultValue:o,fieldMap:n,labelMap:l,onChange:i}=e;const s=Ht(),{x:c,y:d,color:u,width:p}=n,[b,f]=Object(r.useState)((()=>{const e=o[c],t=o[d],a=o[u],r=o[p];return{x:null!==e&&void 0!==e?e:0,y:null!==t&&void 0!==t?t:0,width:null!==r&&void 0!==r?r:0,color:a}})),{x:h,y:g,color:y,width:v}=b,x=l[p];return Object(r.useEffect)((()=>{let e=!0;return setTimeout((()=>{e&&i(b)}),500),()=>{e=!1}}),[b]),Object(r.useImperativeHandle)(t,(()=>({setValue:e=>{const t=Object.keys(e);for(const a in t)if(e[a]!==b[a])return void f((t=>({...t,...e})))}}))),Object(m.jsxs)("div",{className:a,children:[Object(m.jsx)("h2",{children:s["input.name-style.slider.position.label"]}),Object(m.jsxs)("div",{className:"line-position",children:[Object(m.jsx)(Xr.a,{axis:"xy",styles:{track:{backgroundColor:"var(--main-slider)",width:100,height:100,gridRow:"span 3",position:"relative"},thumb:{backgroundColor:"var(--sub-slider)",zIndex:10}},xmax:5,xmin:-5,ymax:5,ymin:-5,x:null!==h&&void 0!==h?h:0,y:null!==g&&void 0!==g?g:0,onChange:e=>{let{x:t,y:a}=e;return f((e=>({...e,x:t,y:a})))}}),Object(m.jsxs)("div",{className:"single-slider",children:[s["input.name-style.slider.x-offset.label"],": ",Object(m.jsx)(Ar.a,{size:"small",value:h,onChange:e=>f((t=>({...t,x:"number"===typeof e?e:parseInt(null!==e&&void 0!==e?e:"0")})))})]}),Object(m.jsxs)("div",{className:"single-slider",children:[s["input.name-style.slider.y-offset.label"],": ",Object(m.jsx)(Ar.a,{size:"small",value:g,onChange:e=>f((t=>({...t,y:"number"===typeof e?e:parseInt(null!==e&&void 0!==e?e:"0")})))})]}),Object(m.jsxs)("div",{className:"single-slider",children:[x,": ",Object(m.jsx)(Yr.a,{value:v,min:1,max:10,onChange:e=>{"number"===typeof e&&f((t=>({...t,width:e})))}})]})]}),Object(m.jsx)("h2",{children:s["input.name-style.slider.color.label"]}),Object(m.jsx)(Er.b,{colors:Xe,color:y,onChangeComplete:e=>f((t=>({...t,color:e.hex})))})]})})),Ur=Object(r.forwardRef)(((e,t)=>{let{active:a,value:o,onClick:n,onCancel:l}=e;const i=Object(r.useRef)(null),[s,c]=Object(r.useState)(0);return Object(r.useImperativeHandle)(t,(()=>({focus:()=>{var e;return null===(e=i.current)||void 0===e?void 0:e.focus()}}))),Object(m.jsx)(Kr,{ref:i,...nt({stopPropagation:!0,optionLength:x.length,setFocus:c,onTrigger:()=>{s>=0&&n(x[s])},onCancel:()=>{null===l||void 0===l||l()}}),children:x.map(((e,t)=>{const{key:r,image:l,label:i}=e;return Object(m.jsx)(Gr,{className:vt("preset-item",o.preset===r&&a?"menu-active":"",s===t?"preset-item-focused":""),onClick:t=>{t.stopPropagation(),n(e)},children:Object(m.jsx)("img",{className:"preset-preview",src:`/ygocarder/${l}`,alt:i})},r)}))})}));a(413);const qr=Object(r.forwardRef)(((e,t)=>{let{frameInfo:a,defaultType:o,defaultValue:n,showExtraDecorativeOption:l,onChange:i}=e;const s=Ht(),c=Object(r.useRef)(null),[d,u]=Object(r.useState)(-1),[b,f]=Object(r.useState)(!1),[h,g]=Object(r.useState)(o),[y,x]=Object(r.useState)(n),[j,O]=(()=>{const[e,t]=Object(r.useState)(0);return[Object(r.useCallback)((()=>{t((e=>e+1))}),[]),e]})(),F=Object(r.useRef)(Bt()(i,250)).current,k=Object(r.useCallback)(((e,t)=>{x((a=>({...a,gradientAngle:t,gradientColor:rt(e)}))),j()}),[j]),C=Vt((e=>e.setting.reduceMotionColor)),S=Object(r.useMemo)((()=>{return e=s,Object.values(G).map((t=>{let{value:a,labelKey:r}=t;return{label:e[r],value:a}}));var e}),[s]);Object(r.useEffect)((()=>{0!==O&&(g("custom"),F("custom",y))}),[O]);const T=Object(r.useRef)(null),R=Object(r.useRef)(null);Object(r.useImperativeHandle)(t,(()=>({setValue:e=>{var t,a;x((t=>({...t,...e})));const{lineColor:r,lineWidth:o,lineOffsetX:n,lineOffsetY:l,shadowBlur:i,shadowColor:s,shadowOffsetX:c,shadowOffsetY:d}=e;null===(t=T.current)||void 0===t||t.setValue({x:c,y:d,width:i,color:s}),null===(a=R.current)||void 0===a||a.setValue({x:n,y:l,width:o,color:r})}})));const{fillStyle:N,headTextFillStyle:L,hasOutline:M,hasShadow:E,hasGradient:I,gradientColor:A,gradientAngle:B,pattern:$,font:W}=y,{labelBackgroundColor:P,labelBackgroundImage:D}=null!==a&&void 0!==a?a:{},z={background:P,backgroundImage:D},H="custom"===h,K="predefined"===h,Y="name-style-option-input-container",X=()=>{g("auto"),"auto"!==h&&F("auto",y)},V=()=>{var e;const t=y.preset?null===(e=v[y.preset])||void 0===e?void 0:e.value:{};g("predefined"),x((e=>({...e,...t}))),F("predefined",{...y,...t})},U=()=>{g("custom"),"custom"!==h&&F("custom",y)};return Object(m.jsx)("div",{className:"ant-input-group-wrapper text-style-input",children:Object(m.jsxs)("span",{className:"ant-input-wrapper ant-input-group",children:[Object(m.jsx)("span",{className:"ant-input-group-addon",children:s["input.name-style.label"]}),Object(m.jsxs)("span",{className:"name-style-input-container",children:[Object(m.jsxs)("div",{id:Y,className:"ant-radio-group ant-radio-group-outline name-style-option-input-container",...nt({setFocus:u,optionLength:3,onKeyPress:e=>{if(1===d&&("ArrowDown"===e.key||"Enter"===e.key||"  "===e.key))return e.preventDefault(),u(1),f(!0),setTimeout((()=>{var e;1===d&&(null===(e=c.current)||void 0===e||e.focus())}),200),!1},onTrigger(){0===d&&X(),1===d&&V(),2===d&&U()}}),children:[Object(m.jsxs)("label",{className:vt("ant-radio-wrapper","auto"===h&&"ant-radio-wrapper-checked",0===d&&"ant-radio-focused"),onClick:()=>X(),children:[Object(m.jsxs)("span",{className:"ant-radio "+("auto"===h?"ant-radio-checked":""),children:[Object(m.jsx)("input",{tabIndex:-1,type:"radio",className:"ant-radio-input",value:"auto"}),Object(m.jsx)("span",{className:"ant-radio-inner"})]}),Object(m.jsx)("span",{className:"ant-radio-label",children:s["input.name-style.type.auto.label"]})]}),Object(m.jsx)("span",{className:"name-style-option-break"}),Object(m.jsx)("label",{className:vt("ant-radio-wrapper",K&&"ant-radio-wrapper-checked",1===d&&"ant-radio-focused"),onClick:()=>V(),children:Object(m.jsx)(Ua.a,{visible:b,onVisibleChange:f,trigger:["hover","click"],placement:"bottomLeft",overlayClassName:"predefined-picker-overlay",content:Object(m.jsx)("div",{className:"overlay-event-absorber",children:Object(m.jsx)(Ur,{ref:c,active:K,value:y,onCancel:()=>{var e;f(!1),null===(e=document.getElementById(Y))||void 0===e||e.focus()},onClick:e=>{var t;let{key:a}=e;const r=a?null===(t=v[a])||void 0===t?void 0:t.value:{};g("predefined"),x((e=>({...e,...r}))),F("predefined",{...y,...r})}})}),children:Object(m.jsxs)("span",{className:"name-style-option-label",children:[Object(m.jsxs)("span",{className:"ant-radio "+(K?"ant-radio-checked":""),children:[Object(m.jsx)("input",{tabIndex:-1,type:"radio",className:"ant-radio-input",value:"predefined"}),Object(m.jsx)("span",{className:"ant-radio-inner"})]}),Object(m.jsx)("span",{className:"ant-radio-label",children:s["input.name-style.type.predefined.label"]})]})})}),Object(m.jsx)("span",{className:"name-style-option-break"}),Object(m.jsx)("label",{className:vt("ant-radio-wrapper",H&&"ant-radio-wrapper-checked",2===d&&"ant-radio-focused"),onClick:()=>U(),children:Object(m.jsxs)("span",{children:[Object(m.jsxs)("span",{className:"ant-radio "+(H?"ant-radio-checked":""),children:[Object(m.jsx)("input",{tabIndex:-1,type:"radio",className:"ant-radio-input",value:"custom"}),Object(m.jsx)("span",{className:"ant-radio-inner"})]}),Object(m.jsx)("span",{className:"ant-radio-label ant-radio-label-custom",children:s["input.name-style.type.custom.label"]})]})})]}),Object(m.jsxs)("div",{className:"style-picker",children:[Object(m.jsx)(Ua.a,{trigger:["click"],overlayClassName:"global-input-overlay global-style-picker-overlay",content:Object(m.jsx)("div",{className:"overlay-event-absorber",children:Object(m.jsxs)("div",{className:"custom-style-picker",children:[Object(m.jsxs)("div",{className:"custom-style-text",children:[Object(m.jsx)("h3",{children:s["input.name-style.color.text.label"]}),Object(m.jsx)(Er.b,{colors:Xe,color:N,onChangeComplete:e=>{g("custom"),x((t=>({...t,fillStyle:e.hex}))),j()}})]}),Object(m.jsx)("hr",{}),Object(m.jsxs)("div",{className:"custom-style-text",children:[Object(m.jsx)("h3",{children:s["input.name-style.color.ruby.label"]}),Object(m.jsx)(Er.b,{colors:Xe,color:L,onChangeComplete:e=>{g("custom"),x((t=>({...t,headTextFillStyle:e.hex}))),j()}})]})]})}),placement:"bottom",children:Object(m.jsxs)(Dr,{$softMode:C,className:"picker-dropdown color-picker-dropdown",children:[s["input.name-style.color.label"]," ",Object(m.jsx)(Ir.a,{})]})},"color-picker"),l&&Object(m.jsx)(Ua.a,{trigger:["click"],overlayClassName:"global-input-overlay global-style-picker-overlay",content:Object(m.jsx)("div",{className:"overlay-event-absorber",children:Object(m.jsxs)("div",{className:"custom-style-picker",children:[Object(m.jsx)("h3",{className:"custom-style-expand",children:Object(m.jsx)(cr.a,{value:"has-shadow",checked:E,onChange:()=>{g("custom"),x((e=>({...e,hasShadow:!e.hasShadow}))),j()},children:s["input.name-style.shadow.toggle.label"]})}),E&&Object(m.jsx)(Vr,{ref:T,className:"custom-style-shadow",fieldMap:{color:"shadowColor",width:"shadowBlur",x:"shadowOffsetX",y:"shadowOffsetY"},labelMap:{shadowBlur:s["input.name-style.slider.blur.label"]},defaultValue:y,onChange:e=>{let{color:t,width:a,x:r,y:o}=e;x((e=>({...e,shadowBlur:a,shadowColor:t,shadowOffsetX:r,shadowOffsetY:o}))),j()}})]})}),placement:"bottom",children:Object(m.jsxs)(Dr,{$softMode:C,$active:H&&E,className:"picker-dropdown shadow-picker-dropdown",children:[s["input.name-style.shadow.label"]," ",Object(m.jsx)(Ir.a,{})]})},"shadow-picker"),Object(m.jsx)(Ua.a,{trigger:["click"],overlayClassName:"global-input-overlay global-style-picker-overlay",content:Object(m.jsx)("div",{className:"overlay-event-absorber",children:Object(m.jsxs)("div",{className:"custom-style-picker",children:[Object(m.jsx)("h3",{className:"custom-style-expand",children:Object(m.jsx)(cr.a,{value:"has-line",checked:M,onChange:()=>{g("custom"),x((e=>({...e,hasOutline:!e.hasOutline}))),j()},children:s["input.name-style.outline.toggle.label"]})}),M&&Object(m.jsx)(Vr,{ref:R,className:"custom-style-line",fieldMap:{color:"lineColor",width:"lineWidth",x:"lineOffsetX",y:"lineOffsetY"},labelMap:{lineWidth:s["input.name-style.slider.thickness.label"]},defaultValue:y,onChange:e=>{let{color:t,width:a,x:r,y:o}=e;x((e=>({...e,lineWidth:a,lineColor:t,lineOffsetX:r,lineOffsetY:o}))),j()}})]})}),placement:"bottom",children:Object(m.jsxs)(Dr,{$softMode:C,$active:H&&M,className:"picker-dropdown outline-picker-dropdown",children:[s["input.name-style.outline.label"]," ",Object(m.jsx)(Ir.a,{})]})},"outline-picker"),l&&Object(m.jsx)(Ua.a,{trigger:["click"],overlayClassName:"global-input-overlay global-style-picker-overlay",content:Object(m.jsx)("div",{className:"overlay-event-absorber",children:Object(m.jsxs)("div",{className:"custom-style-picker",children:[Object(m.jsx)("h3",{className:"custom-style-expand",children:Object(m.jsx)(cr.a,{value:"has-gradient",checked:I,onChange:()=>{g("custom"),x((e=>({...e,hasGradient:!e.hasGradient}))),j()},children:s["input.name-style.gradient.toggle.label"]})}),I&&Object(m.jsx)("div",{className:"custom-style-gradient",children:Object(m.jsx)(Pr,{angle:B,palette:A,memoizedOnChange:k})})]})}),placement:"bottom",children:Object(m.jsxs)(Dr,{$softMode:C,$active:H&&I,className:"picker-dropdown gradient-picker-dropdown",children:[s["input.name-style.gradient.label"]," ",Object(m.jsx)(Ir.a,{})]})},"gradient-picker"),l&&Object(m.jsx)(Ua.a,{trigger:["click"],overlayClassName:"global-input-overlay pattern-picker-overlay",content:Object(m.jsx)("div",{className:"overlay-event-absorber",children:Object(m.jsxs)(zr,{onClick:e=>e.stopPropagation(),children:[Object(m.jsx)("div",{className:"alert",children:s["input.name-style.pattern.alert"]}),w.map((e=>{let{key:t,patternImage:a}=e;return Object(m.jsx)(Hr,{className:["pattern-option",y.pattern===t?"menu-active":"",a?"":"menu-off"].join(" "),onClick:()=>{x((e=>({...e,pattern:t}))),j()},children:a?Object(m.jsx)("img",{style:a?z:{},className:"pattern-image",src:`/ygocarder/asset/image/finish-name/${a}.png`,alt:t}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(p.a,{})," ",s["input.name-style.pattern.no-pattern.label"]]})},t)}))]})}),placement:"bottomLeft",children:Object(m.jsx)(Dr,{$softMode:C,$active:H&&"string"===typeof $&&"none"!==$,className:"picker-dropdown pattern-picker-dropdown",children:s["input.name-style.pattern.label"]})},"pattern-picker"),Object(m.jsx)(Ua.a,{trigger:["click"],overlayClassName:"global-input-overlay font-picker-overlay",content:Object(m.jsx)("div",{className:"overlay-event-absorber",children:Object(m.jsx)(jr.Container,{children:S.map((e=>{let{value:t,label:a}=e;return Object(m.jsx)(jr.Option,{className:W===t?"menu-active":"",onClick:()=>{x((e=>({...e,font:t}))),j()},children:a},t)}))})}),placement:"bottomLeft",children:Object(m.jsx)(Dr,{$softMode:C,className:"picker-dropdown font-picker-dropdown",children:s["input.name-style.font.label"]})},"font-picker")]})]})]})})})),Jr=xt.a`
    display: flex;
    .checkbox-train-input-group,
    .radio-train-input-group {
        display: flex;
        flex: 1 1 auto;
		&:focus-visible {
			.radio-train-focused,
			.checkbox-train-focused {
				background-color: var(--main-level-3);
			}
		}
    }
    .ant-radio-button-wrapper {
        user-select: none;
    }
    .ant-radio-button-wrapper:first-child,
    .ant-radio-button-wrapper:last-child {
        border-radius: 0;
    }
    .ant-radio-button-wrapper:not(.ant-radio-button-wrapper-checked):first-child {
        border-left-color: var(--sub-level-1);
    }
`,_r=xt.a`
    .checkbox-train-input-group,
    .radio-train-input-group {
		display: flex;
		flex-wrap: wrap;
		column-gap: var(--spacing-xs);
		row-gap: var(--spacing-xs);
		box-shadow: none;
		border-radius: 0;
		&:focus-visible {
			outline: 3px solid var(--focus); // +1 width size to account for shadow
		}
		.ant-radio-button-wrapper:first-child,
		.ant-radio-button-wrapper:last-child {
			border-radius: 0;
		}
		.ant-radio-button-wrapper {
			flex: 1;
			white-space: nowrap;
			border: none;
			box-shadow: var(--bs-1);
			padding: 0;
			min-width: 90px;
			height: 28px;
			line-height: 28px;
			text-align: center;
			text-shadow: none;
			font-size: var(--fs-sm);
			&:hover {
				outline: var(--bw) solid var(--main-active);
				outline-offset: var(--bw);
			}
			&::before {
				display: none;
			}
		}
		.ant-radio-button-wrapper-checked {
			outline: var(--bw) solid var(--main-active);
			outline-offset: var(--bw);
		}
	}
`,Zr=xt.b.div`
    ${Jr}
`,Qr=Object(r.forwardRef)(((e,t)=>{let{onChange:a,value:o,optionList:n,children:l,suffix:i,className:s,strict:c=!1}=e;const[d,u]=Object(r.useState)(-1),p=Object(r.useRef)(null),b=n.length;return Object(r.useImperativeHandle)(t,(()=>({focus:()=>{var e;return null===(e=p.current)||void 0===e?void 0:e.focus()}}))),Object(m.jsxs)(Zr,{className:["ant-radio-group ant-radio-group-outline radio-train",s].join(" "),children:[l&&Object(m.jsx)("label",{className:"standalone-addon ant-input-group-addon",children:l}),Object(m.jsx)("div",{ref:p,className:"radio-train-input-group",...nt({setFocus:u,optionLength:b,onTrigger:()=>{const e=n[d];e&&a(e.value)}}),children:n.map(((e,t)=>{let{value:r,props:n,label:l,tooltipProps:i}=e;const{className:s}=null!==n&&void 0!==n?n:{},u=c?r===o:`${r}`===`${o}`;return Object(m.jsx)(wt.a,{overlay:null,...i,children:Object(m.jsxs)("label",{...n,className:["ant-radio-button-wrapper",u?"ant-radio-button-wrapper-checked":"",null!==s&&void 0!==s?s:"",d===t?"radio-train-focused":""].join(" "),onClick:()=>a(r),children:[Object(m.jsx)("span",{className:"ant-radio-button "+(u?"ant-radio-button-checked":""),children:Object(m.jsx)("span",{className:"ant-radio-button-inner"})}),Object(m.jsx)("span",{className:"label",children:l})]},r)})}))}),i]})})),eo=Object(xt.b)(Qr)`
	${_r}
`,to=e=>{let{onSTFrameChange:t}=e;const{setting:a}=Vt(),{showExtraDecorativeOption:o}=a,n=Object(r.useMemo)((()=>kr().filter((e=>o||"normal"===e.edition))),[o]),{frame:l,setCard:i}=Xt(Object(Ga.useShallow)((e=>{let{card:t,setCard:a}=e;return{frame:t.frame,setCard:a}}))),s=Object(r.useCallback)((e=>{i((a=>{const{typeAbility:r,isPendulum:o,attribute:n,format:l}=a,i=`${e}`,s="spell"===i||"trap"===i,c="tcg"===l?{"Spell Card":"Spell Card","Trap Card":"Trap Card"}:Z,d="spell"===i?[c["Spell Card"]]:"trap"===i?[c["Trap Card"]]:r;return s&&t(d),{...a,frame:i,isPendulum:"link"!==i&&o,attribute:s?`${i}`.toUpperCase():n,typeAbility:d}}))}),[i,t]);return Object(m.jsx)(eo,{className:"frame-radio",value:l,onChange:s,optionList:n})},ao=xt.b.div`
    ${Jr}
`,ro=e=>{let{onChange:t,value:a,optionList:o,children:n,className:l}=e;const[i,s]=Object(r.useState)(-1),c=o.length;return Object(m.jsxs)(ao,{className:["ant-radio-group ant-radio-group-outline checkbox-train",l].join(" "),children:[n&&Object(m.jsx)("label",{className:"standalone-addon ant-input-group-addon",children:n}),Object(m.jsx)("div",{className:"checkbox-train-input-group",...nt({setFocus:s,optionLength:c,onTrigger:()=>{const e=o[i];if(e){const r=!!Array.isArray(a)&&a.includes(`${e.value}`);t(r?a.filter((t=>`${e.value}`!==t)):[...a,`${e.value}`])}}}),children:o.map(((e,r)=>{const{label:o,value:n,props:l}=e,s=!!Array.isArray(a)&&a.includes(`${n}`);return Object(m.jsxs)("label",{...l,className:["ant-radio-button-wrapper",s?"ant-radio-button-wrapper-checked":"",i===r?"checkbox-train-focused":""].join(" "),onClick:()=>{t(s?a.filter((e=>`${n}`!==e)):[...a,`${n}`])},children:[Object(m.jsx)("span",{className:"ant-radio-button "+(s?"ant-radio-button-checked":""),children:Object(m.jsx)("span",{className:"ant-radio-button-inner"})}),Object(m.jsx)("span",{className:"label",children:o})]},n)}))})]})},oo=Object(xt.b)(Xa)`
    display: grid;
    grid-template-columns: max-content max-content;
    align-items: start;
    gap: 0;
    .card-image-source-input {
        display: flex;
        flex-direction: column-reverse;
        .online-image-tip {
            text-align: center;
        }
    }
    .card-cropper {
        width: 375px;
        text-align: center;
    }
`,no=Object(r.forwardRef)(((e,t)=>{let{backgroundColor:a,children:o,receivingCanvas:n,onSourceLoaded:l,onTainted:i,onCropChange:s}=e;const c=Ht(),{background:d,backgroundCrop:p,backgroundType:b,isPendulum:f,opacity:h,getUpdater:g,setCard:y}=Xt(Object(Ga.useShallow)((e=>{let{card:{background:t,backgroundCrop:a,backgroundType:r,isPendulum:o,opacity:n},getUpdater:l,setCard:i}=e;return{background:t,backgroundCrop:a,backgroundType:r,isPendulum:o,opacity:n,getUpdater:l,setCard:i}}))),v=Object(r.useRef)(null),x=Object(r.useMemo)((()=>g("background")),[g]),j=Object(r.useCallback)(((e,t)=>{null===s||void 0===s||s(e,t),e&&y((t=>({...t,backgroundCrop:e})))}),[s,y]);return Object(r.useEffect)((()=>{var e;null===(e=v.current)||void 0===e||e.setRatio(u(f,h,b).ratio)}),[b,h,f]),Object(r.useImperativeHandle)(t,(()=>({setValue:e=>{let{background:t,backgroundCrop:a}=e;var r;"string"===typeof t&&a&&(null===(r=v.current)||void 0===r||r.forceExternalSource(t,a))}}))),Object(m.jsx)(oo,{ref:v,title:c["input.background-image.label"],backgroundColor:a,defaultExternalSource:d,defaultCropInfo:p,receivingCanvas:n,onSourceChange:x,onCropChange:j,onTainted:i,onSourceLoaded:l,ratio:u(f,h,b).ratio,beforeCropper:null,children:o})}));var lo=a(456);a(414);const io=xt.b.span`
    white-space: pre-line;
`,so=xt.b.div`
    display: flex;
    flex-direction: row;
    flex-wrap: wrap;
    column-gap: var(--spacing-sm);
    row-gap: var(--spacing-sm);
    padding: 2px 0;
    align-items: center;
    .slider-label,
    .ant-slider,
    .slider-padding {
        border: var(--bw) solid var(--sub-level-1);
        background-color: var(--main-level-4);
    }
    .slider-label {
        display: inline-flex;
        column-gap: var(--spacing-xs);
        border-right: none;
        padding: var(--spacing-xxs) var(--spacing-xs);
        border-radius: var(--br) 0 0 var(--br);
        box-shadow: var(--bs-input);
        .ant-checkbox-wrapper {
            transform: translateY(-1px); // Alignment
        }
    }
    .ant-slider {
        margin: 0;
        border-left: none;
        border-right: none;
        height: 28px; // Alignment
        padding-top: 11px; // Alignment
    }
    .slider-padding {
        border-left: none;
        border-radius: 0 var(--br) var(--br) 0;
    }
    .ant-slider-rail,
    .ant-slider-track {
        border-radius: 0 var(--br) var(--br) 0;
    }
    .card-opacity-slider {
        flex: 0 1 auto;
        display: grid;
        grid-template-columns: max-content 60px 45px 12px;
        &.inactive {
            .slider-label,
            .ant-slider,
            .slider-padding {
                background-color: var(--main-level-3);
            }
        }
    }
    .ant-input-number.ant-input-number-sm {
        height: 28px; // Alignment
        width: unset;
        border-radius: 0;
        box-shadow: var(--bs-input);
        .ant-input-number-input {
            height: 26px; // Alignment
        }
    }
    .background-preview {
        display: inline-block;
        line-height: 0;
        width: 17px;
        height: 17px; // Alignment
        align-self: center;
        border: 1px solid #333333;
        cursor: pointer;
        text-align: center;
        user-select: none;
        &:hover {
            box-shadow: 0 0 2px 0 #222222;
        }
        .background-image-preview {
            max-width: 15px;
            max-height: 15px;
        }
        .no-background-icon {
            font-size: 15px; // Alignment
        }
    }
`,co=xt.b.div`
    &.overlay-no-background-image {
        .card-image-cropper {
            grid-template-columns: 1fr;
        }
        .card-cropper {
            min-height: 0;
            line-height: 0;
            width: 0;
            visibility: hidden;
        }
        .card-image-source-input {
            padding-right: 0;
            margin-right: 0;
            border-right: none;
        }
        i {
            max-width: 247px; // Alignment
        }
    }
    i {
        display: inline-block;
        font-size: var(--fs-sm);
        color: var(--color);
        font-weight: normal;
    }
    .background-picker {
        padding: var(--spacing-xs);
        /** No display none here, again we want to keep card cropper painted, just not visible */
        &.overlay-no-background {
            visibility: hidden;
            height: 0;
            width: 0;
            padding: 0;
        }
    }
    .card-image-source-input {
        padding-right: var(--spacing-xs);
        margin-right: var(--spacing-xs);
        border-right: var(--bw) solid var(--sub-level-4);
        .type-section h2 {
            margin-top: var(--spacing-xs);
        }
        .color-section h2 {
            padding-top: 0;
            padding-left: 0;
        }
    }
    .color-section {
        > h2 + div {
            > div:first-child {
                box-shadow: none !important; // Override inline style
            }
            > div:nth-child(2) {
                border: var(--bw) solid var(--main-level-1);
            }
        }
    }
`,uo=Object(r.forwardRef)(((e,t)=>{let{receivingCanvas:a,defaultValue:o,onTainted:n,onChange:l,onSourceLoaded:i,onCropChange:d}=e;const u=Ht(),{hasBackground:p,backgroundType:b,isPendulum:f,background:h,setCard:g,getUpdater:y}=Xt(Object(Ga.useShallow)((e=>{let{card:{isPendulum:t,hasBackground:a,backgroundType:r,background:o},setCard:n,getUpdater:l}=e;return{hasBackground:a,backgroundType:r,isPendulum:t,background:o,setCard:n,getUpdater:l}}))),[v,x]=Object(r.useState)(!0),[j,w]=Object(r.useState)(!0),[O,F]=Object(r.useState)({...c(),...o}),k=Object(r.useRef)(null),C=Object(r.useMemo)((()=>y("backgroundType")),[y]),S=Object(r.useCallback)((e=>g((t=>({...t,hasBackground:e.target.checked})))),[g]);Object(r.useEffect)((()=>{let e=!0;return setTimeout((()=>{e&&l(O)}),500),()=>{e=!1}}),[O]),Object(r.useEffect)((()=>{x(!1),setTimeout((()=>{w(!1)}),250)}),[]),Object(r.useImperativeHandle)(t,(()=>({setValue:e=>{let{background:t,backgroundCrop:a,...r}=e;var o;"string"===typeof t&&a&&(null===(o=k.current)||void 0===o||o.setValue({background:t,backgroundCrop:a}));for(const n in r)r[n]!==O[n]&&F((e=>({...e,...r})))}})));const T=0===(null!==h&&void 0!==h?h:"").length;return Object(m.jsxs)(so,{className:"card-opacity-slider-container",children:[Object(m.jsx)(wt.a,{overlayClassName:"long-tooltip-overlay",title:Object(m.jsx)(io,{children:u["input.opacity.boundless.tooltip"]}),children:Object(m.jsx)(cr.a,{className:"art-frame",onChange:e=>F((t=>({...t,boundless:e.target.checked}))),checked:O.boundless,children:u["input.opacity.boundless.label"]})}),Ye.map((e=>{var t,r,o;let{labelKey:l,type:c,subType:g,tooltipKey:y}=e;if("pendulum"===c&&!f)return null;const w=!!g,R=g&&O[g];return Object(m.jsxs)("div",{className:["card-opacity-slider",R?"":"inactive"].join(" "),children:[Object(m.jsxs)("div",{className:"slider-label",children:["body"===c&&Object(m.jsx)(Ua.a,{visible:v,destroyTooltipOnHide:!1,trigger:["click"],onVisibleChange:x,overlayClassName:["global-input-overlay global-style-picker-overlay layout-picker-overlay",v?"picker-visible":"",j?"picker-hidden":""].join(" "),content:Object(m.jsx)("div",{className:"overlay-event-absorber",children:Object(m.jsxs)(co,{className:["custom-style-picker",T?"overlay-no-background-image":""].join(" "),children:[Object(m.jsxs)("h3",{className:"custom-style-expand "+(p?"":"inactive"),children:[Object(m.jsx)(cr.a,{checked:p,onChange:e=>{S(e);e.target.checked},children:u["input.background.toggle-label"]}),Object(m.jsx)("br",{}),Object(m.jsx)("i",{children:u["input.background.description"]})]}),Object(m.jsx)("div",{className:"background-picker "+(p?"":"overlay-no-background"),children:Object(m.jsx)(no,{ref:k,receivingCanvas:a,onSourceLoaded:i,onTainted:n,onCropChange:d,backgroundColor:O.baseFill,children:Object(m.jsxs)("div",{className:"layout-picker-panel",children:[Object(m.jsxs)("div",{className:"layout-picker-subpanel color-section",children:[Object(m.jsx)("h2",{children:u["input.background-color.label"]}),Object(m.jsx)(Er.b,{colors:Xe,color:O.baseFill,onChangeComplete:e=>{F((t=>({...t,baseFill:e.hex})))}})]}),!T&&Object(m.jsxs)("div",{className:"layout-picker-subpanel type-section",children:[Object(m.jsx)("h2",{children:u["input.background-type.label"]}),Object(m.jsx)(Qr,{onChange:C,optionList:(N={fit:u["input.background-type.fit.label"],full:u["input.background-type.full.label"]},[{value:"fit",label:N.fit},{value:"full",label:N.full}]),value:b})]})]})})})]})}),placement:"bottom",children:Object(m.jsx)("div",{className:"background-preview",style:{backgroundColor:p?O.baseFill:s},children:p?h?Object(m.jsx)("img",{className:"background-image-preview",src:h,alt:"Background"}):null:Object(m.jsx)(lo.a,{className:"no-background-icon"})})}),w&&Object(m.jsx)(wt.a,{title:y&&null!==(t=u[y])&&void 0!==t?t:null,overlayClassName:"long-tooltip-overlay",children:Object(m.jsx)(cr.a,{checked:R,onChange:e=>g&&F((t=>({...t,[g]:e.target.checked})))})}),u[l]]}),Object(m.jsx)(Ar.a,{size:"small",min:0,max:100,onChange:e=>F((t=>({...t,[c]:"number"===typeof e?e:100}))),value:null!==(r=O[c])&&void 0!==r?r:100}),Object(m.jsx)(Yr.a,{min:0,max:100,step:5,onChange:e=>F((t=>({...t,[c]:e}))),value:null!==(o=O[c])&&void 0!==o?o:100}),Object(m.jsx)("div",{className:"slider-padding"})]},c);var N}))]})}));var po=a(457),mo=a(458),bo=a(459);const fo=Object(xt.b)(jr.Container)`
    img {
        max-height: 1.3em;
    }
`,ho=Object(xt.b)(Qr)`
    .custom-star-input {
        margin-left: var(--spacing-sm);
        width: 6.5rem;
    }
    .checkbox-star-suffix {
        display: grid;
        grid-template-columns: max-content max-content;
        column-gap: var(--spacing-sm);
    }
`,go=Object(r.forwardRef)(((e,t)=>{let{isLink:a,isMonster:o,showCreativeOption:n}=e;const l=Ht(),{frame:i,subFamily:s,cardIcon:c,star:d,starAlignment:u,getUpdater:b}=Xt(Object(Ga.useShallow)((e=>{let{card:{frame:t,subFamily:a,cardIcon:r,star:o,starAlignment:n},getUpdater:l}=e;return{frame:t,subFamily:a,cardIcon:r,star:o,starAlignment:n,getUpdater:l}}))),f="dark-synchro"==={frame:i}.frame;const y=Ve({frame:i}),v=Object(r.useMemo)((()=>b("cardIcon")),[b]),x=Object(r.useMemo)((()=>b("subFamily")),[b]),j=Object(r.useMemo)((()=>b("star")),[b]),w=Object(r.useMemo)((()=>b("starAlignment")),[b]);Object(r.useImperativeHandle)(t,(()=>({})));const O="auto"===c?Sr[o?y?"rank":f?"negative-level":"level":"st"]:Sr[c],F=l[O.labelKey],k=n?Object(m.jsxs)(m.Fragment,{children:[F," ",Object(m.jsx)(Ir.a,{})]}):F,C=Object(m.jsx)(Ua.a,{trigger:["click"],overlayClassName:"global-input-overlay pattern-picker-overlay",content:Object(m.jsx)("div",{className:"overlay-event-absorber",children:Object(m.jsx)(fo,{children:Tr.map((e=>{let{fullLabelKey:t,value:a,icon:r}=e;return Object(m.jsxs)(jr.Option,{className:a===c?"menu-active":"",onClick:()=>v(a),children:[r?Object(m.jsxs)(m.Fragment,{children:[r,"\xa0"]}):null,l[t]]},a)}))})}),placement:"bottomRight",children:Object(m.jsx)("span",{className:`card-icon-dropdown ${"auto"===c?"":"active"} ${n?"":"disabled"}`,children:k})},"icon-type-picker"),S=n?C:k;return a?null:"st"===O.value?Object(m.jsx)(Qr,{className:"fill-input-train",value:s,onChange:x,optionList:(T=l,g.map((e=>{let{value:t,nameKey:a}=e;return{label:t===h?Object(m.jsx)(p.a,{}):Object(m.jsx)(wt.a,{overlay:T[a],children:Object(m.jsx)("img",{alt:T[a],src:`/ygocarder/asset/image/subfamily/subfamily-${t.toLowerCase()}.png`})}),value:t}}))),children:S}):Object(m.jsx)(ho,{className:"checkbox-star-train",value:d,onChange:j,optionList:Cr,strict:!0,suffix:n&&Object(m.jsxs)("div",{className:"checkbox-star-suffix",children:[Object(m.jsx)(Ot.a,{className:"custom-star-input",value:"number"===typeof d?"":d,allowClear:!0,onChange:j,placeholder:l["input.icon-type.custom.placeholder"]}),Object(m.jsx)(Qr,{value:u,onChange:w,optionList:[{value:"auto",tooltipProps:{overlay:l["input.icon-type.alignment.auto"]},label:Object(m.jsx)(p.a,{})},{value:"left",tooltipProps:{overlay:l["input.icon-type.alignment.left"]},label:Object(m.jsx)(po.a,{})},{value:"center",tooltipProps:{overlay:l["input.icon-type.alignment.center"]},label:Object(m.jsx)(mo.a,{})},{value:"right",tooltipProps:{overlay:l["input.icon-type.alignment.right"]},label:Object(m.jsx)(bo.a,{})}]})]}),children:S});var T})),yo=new Set(["1","2","3","4","5"]),vo=(e,t,a,r,o,n)=>{const l=e.substring(a,r),i="\n"===e[r]||!o;let s=l,c=2;switch(t){case"1":s=`[${l}]${i?"":"\n"}`,c=i?2:3;break;case"2":s=`{${l}}`;break;case"3":s=`{${l}|}`;break;case"4":s=`{${l}||}`,c=3;break;case"5":s=`{{${l}}}`,c=4}n(e.substring(0,a)+`${s}`+e.substring(r,e.length),r+c)},xo=e=>{let{id:t,placement:a}=e;if(t&&a>=0){var r;const e=document.querySelector(`#${t}`);e&&(null!==(r=e.selectionEnd)&&void 0!==r?r:-1)>=0&&(e.selectionEnd=a)}},{TextArea:jo}=Ot.a,wo=Object(r.forwardRef)(((e,t)=>{let{id:a,allowHotkey:o,defaultValue:n,onTakePicker:l,onChange:i,onKeyDown:s,className:c,...d}=e;const u=Object(r.useRef)(n),[p,b]=Object(r.useState)(n),[f,h]=Object(r.useState)({id:"",placement:-1}),g=Object(r.useCallback)((e=>{const t="string"===typeof e?e:e.target.value;u.current=t,b(t)}),[]);Object(r.useEffect)((()=>{xo(f)}),[f]),Object(r.useEffect)((()=>{i({target:{value:p}})}),[p]);const y=e=>{e!==u.current&&g(e)};return Object(r.useImperativeHandle)(t,(()=>({setValue:y,getPickerRef:()=>a?{id:a,setValue:y}:null}))),Object(m.jsx)(jo,{id:a,autoComplete:"off",onFocus:()=>a&&(null===l||void 0===l?void 0:l({id:a,setValue:y})),allowClear:!0,spellCheck:!1,className:`${a}-input ${c}`,value:p,onKeyDown:e=>{var t,r;if(null===s||void 0===s||s(e),!o)return;const{ctrlKey:n,key:l,metaKey:i}=e,c=null!==(t=e.currentTarget.selectionStart)&&void 0!==t?t:-1,d=null!==(r=e.currentTarget.selectionEnd)&&void 0!==r?r:-1;(n||i)&&a&&d!==c&&yo.has(l)&&(e.preventDefault(),vo(e.currentTarget.value,l,c,d,!0,((e,t)=>{g(e),h({id:a,placement:t})})))},onChange:g,...d})})),Oo=Object(r.forwardRef)(((e,t)=>{let{id:a,defaultValue:o,onTakePicker:n,onChange:l,onKeyDown:i,className:s,...c}=e;const{setting:d}=Vt(),{allowHotkey:u}=d,p=Object(r.useRef)(o),[b,f]=Object(r.useState)(o),[h,g]=Object(r.useState)({id:"",placement:-1}),y=Object(r.useCallback)((e=>{const t="string"===typeof e?e:e.target.value;p.current=t,f(t)}),[]);Object(r.useEffect)((()=>{xo(h)}),[h]),Object(r.useEffect)((()=>{l({target:{value:b}})}),[b]);const v=e=>{e!==b&&y(e)};return Object(r.useImperativeHandle)(t,(()=>({setValue:v}))),Object(m.jsx)(Ot.a,{id:a,autoComplete:"off",onFocus:()=>a&&(null===n||void 0===n?void 0:n({id:a,setValue:v})),allowClear:!0,className:`${a}-input ${s}`,value:b,onKeyDown:e=>{var t,r;if(null===i||void 0===i||i(e),!u)return;const{ctrlKey:o,key:n,metaKey:l}=e,s=null!==(t=e.currentTarget.selectionStart)&&void 0!==t?t:-1,c=null!==(r=e.currentTarget.selectionEnd)&&void 0!==r?r:-1;(o||l)&&a&&c!==s&&yo.has(n)&&(e.preventDefault(),vo(e.currentTarget.value,n,s,c,!1,((e,t)=>{y(e),g({id:a,placement:t})})))},onChange:e=>y(e.target.value),...c})})),Fo=Object(r.forwardRef)(((e,t)=>{let{onTakePicker:a}=e;const o=Xt((e=>e.getUpdater)),n=Object(r.useRef)(null),l=Object(r.useMemo)((()=>o("effect",void 0,"debounce")),[o]);return Object(r.useEffect)((()=>{var e;const t=null===(e=n.current)||void 0===e?void 0:e.getPickerRef();t&&(null===a||void 0===a||a(t))}),[]),Object(r.useImperativeHandle)(t,(()=>({setValue:e=>{var t;null===(t=n.current)||void 0===t||t.setValue(e)}}))),Object(m.jsx)(wo,{ref:n,id:"effect",allowHotkey:!0,defaultValue:Xt.getState().card.effect,onChange:l,onTakePicker:a,rows:9})})),ko=xt.b.div`
    align-self: center;
    text-align: right;
    .ant-checkbox + span {
        user-select: none;
    }
`,Co=e=>{const t=Ht(),{isDuelTerminalCard:a,isFirstEdition:o,isSpeedCard:n,setCard:l}=Xt(Object(Ga.useShallow)((e=>{let{card:t,setCard:a}=e;return{isSpeedCard:t.isSpeedCard,isDuelTerminalCard:t.isDuelTerminalCard,isFirstEdition:t.isFirstEdition,setCard:a}}))),i=Object(r.useCallback)((e=>l((t=>({...t,isFirstEdition:e.target.checked})))),[l]),s=Object(r.useCallback)((e=>l((t=>{const a=e.target.checked;return{...t,isDuelTerminalCard:a,isSpeedCard:!a&&t.isSpeedCard}}))),[l]),c=Object(r.useCallback)((e=>l((t=>{const a=e.target.checked;return{...t,isSpeedCard:e.target.checked,isDuelTerminalCard:!a&&t.isDuelTerminalCard}}))),[l]);return Object(m.jsxs)(ko,{className:"checkbox-input",children:[Object(m.jsx)(cr.a,{className:"input-1st",onChange:i,checked:o,tabIndex:0,children:t["input.1st-edition.label"]}),Object(m.jsx)(wt.a,{overlayClassName:"long-tooltip-overlay",overlay:"Will turn off Duel Terminal mark.",children:Object(m.jsx)(cr.a,{className:"input-speed",onChange:c,checked:n,tabIndex:0,children:t["input.speed-duel.label"]})}),Object(m.jsx)(wt.a,{overlayClassName:"long-tooltip-overlay",overlay:"Will turn off Speed Duel mark.",children:Object(m.jsx)(cr.a,{className:"input-terminal",onChange:s,checked:a,tabIndex:0,children:t["input.duel-terminal.label"]})})]})};var So=a(460);const To=Object(xt.b)(jr.Container)`
    padding: var(--spacing-xs);
    .radio-train {
        display: flex;
        flex-wrap: wrap;
        max-width: 550px;
        .radio-train-input-group {
            gap: var(--spacing);
        }
    }
    .ant-checkbox-wrapper {
        color: var(--color-heavy);
    }
    .frame-auto-checkbox {
        margin-bottom: var(--spacing-xs);
    }
    ${_r}
`,Ro=xt.b.div`
	display: flex;
	align-items: center;
	.input-label {
		flex: 1;
	}
`,No=xt.b.div`
    display: flex;
    align-items: center;
    margin-top: var(--spacing-sm);
    flex-wrap: wrap;
    row-gap: var(--spacing-sm);
`,Lo=Object(xt.b)(Qr)`
    &.radio-train {
        .ant-radio-button-wrapper-checked {
            &.ocg-button {
                background-color: var(--main-red-scale);
                border-color: var(--sub-red-scale);
                &:not([class*=" ant-radio-button-wrapper-disabled"]).ant-radio-button-wrapper:first-child {
                    border-right-color: var(--sub-red-scale);
                }
                &:not(.ant-radio-button-wrapper-disabled):first-child {
                    border-color: var(--sub-red-scale);
                }
                &:hover {
                    background-color: var(--sub-red-scale);
                    color: var(--color-heavy);
                }
            }
            &.tcg-button {
                background-color: var(--main-blue-scale);
                border-color: var(--sub-blue-scale);
                &:hover {
                    background-color: var(--sub-blue-scale);
                    color: var(--color-heavy);
                }
            }
        }
        .ocg-button {
            color: var(--color-heavy);
            &:hover {
                color: var(--sub-red-scale);
            }
        }
        .tcg-button {
            color: var(--color-heavy);
            &:hover {
                color: var(--sub-blue-scale);
            }
        }
    }
`,Mo=xt.b.div`
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--spacing-sm);
    .checkbox-input {
        align-self: center;
        .ant-checkbox + span {
            user-select: none;
        }
    }
    .sticker-input,
    .creator-input {
        grid-column: span 2;
    }
    .sticker-input .ant-radio-button-wrapper {
        padding-left: var(--spacing-sm);
        padding-right: var(--spacing-sm);
    }
`,Eo=Object(r.forwardRef)(((e,t)=>{let{isMonster:a,showCreativeOption:o,onTakePicker:n}=e;const l=Ht(),{sticker:i,getUpdater:s}=Xt(Object(Ga.useShallow)((e=>{let{card:{sticker:t},getUpdater:a}=e;return{sticker:t,getUpdater:a}}))),c=Object(r.useRef)(null),d=Object(r.useRef)(null),u=Object(r.useRef)(null),p=Object(r.useRef)(null),b=Object(r.useMemo)((()=>s("atk",(e=>"string"===typeof e?e.trim():e))),[s]),f=Object(r.useMemo)((()=>s("def",(e=>"string"===typeof e?e.trim():e))),[s]),h=Object(r.useMemo)((()=>s("password",void 0,"debounce")),[s]),g=Object(r.useMemo)((()=>s("sticker")),[s]),y=Object(r.useMemo)((()=>s("creator",void 0,"debounce")),[s]);return Object(r.useImperativeHandle)(t,(()=>({setValue:e=>{var t,a,r,o;let{password:n,creator:l,atk:i,def:s}=e;"string"===typeof i&&(null===(t=u.current)||void 0===t||t.setValue(i)),"string"===typeof s&&(null===(a=p.current)||void 0===a||a.setValue(s)),"string"===typeof n&&(null===(r=c.current)||void 0===r||r.setValue(n)),"string"===typeof l&&(null===(o=d.current)||void 0===o||o.setValue(l))}}))),Object(m.jsxs)(Mo,{className:"card-footer-input",children:[(a||o)&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Oo,{ref:u,id:"atk",addonBefore:l["input.atk.label"],defaultValue:Xt.getState().card.atk,onChange:b,onTakePicker:n}),Object(m.jsx)(Oo,{ref:p,id:"def",addonBefore:l["input.def.label"],defaultValue:Xt.getState().card.def,onChange:f,onTakePicker:n})]}),Object(m.jsx)(Oo,{ref:c,id:"password",addonBefore:Object(m.jsxs)(Ro,{className:"input-label-with-button",children:[Object(m.jsx)("div",{className:"input-label",children:l["input.password.label"]}),Object(m.jsx)(Mt,{onClick:()=>{var e;return null===(e=c.current)||void 0===e?void 0:e.setValue(`${mt("0123456789",8)}`)},Icon:So.a,tooltipProps:{overlay:l["button.randomize.label"]}})]}),defaultValue:Xt.getState().card.password,onChange:h,onTakePicker:n}),Object(m.jsx)(Co,{}),Object(m.jsx)(Oo,{ref:d,id:"creator",addonBefore:l["input.creator-text.label"],defaultValue:Xt.getState().card.creator,onChange:y,onTakePicker:n}),Object(m.jsx)(Qr,{className:"sticker-input fill-input-train",value:i,onChange:g,optionList:Rr,children:Object(m.jsx)("span",{children:l["input.sticker.label"]})})]})})),Io=Object(xt.b)(Qr)`
    .ant-input-group-addon {
        flex: 0;
    }
    .radio-train-input-group .ant-radio-button-wrapper {
        min-width: unset;
    }
`,Ao=Object(r.forwardRef)(((e,t)=>{let{isLink:a,showExtraDecorativeOption:o,receivingCanvas:n,onSourceLoaded:l,onTainted:i,onCropChange:s}=e;const c=Ht(),{opacity:d,artFinish:p,linkMap:b,isPendulum:f,art:h,artCrop:g,getUpdater:y,setCard:v}=Xt(Object(Ga.useShallow)((e=>{let{card:{opacity:t,artFinish:a,linkMap:r,isPendulum:o,art:n,artCrop:l},getUpdater:i,setCard:s}=e;return{opacity:t,artFinish:a,linkMap:r,isPendulum:o,art:n,artCrop:l,getUpdater:i,setCard:s}}))),x=Object(r.useRef)(null),j=Object(r.useMemo)((()=>y("linkMap")),[y]),w=Object(r.useMemo)((()=>y("art")),[y]),O=Object(r.useMemo)((()=>y("artFinish")),[y]),F=Object(r.useCallback)(((e,t)=>{null===s||void 0===s||s(e,t),e&&v((t=>({...t,artCrop:e})))}),[s,v]);return Object(r.useEffect)((()=>{var e;null===(e=x.current)||void 0===e||e.setRatio(u(f,d).ratio)}),[d,f]),Object(r.useImperativeHandle)(t,(()=>({setValue:e=>{let{art:t,artCrop:a}=e;var r;"string"===typeof t&&a&&(null===(r=x.current)||void 0===r||r.forceExternalSource(t,a))}}))),Object(m.jsx)(Xa,{ref:x,title:c["input.card-art.label"],defaultExternalSource:h,defaultCropInfo:g,receivingCanvas:n,onSourceChange:w,onCropChange:F,onTainted:i,onSourceLoaded:l,ratio:u(f,d).ratio,beforeCropper:o?Object(m.jsx)(Io,{className:"art-finish-checkbox fill-input-train",value:p,onChange:O,optionList:Fr,children:Object(m.jsx)("span",{className:"field-title",children:c["input.art-finish.label"]})}):null,children:a?Object(m.jsx)(Va,{defaultValue:b,onChange:j}):Object(m.jsx)("div",{})})})),Bo=xt.b.div`
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-sm);
    width: 100%;
    .name-input {
        flex: 3;
        min-width: 400px;
    }
    .set-id-input {
        flex: 1;
        min-width: 250px;
    }
`,$o=xt.b.span`
    cursor: pointer;
`,Wo=Object(r.forwardRef)(((e,t)=>{let{onTakePicker:a}=e;const o=Ht(),{name:n,format:l,getUpdater:i}=Xt(Object(Ga.useShallow)((e=>{let{card:{name:t,format:a},getUpdater:r}=e;return{name:t,format:a,getUpdater:r}}))),s=Object(r.useRef)(null),c=Object(r.useRef)(null),d=Object(r.useMemo)((()=>i("setId")),[i]),u=Object(r.useMemo)((()=>i("name",void 0,"debounce")),[i]);return Object(r.useImperativeHandle)(t,(()=>({setValue:e=>{var t,a;let{name:r,setId:o}=e;"string"===typeof r&&(null===(t=s.current)||void 0===t||t.setValue(r)),"string"===typeof o&&(null===(a=c.current)||void 0===a||a.setValue(o))}}))),Object(m.jsxs)(Bo,{className:"name-id-input",children:[Object(m.jsx)(Oo,{ref:s,id:"name",defaultValue:n,addonBefore:Object(m.jsx)(wt.a,{title:"Copy",children:Object(m.jsx)($o,{onClick:()=>{navigator.clipboard.writeText(bt(n))},children:o["input.name.label"]})}),onChange:u,onTakePicker:a}),Object(m.jsx)(Oo,{ref:c,id:"set-id",defaultValue:Xt.getState().card.setId,addonBefore:Object(m.jsxs)(Ro,{className:"input-label-with-button",children:[Object(m.jsx)("div",{className:"input-label",children:o["input.set-id.label"]}),Object(m.jsx)(Mt,{onClick:()=>{var e;return null===(e=c.current)||void 0===e?void 0:e.setValue((e=>mt("ABCDEFGHIJKLMNOPQRSTUVWXYZ",4)+"-"+("OCG"===e?"JP":"EN")+mt("0000000000111111111122222222223456789",1)+mt("0123456789",2))(l))},Icon:So.a,tooltipProps:{overlay:o["button.randomize.label"]}})]}),onChange:d,onTakePicker:a})]})})),Po=Object(r.forwardRef)(((e,t)=>{let{frameList:a,pendulumFrame:o,onChange:n,onCancel:l}=e;const i=Ht(),s=Object(r.useRef)("auto"===o?"spell":o),c=Object(r.useRef)(null),[d,u]=Object(r.useState)(0);return Object(r.useImperativeHandle)(t,(()=>({focus:()=>{var e;return null===(e=c.current)||void 0===e?void 0:e.focus()}}))),Object(m.jsxs)(To,{className:"pendulum-frame-picker",...nt({stopPropagation:!0,optionLength:a.length,setFocus:u,onTrigger:()=>{d>=0&&n(a[d].value)},onCancel:l}),children:[Object(m.jsx)(cr.a,{ref:c,className:"frame-auto-checkbox",checked:"auto"===o,onChange:e=>{n(e.target.checked?"auto":s.current)},children:i["input.frame.auto"]}),Object(m.jsx)(Qr,{className:"frame-radio",value:o,onChange:n,optionList:a})]})})),Do=xt.b.div`
    display: inline-flex;
    cursor: pointer;
    box-shadow: var(--bs-input);
    vertical-align: bottom;
    box-shadow: var(--bs-button);
    border-radius: var(--br-lg);
    &:focus-visible {
        outline: 2px solid var(--focus);
    }
    .pendulum-frame-info-block {
        border-radius: 0 var(--br-lg) var(--br-lg) 0;
        line-height: 2; // Alignment
        background-color: var(--main-level-4);
        min-width: 100px;
        overflow: hidden;
        border: var(--bw) solid var(--sub-level-1);
        .frame-info-block-label {
            padding: var(--spacing-px) var(--spacing-xs);
        }
    }
    .pendulum-frame-label {
        display: inline-block;
        background: var(--main-level-4);
        border: var(--bw) solid var(--sub-level-1);
        border-right: none;
        padding: var(--spacing-px) var(--spacing-xs);
        border-radius: var(--br-lg) 0 0 var(--br-lg);
        line-height: 2; // Alignment
        &:last-child {
            border-radius: var(--br-lg);
            border-right: var(--bw) solid var(--sub-level-1);
        }
    }
`,zo=xt.b.div`
    display: grid;
    grid-template-columns: 1fr 1fr;
    column-gap: var(--spacing-sm);
    row-gap: var(--spacing-sm);
    .red-scale {
        color: var(--sub-red-scale);
    }
    .blue-scale {
        color: var(--sub-blue-scale);
    }
    .joined-row {
        position: 'relative';
        grid-column: span 2;
        .standalone-label {
            min-width: 0;
            width: unset;
            padding-left: var(--spacing-antd);
        }
        .pendulum-checkbox {
            /** Alignment **/
            width: var(--width-label);
            line-height: 32px;
            text-align: right;
            font-weight: 500;
            margin-right: 0;
            padding-right: var(--spacing);
            > span {
                padding-right: 0;
            }
        }
        .pendulum-checkbox-placeholder {
            display: inline-block;
            /** Alignment **/
            width: var(--width-label);
        }
        .pendulum-frame-input {
            margin-right: var(--spacing-lg);
        }
        .ant-checkbox-wrapper + .ant-checkbox-wrapper {
            margin-left: 0;
        }
    }
`,Ho=Object(r.forwardRef)(((e,t)=>{let{showCreativeOption:a,showExtraDecorativeOption:o,onTakePicker:n}=e;const l=Ht(),{frame:i,isPendulum:s,pendulumFrame:c,pendulumScaleBlue:d,pendulumScaleRed:u,setCard:p,getUpdater:b}=Xt(Object(Ga.useShallow)((e=>{let{card:{frame:t,isPendulum:a,pendulumFrame:r,pendulumScaleBlue:o,pendulumScaleRed:n},setCard:l,getUpdater:i}=e;return{frame:t,isPendulum:a,pendulumFrame:r,pendulumScaleBlue:o,pendulumScaleRed:n,setCard:l,getUpdater:i}}))),f=Object(r.useRef)(null),h=Object(r.useRef)(null),g=Object(r.useRef)(null),[y,v]=Object(r.useState)(!0),[x,j]=Object(r.useState)(!1),w=Object(r.useRef)("auto"===c?"spell":c),O=Object(r.useMemo)((()=>b("pendulumScaleRed")),[b]),F=Object(r.useMemo)((()=>b("pendulumScaleBlue")),[b]),k=Object(r.useMemo)((()=>b("pendulumEffect",void 0,"debounce")),[b]),C=Object(r.useMemo)((()=>kr().filter((e=>o||"normal"===e.edition))),[o]);Object(r.useImperativeHandle)(t,(()=>({setValue:e=>{var t;let{pendulumEffect:a}=e;a&&(null===(t=g.current)||void 0===t||t.setValue(a))}})));const S=Q[c];return Object(m.jsxs)(zo,{className:"pendulum-input",children:[Object(m.jsxs)("div",{className:"joined-row pendulum-option",children:["link"!==i?Object(m.jsx)(cr.a,{className:"pendulum-checkbox",onChange:e=>p((t=>({...t,isPendulum:e.target.checked}))),checked:s,children:l["input.pendulum.label"]}):Object(m.jsx)("div",{className:"pendulum-checkbox-placeholder"}),a&&Object(m.jsx)(Ua.a,{visible:x,onVisibleChange:j,trigger:["hover","click"],placement:"bottom",overlayClassName:"pendulum-frame-picker-overlay",content:Object(m.jsx)("div",{className:"overlay-event-absorber",children:Object(m.jsx)(Po,{ref:h,frameList:C,pendulumFrame:c,onCancel:()=>{var e;j(!1),null===(e=f.current)||void 0===e||e.focus()},onChange:e=>{const t=`${e}`;"auto"!==t&&(w.current=t),p((e=>({...e,pendulumFrame:t})))}})}),children:Object(m.jsxs)(Do,{ref:f,className:"pendulum-frame-input",tabIndex:0,onKeyDown:e=>{if("ArrowDown"===e.key||"Enter"===e.key||"  "===e.key)return j(!0),setTimeout((()=>{var e;null===(e=h.current)||void 0===e||e.focus()}),200),!1},children:[Object(m.jsxs)("span",{className:"pendulum-frame-label",children:[l["input.bottom-frame.label"]," ",Object(m.jsx)(Ir.a,{})]}),S?Object(m.jsx)(sr,{className:"pendulum-frame-info-block",...S}):Object(m.jsx)(sr,{className:"pendulum-frame-info-block",nameKey:"input.frame.auto"})]})}),s&&a&&Object(m.jsx)(cr.a,{onChange:e=>v(e.target.checked),checked:y,children:l["input.mirror-scale.label"]})]}),s&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{children:Object(m.jsx)(Ot.a,{addonBefore:Object(m.jsx)("span",{children:l["input.scale.label"](Object(m.jsx)("span",{className:"blue-scale",children:l["input.scale.blue.label"]}))}),value:d,onChange:e=>{F(e),y&&O(e)}})}),Object(m.jsx)("div",{children:Object(m.jsx)(Ot.a,{addonBefore:Object(m.jsx)("span",{children:l["input.scale.label"](Object(m.jsx)("span",{className:"red-scale",children:l["input.scale.red.label"]}))}),value:u,onChange:e=>{y&&F(e),O(e)}})}),Object(m.jsx)("div",{className:"joined-row",children:Object(m.jsx)(wo,{ref:g,id:"pendulum-effect",allowHotkey:!0,defaultValue:Xt.getState().card.pendulumEffect,onChange:k,onTakePicker:n,rows:5})})]})]})})),Ko=xt.b.div`
    display: grid;
    grid-template-columns: 1fr max-content;
    grid-template-areas:
        "type-input input-helper"
        "condense-input help-button";
    gap: var(--spacing-sm);
    align-items: center;
    .formatting-help-button {
        grid-area: help-button;
        &:focus {
            box-shadow: 0 0 0 2px var(--focus);
        }
    }
    .input-kanji-helper {
        grid-area: input-helper;
    }
    .type-ability-input {
        grid-area: type-input;
    }
    .condense-input {
        grid-area: condense-input;
		.standalone-addon.ant-input-group-addon {
			width: unset;
		}
		.ant-radio-button-wrapper {
			flex: 1 1 90px;
		}
	}
    &.variant-tcg {
        .type-ability-input {
            grid-column: span 2;
        }
    }
`,Go=Object(r.forwardRef)(((e,t)=>{let{onTakePicker:a}=e;const o=Ht(),{frame:n,cardIcon:l,format:i,furiganaHelper:s,condenseTolerant:c,setCard:d,getUpdater:u}=Xt(Object(Ga.useShallow)((e=>{let{card:{frame:t,cardIcon:a,format:r,furiganaHelper:o,effectStyle:n},setCard:l,getUpdater:i}=e;return{frame:t,cardIcon:a,format:r,furiganaHelper:o,condenseTolerant:null===n||void 0===n?void 0:n.condenseTolerant,setCard:l,getUpdater:i}}))),p="ocg"===i?"\uff0f":"/",b=Object(r.useRef)(null),f=Object(r.useMemo)((()=>u("typeAbility",(e=>"string"!==typeof e?[]:e.split(/\uff0f|\//).map((e=>`${e}`.trim())).filter((e=>"string"===typeof e&&e.length>0))),"debounce")),[u]),h=Object(r.useCallback)((e=>d((t=>({...t,furiganaHelper:e.target.checked})))),[d]);Object(r.useImperativeHandle)(t,(()=>({setValue:e=>{var t;let{typeAbility:a}=e;a&&(null===(t=b.current)||void 0===t||t.setValue(a.join(p)))}})));const g="auto"===l?Je({frame:n})?"input.type.monster.label":"input.type.st.label":"st"===Sr[l].value?"input.type.st.label":"input.type.monster.label",y="ocg"===i;return Object(m.jsxs)(Ko,{className:`post-pendulum-input variant-${i}`,children:[Object(m.jsx)(Oo,{ref:b,addonBefore:o[g],id:"type-ability",defaultValue:Xt.getState().card.typeAbility.join(p),onChange:f,onTakePicker:a}),y&&Object(m.jsx)(wt.a,{overlay:o["input.furigana-helper.tooltip"],overlayClassName:"long-tooltip-overlay",children:Object(m.jsx)(cr.a,{className:"input-kanji-helper",onChange:h,checked:s,children:o["input.furigana-helper.label"]})}),Object(m.jsx)(Qr,{className:"condense-input",value:`${c}`,onChange:e=>(e=>{d((t=>({...t,effectStyle:{...t.effectStyle,condenseTolerant:e}})))})(e),optionList:Nr,children:Object(m.jsxs)("span",{children:[o["input.condense.label"]," ",Object(m.jsx)(qa,{content:o["input.condense.tooltip"]})]})}),Object(m.jsx)(nr,{})]})})),Yo=xt.b.div`
    color: var(--color);
    text-shadow: var(--ts);
    font-weight: 500;
    padding: 5px;
    display: grid;
    grid-template-columns: max-content 1fr;
    gap: 3px;
    .color-list {
        display: flex;
        flex-wrap: nowrap;
        gap: 3px;
    }
    .color-block {
        height: 17px;
        width: 17px;
        cursor: pointer;
        position: relative;
        outline: none;
        border: var(--bw) solid var(--sub-level-4);
        &.static-block {
            cursor: default;
            height: 9px;
            width: 9px;
            margin: 4px 0;
            border: none;
        }
    }
    .active-dot {
        position: absolute;
        inset: var(--spacing-xs);
        background: rgb(0, 0, 0);
        border-radius: 50%;
        opacity: 1;
    }
    .color-input {
        display: grid;
        grid-template-columns: max-content 1fr;
        gap: 3px;
        border-left: var(--bw-lg) solid var(--sub-level-4);
        padding-left: 3px;
        input {
            width: 58px;
            font-size: var(--fs-sm);
            line-height: 1;
            border: none;
            padding: 0 5px;
        }
    }
`,Xo=[{hex:"#FFFFFF",rgb:[255,255,255]},{hex:"#000000",rgb:[0,0,0]},{hex:"#FF0000",rgb:[255,0,0]},{hex:"#FFFF00",rgb:[255,255,0]},{hex:"#00FF00",rgb:[0,255,0]},{hex:"#00FFFF",rgb:[0,255,255]},{hex:"#0000FF",rgb:[0,0,255]},{hex:"#FF00FF",rgb:[255,0,255]}],Vo=e=>{let{value:t="",onChange:a}=e;const[o,n]=Object(r.useState)(t),[l,i]=Object(r.useState)((()=>({hex:ht.test(t)?t:"#000000",rgb:gt(t,!1)})));return Object(r.useEffect)((()=>{const e=o.startsWith("#")?o:`#${o}`;ht.test(e)&&(n(e),i({hex:e,rgb:gt(e,!1)}),null===a||void 0===a||a(e))}),[o]),Object(r.useEffect)((()=>{n(t),i({hex:ht.test(t)?t:"#000000",rgb:gt(t,!1)})}),[t]),Object(m.jsxs)(Yo,{children:[Object(m.jsx)("div",{className:"color-list",children:Xo.map((e=>{let{hex:t,rgb:r}=e;const o=(299*r[0]+587*r[1]+114*r[2])/1e3>=128?"#000000":"#FFFFFF";return Object(m.jsx)("div",{className:"color-block",title:t,style:{backgroundColor:t},onClick:()=>null===a||void 0===a?void 0:a(t),children:l.hex.toUpperCase()===t&&Object(m.jsx)("div",{className:"active-dot",style:{backgroundColor:o}})})}))}),Object(m.jsxs)("div",{className:"color-input",children:[Object(m.jsx)("div",{className:"color-block static-block",style:{backgroundColor:l.hex}}),Object(m.jsx)(Ot.a,{size:"small",value:o,onChange:e=>{n(e.target.value)}})]})]})},Uo=xt.b.div`
    display: inline-grid;
    grid-template-columns: 1fr 1fr 1fr 1fr;
    column-gap: var(--spacing-xxs);
    padding: var(--spacing-px);
    margin-right: var(--spacing-sm);
    border: var(--bw) solid var(--sub-level-1);
    border-radius: var(--br);
    background-color: var(--main-level-4);
    cursor: pointer;
    &:hover {
        border-color: var(--main-active);
    }
    .text-style-preview-section {
        width: 8px;
        height: 28px; // Alignment
    }
`,qo=xt.b.div`
    position: relative;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--spacing-px);
    &.custom-style-picker {
        background-color: var(--sub-level-4); // Mimic border color
    }
    .style-section {
        z-index: 1;
        position: relative;
        background-color: var(--main-level-3);
    }
    .style-picker-section {
        overflow: hidden;
        .shadow-checkbox .ant-checkbox {
            transform: translateY(1px);
        }
        > .ant-checkbox-wrapper {
            padding: var(--spacing-xs);
        }
    }
    .custom-style-expand {
        display: grid;
        grid-template-columns: 1fr max-content;
        column-gap: var(--spacing-xs);
        .ant-checkbox-wrapper > span {
            padding-right: 0;
        }
    }
    .radio-train {
        padding: var(--spacing-xs);
        padding-bottom: 0;
        .standalone-addon {
            flex: 1 1 auto;
            text-align: left;
        }
        .radio-train-input-group {
            flex: 0 0 auto;
        }
        .ant-radio-button-wrapper {
            height: 26px;
            line-height: 24px;
        }
    }
`,Jo={effectTextStyle:{keyName:"effectTextStyle",labelKey:"input.text-style.section.effect.label"},pendulumTextStyle:{keyName:"pendulumTextStyle",labelKey:"input.text-style.section.pendulum.label"},statTextStyle:{keyName:"statTextStyle",labelKey:"input.text-style.section.stat.label"},typeTextStyle:{keyName:"typeTextStyle",labelKey:"input.text-style.section.type.label"}},_o=()=>{const e=Ht(),{statTextStyle:t,typeTextStyle:a,effectTextStyle:r,pendulumTextStyle:o,setCard:n}=Xt(Object(Ga.useShallow)((e=>{let{card:{statTextStyle:t,typeTextStyle:a,effectTextStyle:r,pendulumTextStyle:o},setCard:n,getUpdater:l}=e;return{statTextStyle:t,typeTextStyle:a,effectTextStyle:r,pendulumTextStyle:o,setCard:n}}))),l=[{info:Jo.effectTextStyle,value:r},{info:Jo.pendulumTextStyle,value:o},{info:Jo.statTextStyle,value:t},{info:Jo.typeTextStyle,value:a}];return Object(m.jsx)(Ua.a,{trigger:["click"],placement:"bottomLeft",overlayClassName:"global-input-overlay global-style-picker-overlay",content:Object(m.jsx)("div",{className:"overlay-event-absorber",children:Object(m.jsx)(qo,{className:"custom-style-picker",children:l.map((t=>{let{info:a,value:r}=t;const{keyName:o,labelKey:l}=a,[i,s,c,d]=r;return Object(m.jsxs)("div",{className:"style-section",children:[Object(m.jsxs)("h3",{className:"custom-style-expand "+(i?"":"inactive"),children:[Object(m.jsx)("span",{children:e[l]}),Object(m.jsx)(cr.a,{checked:i,onChange:e=>{n((t=>{const a=e.target.checked;return{...t,[o]:[a,...r.slice(1)]}}))},children:e["input.text-style.custom.label"]})]}),i&&Object(m.jsxs)("div",{className:"style-picker-section",children:[Object(m.jsx)("h2",{children:Object(m.jsx)(cr.a,{className:"shadow-checkbox",checked:c,onChange:e=>{n((t=>{const a=e.target.checked;return{...t,[o]:[...r.slice(0,2),a,r[3]]}}))},children:e["input.text-style.shadow.label"]})}),c&&Object(m.jsx)(Vo,{value:d,onChange:e=>n((t=>({...t,[o]:[...r.slice(0,3),e]})))}),Object(m.jsx)("h2",{children:e["input.text-style.color.label"]}),Object(m.jsx)(Er.b,{colors:Xe,color:null!==s&&void 0!==s?s:"",onChangeComplete:e=>{n((t=>({...t,[o]:[r[0],e.hex,...r.slice(2,4)]})))}})]})]},o)}))})}),children:Object(m.jsx)(Uo,{className:"text-style-preview",children:l.map((e=>{let{info:t,value:a}=e;const{keyName:r}=t,[o,n,l,i]=a;return Object(m.jsx)("div",{className:"text-style-preview-section",style:{backgroundColor:0!==(null!==n&&void 0!==n?n:"").length&&o?n:"#000000",boxShadow:o&&l?`0 0 0 2px ${i} inset`:""}},r)}))})})};a(415);const Zo=o.a.forwardRef(((e,t)=>{let{artworkCanvas:a,backgroundCanvas:o,onCropChange:n,onTainted:l,onSourceLoaded:i}=e;const s=Ht(),{format:c,frame:d,foil:u,finish:h,opacity:g,nameStyleType:y,nameStyle:v,isPendulum:x,attribute:j,getUpdater:w,setCard:O}=Xt(Object(Ga.useShallow)((e=>{let{card:{format:t,frame:a,foil:r,finish:o,opacity:n,nameStyleType:l,nameStyle:i,isPendulum:s,attribute:c},getUpdater:d,setCard:u}=e;return{format:t,frame:a,foil:r,finish:o,opacity:n,nameStyleType:l,nameStyle:i,isPendulum:s,attribute:c,getUpdater:d,setCard:u}}))),{setting:F}=Vt(),{showCreativeOption:k,showExtraDecorativeOption:C}=F,S=Object(r.useRef)(null),T=Ue({frame:d}),R=Je({frame:d}),[N,L]=Object(r.useState)(0),M=Object(r.useMemo)((()=>(e=>[{name:"normal",label:e.normal,color:"#747b95"},{name:"gold",label:e.gold,color:"#cfa65f"},{name:"platinum",label:e.platinum,color:"#b1b1b1"}])({normal:s["input.foil.normal.label"],gold:s["input.foil.gold.label"],platinum:s["input.foil.platinum.label"]}).map((e=>{let{color:t,name:a,label:r}=e;return{label:r,value:a,props:{style:{color:t,fontWeight:"bold"}}}}))),[s]),E=Object(r.useRef)(null),I=Object(r.useRef)(null),A=Object(r.useRef)(null),B=Object(r.useRef)(null),$=Object(r.useRef)(null),W=Object(r.useRef)(null),P=Object(r.useRef)(null),[D,z]=Object(r.useState)({id:"",setValue:()=>{}}),H=Object(r.useMemo)((()=>w("foil")),[w]),K=Object(r.useMemo)((()=>w("finish")),[w]),G=Object(r.useCallback)((e=>O((t=>({...t,opacity:e})))),[O]),Y=Object(r.useMemo)((()=>w("attribute")),[w]),X=Object(r.useCallback)(((e,t)=>{O((a=>({...a,nameStyleType:e,nameStyle:t})))}),[O]),V=Object(r.useMemo)((()=>((e,t)=>f.map((a=>{let{name:r,nameKey:o}=a;return{label:r===b?Object(m.jsx)(p.a,{}):Object(m.jsx)(wt.a,{overlay:t[o],children:Object(m.jsx)("img",{alt:t[o],src:`/ygocarder/asset/image/attribute/attr-${e}-${r.toLowerCase()}.png`})}),value:r}})))(c,s)),[c,s]);return Object(r.useEffect)((()=>{var e;null===(e=S.current)||void 0===e||e.setValue({font:v.font})}),[v]),Object(r.useEffect)((()=>{var e;null===(e=I.current)||void 0===e||e.setValue(g)}),[g]),Object(r.useImperativeHandle)(t,(()=>({forceCardData:e=>{var t,a,r,o,n,l,i;L((e=>e+1));const{name:s,art:c,artCrop:d,background:u,backgroundCrop:p,opacity:m,setId:b,pendulumEffect:f,typeAbility:h,effect:g,atk:y,def:v,creator:x,password:j}=e;null===(t=E.current)||void 0===t||t.setValue({art:c,artCrop:d}),null===(a=I.current)||void 0===a||a.setValue({...m,background:u,backgroundCrop:p}),null===(r=A.current)||void 0===r||r.setValue({name:s,setId:b}),null===(o=B.current)||void 0===o||o.setValue({pendulumEffect:f}),null===(n=$.current)||void 0===n||n.setValue(g),null===(l=W.current)||void 0===l||l.setValue({typeAbility:h}),null===(i=P.current)||void 0===i||i.setValue({atk:y,def:v,creator:x,password:j})}}))),Object(m.jsxs)("div",{className:["card-info-panel","ocg"===c?"input-ocg":"input-tcg"].join(" "),children:[Object(m.jsx)(gr,{}),Object(m.jsx)("br",{}),Object(m.jsx)(fr,{}),Object(m.jsxs)("div",{className:"card-overlay-input",children:[Object(m.jsx)(Lo,{className:"format-radio",value:c,onChange:e=>{O((t=>{var a,r,o,n,l;const i=Et(t,`${e}`),{name:s,setId:c,effect:d,typeAbility:u,creator:p,pendulumEffect:m}=i;return null===(a=A.current)||void 0===a||a.setValue({name:s,setId:c}),null===(r=$.current)||void 0===r||r.setValue(d),null===(o=B.current)||void 0===o||o.setValue({pendulumEffect:m}),null===(n=W.current)||void 0===n||n.setValue({typeAbility:u}),null===(l=P.current)||void 0===l||l.setValue({creator:p}),i}))},optionList:wr,children:Object(m.jsx)("span",{children:s["input.format.label"]})}),Object(m.jsx)(Qr,{className:"foil-radio",value:u,onChange:H,optionList:M,children:Object(m.jsx)("span",{children:s["input.foil.label"]})}),C&&Object(m.jsx)(ro,{className:"finish-checkbox",value:h,onChange:K,optionList:Or,children:Object(m.jsx)("span",{children:s["input.finish.label"]})})]}),k&&Object(m.jsxs)("div",{className:"card-layout-input",children:[Object(m.jsxs)("label",{className:"standalone-addon ant-input-group-addon",children:[s["input.layout.label"]," ",Object(m.jsx)(qa,{content:s["input.layout.tooltip"]})]}),Object(m.jsx)(uo,{ref:I,defaultValue:g,receivingCanvas:o,onChange:G,onTainted:l,onCropChange:n,onSourceLoaded:i})]}),Object(m.jsx)(to,{onSTFrameChange:e=>{var t;return null===(t=W.current)||void 0===t?void 0:t.setValue({typeAbility:e})}}),Object(m.jsxs)(No,{className:"name-style-id-input",children:[Object(m.jsx)(Wo,{ref:A,onTakePicker:z}),Object(m.jsx)(qr,{ref:S,frameInfo:Q[d],defaultType:y,defaultValue:v,showExtraDecorativeOption:C,onChange:X},N),Object(m.jsx)(go,{isLink:T,isMonster:R,showCreativeOption:k})]}),Object(m.jsxs)("div",{className:"main-info",children:[Object(m.jsxs)("div",{className:"main-info-first",children:[Object(m.jsx)(Qr,{className:"fill-input-train attribute-input",value:j,onChange:Y,optionList:V,children:Object(m.jsx)("span",{children:s["input.attribute.label"]})}),(x||"link"!==d||k)&&Object(m.jsx)(Ho,{ref:B,showCreativeOption:k,showExtraDecorativeOption:C,onTakePicker:z}),Object(m.jsx)(Go,{ref:W,onTakePicker:z}),Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{className:"card-effect-letter-helper",children:[Object(m.jsx)(vr,{className:"standalone-label",children:s["input.effect.label"]}),k?Object(m.jsx)(_o,{}):Object(m.jsx)("div",{}),Object(m.jsx)(Mr,{targetId:D.id,onPick:D.setValue})]}),Object(m.jsx)(Fo,{ref:$,onTakePicker:z})]}),Object(m.jsx)(Eo,{ref:P,isMonster:R,showCreativeOption:k,onTakePicker:z})]}),Object(m.jsx)("div",{className:"main-info-second",children:Object(m.jsx)(Ao,{ref:E,receivingCanvas:a,isLink:T,showExtraDecorativeOption:C,onSourceLoaded:i,onTainted:l,onCropChange:n})})]})]})}));var Qo=a(439),en=a(442),tn=a(461);const an=Object(xt.b)(Qo.a.Item)`
    color: var(--color);
    padding: 1px 12px 5px 12px; // Alignment
    font-size: var(--fs-sm);
    border-bottom: var(--bw) solid var(--sub-level-4);
    cursor: default;
    &.ant-dropdown-menu-item.ant-dropdown-menu-item-disabled:hover {
        cursor: default;
        background: var(--main-level-3);
    }
`,rn=Object(xt.b)(Qo.a.Item)`
    &.active-resolution {
        background-color: var(--sub-active);
    }
`,on=Object(xt.b)(_a.a)`
    padding: 0;
    .button-label {
        padding: 4px 15px;
        height: 100%; // Alignment
        align-content: center;
        border-radius: var(--br-lg);
        line-height: 1.5;
    }
    .button-option {
        position: absolute;
        right: 0;
        top: 0;
        height: 100%;
        display: flex;
        align-items: center;
        padding: var(--spacing);
        border-left: var(--bw) solid var(--sub-secondary);
        border-radius: 0 var(--br-lg) var(--br-lg) 0;
        .anticon {
            font-size: var(--fs-2xl);
            margin-left: 0;
        }
        &:hover {
            background: #399af9;
        }
    }
`,nn=Object(r.forwardRef)(((e,t)=>{let{isTainted:a,isInitializing:o,imageChangeCount:n,canvasMap:l,onDownloadError:i}=e;const s=Ht(),{allowHotkey:c,resolution:d,updateSetting:u}=Vt(Object(Ga.useShallow)((e=>{let{setting:{allowHotkey:t,resolution:a},updateSetting:r}=e;return{allowHotkey:t,resolution:a,updateSetting:r}}))),{onExport:p}=za(!0,l,{imageChangeCount:n,isInitializing:o}),{drawCanvasRef:b}=l,f=Object(r.useRef)({currentPipeline:Promise.resolve(),pipelineRunning:!1}),[h,g]=Object(r.useState)(!1),y=Object(r.useCallback)((()=>{g(!1)}),[]),{onSave:v}=Ut({isTainted:a,isInitializing:o,drawCanvasRef:b,exportRef:f,onExport:p,onDownloadError:i,onDownloadComplete:y}),x=e=>{h||(a?Pt.a.error({message:"Your card is tainted, you must save manually",description:'Right click the card \u2192 Choose "Save image as..."'}):(g(!0),v(e)))};return Object(r.useImperativeHandle)(t,(()=>({download:x}))),a?null:Object(m.jsxs)("div",{className:"save-button-container",children:[Object(m.jsx)("div",{id:"save-button-waiting"}),Object(m.jsxs)(on,{className:"save-button",id:"save-button-ready",onClick:()=>x(),children:[Object(m.jsx)(wt.a,{overlay:c?Object(m.jsx)(m.Fragment,{children:"Ctrl-S / \u2318-S"}):null,children:Object(m.jsx)("div",{className:"button-label",children:h?s["button.download.ongoing.label"]:s["button.download.label"]})}),Object(m.jsx)(en.a,{disabled:h,className:"save-button-dropdown",placement:"bottomRight",overlay:Object(m.jsxs)(Qo.a,{onClick:e=>e.domEvent.stopPropagation(),children:[Object(m.jsx)(an,{disabled:!0,children:s["button.download.resolution.label"]}),[{width:549,height:800},{width:813,height:1185}].map((e=>{let{width:t,height:a}=e;return Object(m.jsxs)(rn,{className:d[0]===t&&d[1]===a?"active-resolution":"",onClick:()=>{u({resolution:[t,a]}),ft()},children:[t," \xd7 ",a]},`${t}-${a}`)}))]}),children:Object(m.jsx)("div",{className:"button-option",onClick:e=>e.stopPropagation(),children:Object(m.jsx)(tn.a,{})})})]})]})}));var ln=a(440),sn=a(462),cn=a(463);const dn=xt.b.div`
    display: flex;
    column-gap: var(--spacing);
    border-radius: var(--br-lg);
    font-size: var(--fs-4xl);
    line-height: 1.5;
    margin: auto;
    max-width: var(--card-width);
    min-height: 59px;
    outline: none !important;   // Avoid default state styling
    padding: var(--spacing);
    padding-right: 0;
    text-align: center;
    text-shadow: 0 1px 2px black;
    .anticon {
        cursor: pointer;
    }
    button {
        color: white;
        border-radius: var(--br-lg);
        outline: none !important;   // Avoid default state styling
        cursor: pointer;
    }
    .save-button {
        flex: 1;
        font-size: var(--fs-xl);
        border: var(--bw) solid var(--sub-secondary);
        font-weight: 500;
        box-shadow: var(--bs-button);
        height: 39px; // Alignment
        line-height: 1;
        &:focus, &:active {
            color: white;
        }
    }
    #save-button-waiting {
        cursor: wait;
        position: absolute;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        z-index: 1;
    }
    #save-button-ready {
        cursor: pointer;
        &:hover {
            background-color: var(--sub-info);
            box-shadow: none;
        }
    }
    .save-button-container {
        display: flex;
        flex: 1;
        font-size: var(--fs);
        line-height: 1.35;
        position: relative;
    }
    .imexport {
        flex: 0 0 210px;
        display: grid;
        grid-template-columns: 1fr 1fr;
        column-gap: var(--spacing);
        button {
            font-size: var(--fs);
            background-color: var(--main-tertiary);
            border: var(--bw) solid var(--sub-tertiary);
            box-shadow: var(--bs-button);
            &:hover {
                background-color: var(--sub-tertiary);
                box-shadow: none;
            }
        }
    }
`,un=xt.b.div`
    width: var(--card-width);
    height: var(--card-height);
    margin-bottom: var(--spacing);
    transform: translateX(var(--translate-ratio)) translateY(var(--translate-ratio)) scale(var(--resize-ratio))
        translateZ(0);
    position: absolute;
    top: 0;
    left: 0;
    canvas {
        position: absolute;
        left: 0;
        z-index: 1;
        pointer-events: none;
    }
    &:hover {
        .reset-button,
        .lightbox-button {
            display: block;
        }
        #export-canvas.js-export-available {
            display: inline-block !important;   // Override js-controlled inline style
            cursor: default;
        }
        #export-canvas-guard {
            display: flex;
            cursor: wait;
            transition: all 2s;
        }
    }
    #export-canvas {
        display: none;
        z-index: 100;
        pointer-events: all;
    }
    #export-canvas-guard {
        position: absolute;
        left: 0;
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 101;
        // background-color: #ffffff08;
        width: var(--card-width);
        height: var(--card-height);
        .anticon {
            font-size: var(--fs-4xl);
        }
        .canvas-guard-alert {
            position: absolute;
            top: 0;
            right: 0;
            color: white;
            padding: var(--spacing-xs) var(--spacing);
            border-radius: 0 0 0 var(--br-lg);
            background-color: var(--main-active);
            box-shadow:
                0 3px 6px rgba(0, 0, 0, 0.16),
                0 3px 6px rgba(0, 0, 0, 0.23);
        }
        &.guard-on {
            display: flex !important;   // Override js-controlled inline style
        }
    }
    .crop-canvas {
        position: relative;
        width: 416px;
        height: 416px;
        z-index: 0;
        visibility: hidden;
    }
`,pn=xt.b.div`
	position: fixed;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	background-image: linear-gradient(45deg, #333, #333);
	z-index: 4000;
	color: white;
	text-shadow:
		0 1px #333,
		0 2px #111;
	font-size: var(--fs-3xl);
	display: flex;
	align-items: center;
	justify-content: center;
`,mn=xt.b.div`
	position: fixed;
	right: var(--spacing);
	bottom: 0;
	font-size: var(--fs-xs);
	opacity: 0.5;
	padding: var(--spacing-px) var(--spacing-xs);
	color: var(--color-dim);
    img {
        height: 10px;
        margin-left: 1px;
    }
`,bn=xt.b.span`
    color: var(--main-danger);
`,fn=xt.b.div`
    --overlay-size: 51px;
    position: absolute;
    z-index: 101;
    background: var(--main-primary);
    border-color: var(--main-active);
    color: var(--color-heavy);
    padding: var(--spacing);
    line-height: 1;
    font-size: var(--fs-3xl);
    text-align: center;
    width: var(--overlay-size);
    height: var(--overlay-size);
    border-radius: var(--br-lg);
    cursor: pointer;
    box-shadow: var(--bs-1);
    display: none;
    &:hover {
        background: var(--sub-primary);
    }
`,hn=Object(xt.b)(fn)`
    top: var(--spacing-xs);
    right: var(--spacing-xs);
`,gn=Object(xt.b)(fn)`
    top: var(--spacing-xs);
    right: calc(var(--overlay-size) + 2 * var(--spacing-xs));
`;var yn=a(154);Object(yn.configure)({ignoreTags:[]});const vn={EXPORT:["ctrl+d","command+d"],IMPORT:["ctrl+e","command+e"],MERGE:["ctrl+g","command+g"],VIEW:["ctrl+b","command+b"],DOWNLOAD:["ctrl+s","command+s"]},{height:xn,width:jn}=i;var wn=function(){var e;const{allowHotkey:t,softMode:a}=Vt(Object(Ga.useShallow)((e=>{let{setting:{allowHotkey:t,reduceMotionColor:a}}=e;return{softMode:a,allowHotkey:t}}))),{isInitiating:o,isLoading:n,language:l,isMetadataReady:s,languageInfo:c,initiate:d,loadDefaultLanguage:u}=zt(Object(Ga.useShallow)((e=>{let{isInitiating:t,isLoading:a,language:r,isMetadataReady:o,languageInfo:n,initiate:l,loadDefaultLanguage:i}=e;return{isInitiating:t,isLoading:a,language:r,isMetadataReady:o,languageInfo:n,initiate:l,loadDefaultLanguage:i}}))),[p,b]=Object(r.useState)(!0),[f,h]=Object(r.useState)(""),[g,y]=Object(r.useState)("external"),[v,x]=Object(r.useState)(0),[j,w]=Object(r.useState)(!1),O=Object(r.useRef)(null),F=Object(r.useRef)(null),k=Object(r.useRef)(null),C=Object(r.useRef)(null),S=Object(r.useRef)(null),T=Object(r.useRef)(null),R=Object(r.useRef)(null),N=Object(r.useRef)(null),L=Object(r.useRef)(null),M=Object(r.useRef)(null),E=Object(r.useRef)(null),I=Object(r.useRef)(null),A=Object(r.useRef)(null),B=Object(r.useRef)(null),$=Object(r.useRef)(null),W=Object(r.useRef)(null),P=Object(r.useRef)(null),D=Object(r.useRef)(null),[z]=Object(r.useState)({artworkCanvasRef:F,backgroundCanvasRef:k,drawCanvasRef:C,frameCanvasRef:S,cardIconCanvasRef:T,pendulumScaleCanvasRef:R,pendulumEffectCanvasRef:N,typeCanvasRef:L,effectCanvasRef:M,nameCanvasRef:E,statCanvasRef:I,setIdCanvasRef:A,passwordCanvasRef:B,creatorCanvasRef:$,stickerCanvasRef:W,finishCanvasRef:P,lightboxCanvasRef:D}),H=Object(r.useRef)(null),[K,G]=Object(r.useState)(0);Object(r.useEffect)((()=>{d()}),[d]),Object(r.useEffect)((()=>{s&&u()}),[s,u]),Object(r.useEffect)((()=>{["font-family","letter-spacing","--width-label"].forEach((e=>{var t,a;document.body.style.setProperty(e,null!==(t=null===(a=c.style)||void 0===a?void 0:a[e])&&void 0!==t?t:"")}))}),[c]),Object(r.useEffect)((()=>{var e;const t=null===(e=C.current)||void 0===e?void 0:e.getContext("2d"),a=Xt.getState().setCard;t&&(t.setTransform(1,0,0,1,0,0),t.imageSmoothingQuality="high",ta(t)),!1===o&&Ka.a.load({custom:{families:["Matrix-Bold","MatrixBoldSmallCaps","MatrixBook","MatrixRegularSmallCaps","RoGSanSrfStd-Bd","YuGiOhITCStoneSerifBSc","matrix","palatino-linotype-bold","stone-serif-bold","stone-serif-regular"],urls:["asset/font.css"]},active:()=>{const e=(()=>{try{const e=window.localStorage.getItem("card-version"),t=window.localStorage.getItem("card-data"),a=new URLSearchParams(window.location.search).get("data");return a?Gt(a):null!==t&&"2.0.11"===e?pt(JSON.parse(t)):Ke()}catch(e){return console.error(e),Ke()}})();a(e),b(!1)},fontinactive(e,t){console.error("TCG fontinactive",e,t),Pt.a.error({message:Kt()["error.load.font.tcg"](e)})},inactive:()=>{h(Kt()["error.load.font.all-tcg"]),b(!1)}})}),[o]);const{styleContent:Y}=(e=>{let{isLanguageInitiating:t,onActive:a,onBeforeLoad:o,onFontInactive:n,onInactive:l}=e;const{font:i,format:s}=Xt(Object(Ga.useShallow)((e=>({format:e.card.format,font:e.card.nameStyle.font})))),[c,d]=Object(r.useState)(""),u=Object(r.useRef)(!1),p=Object(r.useRef)(0);return Object(r.useEffect)((()=>{("ocg"===s||"OCG"===i)&&!1===u.current&&p.current<=3&&!1===t&&(p.current+=1,d("/ygocarder/asset/ocg-font.css"),o(),Ka.a.load({custom:{families:["DFHSGothic-W3-WIN-RKSJ-H","DFKakuTaiHiStd-W4","FOT-Rodin Pro M","Yu-Gi-Oh! DF Leisho 3"],urls:["asset/ocg-font.css"]},active:()=>{u.current=!0,a()},inactive:()=>{u.current=!0,l()},fontinactive:n}))}),[s,i,t,a,o,n,l]),{styleContent:c}})({isLanguageInitiating:o,onBeforeLoad:()=>{var e;b(!0);const t=null===(e=C.current)||void 0===e?void 0:e.getContext("2d");t&&(t.setTransform(1,0,0,1,0,0),t.imageSmoothingQuality="high",ta(t))},onActive:()=>{b(!1)},onInactive:()=>{h(Kt()["error.load.font.all-ocg"]),b(!1)},onFontInactive:(e,t)=>{console.error("OCG fontinactive",e,t),Pt.a.error({message:Kt()["error.load.font.ocg"](e)})}}),[X,V]=Object(r.useState)(!1);Object(r.useEffect)((()=>{const e=document.body.classList;a?e.add("reduced-color-motion"):e.remove("reduced-color-motion")}),[a]);const U=Object(r.useCallback)((e=>{if(!t)return;null===e||void 0===e||e.preventDefault();const a=window.prompt(l["prompt.import.message"]),r=Xt.getState().setCard;if(a){var o;const e=Gt(a);r(e),G((e=>e+1)),null===(o=O.current)||void 0===o||o.forceCardData(e),ft()}}),[t,l]),q=Object(r.useCallback)((e=>{if(!t)return;null===e||void 0===e||e.preventDefault();const a=window.prompt(l["prompt.import.message"]),r=Xt.getState().setCard;if(a){var o;const e=Gt(a,Xt.getState().card);r(e),G((e=>e+1)),null===(o=O.current)||void 0===o||o.forceCardData(e),ft()}}),[t,l]),J=Object(r.useCallback)((e=>{if(!t)return;null===e||void 0===e||e.preventDefault(),"internal"===g&&window.alert(l["prompt.export.offline-warning.message"]);const a=Xt.getState().card;window.prompt(l["prompt.export.message"],`${ct(a)}`)}),[t,l,g]),_=Object(r.useCallback)((e=>{var a;t&&(null===e||void 0===e||e.preventDefault(),null===(a=H.current)||void 0===a||a.download())}),[t]),Z=Object(r.useMemo)((()=>({IMPORT:U,MERGE:q,EXPORT:J,VIEW:()=>w(!0),DOWNLOAD:_})),[_,J,U,q]),Q=Object(r.useCallback)((()=>{V(!0),alert(l["prompt.download.tainted.message"])}),[l]),ee=Object(r.useCallback)((()=>{x((e=>e+1)),G((e=>e+1)),V(!1)}),[]),te=Object(r.useCallback)(((e,t)=>{G((e=>e+1)),y(t)}),[]),ae=Object(r.useCallback)((()=>{G((e=>e+1)),V(!0)}),[]),re=n||p;return Object(m.jsx)(yn.HotKeys,{keyMap:vn,handlers:Z,children:Object(m.jsxs)("div",{id:"app",onDrop:()=>{},className:`language-${c.codeName}`,style:{backgroundImage:'url("/ygocarder/asset/image/texture/debut-dark.png"), linear-gradient(180deg, #00000022, #00000044)',height:yt()?"-webkit-fill-available":"100vh","--card-height":`${i.height}px`,"--card-width":`${i.width}px`},children:[Y&&Object(m.jsx)("link",{rel:"stylesheet",type:"text/css",href:Y}),Object(m.jsxs)("div",{className:"app-container",style:{backgroundImage:'url("/ygocarder/asset/image/texture/dark-denim-3.png")'},children:[re&&Object(m.jsx)(pn,{className:"app-loading",children:f.length>0?Object(m.jsx)(bn,{children:f}):null!==(e=c.initialMessage)&&void 0!==e?e:""}),Object(m.jsxs)("div",{className:"card-preview-panel "+(X?"export-tainted":"export-normal"),children:[Object(m.jsxs)(dn,{className:"data-button-panel",children:[Object(m.jsxs)("div",{className:"imexport",children:[Object(m.jsx)(wt.a,{overlay:t?Object(m.jsx)(m.Fragment,{children:"Ctrl-D / \u2318-D"}):null,children:Object(m.jsx)("button",{onClick:J,children:l["button.export.label"]})}),Object(m.jsx)(wt.a,{overlay:t?Object(m.jsxs)("div",{className:"center",children:[Object(m.jsx)("div",{children:"Ctrl-E / \u2318-E"}),Object(m.jsxs)("div",{children:["Ctrl-G / \u2318-G",l["prompt.import.merge.tooltip"]]})]}):null,children:Object(m.jsx)("button",{onClick:U,children:l["button.import.label"]})})]}),Object(m.jsx)(nn,{ref:H,canvasMap:z,imageChangeCount:K,isTainted:X,isInitializing:p,onDownloadError:Q}),X&&Object(m.jsx)("div",{id:"save-button-tainted",className:"save-button-container",children:Object(m.jsxs)("span",{children:[l["alert.download.tainted-first-line"],Object(m.jsx)("br",{}),l["alert.download.tainted-second-line"]," ",Object(m.jsx)(yr,{})]})})]}),Object(m.jsx)("div",{className:"card-canvas-container",children:Object(m.jsxs)(un,{className:"card-canvas-group",children:[Object(m.jsx)(wt.a,{title:l["button.reset.tooltip"],children:Object(m.jsx)(gn,{className:"reset-button",onClick:()=>{if(window.confirm(l["prompt.reset.message"])){var e;const{setCard:t,card:a}=Xt.getState(),r=Ke(),o="tcg"===a.format?r:Et(r,"ocg");t(o),G((e=>e+1)),null===(e=O.current)||void 0===e||e.forceCardData(o)}},children:Object(m.jsx)(sn.a,{})})}),Object(m.jsx)(wt.a,{title:Object(m.jsxs)("div",{className:"center",children:[l["button.full-size.label"],t?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("br",{}),"Ctrl-B / \u2318-B"]}):null]}),children:Object(m.jsx)(hn,{className:"lightbox-button",onClick:()=>w((e=>!e)),children:Object(m.jsx)(cn.a,{})})}),Object(m.jsx)("canvas",{id:"export-canvas",ref:C,width:jn,height:xn},v+.1),Object(m.jsx)("div",{id:"export-canvas-guard",onContextMenu:e=>e.preventDefault()}),Object(m.jsx)("canvas",{id:"frameCanvas",ref:S,width:jn,height:xn},v),Object(m.jsx)("canvas",{id:"nameCanvas",ref:E,width:jn,height:148}),Object(m.jsx)("canvas",{id:"cardIconCanvas",ref:T,width:jn,height:222}),Object(m.jsx)("canvas",{id:"pendulumScaleCanvas",ref:R,width:jn,height:889}),Object(m.jsx)("canvas",{id:"pendulumEffectCanvas",ref:N,width:jn,height:889}),Object(m.jsx)("canvas",{id:"typeCanvas",ref:L,width:jn,height:1037}),Object(m.jsx)("canvas",{id:"effectCanvas",ref:M,width:jn,height:1111}),Object(m.jsx)("canvas",{id:"statCanvas",ref:I,width:jn,height:xn}),Object(m.jsx)("canvas",{id:"setIdCanvas",ref:A,width:jn,height:xn}),Object(m.jsx)("canvas",{id:"passwordCanvas",ref:B,width:jn,height:xn}),Object(m.jsx)("canvas",{id:"creatorCanvas",ref:$,width:jn,height:xn}),Object(m.jsx)("canvas",{id:"stickerCanvas",ref:W,width:jn,height:xn}),Object(m.jsx)("canvas",{id:"finishCanvas",ref:P,width:jn,height:xn}),Object(m.jsx)("canvas",{className:"crop-canvas",ref:F}),Object(m.jsx)("canvas",{className:"crop-canvas",ref:k})]})})]}),!1===re&&Object(m.jsx)(Zo,{ref:O,artworkCanvas:F.current,backgroundCanvas:k.current,onSourceLoaded:ee,onCropChange:te,onTainted:ae})]}),Object(m.jsx)(ln.a,{width:"843px",wrapClassName:"card-lightbox-overlay",visible:j,forceRender:!0,onCancel:()=>w(!1),footer:null,children:Object(m.jsx)("canvas",{id:"lightbox-canvas",ref:D,width:jn,height:xn},v+.1)}),Object(m.jsxs)(mn,{className:"by-me",children:["Made by Lauqerm ",Object(m.jsx)("img",{src:"https://i.imgur.com/RY6IRqn.png",alt:"avatar"})]})]})})};var On=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,464)).then((t=>{let{getCLS:a,getFID:r,getFCP:o,getLCP:n,getTTFB:l}=t;a(e),r(e),o(e),n(e),l(e)}))};l.a.render(Object(m.jsx)(o.a.StrictMode,{children:Object(m.jsx)(wn,{})}),document.getElementById("root")),On()}},[[433,1,2]]]);
//# sourceMappingURL=main.74220fb4.chunk.js.map