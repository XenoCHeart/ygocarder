(this.webpackJsonpygocarder=this.webpackJsonpygocarder||[]).push([[0],{215:function(e,t,n){},217:function(e,t,n){},218:function(e,t,n){},219:function(e,t,n){},220:function(e,t,n){},246:function(e,t,n){},260:function(e,t,n){},261:function(e,t,n){},262:function(e,t,n){},268:function(e,t,n){},376:function(e,t,n){},382:function(e,t,n){},383:function(e,t,n){},384:function(e,t,n){},392:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(0),o=n.n(a),i=n(35),c=n.n(i),l=(n(215),n(2)),s=n(11),u=(n(216),n(217),n(218),n(219),n(220),[{value:"fit",label:"Fit to art border"},{value:"full",label:"Span all the card"}]),d=813,f=1185,b=210,p=912,m=52,h="#404040",v=function(){return{body:100,pendulum:100,text:100,name:100,baseFill:h,artBorder:!0,nameBorder:!0,boundless:!1}},g={normal:{artFinishX:100,artFinishY:219,artWidth:614,artX:100,artY:219,ratio:1,type:"normal"},pendulum:{artFinishX:56,artFinishY:213,artWidth:702,artX:56,artY:213,ratio:1.325,type:"pendulum"},extendedCard:{artFinishX:100,artFinishY:219,artWidth:702,artX:56,artY:213,ratio:.775,type:"extendedCard"},extendedPendulum:{artFinishX:56,artFinishY:213,artWidth:702,artX:56,artY:213,ratio:.775,type:"extendedPendulum"},truePendulum:{artFinishX:56,artFinishY:213,artWidth:702,artX:56,artY:213,ratio:1.057,type:"truePendulum"},fullCard:{artFinishX:100,artFinishY:219,artWidth:758,artX:28,artY:28,ratio:.67,type:"fullCard"},fullPendulum:{artFinishX:56,artFinishY:213,artWidth:758,artX:28,artY:28,ratio:.67,type:"fullPendulum"}},j=function(e,t,n){var r=Object(l.a)(Object(l.a)({},v()),t),a=r.boundless,o=r.body,i=r.pendulum,c=r.text;return"full"===n?g.fullCard:g["fit"!==n&&a||o<100?e?"fullPendulum":"fullCard":e?c<100?"extendedPendulum":i<100?"truePendulum":"pendulum":c<100?"extendedCard":"normal"]},x=n(406),y="NONE",O=[{name:y,color:"#000000"},{name:"DARK",label:"Dark",color:"#b41dda"},{name:"EARTH",label:"Earth",color:"#8d8e8e"},{name:"FIRE",label:"Fire",color:"#e51b23"},{name:"LIGHT",label:"Light",color:"#bfae32"},{name:"WATER",label:"Water",color:"#008ecd"},{name:"WIND",label:"Wind",color:"#28ab35"},{name:"DIVINE",label:"Divine",color:"#ef6300"},{name:"SPELL",label:"Spell",color:"#1b8f83"},{name:"TRAP",label:"TRAP",color:"#c32a8c"}],w="NO ICON",k=[{label:Object(r.jsx)(x.a,{}),value:w},{label:"Field",value:"FIELD"},{label:"Continuous",value:"CONTINUOUS"},{label:"Quick-Play",value:"QUICK-PLAY"},{label:"Ritual",value:"RITUAL"},{label:"Equip",value:"EQUIP"},{label:"Counter",value:"COUNTER"}],F=(k.map((function(e){return e.value})),function(e){return Object(l.a)({hasGradient:!1,hasOutline:!1,hasShadow:!1,pattern:"none"},e)}),C={commonB:{key:"commonB",label:"Common (Black)",image:"asset/image/other/name-common-b.png",value:F({preset:"commonB",fillStyle:"#000000"})},commonW:{key:"commonW",label:"Common (White)",image:"asset/image/other/name-common-w.png",value:F({preset:"commonW",fillStyle:"#ffffff"})},skillDefault:{key:"skillDefault",label:"Skill (Default)",image:"asset/image/other/name-skill-default.png",value:F({preset:"skillDefault",fillStyle:"#ffffff",lineWidth:6,lineColor:"#000",hasOutline:!0})},skillArial:{key:"skillArial",label:"Skill (Arial)",image:"asset/image/other/name-skill-arial.png",value:F({preset:"skillArial",font:"Arial",fillStyle:"#ffffff",lineWidth:6,lineColor:"#000",lineOffsetX:1,hasOutline:!0})},rare:{key:"rare",label:"Rare",image:"asset/image/other/name-rare.png",value:F({preset:"rare",fillStyle:"#cfc6de"})},secretGradient:{key:"secretGradient",label:"Secret (Gradient)",image:"asset/image/other/name-secret-gradient.png",value:F({preset:"secretGradient",gradientAngle:180,gradientColor:"0.000|#7a71a6,1.000|#a8c1e5",hasGradient:!0})},secret:{key:"secret",label:"Secret",image:"asset/image/other/name-secret.png",value:F({preset:"secret",fillStyle:"#8a8381"})},platinum2:{key:"platinum2",label:"Platinum",image:"asset/image/other/name-platinum.png",value:F({preset:"platinum2",fillStyle:"#a49f9e"})},ultra:{key:"ultra",label:"Ultra",image:"asset/image/other/name-ultra.png",value:F({preset:"ultra",fillStyle:"#dbb473"})},ultra2:{key:"ultra2",label:"Ultra (Type 2)",image:"asset/image/other/name-ultra-2.png",value:F({preset:"ultra2",fillStyle:"#fee002"})},platinum:{key:"platinum",label:"Foil Platinum",image:"asset/image/other/name-foil-platinum.png",value:F({preset:"platinum",fillStyle:"#CCCCCC",shadowColor:"#FFFFFF",shadowOffsetY:1,shadowOffsetX:0,shadowBlur:1,hasShadow:!0})},gold:{key:"gold",label:"Foil Gold",image:"asset/image/other/name-foil-gold.png",value:F({preset:"gold",fillStyle:"#b88c43",shadowColor:"#FCC400",shadowOffsetY:1,shadowOffsetX:0,shadowBlur:1,hasShadow:!0})},animeRed:{key:"animeRed",label:"Anime (Type Red)",image:"asset/image/other/name-anime-red.png",value:F({preset:"animeRed",gradientAngle:180,gradientColor:"0.000|#d81961,0.220|#b81654,0.270|#9e1348,0.330|#95093e,0.380|#95093e,0.450|#ba3264,0.530|#ff5e99,0.620|#ffa0c3,0.690|#ffffff,0.770|#ff5e99,0.870|#d81961,1.000|#b81654",hasGradient:!0,hasOutline:!0,hasShadow:!0,lineColor:"#333333",lineOffsetX:1,lineOffsetY:0,lineWidth:3,shadowBlur:2,shadowColor:"#383838",shadowOffsetX:2,shadowOffsetY:3})},animeSilver:{key:"animeSilver",label:"Anime (Type Silver)",image:"asset/image/other/name-anime-silver.png",value:F({preset:"animeSilver",shadowColor:"#383838",shadowOffsetY:3,shadowOffsetX:2,shadowBlur:2,hasShadow:!0,lineColor:"#333333",lineWidth:3,lineOffsetX:1,lineOffsetY:0,hasOutline:!0,gradientAngle:180,gradientColor:"0.000|#cecbb8,0.220|#b0ad9b,0.270|#94917e,0.330|#797768,0.380|#797768,0.450|#d9d9d9,0.610|#ffffff,0.700|#ffffff,0.870|#d6d7c7,1.000|#c9cbb6",hasGradient:!0})},animeGold:{key:"animeGold",label:"Anime (Type Gold)",image:"asset/image/other/name-anime-gold.png",value:F({preset:"animeGold",shadowColor:"#383838",shadowOffsetY:3,shadowOffsetX:2,shadowBlur:2,hasShadow:!0,lineColor:"#333333",lineWidth:3,lineOffsetX:1,lineOffsetY:0,hasOutline:!0,gradientAngle:180,gradientColor:"0.000|#eee317,0.220|#dbbe15,0.270|#d0920c,0.330|#b57f0b,0.380|#d0920c,0.450|#ffff6b,0.610|#ffffff,0.700|#ffffff,0.870|#e5dd2d,1.000|#e3da23",hasGradient:!0})},promo:{key:"promo",label:"Promo",image:"asset/image/other/name-promo.png",value:F({preset:"promo",fillStyle:"#c7080b",shadowColor:"#333333",shadowOffsetY:0,shadowOffsetX:0,shadowBlur:1,hasShadow:!0,lineColor:"#8a1801",lineWidth:3,lineOffsetX:0,hasOutline:!0,lineOffsetY:0})}},S=Object.values(C),T={none:{key:"none",patternImage:"",blendMode:"source-atop"},type1:{key:"type1",patternImage:"finish-name-type1",blendMode:"source-atop"},type2:{key:"type2",patternImage:"finish-name-type2",blendMode:"source-atop"},type3:{key:"type3",patternImage:"finish-name-type3",blendMode:"source-atop"},type4:{key:"type4",patternImage:"finish-name-type4",blendMode:"source-atop"},type5:{key:"type5",patternImage:"finish-name-type5",blendMode:"multiply",overrideFill:!0},type6:{key:"type6",patternImage:"finish-name-type6",blendMode:"source-atop"},type7:{key:"type7",patternImage:"finish-name-type7",blendMode:"lighter",overrideFill:!0},type8:{key:"type8",patternImage:"finish-name-type8",blendMode:"source-atop"},type9:{key:"type9",patternImage:"finish-name-type9",blendMode:"source-atop"}},R=Object.values(T),N={tcg:[{trueWidth:684,trueBaseline:890.23,trueEdge:64.8}],"tcg-stat":[{trueWidth:684,trueBaseline:890.23,trueEdge:64.8}],"tcg-type-stat":[{trueWidth:684,trueBaseline:919.8,trueEdge:64.5}],"tcg-type":[{trueWidth:684,trueBaseline:921.8,trueEdge:64.5}],ocg:[{trueWidth:684,trueBaseline:895.23,trueEdge:64.8}],"ocg-stat":[{trueWidth:684,trueBaseline:891.23,trueEdge:64.8}],"ocg-type-stat":[{trueWidth:684,trueBaseline:918.5,trueEdge:64.5}],"ocg-type":[{trueWidth:684,trueBaseline:918.5,trueEdge:64.5}]},L=[{trueWidth:555.47,trueBaseline:746.29,trueEdge:128.94},{trueWidth:555.47,trueBaseline:746.29,trueEdge:128.94}],M={tcg:{small:{trueBaseline:919,trueEdge:62.5,trueWidth:684.5},medium:{trueBaseline:920,trueEdge:62.5,trueWidth:684.5},large:{trueBaseline:187.5,trueEdge:732,edgeAlignment:"right",trueWidth:648.5}},ocg:{small:{trueBaseline:917,trueEdge:63.7,trueWidth:684.5},medium:{trueBaseline:917,trueEdge:63.7,trueWidth:684.5},large:{trueBaseline:190.5,trueEdge:728,edgeAlignment:"right",trueWidth:642.5}}},I={ocg:{trueBaseline:1146.5,trueEdge:736,trueWidth:435},tcg:{trueBaseline:1149.5,trueEdge:733,trueWidth:380}},A=[{shortForm:"\u7279\u6b8a\u53ec\u559a",rubyForm:"{\u7279|\u3068\u304f}{\u6b8a|\u3057\u3085}{\u53ec|\u3057\u3087\u3046}{\u559a|\u304b\u3093}"},{shortForm:"\u30ab\u30fc\u30c9",rubyForm:"{\u30ab\u30fc\u30c9}"},{shortForm:"\u30c7\u30e5\u30a8\u30eb",rubyForm:"{\u30c7\u30e5\u30a8\u30eb}"},{shortForm:"\u30de\u30c3\u30c1",rubyForm:"{\u30de\u30c3\u30c1}"},{shortForm:"\u30bf\u30fc\u30f3",rubyForm:"{\u30bf\u30fc\u30f3}"},{shortForm:"\u30d7\u30ec\u30a4\u30e4\u30fc",rubyForm:"{\u30d7\u30ec\u30a4\u30e4\u30fc}"},{shortForm:"\u81ea\u5206",rubyForm:"{\u81ea|\u3058}{\u5206|\u3076\u3093}"},{shortForm:"\u76f8\u624b",rubyForm:"{\u76f8|\u3042\u3044}{\u624b|\u3066}"},{shortForm:"LP",regexForm:"(?<![a-zA-Z_])LP(?![a-zA-Z_])",rubyForm:"{LP|\u30e9\u30a4\u30d5\u30dd\u30a4\u30f3\u30c8}"},{shortForm:"\u30c7\u30c3\u30ad",rubyForm:"{\u30c7\u30c3\u30ad}"},{shortForm:"\u30e1\u30a4\u30f3",rubyForm:"{\u30e1\u30a4\u30f3}"},{shortForm:"\u30b5\u30a4\u30c9",rubyForm:"{\u30b5\u30a4\u30c9}"},{shortForm:"EX",regexForm:"(?<!\\w)EX(?!\\w)",rubyForm:"{EX|\u30a8\u30af\u30b9\u30c8\u30e9}"},{shortForm:"\u30d5\u30a3\u30fc\u30eb\u30c9",rubyForm:"{\u30d5\u30a3\u30fc\u30eb\u30c9}"},{shortForm:"\u5893\u5730",rubyForm:"{\u5893|\u307c}{\u5730|\u3061}"},{shortForm:"\u624b\u672d",rubyForm:"{\u624b|\u3066}{\u672d|\u3075\u3060}"},{shortForm:"\u30be\u30fc\u30f3",rubyForm:"{\u30be\u30fc\u30f3}"},{shortForm:"\u30e2\u30f3\u30b9\u30bf\u30fc",rubyForm:"{\u30e2\u30f3\u30b9\u30bf\u30fc}"},{shortForm:"\u7e26\u5217",rubyForm:"{\u7e26|\u305f\u3066}{\u5217|\u308c\u3064}"},{shortForm:"\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc",rubyForm:"{\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc}"},{shortForm:"\u6301\u3061\u4e3b",rubyForm:"{\u6301|\u3082}\u3061{\u4e3b|\u306c\u3057}"},{shortForm:"\u30c0\u30e1\u30fc\u30b8",rubyForm:"{\u30c0\u30e1\u30fc\u30b8}"},{shortForm:"\u6226\u95d8",rubyForm:"{\u6226|\u305b\u3093}{\u95d8|\u3068\u3046}"},{shortForm:"\u30b9\u30da\u30eb",rubyForm:"{\u30b9\u30da\u30eb}"},{shortForm:"\u30b9\u30d4\u30fc\u30c9",rubyForm:"{\u30b9\u30d4\u30fc\u30c9}"},{shortForm:"\u30c1\u30a7\u30fc\u30f3",rubyForm:"{\u30c1\u30a7\u30fc\u30f3}"},{shortForm:"\u30d6\u30ed\u30c3\u30af",rubyForm:"{\u30d6\u30ed\u30c3\u30af}"},{shortForm:"\u76f4\u63a5",rubyForm:"{\u76f4|\u3061\u3087\u304f}{\u63a5|\u305b\u3064}"},{shortForm:"\u7d20\u6750",rubyForm:"{\u7d20|\u305d}{\u6750|\u3056\u3044}"},{shortForm:"\u540d",rubyForm:"{\u540d|\u3081\u3044}"},{shortForm:"\u6761\u4ef6",rubyForm:"{\u6761|\u3058\u3087\u3046}{\u4ef6|\u3051\u3093}"},{shortForm:"\u30b3\u30a4\u30f3",rubyForm:"{\u30b3\u30a4\u30f3}"},{shortForm:"\u30b5\u30a4\u30b3\u30ed",rubyForm:"{\u30b5\u30a4\u30b3\u30ed}"},{shortForm:"\u5143",rubyForm:"{\u5143|\u3082\u3068}"},{shortForm:"\u5148",rubyForm:"{\u5148|\u3055\u304d}"},{shortForm:"\u72b6\u614b",rubyForm:"{\u72b6|\u3058\u3087\u3046}{\u614b|\u305f\u3044}"},{shortForm:"\u76f8\u4e92",rubyForm:"{\u76f8|\u305d\u3046}{\u4e92|\u3054}"},{shortForm:"\u30a8\u30af\u30b9\u30c8\u30e9",rubyForm:"{\u30a8\u30af\u30b9\u30c8\u30e9}"},{shortForm:"\u30d5\u30a7\u30a4\u30ba",rubyForm:"{\u30d5\u30a7\u30a4\u30ba}"},{shortForm:"\u30c9\u30ed\u30fc",rubyForm:"{\u30c9\u30ed\u30fc}"},{shortForm:"\u30b9\u30bf\u30f3\u30d0\u30a4",rubyForm:"{\u30b9\u30bf\u30f3\u30d0\u30a4}"},{shortForm:"\u30d0\u30c8\u30eb",rubyForm:"{\u30d0\u30c8\u30eb}"},{shortForm:"\u30a8\u30f3\u30c9",rubyForm:"{\u30a8\u30f3\u30c9}"},{shortForm:"\u30b9\u30bf\u30fc\u30c8",rubyForm:"{\u30b9\u30bf\u30fc\u30c8}"},{shortForm:"\u30b9\u30c6\u30c3\u30d7",rubyForm:"{\u30b9\u30c6\u30c3\u30d7}"},{shortForm:"\u7a2e\u985e",rubyForm:"{\u7a2e|\u3057\u3085}{\u985e|\u308b\u3044}"},{shortForm:"\u5f62\u5f0f",rubyForm:"{\u5f62|\u3051\u3044}{\u5f0f|\u3057\u304d}"},{shortForm:"\u8868\u5074",rubyForm:"{\u8868|\u304a\u3082\u3066}{\u5074|\u304c\u308f}"},{shortForm:"\u88cf\u5074",rubyForm:"{\u88cf|\u3046\u3089}{\u5074|\u304c\u308f}"},{shortForm:"\u8868\u793a",rubyForm:"{\u8868|\u3072\u3087\u3046}{\u793a|\u3058}"},{shortForm:"\u7f60",rubyForm:"{\u7f60|\u30c8\u30e9\u30c3\u30d7}"},{shortForm:"\u30a2\u30af\u30b7\u30e7\u30f3",rubyForm:"\u30a2\u30af\u30b7\u30e7\u30f3"},{shortForm:"\u88c5\u5099",rubyForm:"{\u88c5|\u305d\u3046}{\u5099|\u3073}"},{shortForm:"\u901f\u653b",rubyForm:"{\u901f|\u305d\u3063}{\u653b|\u3053\u3046}"},{shortForm:"\u6c38\u7d9a",rubyForm:"{\u6c38|\u3048\u3044}{\u7d9a|\u305e\u304f}"},{shortForm:"\u30ab\u30a6\u30f3\u30bf\u30fc",rubyForm:"{\u30ab\u30a6\u30f3\u30bf\u30fc}"},{shortForm:"\u30ec\u30d9\u30eb",rubyForm:"{\u30ec\u30d9\u30eb}"},{shortForm:"\u30e9\u30f3\u30af",rubyForm:"{\u30e9\u30f3\u30af}"},{shortForm:"\u30b9\u30b1\u30fc\u30eb",rubyForm:"{\u30b9\u30b1\u30fc\u30eb}"},{shortForm:"\u653b\u6483\u529b",rubyForm:"{\u653b|\u3053\u3046}{\u6483|\u3052\u304d}{\u529b|\u308a\u3087\u304f}"},{shortForm:"\u5b88\u5099\u529b",rubyForm:"{\u5b88|\u3057\u3085}{\u5099|\u3073}{\u529b|\u308a\u3087\u304f}"},{shortForm:"\u6483\u529b",rubyForm:"{\u6483|\u3052\u304d}{\u529b|\u308a\u3087\u304f}"},{shortForm:"\u52dd\u5229",rubyForm:"{\u52dd|\u3057\u3087\u3046}{\u5229|\u308a}"},{shortForm:"\u5c5e\u6027",rubyForm:"{\u5c5e|\u305e\u304f}{\u6027|\u305b\u3044}"},{shortForm:"\u7a2e\u65cf",rubyForm:"{\u7a2e|\u3057\u3085}{\u65cf|\u305e\u304f}"},{shortForm:"\u52b9\u679c",rubyForm:"{\u52b9|\u3053\u3046}{\u679c|\u304b}"},{shortForm:"\u878d\u5408",rubyForm:"{\u878d|\u3086\u3046}{\u5408|\u3054\u3046}"},{shortForm:"\u5100\u5f0f",rubyForm:"{\u5100|\u304e}{\u5f0f|\u3057\u304d}"},{shortForm:"\u30de\u30ad\u30b7\u30de\u30e0",rubyForm:"{\u30de\u30ad\u30b7\u30de\u30e0}"},{shortForm:"\u30c8\u30fc\u30af\u30f3",rubyForm:"{\u30c8\u30fc\u30af\u30f3}"},{shortForm:"\u30c1\u30e5\u30fc\u30ca\u30fc",rubyForm:"{\u30c1\u30e5\u30fc\u30ca\u30fc}"},{shortForm:"\u30c7\u30e5\u30a2\u30eb",rubyForm:"{\u30c7\u30e5\u30a2\u30eb}"},{shortForm:"\u30ea\u30d0\u30fc\u30b9",rubyForm:"{\u30ea\u30d0\u30fc\u30b9}"},{shortForm:"\u30c8\u30a5\u30fc\u30f3",rubyForm:"{\u30c8\u30a5\u30fc\u30f3}"},{shortForm:"\u30b9\u30d4\u30ea\u30c3\u30c8",rubyForm:"{\u30b9\u30d4\u30ea\u30c3\u30c8}"},{shortForm:"\u30e6\u30cb\u30aa\u30f3",rubyForm:"{\u30e6\u30cb\u30aa\u30f3}"},{shortForm:"\u5149",rubyForm:"{\u5149|\u3072\u304b\u308a}"},{shortForm:"\u95c7",rubyForm:"{\u95c7|\u3084\u307f}"},{shortForm:"\u5730",rubyForm:"{\u5730|\u3061}"},{shortForm:"\u6c34",rubyForm:"{\u6c34|\u307f\u305a}"},{shortForm:"\u708e",rubyForm:"{\u708e|\u307b\u306e\u304a}"},{shortForm:"\u98a8",rubyForm:"{\u98a8|\u304b\u305c}"},{shortForm:"\u7363\u6226\u58eb",rubyForm:"{\u7363|\u3058\u3085\u3046}{\u6226|\u305b\u3093}{\u58eb|\u3057}"},{shortForm:"\u5275\u9020\u795e",rubyForm:"{\u5275|\u305d\u3046}{\u9020|\u305e\u3046}{\u795e|\u3057\u3093}"},{shortForm:"\u30b5\u30a4\u30d0\u30fc\u30b9",rubyForm:"{\u30b5\u30a4\u30d0\u30fc\u30b9}"},{shortForm:"\u6050\u7adc",rubyForm:"{\u6050|\u304d\u3087\u3046}{\u7adc|\u308a\u3085\u3046}"},{shortForm:"\u5e7b\u795e\u7363",rubyForm:"{\u5e7b|\u3052\u3093}{\u795e|\u3057\u3093}{\u7363|\u3058\u3085\u3046}"},{shortForm:"\u5929\u4f7f",rubyForm:"{\u5929|\u3066\u3093}{\u4f7f|\u3057}"},{shortForm:"\u60aa\u9b54",rubyForm:"{\u60aa|\u3042\u304f}{\u9b54|\u307e}"},{shortForm:"\u9b5a",rubyForm:"{\u9b5a|\u3055\u304b\u306a}"},{shortForm:"\u30ae\u30e3\u30e9\u30af\u30b7\u30fc",rubyForm:"{\u30ae\u30e3\u30e9\u30af\u30b7\u30fc}"},{shortForm:"\u5e7b\u60f3\u9b54",rubyForm:"{\u5e7b|\u3052\u3093}{\u60f3|\u305d\u3046}{\u9b54|\u307e}"},{shortForm:"\u6606\u866b",rubyForm:"{\u6606|\u3053\u3093}{\u866b|\u3061\u3085\u3046}"},{shortForm:"\u6a5f\u68b0",rubyForm:"{\u6a5f|\u304d}{\u68b0|\u304b\u3044}"},{shortForm:"\u690d\u7269",rubyForm:"{\u690d|\u3057\u3087\u304f}{\u7269|\u3076\u3064}"},{shortForm:"\u722c\u866b\u985e",rubyForm:"{\u722c|\u306f}{\u866b|\u3061\u3085\u3046}{\u985e|\u308b\u3044}"},{shortForm:"\u5ca9\u77f3",rubyForm:"{\u5ca9|\u304c\u3093}{\u77f3|\u305b\u304d}"},{shortForm:"\u6d77\u7adc",rubyForm:"{\u6d77|\u304b\u3044}{\u7adc|\u308a\u3085\u3046}"},{shortForm:"\u9b54\u6cd5\u4f7f\u3044",rubyForm:"{\u9b54|\u307e}{\u6cd5|\u307b\u3046}{\u4f7f|\u3064\u304b}\u3044"},{shortForm:"\u96f7",rubyForm:"{\u96f7|\u3044\u304b\u305a\u3061}"},{shortForm:"\u9ce5\u7363",rubyForm:"{\u9ce5|\u3061\u3087\u3046}{\u7363|\u3058\u3085\u3046}"},{shortForm:"\u5e7b\u7adc",rubyForm:"{\u5e7b|\u3052\u3093}{\u7adc|\u308a\u3085\u3046}"},{shortForm:"\u30a2\u30f3\u30c7\u30c3\u30c8",rubyForm:"{\u30a2\u30f3\u30c7\u30c3\u30c8}"},{shortForm:"\u30b5\u30a4\u30dc\u30fc\u30b0",rubyForm:"{\u30b5\u30a4\u30dc\u30fc\u30b0}"},{shortForm:"\u5929\u754c\u6226\u58eb",rubyForm:"{\u5929|\u3066\u3093}{\u754c|\u304b\u3044}{\u6226|\u305b\u3093}{\u58eb|\u3057}"},{shortForm:"\u30cf\u30a4\u30c9\u30e9\u30b4\u30f3",rubyForm:"{\u30cf\u30a4\u30c9\u30e9\u30b4\u30f3}"},{shortForm:"\u9b54\u5c0e\u9a0e\u58eb",rubyForm:"{\u9b54|\u307e}{\u5c0e|\u3069\u3046}{\u9a0e|\u304d}{\u58eb|\u3057}"},{shortForm:"\u7121\u52b9\u5316",rubyForm:"{\u7121|\u3080}{\u52b9|\u3053\u3046}{\u5316|\u304b}"},{shortForm:"\u30aa\u30e1\u30ac",rubyForm:"{\u30aa\u30e1\u30ac}"},{shortForm:"\u30b5\u30a4\u30ad\u30c3\u30af",rubyForm:"{\u30b5\u30a4\u30ad\u30c3\u30af}"},{shortForm:"\u6368\u3066\u308b",rubyForm:"{\u6368|\u3059}\u3066\u308b"},{shortForm:"\u52a0\u3048\u308b",rubyForm:"{\u52a0|\u304f\u308f}\u3048\u308b"},{shortForm:"\u304b\u3089\u96e2\u308c\u308b",rubyForm:"\u304b\u3089{\u96e2|\u306f\u306a}\u308c\u308b"},{shortForm:"\u4e0e\u3048\u308b",rubyForm:"{\u4e0e|\u3042\u305f}\u3048\u308b"},{shortForm:"\u91cd\u306d\u308b",rubyForm:"{\u91cd|\u304b\u3055}\u306d\u308b"},{shortForm:"\u53d6\u308a\u9664\u304f",rubyForm:"{\u53d6|\u3068}\u308a{\u9664|\u305e}\u304f"},{shortForm:"\u53d6\u308a\u9664\u3044",rubyForm:"{\u53d6|\u3068}\u308a{\u9664|\u305e}\u3044"},{shortForm:"\u9664\u304f",rubyForm:"{\u9664|\u306e\u305e}\u304f"},{shortForm:"\u884c\u3046",rubyForm:"{\u884c|\u304a\u3053\u306a}\u3046"},{shortForm:"\u5bfe\u3059",rubyForm:"{\u5bfe|\u305f\u3044}\u3059"},{shortForm:"\u9001\u308b",rubyForm:"{\u9001|\u304a\u304f}\u308b"},{shortForm:"\u7f6e\u304f",rubyForm:"{\u7f6e|\u304a}\u304f"},{shortForm:"\u3081\u304f\u308b",rubyForm:"{\u3081\u304f\u308b}"},{shortForm:"\u30a2\u30c9\u30d0\u30f3\u30b9",rubyForm:"{\u30a2\u30c9\u30d0\u30f3\u30b9}"},{shortForm:"\u53cd\u8ee2",rubyForm:"{\u53cd|\u306f\u3093}{\u8ee2|\u3066\u3093}"},{shortForm:"\u7279\u6b8a",rubyForm:"{\u7279|\u3068\u304f}{\u6b8a|\u3057\u3085}"},{shortForm:"\u767a\u52d5",rubyForm:"{\u767a|\u306f\u3064}{\u52d5|\u3069\u3046}"},{shortForm:"\u7834\u58ca",rubyForm:"{\u7834|\u306f}{\u58ca|\u304b\u3044}"},{shortForm:"\u5bfe\u8c61",rubyForm:"{\u5bfe|\u305f\u3044}{\u8c61|\u3057\u3087\u3046}"},{shortForm:"\u7121\u52b9",rubyForm:"{\u7121|\u3080}{\u52b9|\u3053\u3046}"},{shortForm:"\u653b\u6483",rubyForm:"{\u653b|\u3053\u3046}{\u6483|\u3052\u304d}"},{shortForm:"\u51e6\u7406",rubyForm:"{\u51e6|\u3057\u3087}{\u7406|\u308a}"},{shortForm:"\u5ba3\u8a00",rubyForm:"{\u5ba3|\u305b\u3093}{\u8a00|\u3052\u3093}"},{shortForm:"\u9664\u5916",rubyForm:"{\u9664|\u3058\u3087}{\u5916|\u304c\u3044}"},{shortForm:"\u30ea\u30ea\u30fc\u30b9",rubyForm:"{\u30ea\u30ea\u30fc\u30b9}"},{shortForm:"\u30b9\u30ad\u30c3\u30d7",rubyForm:"{\u30b9\u30ad\u30c3\u30d7}"},{shortForm:"\u30b7\u30e3\u30c3\u30d5\u30eb",rubyForm:"{\u30b7\u30e3\u30c3\u30d5\u30eb}"},{shortForm:"\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb",rubyForm:"{\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb}"},{shortForm:"\u30bb\u30c3\u30c8",rubyForm:"{\u30bb\u30c3\u30c8}"},{shortForm:"RUM",regexForm:"(?<!\\w)RUM(?!\\w)",rubyForm:"{RUM|\u30e9\u30f3\u30af\u30a2\u30c3\u30d7\u30de\u30b8\u30c3\u30af}"},{shortForm:"S",regexForm:"(?<!\\w)S(?!\\w)",rubyForm:"{S|\u30b7\u30f3\u30af\u30ed}"},{shortForm:"X",regexForm:"(?<!\\w)X(?!\\w)",rubyForm:"{X|\u30a8\u30af\u30b7\u30fc\u30ba}"},{shortForm:"L",regexForm:"(?<!\\w)L(?!\\w)",rubyForm:"{L|\u30ea\u30f3\u30af}"},{shortForm:"P",regexForm:"(?<!\\w)P(?!\\w)",rubyForm:"{P|\u30da\u30f3\u30c7\u30e5\u30e9\u30e0}"},{shortForm:"\u30ea\u30f3\u30af",rubyForm:"{\u30ea\u30f3\u30af}"},{shortForm:"\u5b88\u5099",rubyForm:"{\u5b88|\u3057\u3085}{\u5099|\u3073}"},{shortForm:"\u901a\u5e38",rubyForm:"{\u901a|\u3064\u3046}{\u5e38|\u3058\u3087\u3046}"},{shortForm:"\u53ef\u80fd",rubyForm:"{\u53ef|\u304b}{\u80fd|\u306e\u3046}"},{shortForm:"\u795e",rubyForm:"{\u795e|\u304b\u307f}"},{shortForm:"\u7363",rubyForm:"{\u7363|\u3051\u3082\u306e}"},{shortForm:"\u30c9\u30e9\u30b4\u30f3",rubyForm:"{\u30c9\u30e9\u30b4\u30f3}"},{shortForm:"\u30b5\u30a4\u30ad\u30c3\u30af",rubyForm:"{\u30b5\u30a4\u30ad\u30c3\u30af}"},{shortForm:"\u91cd\u306d\u3066",rubyForm:"{\u91cd|\u304b\u3055}\u306d\u3066"},{shortForm:"\u9b54\u6cd5",rubyForm:"{\u9b54|\u307e}{\u6cd5|\u307b\u3046}"},{shortForm:"\u6226\u58eb",rubyForm:"{\u6226|\u305b\u3093}{\u58eb|\u3057}"},{shortForm:"\u53ec\u559a",rubyForm:"{\u53ec|\u3057\u3087\u3046}{\u559a|\u304b\u3093}"},{shortForm:"\u5408\u8a08",rubyForm:"{\u5408|\u3054\u3046}{\u8a08|\u3051\u3044}"},{shortForm:"\u4ee5\u4e0a",rubyForm:"{\u4ee5|\u3044}{\u4e0a|\u3058\u3087\u3046}"},{shortForm:"\u5834\u5408",rubyForm:"{\u5834|\u3070}{\u5408|\u3042\u3044}"},{shortForm:"\u964d\u81e8",rubyForm:"{\u964d|\u3053\u3046}{\u81e8|\u308a\u3093}"},{shortForm:"\u4ee5\u5916",rubyForm:"{\u4ee5|\u3044}{\u5916|\u304c\u3044}"},{shortForm:"\u4f7f\u7528",rubyForm:"{\u4f7f|\u3057}{\u7528|\u3088\u3046}"},{shortForm:"\u5b58\u5728",rubyForm:"{\u5b58|\u305d\u3093}{\u5728|\u3056\u3044}"},{shortForm:"\u6700\u5927",rubyForm:"{\u6700|\u3055\u3044}{\u5927|\u3060\u3044}"},{shortForm:"\u6210\u529f",rubyForm:"{\u6210|\u305b\u3044}{\u529f|\u3053\u3046}"},{shortForm:"\u81ea\u8eab",rubyForm:"{\u81ea|\u3058}{\u8eab|\u3057\u3093}"},{shortForm:"\u4ee5\u4e0b",rubyForm:"{\u4ee5|\u3044}{\u4e0b|\u304b}"},{shortForm:"\u7d42\u4e86",rubyForm:"{\u7d42|\u3057\u3085\u3046}{\u4e86|\u308a\u3087\u3046}"},{shortForm:"\u5168\u3066",rubyForm:"{\u5168|\u3059\u3079}\u3066"},{shortForm:"\u6368\u3066",rubyForm:"{\u6368|\u3059}\u3066"},{shortForm:"CNo\uff0e",regexForm:"(?<![a-zA-Z])CNo\uff0e(?![a-zA-Z])",rubyForm:"{CNo\uff0e||\u30ab\u30aa\u30b9\u30ca\u30f3\u30d0\u30fc\u30ba}",rubyFormName:"{CNo||\u30ab\u30aa\u30b9\u30ca\u30f3\u30d0\u30fc\u30ba}\uff0e"},{shortForm:"No\uff0e",regexForm:"(?<![a-zA-Z])No\uff0e(?![a-zA-Z])",rubyForm:"{No\uff0e||\u30ca\u30f3\u30d0\u30fc\u30ba}",rubyFormName:"{No||\u30ca\u30f3\u30d0\u30fc\u30ba}\uff0e"},{shortForm:"CX",regexForm:"(?<![a-zA-Z])CX(?![a-zA-Z])",rubyForm:"{CX|\u30ab\u30aa\u30b9\u30a8\u30af\u30b7\u30fc\u30ba}"},{shortForm:"\u9069\u7528",rubyForm:"{\u9069|\u3066\u304d}{\u7528|\u3088\u3046}"},{shortForm:"\u6570\u5024",rubyForm:"{\u6570|\u3059\u3046}{\u5024|\u3061}"},{shortForm:"\u8a08\u7b97",rubyForm:"{\u8a08|\u3051\u3044}{\u7b97|\u3055\u3093}"},{shortForm:"\u5fc5\u8981",rubyForm:"{\u5fc5|\u3072\u3064}{\u8981|\u3088\u3046}"},{shortForm:"\u9078\u629e",rubyForm:"{\u9078|\u305b\u3093}{\u629e|\u305f\u304f}"},{shortForm:"\u534a\u5206",rubyForm:"{\u534a|\u306f\u3093}{\u5206|\u3076\u3093}"},{shortForm:"\u958b\u59cb",rubyForm:"{\u958b|\u304b\u3044}{\u59cb|\u3057}"},{shortForm:"\u88cf\u8868",rubyForm:"{\u88cf|\u3046\u3089}{\u8868|\u304a\u3082\u3066}"},{shortForm:"\u56de\u5fa9",rubyForm:"{\u56de|\u304b\u3044}{\u5fa9|\u3075\u304f}"},{shortForm:"\u6307\u5b9a",rubyForm:"{\u6307|\u3057}{\u5b9a|\u3066\u3044}"},{shortForm:"\u4f4d\u7f6e",rubyForm:"{\u4f4d|\u3044}{\u7f6e|\u3061}"},{shortForm:"\u79fb\u52d5",rubyForm:"{\u79fb|\u3044}{\u52d5|\u3069\u3046}"},{shortForm:"\u65b9\u6cd5",rubyForm:"{\u65b9|\u307b\u3046}{\u6cd5|\u307b\u3046}"},{shortForm:"\u5909\u66f4",rubyForm:"{\u5909|\u3078\u3093}{\u66f4|\u3053\u3046}"},{shortForm:"\u767a\u751f",rubyForm:"{\u767a|\u306f\u3063}{\u751f|\u305b\u3044}"},{shortForm:"\u516c\u958b",rubyForm:"{\u516c|\u3053\u3046}{\u958b|\u304b\u3044}"},{shortForm:"\u8d85",rubyForm:"{\u8d85|\u3053}"},{shortForm:"\u6bce",rubyForm:"{\u6bce|\u3054\u3068}"},{shortForm:"\u524d",rubyForm:"{\u524d|\u307e\u3048}"},{shortForm:"\u9055",rubyForm:"{\u9055|\u3061\u304c}"},{shortForm:"\u7d9a",rubyForm:"{\u7d9a|\u3064\u3065}"},{shortForm:"\u6b8b",rubyForm:"{\u6b8b|\u306e\u3053}"},{shortForm:"\u4ed6",rubyForm:"{\u4ed6|\u307b\u304b}"},{shortForm:"\u5f53",rubyForm:"{\u5f53|\u3042}"},{shortForm:"\u5ea6",rubyForm:"{\u5ea6|\u3069}"},{shortForm:"\u6642",rubyForm:"{\u6642|\u3068\u304d}"},{shortForm:"\u65cf",rubyForm:"{\u65cf|\u305e\u304f}"},{shortForm:"\u6570",rubyForm:"{\u6570|\u304b\u305a}"},{shortForm:"\u4f53",rubyForm:"{\u4f53|\u305f\u3044}"},{shortForm:"\u9650",rubyForm:"{\u9650|\u30b2\u30f3}"},{shortForm:"\u7f6e",rubyForm:"{\u7f6e|\u30c1}"},{shortForm:"\u53d7",rubyForm:"{\u53d7|\u3046}"},{shortForm:"\u679a",rubyForm:"{\u679a|\u307e\u3044}"},{shortForm:"\u5f8c",rubyForm:"{\u5f8c|\u3054}"},{shortForm:"\u9001",rubyForm:"{\u9001|\u304a\u304f}"},{shortForm:"\u4e8b",rubyForm:"{\u4e8b|\u3053\u3068}"},{shortForm:"\u5185",rubyForm:"{\u5185|\u3046\u3061}"},{shortForm:"\u898b",rubyForm:"{\u898b|\u307f}"},{shortForm:"\u4e2d",rubyForm:"{\u4e2d|\u306a\u304b}"},{shortForm:"\u52a0",rubyForm:"{\u52a0|\u304f\u308f}"},{shortForm:"\u9078",rubyForm:"{\u9078|\u3048\u3089}"},{shortForm:"\u4e00",rubyForm:"{\u4e00|\u3044\u3061}"},{shortForm:"\u756a",rubyForm:"{\u756a|\u3070\u3093}"},{shortForm:"\u540c",rubyForm:"{\u540c|\u3069\u3046}"},{shortForm:"\u56de",rubyForm:"{\u56de|\u304b\u3044}"},{shortForm:"\u6271",rubyForm:"{\u6271|\u3042\u3064\u304b}"},{shortForm:"\u661f",rubyForm:"{\u661f|\u30ec\u30d9\u30eb}"},{shortForm:"\u653b",rubyForm:"{\u653b|\u3053\u3046}"},{shortForm:"\u5b88",rubyForm:"{\u5b88|\u3057\u3085}"},{shortForm:"\u623b",rubyForm:"{\u623b|\u3082\u3069}"},{shortForm:"\u4e0a",rubyForm:"{\u4e0a|\u3046\u3048}"},{shortForm:"\u6b21",rubyForm:"{\u6b21|\u3064\u304e}"},{shortForm:"\u5024",rubyForm:"{\u5024|\u3061}"},{shortForm:"\u542b",rubyForm:"{\u542b|\u3075\u304f}"},{shortForm:"\u4e0e",rubyForm:"{\u4e0e|\u3080\u305f}"},{shortForm:"\u5f97",rubyForm:"{\u5f97|\u3048}"},{shortForm:"\u53ca",rubyForm:"{\u53ca|\u304a\u3088}"},{shortForm:"\u7570",rubyForm:"{\u7570|\u3053\u3068}"},{shortForm:"\u8a18",rubyForm:"{\u8a18|\u3057\u308b}"},{shortForm:"\u7e70",rubyForm:"{\u7e70|\u304f}"},{shortForm:"\u8fd4",rubyForm:"{\u8fd4|\u304b\u3048}"},{shortForm:"\u6c7a",rubyForm:"{\u6c7a|\u304d}"},{shortForm:"\u4e92",rubyForm:"{\u4e92|\u305f\u304c}"},{shortForm:"\u6255",rubyForm:"{\u6255|\u306f\u3089}"},{shortForm:"\u591a",rubyForm:"{\u591a|\u304a\u304a}"},{shortForm:"\u6301",rubyForm:"{\u6301|\u304a\u304a}"},{shortForm:"\u6301",rubyForm:"{\u6301|\u3082}"},{shortForm:"\u9593",rubyForm:"{\u9593|\u3042\u3044\u3060}"},{shortForm:"\u6240",rubyForm:"{\u6240|\u3057\u3087}"},{shortForm:"\u9ad8",rubyForm:"{\u9ad8|\u305f\u304b}"},{shortForm:"\u500d",rubyForm:"{\u500d|\u3070\u3044}"}],E=A.reduce((function(e,t){return e[t.shortForm]=t,e}),{}),B=[{blendMode:"overlay",opacity:1}],W=[{blendMode:"overlay",opacity:.65},{blendMode:"multiply",opacity:.55}],P={type1:{value:"type1",label:"1",partInstructionMap:{}},type2:{value:"type2",label:"2",partInstructionMap:{}},type3:{value:"type3",label:"3",partInstructionMap:{"art-overlay":B,"art-border":B,"art-border-pendulum":B,"border-pendulum":B,attribute:B,frame:B}},type4:{value:"type4",label:"4",partInstructionMap:{}},type5:{value:"type5",label:"5",partInstructionMap:{}},type6:{value:"type6",label:"6",partInstructionMap:{}},type7:{value:"type7",label:"7",partInstructionMap:{"total-overlay":[{blendMode:"screen",opacity:.175},{blendMode:"color-dodge",opacity:.125}]}},type8:{value:"type8",label:"8",partInstructionMap:{"art-border":W,"art-border-pendulum":W,"border-pendulum":W,frame:W,"frame-background":W,name:W,star:W}},type9:{value:"type9",label:"9",partInstructionMap:{"total-overlay":[{blendMode:"screen",opacity:.45}]}}},D={type1:{value:"type1",label:"1",partInstructionMap:{art:[{}]}},type2:{value:"type2",label:"2",partInstructionMap:{art:[{opacity:.08,blendMode:"darken"},{opacity:.28,blendMode:"color-dodge"},{opacity:.48,blendMode:"multiply"}]}},type3:{value:"type3",label:"3",partInstructionMap:{art:[{opacity:.66,blendMode:"color-dodge"},{opacity:.64,blendMode:"multiply"}]}},type4:{value:"type4",label:"4",partInstructionMap:{art:[{opacity:.31,blendMode:"color-dodge"},{opacity:.6,blendMode:"multiply"}]}},type5:{value:"type5",label:"5",partInstructionMap:{art:[{opacity:.19,blendMode:"color-dodge"},{opacity:.6,blendMode:"multiply"}]}},type6:{value:"type6",label:"6",partInstructionMap:{art:[{opacity:.25,blendMode:"color-dodge"},{opacity:.6,blendMode:"multiply"}]}},type7:{value:"type7",label:"7",partInstructionMap:{art:[{}]}}},z=0,H=1,G=1,Y=1.35,X=0,V=.325,U=1,K=.8,J="normal",q={alphabetFont:'"Yu-Gi-Oh! DF Leisho 3"',furiganaFont:"DFHSGothic-W3-WIN-RKSJ-H",headTextFontRatio:.7,headTextHeightRatio:.815,ordinalFont:'"DFKakuTaiHiStd-W4"',symbolFont:"matrix",symbolFontRatio:1},$=Object(l.a)(Object(l.a)({},q),{},{font:"MatrixBook",headTextHeightRatio:.75,fontStyle:"tcg",fontList:[]}),_=Object(l.a)(Object(l.a)({},q),{},{font:'"stone-serif-regular"',headTextHeightRatio:.75,fontStyle:"tcg",fontList:[]}),Z=Object(l.a)(Object(l.a)({},q),{},{font:'"Yu-Gi-Oh! DF Leisho 3"',fontStyle:"ocg",metricMethod:"compact",fontList:[]}),Q={tcg:Object(l.a)(Object(l.a)({},$),{},{fontList:[{bulletSymbolWidth:23,fontSize:24.38,lineHeight:24.7,lineCount:8},{bulletSymbolWidth:23,fontSize:19.94,lineHeight:21.15,lineCount:10}]}),"tcg-stat":Object(l.a)(Object(l.a)({},$),{},{fontList:[{bulletSymbolWidth:23,fontSize:25.2,lineHeight:24.9,lineCount:7}]}),"tcg-type-stat":Object(l.a)(Object(l.a)({},$),{},{fontList:[{bulletSymbolWidth:23,fontSize:25.2,lineHeight:24.9,lineCount:6},{bulletSymbolWidth:23,fontSize:19.95,lineHeight:21.5,lineCount:7},{bulletSymbolWidth:23,fontSize:18.8,lineHeight:18.8,lineCount:8},{bulletSymbolWidth:19,fontSize:16.7,lineHeight:16.7,lineCount:9},{bulletSymbolWidth:19,fontSize:15,lineHeight:15,lineCount:10}]}),"tcg-type":Object(l.a)(Object(l.a)({},$),{},{fontList:[{bulletSymbolWidth:23,fontSize:25.2,lineHeight:24.9,lineCount:7}]}),ocg:Object(l.a)(Object(l.a)({},Z),{},{fontList:[{bulletSymbolWidth:16,fontSize:22,lineHeight:26,lineCount:7},{bulletSymbolWidth:16,fontSize:22,lineHeight:26,lineCount:8}]}),"ocg-stat":Object(l.a)(Object(l.a)({},Z),{},{fontList:[{bulletSymbolWidth:16,fontSize:22.05,lineHeight:25.8,lineCount:7}]}),"ocg-type-stat":Object(l.a)(Object(l.a)({},Z),{},{fontList:[{bulletSymbolWidth:16,fontSize:22.05,lineHeight:25.8,lineCount:6}]}),"ocg-type":Object(l.a)(Object(l.a)({},Z),{},{fontList:[{bulletSymbolWidth:16,fontSize:22.05,lineHeight:25.8,lineCount:7}]})},ee=[{bulletSymbolWidth:23,fontSize:21.8,lineHeight:24.9,lineCount:6},{bulletSymbolWidth:23,fontSize:17.28,lineHeight:21.5,lineCount:7},{bulletSymbolWidth:23,fontSize:16.28,lineHeight:18.8,lineCount:8},{bulletSymbolWidth:19,fontSize:14.46,lineHeight:16.7,lineCount:9},{bulletSymbolWidth:19,fontSize:12.99,lineHeight:15,lineCount:10}],te={tcg:Object(l.a)(Object(l.a)({},$),{},{fontList:[{bulletSymbolWidth:23,fontSize:24.3,lineHeight:24.35,lineCount:5}]}),ocg:Object(l.a)(Object(l.a)({},Z),{},{fontList:[{bulletSymbolWidth:16,fontSize:22.05,lineHeight:25.2,headTextFontRatio:.325,lineCount:5}]})},ne={veryStrict:{1:600,2:620,3:640},strict:{1:645,2:665,3:685},loose:{1:700,2:710,3:720},veryLoose:{1:740,2:770,3:800},relaxed:{1:800,2:850,3:900}},re={Default:{value:"Default",label:"Default",fontData:{alphabetFont:"MatrixRegularSmallCaps",font:"MatrixRegularSmallCaps",furiganaFont:"DFHSGothic-W3-WIN-RKSJ-H",ordinalFont:'"DFKakuTaiHiStd-W4"',fontStyle:"tcg",symbolFont:"matrix",symbolFontRatio:.775,headTextHeightRatio:.55,fontList:[{bulletSymbolWidth:64,fontSize:91.5,headTextFontRatio:.19,letterSpacing:.015,lineCount:1,lineHeight:91.5,offsetY:0}]}},Arial:{value:"Arial",label:"Arial (Bold)",fontData:{alphabetFont:"Arial",font:"Arial",furiganaFont:"DFHSGothic-W3-WIN-RKSJ-H",ordinalFont:'"DFKakuTaiHiStd-W4"',fontStyle:"tcg",symbolFont:"matrix",symbolFontRatio:.775,headTextHeightRatio:.825,weight:"bold",fontList:[{bulletSymbolWidth:40.67,fontSize:61,headTextFontRatio:.19,letterSpacing:-.14,lineCount:1,lineHeight:61,offsetY:3}]}},OCG:{value:"OCG",label:"OCG",fontData:{alphabetFont:'"Yu-Gi-Oh! DF Leisho 3"',font:'"Yu-Gi-Oh! DF Leisho 3"',furiganaFont:"DFHSGothic-W3-WIN-RKSJ-H",headTextHeightRatio:.775,headTextOverflow:"condense",metricMethod:"name",numberFont:"DFKakuTaiHiStd-W4",numberFontRatio:1,ordinalFont:'"DFKakuTaiHiStd-W4"',symbolFont:"matrix",symbolFontRatio:.775,fontStyle:"ocg",fontList:[{bulletSymbolWidth:42.67,fontSize:64,headTextFontRatio:.19,headTextSpacing:3,letterSpacing:-.03,lineCount:1,lineHeight:64,offsetY:0}]}}},ae={tcg:{font:"stone-serif-regular",alphabetFont:"stone-serif-regular",symbolFont:"matrix",symbolFontRatio:.8,ordinalFont:"stone-serif-regular",furiganaFont:"DFHSGothic-W3-WIN-RKSJ-H",fontStyle:"tcg",fontList:[{offsetY:-1,bulletSymbolWidth:20.05,fontSize:21.2,lineHeight:21.2,lineCount:1,letterSpacing:-.01,headTextFontRatio:.4,largeSymbolRatio:1.25},{bulletSymbolWidth:20.05,fontSize:20,lineHeight:20,lineCount:1,letterSpacing:-.01,headTextFontRatio:.4,largeSymbolRatio:1.25}]},ocg:{font:'"FOT-Rodin Pro M"',alphabetFont:'"FOT-Rodin Pro M"',symbolFont:"matrix",symbolFontRatio:.8,ordinalFont:'"DFKakuTaiHiStd-W4"',furiganaFont:"DFHSGothic-W3-WIN-RKSJ-H",metricMethod:"creator",fontStyle:"ocg",fontList:[{bulletSymbolWidth:18,fontSize:19,letterSpacing:-.11,lineHeight:20.5,lineCount:1,headTextFontRatio:0,wordLetterSpacing:.11}]}},oe={font:"YuGiOhITCStoneSerifBSc",alphabetFont:"YuGiOhITCStoneSerifBSc",symbolFont:"matrix",symbolFontRatio:.8,ordinalFont:"YuGiOhITCStoneSerifBSc",furiganaFont:"DFHSGothic-W3-WIN-RKSJ-H",fontStyle:"tcg",fontList:[{bulletSymbolWidth:20.05,fontSize:31.5,lineHeight:31.5,lineCount:1,iconSymbolWidth:26,capitalLetterRatio:.95,letterSpacing:.02,headTextFontRatio:.4},{bulletSymbolWidth:21.8,fontSize:32.75,lineHeight:32.75,lineCount:1,iconSymbolWidth:26,capitalLetterRatio:.95,letterSpacing:-.03,headTextFontRatio:.4},{bulletSymbolWidth:14.8,fontSize:44.5,lineHeight:44.5,lineCount:1,iconSymbolWidth:45,capitalLetterRatio:.90001,squareBracketRatio:.94001,letterSpacing:-.03,headTextFontRatio:.4}]},ie={font:'"Yu-Gi-Oh! DF Leisho 3"',alphabetFont:'"Yu-Gi-Oh! DF Leisho 3"',symbolFont:"matrix",symbolFontRatio:.8,headTextHeightRatio:.775,ordinalFont:'"DFKakuTaiHiStd-W4"',furiganaFont:"DFHSGothic-W3-WIN-RKSJ-H",fontStyle:"ocg",fontList:[{bulletSymbolWidth:20.05,fontSize:25.2,lineHeight:25.2,lineCount:1,iconSymbolWidth:26,headTextFontRatio:.3},{bulletSymbolWidth:21.8,fontSize:26.5,lineHeight:26.5,lineCount:1,iconSymbolWidth:26,headTextFontRatio:.3},{bulletSymbolWidth:36.8,fontSize:48,lineHeight:48,lineCount:1,iconSymbolWidth:45,headTextFontRatio:.25,headTextSpacing:6,letterSpacing:-.07,squareBracketRatio:1.02501}]},ce=n(57),le={"\uff10":"0","\uff11":"1","\uff12":"2","\uff13":"3","\uff14":"4","\uff15":"5","\uff16":"6","\uff17":"7","\uff18":"8","\uff19":"9","\uff41":"a","\uff42":"b","\uff43":"c","\uff44":"d","\uff45":"e","\uff46":"f","\uff47":"g","\uff48":"h","\uff49":"i","\uff4a":"j","\uff4b":"k","\uff4c":"l","\uff4d":"m","\uff4e":"n","\uff4f":"o","\uff50":"p","\uff51":"q","\uff52":"r","\uff53":"s","\uff54":"t","\uff55":"u","\uff56":"v","\uff57":"w","\uff58":"x","\uff59":"y","\uff5a":"z","\uff21":"A","\uff22":"B","\uff23":"C","\uff24":"D","\uff25":"E","\uff26":"F","\uff27":"G","\uff28":"H","\uff29":"I","\uff2a":"J","\uff2b":"K","\uff2c":"L","\uff2d":"M","\uff2e":"N","\uff2f":"O","\uff30":"P","\uff31":"Q","\uff32":"R","\uff33":"S","\uff34":"T","\uff35":"U","\uff36":"V","\uff37":"W","\uff38":"X","\uff39":"Y","\uff3a":"Z","\u300c":"\uff62","\u300d":"\uff63","\u3001":"\uff64",":":"\uff1a","\u2200":"\u2c6f","\ua4ef":"\u2c6f","\ua4db":"\u0186","\ua4f1":"\u018e","\ua4de":"\u2132","\ua4e8":"\u2141","\ua4d8":"\ua7b0","\ua4f6":"\ua780","\u2142":"\ua780","\ua4d2":"\u0500","\ua4d5":"\ua7b1","\u0548":"\ua4f5","\ua4e5":"\u0245","\uff1c":"<","\uff1e":">","\uff01":"!","\uff08":"(","\uff09":")","\uff06":"&","\uff07":"'","\uff20":"@"},se={"\uff10":"0","\uff11":"1","\uff12":"2","\uff13":"3","\uff14":"4","\uff15":"5","\uff16":"6","\uff17":"7","\uff18":"8","\uff19":"9","\uff41":"a","\uff42":"b","\uff43":"c","\uff44":"d","\uff45":"e","\uff46":"f","\uff47":"g","\uff48":"h","\uff49":"i","\uff4a":"j","\uff4b":"k","\uff4c":"l","\uff4d":"m","\uff4e":"n","\uff4f":"o","\uff50":"p","\uff51":"q","\uff52":"r","\uff53":"s","\uff54":"t","\uff55":"u","\uff56":"v","\uff57":"w","\uff58":"x","\uff59":"y","\uff5a":"z","\uff21":"A","\uff22":"B","\uff23":"C","\uff24":"D","\uff25":"E","\uff26":"F","\uff27":"G","\uff28":"H","\uff29":"I","\uff2a":"J","\uff2b":"K","\uff2c":"L","\uff2d":"M","\uff2e":"N","\uff2f":"O","\uff30":"P","\uff31":"Q","\uff32":"R","\uff33":"S","\uff34":"T","\uff35":"U","\uff36":"V","\uff37":"W","\uff38":"X","\uff39":"Y","\uff3a":"Z","\uff62":"\u300c","\uff63":"\u300d","\uff64":"\u3001","\uff1a":":","\u2200":"\u2c6f","\ua4ef":"\u2c6f","\ua4db":"\u0186","\ua4f1":"\u018e","\ua4de":"\u2132","\ua4e8":"\u2141","\ua4d8":"\ua7b0","\ua4f6":"\ua780","\u2142":"\ua780","\ua4d2":"\u0500","\ua4d5":"\ua7b1","\u0548":"\ua4f5","\ua4e5":"\u0245","\uff1c":"<","\uff1e":">","\uff01":"!","\uff08":"(","\uff09":")","\uff06":"&","\uff07":"'","\uff20":"@"},ue={"(\uff11)":"\u2460","(\uff12)":"\u2461","(\uff13)":"\u2462","(\uff14)":"\u2463","(\uff15)":"\u2464","(\uff16)":"\u2465","(\uff17)":"\u2466","(\uff18)":"\u2467","(\uff19)":"\u2468","(\uff11\uff10)":"\u2469","(\uff11\uff11)":"\u246a","(\uff11\uff12)":"\u246b","(\uff11\uff13)":"\u246c","(\uff11\uff14)":"\u246d","(\uff11\uff15)":"\u246e","(\uff11\uff16)":"\u246f","(\uff11\uff17)":"\u2470","(\uff11\uff18)":"\u2471","(\uff11\uff19)":"\u2472","(\uff12\uff10)":"\u2473","(1)":"\u2460","(2)":"\u2461","(3)":"\u2462","(4)":"\u2463","(5)":"\u2464","(6)":"\u2465","(7)":"\u2466","(8)":"\u2467","(9)":"\u2468","(10)":"\u2469","(11)":"\u246a","(12)":"\u246b","(13)":"\u246c","(14)":"\u246d","(15)":"\u246e","(16)":"\u246f","(17)":"\u2470","(18)":"\u2471","(19)":"\u2472","(20)":"\u2473"},de=Object(ce.a)({"\u6c34\u65cf":"Aqua","\u7363\u65cf":"Beast","\u7363\u6226\u58eb\u65cf":"Beast-Warrior","\u5275\u9020\u795e\u65cf":"Creator God","\u30b5\u30a4\u30d0\u30fc\u30b9\u65cf":"Cyberse","\u6050\u7adc\u65cf":"Dinosaur","\u5e7b\u795e\u7363\u65cf":"Divine-Beast","\u30c9\u30e9\u30b4\u30f3\u65cf":"Dragon","\u5929\u4f7f\u65cf":"Fairy","\u60aa\u9b54\u65cf":"Fiend","\u9b5a\u65cf":"Fish","\u30ae\u30e3\u30e9\u30af\u30b7\u30fc\u65cf":"Galaxy","\u5e7b\u60f3\u9b54\u65cf":"Illusion","\u6606\u866b\u65cf":"Insect","\u6a5f\u68b0\u65cf":"Machine","\u690d\u7269\u65cf":"Plant","\u30b5\u30a4\u30ad\u30c3\u30af\u65cf":"Psychic","\u708e\u65cf":"Pyro","\u722c\u866b\u985e\u65cf":"Reptile","\u5ca9\u77f3\u65cf":"Rock","\u6d77\u7adc\u65cf":"Sea Serpent","\u9b54\u6cd5\u4f7f\u3044\u65cf":"Spellcaster","\u96f7\u65cf":"Thunder","\u6226\u58eb\u65cf":"Warrior","\u9ce5\u7363\u65cf":"Winged Beast","\u5e7b\u7adc\u65cf":"Wyrm","\u30a2\u30f3\u30c7\u30c3\u30c8\u65cf":"Zombie","\u30b5\u30a4\u30dc\u30fc\u30b0\u65cf":"Cyborg","\u5929\u754c\u6226\u58eb\u65cf":"Celestial Warrior","\u30cf\u30a4\u30c9\u30e9\u30b4\u30f3\u65cf":"High Dragon","\u9b54\u5c0e\u9a0e\u58eb\u65cf":"Magical Knight","\u30aa\u30e1\u30ac\u30b5\u30a4\u30ad\u30c3\u30af\u65cf":"Omega Psychic","\u30e2\u30f3\u30b9\u30bf\u30fc":"Monster","\u9b54\u6cd5\u30ab\u30fc\u30c9":"Spell Card","\u7f60\u30ab\u30fc\u30c9":"Trap Card","\u30a2\u30af\u30b7\u30e7\u30f3":"Action","\u901a\u5e38":"Normal","\u52b9\u679c":"Effect","\u5100\u5f0f":"Ritual","\u30d5\u30e5\u30fc\u30b8\u30e7\u30f3":"Fusion","\u878d\u5408":"Fusion","\u30b7\u30f3\u30af\u30ed":"Synchro","\u30a8\u30af\u30b7\u30fc\u30ba":"Xyz","\u30da\u30f3\u30c7\u30e5\u30e9\u30e0":"Pendulum","\u30ea\u30f3\u30af":"Link","\u30de\u30ad\u30b7\u30de\u30e0":"Maximum","\u30c8\u30fc\u30af\u30f3":"Token","\u7279\u6b8a\u53ec\u559a":"Special Summon","\u30c0\u30fc\u30af\u30b7\u30f3\u30af\u30ed\u30e2\u30f3\u30b9\u30bf\u30fc":"Dark Synchro","\u30c1\u30e5\u30fc\u30ca\u30fc":"Tuner","\u30c7\u30e5\u30a2\u30eb":"Gemini","\u30ea\u30d0\u30fc\u30b9":"Flip","\u30c8\u30a5\u30fc\u30f3":"Toon","\u30b9\u30d4\u30ea\u30c3\u30c8":"Spirit","\u30e6\u30cb\u30aa\u30f3":"Union","\xa9\u9ad8\u6a4b\u548c\u5e0c \u30b9\u30bf\u30b8\u30aa\u30fb\u30c0\u30a4\u30b9\uff0f\u96c6\u82f1\u793e":"\xa91996 KAZUKI TAKAHASHI","\xa9\u30b9\u30bf\u30b8\u30aa\u30fb\u30c0\u30a4\u30b9\uff0f\u96c6\u82f1\u793e\u30fb\u30c6\u30ec\u30d3\u6771\u4eac\u30fbKONAMI":"\xa92020 Studio Dice/SHUEISHA, TV TOKYO, KONAMI","{\u7d14|\u30b8\u30e5\u30f3}{\u72d0|\u3053}":"Junko"},"\u81ea\u5206\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u52b9\u679c\u30e2\u30f3\u30b9\u30bf\u30fc\xd7\uff12\u4f53\u4ee5\u4e0a\n\u2460\uff1a\u3053\u306e\u30ab\u30fc\u30c9\u304c\u30e2\u30f3\u30b9\u30bf\u30fc\u30be\u30fc\u30f3\u306b\u5b58\u5728\u3059\u308b\u9650\u308a\u3001\u76f8\u624b\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u30e2\u30f3\u30b9\u30bf\u30fc\u304c\u52b9\u679c\u3092\u767a\u52d5\u3059\u308b\u5ea6\u306b\u3001\u305d\u306e\u76f8\u624b\u306e\u8868\u5074\u8868\u793a\u30e2\u30f3\u30b9\u30bf\u30fc\u306b\u30d4\u30e5\u30a2\u30ab\u30a6\u30f3\u30bf\u30fc\u3092\uff11\u3064\u7f6e\u304f(\u6700\u5927\uff11\u3064\u307e\u3067\uff09\u3002\u2461\uff1a\u3053\u306e\u30ab\u30fc\u30c9\u306f\u30d4\u30e5\u30a2\u30ab\u30a6\u30f3\u30bf\u30fc\u304c\u7f6e\u304b\u308c\u3066\u3044\u308b\u30e2\u30f3\u30b9\u30bf\u30fc\u304c\u767a\u52d5\u3057\u305f\u52b9\u679c\u3092\u53d7\u3051\u306a\u3044\u3002\u2462\uff1a\u3053\u306e\u30ab\u30fc\u30c9\u306f\u30d4\u30e5\u30a2\u30ab\u30a6\u30f3\u30bf\u30fc\u304c\u7f6e\u304b\u308c\u3066\u3044\u308b\u30e2\u30f3\u30b9\u30bf\u30fc\u3068\u306e\u6226\u95d8\u3067\u306f\u7834\u58ca\u3055\u308c\u306a\u3044\u3002","[2+ Effect Monsters on your field]\nEach time an opponent's monster activates its effect, place 1 Pure Counter on that opponent's monster (max. 1) after that effect resolves. Unaffected by activated effects from monster with a Pure Counter. Cannot be destroyed by battle with monsters with a Pure Counter."),fe=Object.entries(de).reduce((function(e,t){var n=Object(s.a)(t,2),r=n[0];return e[n[1]]=r,e}),{}),be={normal:{name:"normal",labelColor:"#ffffff",edition:"normal",labelBackgroundColor:"#c49c5e"},effect:{name:"effect",labelColor:"#ffffff",edition:"normal",labelBackgroundColor:"#b96c49"},fusion:{name:"fusion",labelColor:"#ffffff",edition:"normal",labelBackgroundColor:"#8948a4"},synchro:{name:"synchro",labelColor:"#000",edition:"normal",labelBackgroundColor:"#efefef"},xyz:{name:"xyz",labelColor:"#ffffff",edition:"normal",labelBackgroundColor:"#000000"},link:{name:"link",labelColor:"#ffffff",edition:"normal",labelBackgroundColor:"#0c8ac6"},ritual:{name:"ritual",labelColor:"#ffffff",edition:"normal",labelBackgroundColor:"#5e85c9"},spell:{name:"spell",labelColor:"#ffffff",edition:"normal",labelBackgroundColor:"#1b8f83"},trap:{name:"trap",labelColor:"#ffffff",edition:"normal",labelBackgroundColor:"#c32a8c"},token:{name:"token",labelColor:"#ffffff",edition:"normal",labelBackgroundColor:"#6f6c6b"},"dark-synchro":{name:"dark-synchro",labelColor:"#ffffff",edition:"extendend",labelBackgroundColor:"#4d4543"},obelisk:{name:"obelisk",labelColor:"#ffffff",edition:"extendend",labelBackgroundColor:"#515eb0"},osiris:{name:"osiris",labelColor:"#ffffff",edition:"extendend",labelBackgroundColor:"#bd5044"},ra:{name:"ra",labelColor:"#000",edition:"extendend",labelBackgroundColor:"#b9ad34"},raviel:{name:"raviel",labelColor:"#ffffff",edition:"extendend",labelBackgroundColor:"#313c5f"},uria:{name:"uria",labelColor:"#ffffff",edition:"extendend",labelBackgroundColor:"#623320"},hamon:{name:"hamon",labelColor:"#ffffff",edition:"extendend",labelBackgroundColor:"#534a19"},"lg-dragon":{name:"lg-dragon",labelColor:"#ffffff",edition:"extendend",labelBackgroundColor:"#4e84a4"},"speed-skill":{name:"speed-skill",labelColor:"#ffffff",edition:"extendend",labelBackgroundColor:"#199cd5"},zarc:{name:"zarc",labelColor:"#000",edition:"extendend",labelBackgroundColorList:["rgba(185,108,73,1)","rgba(137,72,164,1)","rgba(239,239,239,1)","rgba(0,0,0,1)"],labelBackgroundImage:"linear-gradient(90deg, ".concat(["rgba(185,108,73,1) 23%","rgba(137,72,164,1) 27%","rgba(137,72,164,1) 48%","rgba(239,239,239,1) 52%","rgba(239,239,239,1) 73%","rgba(0,0,0,1) 77%"].join(", "),")")}},pe=Object.values(be),me=[{top:175,left:55,width:100,height:100},{top:165,left:323,width:170,height:80},{top:175,left:655,width:100,height:100},{top:442,left:45,width:70,height:170},{top:0,left:0,width:0,height:0},{top:442,left:700,width:70,height:170},{top:775,left:55,width:100,height:100},{top:810,left:323,width:170,height:80},{top:775,left:655,width:100,height:100}],he=new RegExp("[A-Z\uff21-\uff3a]"),ve=new RegExp("[\\[\\]\u3010\u3011]"),ge="[#@\u221ea-z\uff41-\uff5aA-Z\uff21-\uff3a0-9\uff10-\uff19!\uff01+\xd7\uff03#@\u221e\u2018\u201c\u2019\u201d:;\\[\\]\\(\\)\u3010\u3011\\.,]+",je=new RegExp(ge),xe=new RegExp("({[^{}]+?}|".concat(ge,"|.)")),ye="\u2989",Oe="\u298a",we="\u27c5",ke="\u27c6",Fe="\u27ec",Ce="\u27ed",Se=new RegExp("[".concat([ye,Oe,we,ke,Fe,Ce].join(""),"]|(\\|[^}]+})"),"g"),Te="".concat(ye,"|").concat(Oe),Re=new RegExp(Te),Ne="(\\n^[\\r\\t\\f\\v \\u00a0\\u1680\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000\\ufeff]*\\n".concat(ye,"?\\([\\w\\W]+\\)").concat(Oe,"?)\\s*$"),Le="&A-Za-z0-9\\-/\\s\\(\\)!,.\u2018\u201c\u2019\u201d:;<>\\[\\]\\\\",Me=new RegExp("[^".concat(Le,"]")),Ie=A.map((function(e){var t;return null!==(t=e.regexForm)&&void 0!==t?t:e.shortForm})).join("|"),Ae="(".concat(Ie,")(?![^{]*})"),Ee="\u30fd\u30fe\u30fc\u30a1\u30a3\u30a5\u30a7\u30a9\u30c3\u30e3\u30e5\u30e7\u30ee\u30f5\u30f6\u3041\u3043\u3045\u3047\u3049\u3063\u3083\u3085\u3087\u308e\u3095\u3096\u31f0\u31f1\u31f2\u31f3\u31f4\u31f5\u31f6\u31f7\u31f8\u31f9\u31fa\u31fb\u31fc\u31fd\u31fe\u31ff\u3005\u303b",Be=new RegExp("[".concat(Ee,"]")),We=".[".concat(Ee,")\\]\uff5d\u3015\u3009\u300b\u300d\uff63\u300f\u3011\u3019\u3017\u301f'\"\u2019\u201d\uff60\xbb\u2010\u30a0\u2013\u301c\uff1f!\u203c\u2047\u2048\u2049\u30fb\u3001:;,\u3002.\uff61\uff64]+"),Pe=new RegExp("[\uff21-\uff3a\uff41-\uff5a]"),De=new RegExp("[\uff10-\uff19]"),ze=new RegExp("[0-9]"),He=/[\u3042\u3044\u3046\u3048\u304a\u304b\u304c\u304d\u304e\u304f\u3050\u3051\u3052\u3053\u3054\u3055\u3056\u3057\u3058\u3059\u305a\u305b\u305c\u305d\u305e\u305f\u3060\u3061\u3062\u3064\u3065\u3066\u3067\u3068\u3069\u306a\u306b\u306c\u306d\u306e\u306f\u3070\u3071\u3072\u3073\u3074\u3075\u3076\u3077\u3078\u3079\u307a\u307b\u307c\u307d\u307e\u307f\u3080\u3081\u3082\u3084\u3086\u3088\u3089\u308a\u308b\u308c\u308d\u308f\u3090\u3091\u3092\u3093\u3094]/,Ge=/[\u30a2\u30a4\u30a6\u30a8\u30aa\u30ab\u30ac\u30ad\u30ae\u30af\u30b0\u30b1\u30b2\u30b3\u30b4\u30b5\u30b6\u30b7\u30b8\u30b9\u30ba\u30bb\u30bc\u30bd\u30be\u30bf\u30c0\u30c1\u30c2\u30c4\u30c5\u30c6\u30c7\u30c8\u30c9\u30ca\u30cb\u30cc\u30cd\u30ce\u30cf\u30d0\u30d1\u30d2\u30d3\u30d4\u30d5\u30d6\u30d7\u30d8\u30d9\u30da\u30db\u30dc\u30dd\u30de\u30df\u30e0\u30e1\u30e2\u30e4\u30e6\u30e8\u30e9\u30ea\u30eb\u30ec\u30ed\u30ef\u30f0\u30f1\u30f2\u30f3\u30f4\u30f7\u30f8\u30f9\u30fa]/,Ye=new RegExp("[\u30fb]"),Xe=new RegExp("[\u30fc]"),Ve=new RegExp("[\u2015]"),Ue=new RegExp("[".concat("\uff1a","]")),Ke=new RegExp("[".concat("\u3002\uff64","]")),Je=new RegExp("[".concat("\uff1a","]")),qe={"\u3002":-.2,"\uff64":-.2,"\uff62":0,"\uff63":0,"\uff1a":.5,">":.25,"<":-.25},$e={"\u3002":-.5,"\uff1a":-.75},_e={">":.125,"<":.125},Ze={"\\":-.025},Qe={},et={"\\":.3},tt=function(e){return"tcg"===e?7:1},nt=/{[^{}]+?}/,rt="\\s\\-/",at=-2.25,ot=.03125,it=function(){return{version:0,format:"tcg",frame:"fusion",foil:"normal",opacity:v(),finish:[],artFinish:"normal",name:"Junko",nameStyleType:"auto",nameStyle:{font:"Default",fillStyle:"#000000",headTextFillStyle:"#000000",shadowColor:"#000000",shadowOffsetY:0,shadowOffsetX:0,shadowBlur:0,hasShadow:!1,lineColor:"#000000",lineWidth:0,lineOffsetY:0,lineOffsetX:0,hasOutline:!1,gradientAngle:0,gradientColor:"0.000|#eef10b,0.5|#d78025,1.000|#7e20cf",hasGradient:!1,preset:"commonB",pattern:"none"},attribute:"LIGHT",subFamily:w,cardIcon:"auto",star:6,art:"https://i.imgur.com/h5kXZeC.png",artCrop:{x:0,y:4,width:100,height:89.5,unit:"%",aspect:1},hasBackground:!1,background:"",backgroundType:"fit",backgroundCrop:{x:0,y:4,width:100,height:89.5,unit:"%",aspect:1},linkMap:["1","3","7","9"],isPendulum:!1,pendulumFrame:"auto",pendulumEffect:"Once per turn: You can pay 800 LP, increase this card's Pendulum Scale by 1.",pendulumScaleRed:"4",pendulumScaleBlue:"4",typeAbility:["Fairy","Fusion","Effect"],effectStyle:{condenseTolerant:"strict"},effect:"[2+ Effect Monsters on your field]\nEach time an opponent's monster activates its effect, place 1 Pure Counter on that opponent's monster (max. 1) after that effect resolves. Unaffected by activated effects from monster with a Pure Counter. Cannot be destroyed by battle with monsters with a Pure Counter.",setId:"YGOC-EN001",atk:"2000",def:"2000",password:"18111996",sticker:"holo5",isFirstEdition:!0,isSpeedCard:!1,isDuelTerminalCard:!1,creator:"\xa92020 Studio Dice/SHUEISHA, TV TOKYO, KONAMI",furiganaHelper:!0}},ct=function(){return{version:0,format:"tcg",frame:"effect",foil:"normal",opacity:v(),finish:[],artFinish:"normal",name:"",nameStyleType:"auto",nameStyle:{font:"Default",fillStyle:"#000000",headTextFillStyle:"#000000",shadowColor:"#000000",shadowOffsetY:0,shadowOffsetX:0,shadowBlur:0,hasShadow:!1,lineColor:"#000000",lineWidth:0,lineOffsetY:0,lineOffsetX:0,hasOutline:!1,gradientAngle:0,gradientColor:"0.000|#eef10b,0.5|#d78025,1.000|#7e20cf",hasGradient:!1,preset:"commonB",pattern:"none"},attribute:"LIGHT",subFamily:w,cardIcon:"auto",star:6,art:"https://i.imgur.com/jjtCuG5.png",artCrop:{x:0,y:4,width:100,height:89.5,unit:"%",aspect:1},hasBackground:!1,background:"",backgroundType:"fit",backgroundCrop:{x:0,y:4,width:100,height:89.5,unit:"%",aspect:1},linkMap:[],isPendulum:!1,pendulumFrame:"auto",pendulumEffect:"",pendulumScaleRed:"4",pendulumScaleBlue:"4",typeAbility:[],effectStyle:{condenseTolerant:"strict"},effect:"",setId:"",atk:"0",def:"0",password:"",sticker:"no-sticker",isFirstEdition:!1,isSpeedCard:!1,isDuelTerminalCard:!1,creator:"",furiganaHelper:!0}},lt=[{type:"body",subType:"artBorder",label:"Card",tooltip:"Keep art border even if the card's body is transparent."},{type:"name",subType:"nameBorder",label:"Name",tooltip:"Draw name's border and finish whenever possible."},{type:"pendulum",label:"Pendulum",tooltip:null},{type:"text",label:"Effect",tooltip:null}],st=function(e){return"xyz"===e.frame},ut=function(e){return"link"===e.frame&&ft(e)},dt=function(e){return"speed-skill"===e.frame&&!ft(e)},ft=function(e){return"spell"!==e.frame&&"trap"!==e.frame&&"speed-skill"!==e.frame},bt=function(e){return"spell"===e||"trap"===e?"st":"xyz"===e?"rank":"dark-synchro"===e?"negative-level":"speed-skill"===e?"none":"level"},pt=function(e){return["link","xyz","dark-synchro","speed-skill","hamon","uria","raviel"].includes(e)},mt=function(e){var t,n=e.format,r=e.frame,a=e.nameStyle,o=e.nameStyleType,i=e.foil;if("custom"===o)return a;var c=dt({frame:r}),s=function(e){return!ft({frame:e})||pt(e)}(r),u="Default";"ocg"===n&&(u="OCG"),c&&"tcg"===n&&(u="Arial");var d={fillStyle:s?"#ffffff":"#000000",headTextFillStyle:s?"#ffffff":"#000000"};if("predefined"===o){var f,b,p=Object(l.a)({},C[null!==(f=a.preset)&&void 0!==f?f:"commonB"].value);return C[null!==(b=p.preset)&&void 0!==b?b:"commonB"].value.font||(p.font=u),Object(l.a)(Object(l.a)({},d),p)}var m=c?{hasOutline:!0,lineWidth:6,strokeStyle:"#000"}:{},h="normal"!==i&&null!==(t=C[i].value)&&void 0!==t?t:{},v="zarc"===r?C.animeGold.value:{};return Object(l.a)(Object(l.a)(Object(l.a)(Object(l.a)({font:u},d),m),h),v)},ht=1e3,vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ht,n=e,r=t,a=r,o=a,i=30,c=100,l=10,s=function(){return 1===c?g():(a+=c,a-=c/=l),Math.min(a,r)},u=function(){return i-=1,a-=c},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;n=e,r=t,a=t,i=30,c=100,o=t},f=function(){return a},b=function(e){return a=e},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a;return o=e},m=function(){return o},h=function(){return i=-1,a=o},v=function(){return i},g=function(){return i=-1};return{reset:d,searchDown:u,reverseSearch:s,finish:g,getMedian:f,setMedian:b,setLastEffective:p,getLastEffective:m,applyLastEffective:h,getIterateCount:v}},gt=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=ht,r=vt();r.getIterateCount()>=0;){if(r.getIterateCount()<=0){var a=r.getMedian();n=a;break}var o=e(r.getMedian());if(!o&&r.getMedian()>0)r.searchDown();else{if(r.getMedian()===ht)break;n=r.reverseSearch()}}var i=Math.max(t,Math.min(n,ht));return i!==n&&e(i),i},jt=function(e){var t=null!==e&&void 0!==e?e:{},n=t.defaultWeight,r=void 0===n?"":n,a=t.defaultStyle,o=void 0===a?"":a,i=t.defaultSize,c=void 0===i?"10px":i,l=t.defaultFamily,s=void 0===l?"Arial":l,u=r,d=o,f="number"===typeof c?"".concat(c,"px"):c,b="number"===typeof c?c:parseFloat(c.replaceAll("px","")),p=s;return{getFont:function(){return"".concat([d,u,f,p].filter((function(e){return""!==e})).join(" "),", Arial")},getFontInfo:function(){return{style:d,size:f,family:p,sizeAsNumber:b,weight:u}},setWeight:function(e){return u=e,this},setStyle:function(e){return d=e,this},setSize:function(e){var t="function"===typeof e?e(b):e;return f="number"===typeof t?"".concat(t,"px"):t,b="number"===typeof t?t:parseFloat(t.replaceAll("px","")),this},setFamily:function(e){return p=e,this}}},xt=function(e){return(null!==e&&void 0!==e?e:[]).map((function(e){var t=e.color,n=e.offset;return"".concat(n,"|").concat(t)})).join(",")},yt=function e(t){return t?t.split(",").map((function(e,t){var n=e.split("|"),r=Object(s.a)(n,2),a=r[0];return{color:r[1],offset:a,id:t+1}})):e("0.000|#eef10b,0.5|#d78025,1.000|#7e20cf")},Ot=function(e){var t=e.debug,n=e.optionLength,r=e.stopPropagation,a=void 0!==r&&r,o=e.setFocus,i=e.onTrigger,c=e.onCancel,l=e.onKeyPress;return{tabIndex:0,onFocus:function(){t&&console.info("Navigation Focus",t),o(0)},onBlur:function(){t&&console.info("Navigation Blur",t),o(-1)},onKeyDown:function(e){a&&e.stopPropagation(),t&&console.info("Navigation Keydown",t,e.key),!1!==(null===l||void 0===l?void 0:l(e))&&("ArrowRight"===e.key||"ArrowDown"===e.key?(e.preventDefault(),o((function(e){return Math.max(0,n+e+1)%n}))):"ArrowLeft"===e.key||"ArrowUp"===e.key?(e.preventDefault(),o((function(e){return Math.max(0,n+e-1)%n}))):"Enter"===e.key||" "===e.key?i():"Escape"===e.key&&(null===c||void 0===c||c()))}}},wt=n(400),kt=n(58),Ft=function(e){var t=(e=e.substring(0,e.length-1)).split("\x01");if(e=t[0],1<t.length){t=t[1];var n,r=Object(kt.a)(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;e=(e=e.split(a)).join(e.pop())}}catch(o){r.e(o)}finally{r.f()}}return Ct(e,0)},Ct=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[['"',"'"],["':","!"],[",'","~"],["}",")","\\","\\"],["{","(","\\","\\"]],r=function(e,t){return e.replace(new RegExp("".concat((t[2]?t[2]:"")+t[0],"|").concat((t[3]?t[3]:"")+t[1]),"g"),(function(e){return e===t[0]?t[1]:t[0]}))};if(t)for(t=0;t<n.length;++t)e=r(e,n[t]);else for(t=n.length;t--;)e=r(e,n[t]);return e},St=n(208),Tt=Object(l.a)(Object(l.a)({},{version:"ve",format:"fm",frame:"fr",foil:"fo",opacity:{_newKey:"op",body:"opbd",pendulum:"oppd",name:"opnm",text:"optx",boundless:"opbl",artFrame:"opaf",artBorder:"opab",nameBorder:"opnb",baseFill:"opbf"},finish:"fn",art:"ar",artFinish:"afn",artCrop:{_newKey:"arc",x:"arx",y:"ary",width:"arw",height:"arh",unit:"aru",aspect:"ara"},hasBackground:"hbg",background:"bg",backgroundType:"bgt",backgroundCrop:{_newKey:"bgc",x:"bgx",y:"bgy",width:"bgw",height:"bgh",unit:"bgu",aspect:"bga"},name:"na",nameStyleType:"nst",effectStyle:{_newKey:"es",condenseTolerant:"cdtl"},nameStyle:{_newKey:"ns",font:"nsft",fillStyle:"nsfs",headTextFillStyle:"nshfs",shadowColor:"nssc",shadowOffsetY:"nssoy",shadowOffsetX:"nssox",shadowBlur:"nssb",hasShadow:"nshs",lineColor:"nslc",lineWidth:"nslw",lineOffsetY:"nsloy",lineOffsetX:"nslox",hasOutline:"nshl",gradientAngle:"nsgd",gradientColor:"nscg",hasGradient:"nshg",preset:"nspr",pattern:"nspt"},attribute:"at",subFamily:"sf",star:"st",cardIcon:"it",linkMap:"lm",isPendulum:"ip",pendulumFrame:"pf",pendulumEffect:"pe",pendulumScaleRed:"rs",pendulumScaleBlue:"bs",typeAbility:"ta",effect:"ef",setId:"si",atk:"atk",def:"def",password:"pw",sticker:"sti",isFirstEdition:"ife",isSpeedCard:"isp",isDuelTerminalCard:"idt",creator:"cr",furiganaHelper:"fh"}),{passcode:"pc",picture:"pt",pictureCrop:{_newKey:"ptc",x:"ptx",y:"pty",width:"ptw",height:"pth",unit:"ptu",aspect:"pta"}}),Rt=function(e){var t=ct();if(!e)return t;try{t=It(e)}catch(n){console.error("decodedCard",e,n);try{t=At(e,!0),St.a.info({message:"Card data has outdated format",description:"System will automatically convert it into newer version."})}catch(n){console.error("cardData",e,n),St.a.error({message:"Card data cannot be decoded",description:"It is either malformed or not compatible."})}}return t},Nt=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Tt,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a={};return Object.keys(t).forEach((function(r){var o=t[r];if("object"!==typeof o||null===o||Array.isArray(o)){var i=n[r];"string"===typeof i&&(a[i]=o)}else{var c,l=null===(c=n[r])||void 0===c?void 0:c._newKey;l&&(a[l]=e(o,n[r],!1))}})),r?JSON.stringify(a):a},Lt=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Tt,r={};return Object.keys(n).forEach((function(a){var o=n[a];if("object"!==typeof o||null===o||Array.isArray(o))null!=t[o]&&(r[a]=t[o]);else{var i=null===o||void 0===o?void 0:o._newKey;i&&t[i]&&(r[a]=e(t[i],n[a]))}})),r},Mt=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Tt,r="string"===typeof t?JSON.parse(Ft(decodeURIComponent(t))):t,a={};return Object.keys(n).forEach((function(t){var o=n[t];if("object"!==typeof o||null===o||Array.isArray(o))null!=r[o]&&(a[t]=r[o]);else{var i=null===o||void 0===o?void 0:o._newKey;i&&r[i]&&(a[t]=e(r[i],n[t]))}})),a},It=function(e){var t="string"===typeof e?JSON.parse(e):e,n=Lt(t);return Et(n)},At=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t=n?Mt(e):"string"===typeof e?JSON.parse(e):e,Et(t)},Et=function(e){var t,n,r=Object(l.a)(Object(l.a)({},ct()),Object(wt.a)(e));return null==r.effectStyle&&(r.effectStyle=Object(l.a)({},ct().effectStyle)),null==r.version&&(r.version=1),null==r.format&&(r.format="tcg"),null==r.pendulumFrame&&(r.pendulumFrame="auto"),null==r.finish&&(r.finish=[]),null==r.artFinish&&(r.artFinish="normal"),r.picture&&!e.art&&(r.art=r.picture),delete r.picture,r.pictureCrop&&!e.artCrop&&(r.artCrop=r.pictureCrop),delete r.pictureCrop,""===(null!==(t=r.art)&&void 0!==t?t:"")&&(r.art=""),"boolean"===typeof r.opacity.artFrame&&null==r.opacity.boundless&&(r.opacity.boundless=!r.opacity.artFrame,delete r.opacity.artFrame),r.opacity=Object(l.a)(Object(l.a)({},v()),r.opacity),""===(null!==(n=r.background)&&void 0!==n?n:"")&&(r.background=""),null==r.hasBackground&&(r.background||r.opacity.baseFill)&&(r.hasBackground=!0),r.kanjiHelper&&!e.furiganaHelper&&(r.furiganaHelper=r.kanjiHelper),delete r.kanjiHelper,void 0===r.furiganaHelper&&(r.furiganaHelper=!0),r.passcode&&!e.password&&(r.password=r.passcode),delete r.passcode,r},Bt=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n="",r=e.length,a=0;a<t;a++)n+=e.charAt(Math.floor(Math.random()*r));return n};function Wt(e,t){if(window.history.pushState){var n=new URLSearchParams(window.location.search);n.set(e,t);var r=window.location.protocol+"//"+window.location.host+window.location.pathname+"?"+n.toString();window.history.pushState({path:r},"",r)}}var Pt=function(e){return e.replaceAll(/\{([^{}|]*)\|+?[^{}|]*\}/g,"$1")},Dt=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e.substr(0,4)))&&(t=!0),t};function zt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}var Ht=n(12),Gt=n(13),Yt=n(401),Xt=n(121),Vt=n(399),Ut=n(186),Kt=n.n(Ut),Jt=n(407),qt=n(408),$t=n(396);function _t(){var e=Object(Ht.a)(["\n    display: flex;\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tbackground-image: linear-gradient(#fafafaaa, #fafafaaa);\n    justify-content: center;\n    align-items: center;\n    z-index: 999;\n"]);return _t=function(){return e},e}var Zt=Gt.b.div(_t()),Qt=function(){return Object(r.jsx)($t.a,{})};Qt.FullView=function(){return Object(r.jsx)(Zt,{className:"loading-fullview",children:Object(r.jsx)($t.a,{size:"large"})})};var en=n(53);function tn(){var e=Object(Ht.a)(["\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    margin-left: var(--spacing-xs);\n    width: 24px;\n    height: 24px;\n    border: var(--bw) solid var(--sub-level-1);\n    background-color: var(--main-level-4);\n    border-radius: var(--br-lg);\n    box-shadow: var(--bs-button);\n\tcursor: pointer;\n\t&:hover {\n\t\tbackground-color: var(--sub-level-4);\n\t}\n"]);return tn=function(){return e},e}var nn=Gt.b.span(tn()),rn=function(e){var t=e.Icon,n=e.onClick,a=e.iconProps,o=e.tooltipProps,i=e.containerProps,c=null!==i&&void 0!==i?i:{},s=c.className,u=c.onClick,d=c.onKeyDown,f=Object(en.a)(c,["className","onClick","onKeyDown"]);return Object(r.jsx)(Xt.a,Object(l.a)(Object(l.a)({},o),{},{children:Object(r.jsx)(nn,Object(l.a)(Object(l.a)({tabIndex:0},f),{},{onClick:function(e){n(),null===u||void 0===u||u(e)},onKeyDown:function(e){null===d||void 0===d||d(e),"Enter"===e.key&&n()},className:["icon-button",null!==s&&void 0!==s?s:""].join(" "),children:Object(r.jsx)(t,Object(l.a)({},a))}))}))};n(245),n(246);var an=function(e,t,n){if(!t)return e;var r=e.width,a=e.height,o=e.x,i=void 0===o?0:o,c=e.y,s=void 0===c?0:c;if("px"===e.unit){var u=400/300,d=t.width,f=t.height,b=Math.min((null!==i&&void 0!==i?i:0)*u,d),p=Math.min((null!==s&&void 0!==s?s:0)*u,f),m=Math.min((null!==r&&void 0!==r?r:0)*u,d);return{unit:"%",x:b/d*100,y:p/f*100,width:m/d*100,height:m/(null!==n&&void 0!==n?n:1)/f*100,aspect:n}}if(i<0)return Object(l.a)(Object(l.a)({},e),{},{x:0});if(s<0)return Object(l.a)(Object(l.a)({},e),{},{y:0});var h=t.naturalHeight,v=t.naturalWidth,g=null!==r&&void 0!==r?r:0,j=null!==a&&void 0!==a?a:0,x=.05*(h>v?h:v),y=Math.abs(j*h*n-g*v)<=x;return Object(l.a)(Object(l.a)({},e),{},{x:i<0?0:i,y:s<0?0:s,height:y?j:g*t.naturalWidth/n/t.naturalHeight,aspect:n})},on=o.a.forwardRef((function(e,t){var n=e.title,o=void 0===n?"Card Art":n,i=e.backgroundColor,c=e.className,u=e.defaultExternalSource,d=void 0===u?"":u,f=e.receivingCanvas,b=e.children,p=e.beforeCropper,m=e.defaultCropInfo,h=e.ratio,v=e.onSourceLoaded,g=void 0===v?function(){}:v,j=e.onSourceChange,x=void 0===j?function(){}:j,y=e.onCropChange,O=void 0===y?function(){}:y,w=e.onTainted,k=void 0===w?function(){}:w,F=Object(a.useState)("anonymous"),C=Object(s.a)(F,1)[0],S=Object(a.useState)(0),T=Object(s.a)(S,2),R=T[0],N=T[1],L=Object(a.useState)("external"),M=Object(s.a)(L,2),I=M[0],A=M[1],E=Object(a.useState)("external"),B=Object(s.a)(E,2),W=B[0],P=B[1],D=Object(a.useState)(""),z=Object(s.a)(D,2),H=z[0],G=z[1],Y=Object(a.useState)(!1),X=Object(s.a)(Y,2),V=X[0],U=X[1],K=Object(a.useState)(null),J=Object(s.a)(K,2),q=J[0],$=J[1],_=Object(a.useState)(d),Z=Object(s.a)(_,2),Q=Z[0],ee=Z[1],te=Object(a.useRef)(null),ne=Object(a.useState)({current:m,completed:null}),re=Object(s.a)(ne,2),ae=re[0],oe=re[1],ie=Object(a.useState)("%"===m.unit),ce=Object(s.a)(ie,2),le=ce[0],se=ce[1],ue=ae.current,de=ae.completed,fe=Object(a.useRef)({source:"",crop:null}),be=Object(a.useCallback)((function(e){if(U(!1),$(null),g(),te.current=e,e.src===fe.current.source&&fe.current.crop){var t=pe.current;setTimeout((function(){if(t===pe.current&&fe.current.crop){var n=an(fe.current.crop,e,h);oe({completed:n,current:n}),se(!0),fe.current={source:"",crop:null}}}),250)}else setTimeout((function(){oe((function(t){var n=an(t.current,e,h);return{completed:n,current:n}})),se(!0)}),250)}),[g,h]);Object(a.useEffect)((function(){var e,t,n,r,a,o,i=te.current;if(de&&f&&i){var c=de.aspect;f.style.transform="scale(2)";var s=f.getContext("2d");if(s&&"number"===typeof c&&!(c<=0)){var u=i.naturalHeight,d=i.naturalWidth,b=d/i.width,p=u/i.height,m=null!==(e=de.unit)&&void 0!==e?e:"px",h=window.devicePixelRatio;s.setTransform(h,0,0,h,0,0);var v=Math.floor((null!==(t=de.width)&&void 0!==t?t:0)*("px"===m?b:d/100)),g=Math.min(d,v),j=Math.floor(v/c),x=Math.min(u,j),y=Math.min(d,Math.floor((null!==(n=de.x)&&void 0!==n?n:0)*("px"===m?b:d/100))),w=Math.min(u,Math.floor((null!==(r=de.y)&&void 0!==r?r:0)*("px"===m?p:u/100)));if(s.imageSmoothingQuality="high",!(g<=0||x<=0)){var k=void 0;if(y+g>d||w+x>u||y<0||w<0||Math.abs((v-g)/g)>.01||Math.abs((j-x)/x)>.01)"width"===(c*u>d?"width":"height")?(y=0,k={unit:"%",aspect:c,height:(x=(g=d)/c)/u*100,width:g/d*100,x:0,y:(w=(u-x)/2)/u*100}):(w=0,k={unit:"%",aspect:c,height:(x=u)/u*100,width:(g=u*c)/d*100,x:(y=(d-g)/2)/d*100,y:0});f.width=null!==(a=g)&&void 0!==a?a:0,f.height=null!==(o=x)&&void 0!==o?o:0,s.drawImage(i,y,w,g,x,0,0,g,x),"internal"===I&&(null!==H&&void 0!==H?H:"").length<=0||c===de.aspect&&O(de,I),k&&oe((function(e){return Object(l.a)(Object(l.a)({},e),{},{current:k})}))}}}}),[de,f,R]),Object(a.useEffect)((function(){oe((function(e){if(null!=te.current&&e.current){var t=an(e.current,te.current,h);return{current:t,completed:t}}return e}))}),[h]);var pe=Object(a.useRef)(0);Object(a.useImperativeHandle)(t,(function(){return{setRatio:function(e){},forceExternalSource:function(e,t){("internal"===I?H:Q)!==e&&(U(!0),A("external"),P("external"),x(e),ee(e)),se("%"===t.unit),pe.current+=1,fe.current={source:e,crop:t},N((function(e){return e+1}))}}}));var me=f&&!V&&(null===de||void 0===de?void 0:de.width)&&(null===de||void 0===de?void 0:de.height);return Object(r.jsxs)("div",{className:"card-image-cropper ".concat(c),children:[Object(r.jsxs)("div",{className:"card-image-source-input",children:[b,Object(r.jsxs)("div",{className:"card-image-source-input-container",children:[Object(r.jsxs)("div",{className:"card-image-source-input-title",children:[Object(r.jsxs)("span",{className:"field-title",children:[o," ",Object(r.jsx)(rn,{Icon:Jt.a,containerProps:{className:me?"":"disabled"},tooltipProps:{overlay:me?"Download cropped image":"Image is not loaded yet"},onClick:function(){return me&&f&&function(e,t){t&&e&&e.toBlob((function(e){if(null!==e){var t=window.URL.createObjectURL(e),n=document.createElement("a");n.download="crop-preview.png",n.href=URL.createObjectURL(e),n.click(),window.URL.revokeObjectURL(t)}}),"image/png",1)}(f,de)}})]}),Object(r.jsxs)(Yt.a.Group,{className:"card-image-source-type-input",onChange:function(e){var t=e.target.value;P(t),((null!==H&&void 0!==H?H:"").length>0&&"internal"===t||(null!==Q&&void 0!==Q?Q:"").length>0&&"external"===t)&&A(t)},value:W,children:[Object(r.jsx)(Yt.a.Button,{value:"external",checked:"external"===W,children:"Online"}),Object(r.jsx)(Xt.a,{title:Object(r.jsx)("div",{className:"image-warning",children:"Card data with offline image cannot be exported or auto-saved."}),children:Object(r.jsxs)(Yt.a.Button,{value:"internal",checked:"internal"===W,children:["Offline ",Object(r.jsx)(qt.a,{})]})})]})]}),Object(r.jsxs)("div",{className:["card-image-input","external"===W?"":"input-inactive"].join(" "),children:[Object(r.jsx)(Vt.a,{placeholder:"Image link",value:Q,onChange:function(e){var t=e.target.value;U(!0),A("external"),P("external"),x(t),ee(t)},maxLength:512,allowClear:!0},"key"),q?Object(r.jsx)("div",{className:"online-image-tip image-warning",children:"Image not found."}):Object(r.jsx)("div",{className:"online-image-tip",children:"You may use popular hosts such as imgur."})]}),Object(r.jsxs)("div",{className:["card-image-input","internal"===W?"":"input-inactive"].join(" "),children:[Object(r.jsx)(Vt.a,{type:"file",accept:"image/*",onChange:function(e){if(e.target.files&&e.target.files.length>0){U(!0);var t=new FileReader;t.addEventListener("load",(function(){"string"===typeof t.result&&(G(t.result),A("internal"),P("internal"))})),t.readAsDataURL(e.target.files[0])}else alert("No file uploaded")}}),Object(r.jsx)("hr",{}),"Offline image cannot be exported or auto-saved."]})]})]}),p,Object(r.jsxs)("div",{className:"card-cropper",children:[V&&Object(r.jsx)(Qt.FullView,{}),Object(r.jsx)(Kt.a,{src:"internal"===I?H:Q,imageStyle:i?{backgroundColor:i}:{backgroundImage:'url("'.concat("/ygocarder",'/asset/image/texture/transparent-tile.png")')},onImageLoaded:be,onImageError:function(){if(fe.current={source:"",crop:null},$("Image error"),U(!1),"external"===I&&""===(null!==Q&&void 0!==Q?Q:"")&&f){var e=f.width,t=f.height,n=f.getContext("2d");null===n||void 0===n||n.clearRect(0,0,e,t),de&&O(de,I),g()}else k()},crop:ue,onChange:function(e,t){if(!fe.current.crop){var n=te.current;oe((function(e){return Object(l.a)(Object(l.a)({},e),{},{current:an(t,n,h)})}))}},onComplete:function(e,t){fe.current.crop||oe((function(e){return Object(l.a)(Object(l.a)({},e),{},{completed:t})}))},ruleOfThirds:!0,crossorigin:C},"".concat(I,"-").concat(le,"-").concat(R))]})]})})),cn=n(37),ln=(n(260),function(e){var t=e.defaultValue,n=void 0===t?[]:t,o=e.onChange,i=void 0===o?function(){}:o,c=Object(a.useState)(n),l=Object(s.a)(c,2),u=l[0],d=l[1],f=[-45,0,45,-90,0,90,-135,180,135],b=JSON.stringify(u);return Object(a.useEffect)((function(){i(u)}),[b]),Object(r.jsxs)("div",{className:"link-marker-chooser",children:[Object(r.jsx)("div",{className:"title",children:"Link Arrows"}),Object(r.jsx)("div",{className:"container",children:Object(cn.a)(Array(9)).map((function(e,t){var n="".concat(t+1);return"5"===n?Object(r.jsx)(Xt.a,{overlay:"Reset",children:Object(r.jsx)("div",{className:"link-marker-reset",onClick:function(){d([])},children:Object(r.jsx)(x.a,{})})},"5"):Object(r.jsx)("div",{className:"link-marker-button marker-".concat(t+1," ").concat(u.includes(n)?"marker-checked":""),onClick:function(){d((function(e){var t=Object(cn.a)(e);return t.includes(n)?t=t.filter((function(e){return e!==n})):t.push(n),t}))},children:Object(r.jsx)("div",{className:"link-marker-icon link-marker-icon-".concat(t+1),style:{transform:"rotate(".concat(f[t],"deg)")}})},n)}))})]})}),sn=n(405),un=(n(261),function(e){var t=e.overlayClassName,n=e.iconProps,a=Object(en.a)(e,["overlayClassName","iconProps"]),o=null!==n&&void 0!==n?n:{},i=o.className,c=Object(en.a)(o,["className"]);return Object(r.jsx)(sn.a,Object(l.a)(Object(l.a)({overlayClassName:["explanation-overlay",null!==t&&void 0!==t?t:""].join(" ")},a),{},{children:Object(r.jsx)(qt.a,Object(l.a)({className:["explanation-icon",null!==i&&void 0!==i?i:""].join(" ")},c))}))}),dn=n(402),fn=n(72),bn=n(409),pn=n(410);n(262);function mn(){var e=Object(Ht.a)(["\n    min-width: 0;\n    position: relative;\n    overflow: hidden;\n    .caption {\n        position: absolute;\n        right: 0;\n        bottom: 0;\n        padding: var(--spacing-px) var(--spacing-sm);\n        background: var(--main-level-5);\n        border-radius: var(--br-lg) 0 0 0;\n        box-shadow: var(--bs-block);\n    }\n    > img {\n        max-width: 100%;\n        border: var(--bw) solid var(--sub-level-1);\n        border-radius: var(--br-lg);\n    }\n"]);return mn=function(){return e},e}function hn(){var e=Object(Ht.a)(["\n    display: grid;\n    grid-template-columns: 615fr 703fr;\n    gap: var(--spacing-sm);\n    padding: var(--spacing-sm) 0;\n    overflow: hidden;\n    .panel-box {\n        min-width: 0;\n        position: relative;\n        overflow: hidden;\n    }\n"]);return hn=function(){return e},e}function vn(){var e=Object(Ht.a)(["\n    background: var(--main-level-1);\n    padding: var(--spacing-px) var(--spacing-xxs);\n    border: var(--bw) solid #4e84a4;\n    border-radius: var(--br);\n    font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New', monospace;\n"]);return vn=function(){return e},e}var gn=Gt.b.span(vn()),jn=Gt.b.div(hn()),xn=Gt.b.div(mn()),yn=function(e){var t=e.caption,n=e.containerProps,a=e.alt,o=Object(en.a)(e,["caption","containerProps","alt"]),i=(null!==n&&void 0!==n?n:{}).className;return Object(r.jsxs)(xn,{className:"image-with-caption ".concat(i),children:[Object(r.jsx)("img",Object(l.a)({alt:a},o)),Object(r.jsx)("div",{className:"caption",children:t})]})},On=function(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),n=t[0],o=t[1];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(dn.a,{footer:null,visible:n,width:"60%",title:Object(r.jsxs)("div",{className:"overlay-title",children:["Formatting Guide ",Object(r.jsx)(fn.a,{size:"small",type:"primary",onClick:function(){o(!1)},children:"Close"})]}),className:"formattting-guide-overlay",onClose:function(){o(!1)},children:Object(r.jsxs)("div",{children:[Object(r.jsxs)("p",{children:["Formatting should work out-of-the-box, but in case you need to fine-tune your cards, here are some additional formatting syntax.",Object(r.jsx)("br",{}),"The behavior may be differents based on the input.",Object(r.jsx)("br",{}),"You can turn on/off hotkey usage in Setting ",Object(r.jsx)(bn.a,{}),"."]}),Object(r.jsx)("h2",{children:"Non-breakable line"}),"Wrap a line of text inside a ",Object(r.jsx)(gn,{children:"["})," and ",Object(r.jsx)(gn,{children:"]"})," to prevent the text from breaking down into multiple lines.",Object(r.jsx)("br",{}),"If hotkeys are allowed, you can wrap your desired text and press ",Object(r.jsx)(gn,{children:"Ctrl-1"})," or ",Object(r.jsx)(gn,{children:"\u2318-1"}),".",Object(r.jsxs)(jn,{className:"panel-figure",children:[Object(r.jsx)(yn,{containerProps:{className:"panel-box box-raw"},alt:"non-breakable line raw",src:"".concat("/ygocarder","/asset/image/syntax/syntax-1-raw.jpg"),caption:"Input"}),Object(r.jsx)(yn,{containerProps:{className:"panel-box box-preview"},alt:"non-breakable line preview",src:"".concat("/ygocarder","/asset/image/syntax/syntax-1-preview.jpg"),caption:"Output"})]}),Object(r.jsx)("h2",{children:"Non-breakable text"}),"Wrap a piece of text inside a ",Object(r.jsx)(gn,{children:"{"})," and ",Object(r.jsx)(gn,{children:"}"})," to prevent the text from breaking down into multiple lines.",Object(r.jsx)("br",{}),"If hotkeys are allowed, you can wrap your desired text and press ",Object(r.jsx)(gn,{children:"Ctrl-2"})," or ",Object(r.jsx)(gn,{children:"\u2318-2"}),".",Object(r.jsxs)(jn,{className:"panel-figure",children:[Object(r.jsx)(yn,{containerProps:{className:"panel-box box-raw"},alt:"non-breakable line raw",src:"".concat("/ygocarder","/asset/image/syntax/syntax-2-raw.jpg"),caption:"Input"}),Object(r.jsx)(yn,{containerProps:{className:"panel-box box-preview"},alt:"non-breakable line preview",src:"".concat("/ygocarder","/asset/image/syntax/syntax-2-preview.jpg"),caption:"Output"})]}),Object(r.jsx)("h2",{children:"Ruby"}),"Put a ",Object(r.jsx)(gn,{children:"|"})," in between of a non-breakable text to annotate the text with small letters above it.",Object(r.jsx)("br",{}),"If hotkeys are allowed, you can wrap your desired text and press ",Object(r.jsx)(gn,{children:"Ctrl-3"})," or ",Object(r.jsx)(gn,{children:"\u2318-3"}),".",Object(r.jsxs)(jn,{className:"panel-figure",children:[Object(r.jsx)(yn,{containerProps:{className:"panel-box box-raw"},alt:"non-breakable line raw",src:"".concat("/ygocarder","/asset/image/syntax/syntax-3-raw.jpg"),caption:"Input"}),Object(r.jsx)(yn,{containerProps:{className:"panel-box box-preview"},alt:"non-breakable line preview",src:"".concat("/ygocarder","/asset/image/syntax/syntax-3-preview.jpg"),caption:"Output"})]}),Object(r.jsx)("h2",{children:"Compressable Ruby"}),"Put a ",Object(r.jsx)(gn,{children:"||"})," in between of a non-breakable text to annotate it compressable small letters that does not try to extend beyond the text below it.",Object(r.jsx)("br",{}),"If hotkeys are allowed, you can wrap your desired text and press ",Object(r.jsx)(gn,{children:"Ctrl-4"})," or ",Object(r.jsx)(gn,{children:"\u2318-4"}),".",Object(r.jsxs)(jn,{className:"panel-figure",children:[Object(r.jsx)(yn,{containerProps:{className:"panel-box box-raw"},alt:"non-breakable line raw",src:"".concat("/ygocarder","/asset/image/syntax/syntax-4-raw.jpg"),caption:"Input"}),Object(r.jsx)(yn,{containerProps:{className:"panel-box box-preview"},alt:"non-breakable line preview",src:"".concat("/ygocarder","/asset/image/syntax/syntax-4-preview.jpg"),caption:"Output"})]}),Object(r.jsx)("h2",{children:"Non-compressable text"}),"Wrap a piece of text inside a ",Object(r.jsx)(gn,{children:"{{"})," and ",Object(r.jsx)(gn,{children:"}}"})," to prevent the text from being compressed.",Object(r.jsx)("br",{}),"If hotkeys are allowed, you can wrap your desired text and press ",Object(r.jsx)(gn,{children:"Ctrl-5"})," or ",Object(r.jsx)(gn,{children:"\u2318-5"}),".",Object(r.jsxs)(jn,{className:"panel-figure",children:[Object(r.jsx)(yn,{containerProps:{className:"panel-box box-raw"},alt:"non-breakable line raw",src:"".concat("/ygocarder","/asset/image/syntax/syntax-5-raw.jpg"),caption:"Input"}),Object(r.jsx)(yn,{containerProps:{className:"panel-box box-preview"},alt:"non-breakable line preview",src:"".concat("/ygocarder","/asset/image/syntax/syntax-5-preview.jpg"),caption:"Output"})]})]})}),Object(r.jsxs)(fn.a,{className:"formatting-help-button",type:"primary",onClick:function(){o(!0)},children:["Formatting Help ",Object(r.jsx)(pn.a,{})]})]})};function wn(){var e=Object(Ht.a)(["\n    display: inline-block;\n    width: 10px;\n"]);return wn=function(){return e},e}function kn(){var e=Object(Ht.a)(["\n    display: grid;\n    ","\n    > label {\n        cursor: pointer;\n        padding: 0 var(--spacing-xxs);\n        text-transform: capitalize;\n        text-align: center;\n    }\n"]);return kn=function(){return e},e}var Fn=Gt.b.div(kn(),(function(e){return e.$withPillar?"grid-template-columns: max-content 1fr;":"grid-template-columns: 1fr;"})),Cn=Gt.b.div(wn()),Sn=function(e){var t=e.name,n=e.labelBackgroundColor,a=e.labelBackgroundColorList,o=e.className;return Object(r.jsxs)(Fn,{className:"frame-info-block ".concat(null!==o&&void 0!==o?o:""),$withPillar:!(!n&&!a),children:[a?Object(r.jsx)(Cn,{children:a.map((function(e){return Object(r.jsx)("div",{style:{backgroundColor:e,height:"".concat(100/a.length,"%")}},e)}))}):n?Object(r.jsx)(Cn,{style:{backgroundColor:n}}):null,Object(r.jsx)("label",{className:"frame-info-block-label",children:t.replaceAll("-"," ")})]})},Tn=function(e,t){var n,r,a,o=e.creator,i=e.effect,c=e.format,s=e.isFirstEdition,u=e.name,d=e.setId,f=e.typeAbility;if(c===t)return e;var b="ocg"===t?fe:de,p="ocg"===t&&/-EN/.test(d)?d.replace("-EN","-JP"):"tcg"===t&&/-JP/.test(d)?d.replace("-JP","-EN"):d;return Object(l.a)(Object(l.a)({},e),{},{name:null!==(n=b[u])&&void 0!==n?n:u,format:t,effect:null!==(r=b[i])&&void 0!==r?r:i,typeAbility:f.map((function(e){var t;return null!==(t=b[e])&&void 0!==t?t:e})),creator:null!==(a=b[o])&&void 0!==a?a:o,setId:p,isFirstEdition:"ocg"!==t&&s})},Rn=n(117),Nn=n(83),Ln=n.n(Nn),Mn=n(193),In=n.n(Mn),An=function(){try{var e=window.localStorage.getItem("card-version"),t=window.localStorage.getItem("card-data"),n=new URLSearchParams(window.location.search).get("data");return n?Rt(n):null!==t&&"2.0.1"===e?Et(JSON.parse(t)):it()}catch(r){return console.error(r),it()}},En={debounce:{type:"debounce",wait:400},throttle:{type:"throttle",wait:1e3}},Bn=Object(Rn.create)((function(e,t){return{card:An(),setCard:function(t){e("function"===typeof t?function(e){return{card:t(e.card)}}:{card:t})},getUpdater:function(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},a=arguments.length>2?arguments[2]:void 0,o=t(),i=o.setCard,c=function(t){i((function(n){var a;return Object(l.a)(Object(l.a)({},n),{},Object(ce.a)({},e,r("string"===typeof t||"number"===typeof t||Array.isArray(t)?t:null===t||void 0===t||null===(a=t.target)||void 0===a?void 0:a.value)))}))};if(!a)return c;var s="string"===typeof a?null!==(n=En[a])&&void 0!==n?n:void 0:a;if(!s)return c;var u=s.wait,d=s.type;return"debounce"===d?Ln()(c,u):"throttle"===d?In()(c,u):c}}})),Wn=n(5),Pn=n.n(Wn),Dn=n(14),zn=n(118),Hn=n.n(zn),Gn=n(25),Yn=Object(Rn.create)((function(e){var t=function(){try{var e,t=JSON.parse(null!==(e=window.localStorage.getItem("setting"))&&void 0!==e?e:"{}");return t&&"object"===typeof t&&!Array.isArray(t)?t:{}}catch(n){return console.error("useSetting: Error when getting cached setting",n),{}}}(),n=t.allowHotkey,r=t.reduceMotionColor,a=t.showCreativeOption,o=t.showExtraDecorativeOption;return{setting:{allowHotkey:"boolean"!==typeof n||n,reduceMotionColor:"boolean"===typeof r&&r,showCreativeOption:"boolean"!==typeof a||a,showExtraDecorativeOption:"boolean"!==typeof o||o},updateSetting:function(t){e((function(e){var n="function"===typeof t?t(e.setting):Object(l.a)(Object(l.a)({},e.setting),t);return window.localStorage.setItem("setting",JSON.stringify(n)),{setting:n}}))}}})),Xn=f,Vn=d,Un=function(e){var t=e.ctx,n=e.color,r=void 0===n?"#000000".replace(/0/g,(function(){return(~~(12*Math.random()+2)).toString(16)})):n,a=e.width,o=e.offset,i=void 0===o?4:o,c=e.edge,l=e.baseline,s=e.xRatio,u=t.fillStyle;t.fillStyle=r,t.beginPath(),t.rect(c/s,l+1+Math.random()*i,a/s,2),t.fillStyle=u},Kn=function(e,t,n,r,a,o){if(!e||!t)return r;var i=(null!==o&&void 0!==o?o:{}).stroke,c=void 0!==i&&i;e.textAlign="left";var l=t.split(""),s=r;return l.forEach((function(t){e.fillText(t,s,a),c&&e.strokeText(t,s,a),s+=e.measureText(t).width*(2+n)/2})),s},Jn=function(e,t,n,r,a,o){if(!e||!t)return r;var i=(null!==o&&void 0!==o?o:{}).stroke,c=void 0!==i&&i;e.textAlign="right";var l=t.split(""),s=r;return l.forEach((function(t,r){var o=l[l.length-r-1];e.fillText(o,s,a),c&&e.strokeText(o,s,a),s-=e.measureText(o).width*(2+n)/2})),s},qn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vn,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Xn;return!!e&&(e.clearRect(0,0,t,n),!0)},$n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:P;return function(){var n=Object(Dn.a)(Pn.a.mark((function n(r,a,o){var i,c,l,s,u,d,f,b,p,m,h,v,g,j;return Pn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r&&Array.isArray(e)&&!(e.length<=0)){n.next=2;break}return n.abrupt("return",Promise.resolve());case 2:i=Object(kt.a)(e),n.prev=3,i.s();case 5:if((c=i.n()).done){n.next=39;break}if(l=c.value,s=t[l],!o||!t[l]){n.next=37;break}if(d=s.partInstructionMap,!(f=a&&null!==(u=d[a])&&void 0!==u?u:[]).length){n.next=33;break}b=Object(kt.a)(f),n.prev=13,b.s();case 15:if((p=b.n()).done){n.next=23;break}return m=p.value,h=m.blendMode,v=void 0===h?"source-over":h,g=m.opacity,j=void 0===g?1:g,r.globalCompositeOperation=v,r.globalAlpha=j,n.next=21,o(l);case 21:n.next=15;break;case 23:n.next=28;break;case 25:n.prev=25,n.t0=n.catch(13),b.e(n.t0);case 28:return n.prev=28,b.f(),n.finish(28);case 31:n.next=35;break;case 33:return n.next=35,o(l);case 35:r.globalAlpha=1,r.globalCompositeOperation="source-over";case 37:n.next=5;break;case 39:n.next=44;break;case 41:n.prev=41,n.t1=n.catch(3),i.e(n.t1);case 44:return n.prev=44,i.f(),n.finish(44);case 47:r.globalAlpha=1,r.globalCompositeOperation="source-over";case 49:case"end":return n.stop()}}),n,null,[[3,41,44,47],[13,25,28,31]])})));return function(e,t,r){return n.apply(this,arguments)}}()},_n={},Zn=function(){var e=Object(Dn.a)(Pn.a.mark((function e(t,n){var r,a,o=arguments;return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.length>2&&void 0!==o[2]?o[2]:0,a=o.length>3&&void 0!==o[3]?o[3]:0,t&&""!==n){e.next=4;break}return e.abrupt("return",new Promise((function(e){return e(!1)})));case 4:return e.abrupt("return",new Promise((function(e){var o;if(!0===(null===(o=_n[n])||void 0===o?void 0:o.ready)){var i=_n[n].image,c="number"===typeof r?r:r(i),l="number"===typeof a?a:a(i);t.drawImage(i,c,l),e(!0)}else{var s=new Image;s.src="/ygocarder"+n,s.onload=function(){var o="number"===typeof r?r:r(s),i="number"===typeof a?a:a(s);t.drawImage(s,o,i),_n[n].ready=!0,e(!0)},s.onerror=function(){e(!1)},_n[n]={image:s,ready:!1}}})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Qn=function(){var e=Object(Dn.a)(Pn.a.mark((function e(t,n){var r,a,o=arguments;return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:0,a=o.length>3&&void 0!==o[3]?o[3]:0,e.next=4,Zn(t,"/asset/image/"+n,r,a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),er=function(){var e=Object(Dn.a)(Pn.a.mark((function e(t,n,r,a,o,i){return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&""!==n){e.next=2;break}return e.abrupt("return",new Promise((function(e){return e(!1)})));case 2:return e.abrupt("return",new Promise((function(e){var c;if(!0===(null===(c=_n[n])||void 0===c?void 0:c.ready)){var l=_n[n].image,s="number"===typeof r?r:r(l),u="number"===typeof a?a:a(l),d="number"===typeof o?o:o(l),f="number"===typeof i?i:i(l);t.drawImage(l,s,u,d,f),e(!0)}else{var b=new Image;b.src="/ygocarder"+n,b.onload=function(){var c="number"===typeof r?r:r(b),l="number"===typeof a?a:a(b),s="number"===typeof o?o:o(b),u="number"===typeof i?i:i(b);t.drawImage(b,c,l,s,u),_n[n].ready=!0,e(!0)},b.onerror=function(){e(!1)},_n[n]={image:b,ready:!1}}})));case 3:case"end":return e.stop()}}),e)})));return function(t,n,r,a,o,i){return e.apply(this,arguments)}}(),tr=function(){var e=Object(Dn.a)(Pn.a.mark((function e(t,n,r,a,o,i){return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,er(t,"/asset/image/"+n,r,a,o,i);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r,a,o,i){return e.apply(this,arguments)}}(),nr=function(e){var t,n,r=e.ctx,a=e.letter,o=e.isLastOfLine,i=void 0!==o&&o,c=e.debug,l=e.fontStyle,s=e.xRatio,u=e.metricMethod,d=void 0===u?"standard":u;if(Re.test(a))return{width:0,boundWidth:0};var f="tcg"===l?et:_e,b="tcg"===l?Ze:qe,p="tcg"===l?Qe:$e,m=r.measureText(a),h=m.width,v=m.actualBoundingBoxLeft+m.actualBoundingBoxRight,g=1;"name"===d&&(g=1+8*(1-s));var j,x="name"===d||"compact"===d||"furigana"===d?.046875:0,y=v,O=null!==(t=i?p[a]:b[a])&&void 0!==t?t:0;if("tcg"===l)return{width:h,actualBoundWidth:v,boundWidth:h+2*((null!==(j=f[a])&&void 0!==j?j:0)*h),metric:m,offsetRatio:O};var w=(null!==(n=f[a])&&void 0!==n?n:0)*h+("furigana"===d?0:Math.min(.075*h,Math.max(.45,h*x)*g)),k=1;Ye.test(a)?(y="furigana"===d?v:v*("creator"===d?1.75:2.5),k=.6):Xe.test(a)?(y="furigana"===d?v:Math.max(v,.75*h),w="furigana"===d?0:2):Be.test(a)?y="furigana"===d?v:Math.max(v,.7*h):De.test(a)?y=h:Ue.test(a)?y=2*v:Ke.test(a)?y=1.25*v*(i?.5:1):He.test(a)?y="furigana"===d?v:Math.max(v,.75*h):Ge.test(a)?y=Math.max(v,.69*h)*("creator"===d?.975:1):Ve.test(a)?(y=h,w=0):y="furigana"===d?v:Math.max(v,.75*h);var F=1*h*1;return c&&console.info("getLetterWidth ".concat(c),a,m,1,1,"|",F),{width:h,actualBoundWidth:v,boundWidth:"standard"===d?h*k:y+2*w,metric:m,offsetRatio:O}},rr=function(e){var t=e.ctx,n=e.baseline,r=e.edge,a=e.letter,o=e.xRatio,i=e.letterMetric,c=e.textDrawer,l=null!==i&&void 0!==i?i:{},s=l.boundWidth,u=l.metric,d=void 0===u?t.measureText(a):u,f=l.offsetRatio,b=void 0===f?0:f,p=d.width*o,m=s?s*o:p;(null!==c&&void 0!==c?c:function(e){var t=e.ctx,n=e.letter,r=e.scaledBaseline,a=e.scaledEdge;t.fillText(n,a,r)})({ctx:t,letter:a,scaledEdge:r/o-(p-m)/2-m*b,scaledBaseline:n})},ar=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t?new RegExp("([".concat(rt,"])|(").concat(ye,"[\\w\\W]+?").concat(Oe,")|(.+?)")):new RegExp("([".concat(rt,"])|").concat(ye,"([\\w\\W]+?)").concat(Oe,"|(.+?)"));return e.split(n).filter((function(e){return null!=e&&""!==e}))},or=function(e,t,n,r){var a=n.fontSize,o=n.headTextFontRatio,i=void 0===o?V:o,c=t.font,l=t.ordinalFont,s=t.symbolFont,u=t.symbolFontRatio,d=t.numberFont,f=void 0===d?c:d,b=t.numberFontRatio,p=void 0===b?1:b,m=t.furiganaFont,h=r.getFontInfo(),v=r.getFontInfo(),g=r.getFontInfo(),j=r.getFontInfo(),x=r.getFontInfo();return{applyNumberFont:function(){h=r.getFontInfo(),e.font=r.setFamily(f).setSize(a*p).getFont()},stopApplyNumberFont:function(){e.font=r.setFamily(h.family).setSize(h.size).getFont()},applyLargerText:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;x=r.getFontInfo(),e.font=r.setSize(a*t).getFont()},stopApplyLargerText:function(){e.font=r.setSize(x.size).getFont()},applySymbolFont:function(){v=r.getFontInfo(),e.font=r.setFamily(s).setSize(a*u).getFont()},stopApplySymbolFont:function(){e.font=r.setFamily(v.family).setSize(v.size).getFont()},applyOrdinalFont:function(){g=r.getFontInfo(),e.font=r.setFamily(l).setSize(a/1.1).getFont()},stopApplyOrdinalFont:function(){e.font=r.setFamily(g.family).setSize(g.size).getFont()},applyFuriganaFont:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];j=r.getFontInfo(),e.font=r.setFamily(m).setWeight(t?"bold":"").setSize(a*i).getFont()},stopApplyFuriganaFont:function(){e.font=r.setFamily(j.family).setWeight(j.weight).setSize(j.size).getFont()},applyAsymmetricScale:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;e.scale(t,n)},applyScale:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;e.scale(t,n)},resetScale:function(){e.setTransform(1,0,0,1,0,0)},reverseScale:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;e.scale(1/t,1/t)}}},ir=function(e,t,n,r,a){var o=(r-a)/2;e.beginPath(),e.arc(t+o,n-o-1,o,0,2*Math.PI,!1),e.fill(),e.lineWidth=1,e.strokeStyle="#003300",e.stroke()},cr=function(e){var t=e.footText,n=e.footTextWidth,r=e.headText,a=e.headTextLetterWidth,o=e.headTextGap,i=e.headTextSpacing,c=e.gapPadding,l=e.debug,s=e.fitFootText,u=e.sentenceXRatio,d=e.xRatio,f=0===r.length,b=a/n*u,p=i,m=0;b<=.95?p=i:b<=1.175?p=0:(b<=1.575||(m=.66),p=-1*i/4),(s||d<1)&&(p=i);var h=a*(d&&!s?d:!m||s?1:m)+p*(r.length-1),v=f?0:(n-a)/r.length,g=n,j=1===t.length||2*c+h>n?"center":"space-around",x="center"===j?p:v,y="center"===j?2*c+h:g,O=s?Math.min(y,n):y,w="center"===j?(h-n)/2:0,k=Math.max(o,s?Math.min(w,0):w);return l&&console.info("analyzeHeadText ".concat(l),j,x,"|",r,O,y,t,n,k),{gapPadding:c,letterSpacing:x,trueHeadTextWidth:y,headTextWidth:O,alignment:j,halfGap:k,headTextXRatio:"center"===j?m:0}},lr=function(e,t){return e>=0?t>=0?0:-1*Math.max(-1*e,t):t>=0?-1*Math.max(e,-1*t):0},sr=function e(t){var n=t.ctx,r=t.token,a=t.nextToken,o=t.xRatio,i=t.previousTokenGap,c=void 0===i?0:i,l=t.letterSpacing,u=void 0===l?X:l,d=t.format,f=t.textData;if(!n||!r)return{totalWidth:0,leftMostLetter:"",spaceCount:0,spaceAtEnd:!1,rightGap:0,leftGap:0};for(var b=f.currentFont,p=f.fontData,m=f.fontLevel,h=p.metricMethod,v=p.headTextOverflow,g=void 0===v?J:v,j=p.fontStyle,x=p.fontList[m],y=x.bulletSymbolWidth,O=x.capitalLetterRatio,w=x.fontSize,k=x.iconSymbolWidth,F=void 0===k?y:k,C=x.largeSymbolRatio,S=void 0===C?Y:C,T=x.headTextSpacing,R=void 0===T?U:T,N=x.squareBracketRatio,L=x.wordLetterSpacing,M=-.4*w,I=or(n,p,x,b),A=I.applyScale,E=I.reverseScale,B=I.applyLargerText,W=I.stopApplyLargerText,P=I.applyFuriganaFont,D=I.stopApplyFuriganaFont,z=I.applyOrdinalFont,H=I.stopApplyOrdinalFont,G=I.applySymbolFont,V=I.stopApplySymbolFont,K=I.applyNumberFont,q=I.stopApplyNumberFont,$=1+u/2,_="",Z=0,Q=0,ee=!1,te=void 0===a,ne=null!==c&&void 0!==c?c:0,re=!1,ae=0,oe=r.replaceAll(new RegExp(Te,"g"),"").split(xe).filter((function(e){return null!=e&&""!==e})),ie=0;ie<oe.length;ie++){var ce=0===ie,le=oe[ie];if("\u29be"===le)ne=0,Z+=F/o*$,ce&&(ae=0,_=le[0]);else if("\u25cf"===le){ne=0,Z+=y/o*$,ce&&(ae=0,_=le[0])}else if(/[\xa9]/.test(le)){ne=0,B(S);var se=n.measureText(le).width/o;W(),Z+=se*$,ce&&(ae=0,_=le[0])}else if(/[\u2460-\u2473]/.test(le)){ne=0,z();var ue=n.measureText(le).width/o;H(),Z+=ue*$,Q+=1,ce&&(ae=0,_=le[0])}else if(nt.test(le)){var de=le.replaceAll(/{|}/g,"").split(/(\|+)/),fe=Object(s.a)(de,3),be=fe[0],pe=fe[1],me=fe[2],ge=void 0===me?"":me,ye="||"===pe,Oe=e({ctx:n,token:be,nextToken:a,xRatio:o,letterSpacing:u,previousTokenGap:0,format:d,textData:f}).totalWidth;P();var we=ge.split("").map((function(e){return nr({ctx:n,letter:e,fontStyle:j,metricMethod:"furigana",xRatio:1}).boundWidth})).reduce((function(e,t){return e+t}),0);D();var ke=cr({headText:ge,headTextLetterWidth:we/o,footText:be,footTextWidth:Oe,headTextGap:M/o,headTextSpacing:R,gapPadding:ot*w/o,fitFootText:ye,sentenceXRatio:o,xRatio:"condense"===g&&be.length>1?Math.min(1,o+.1):0}),Fe=ke.halfGap,Ce=ke.headTextWidth,Se=0===ge.length?Math.max(M,Oe/at):Fe,Re=Se,Ne=Se,Le=Math.max(Ce,Oe),Ie=lr(ne,Re);ne=Ne,Z+=Le-Ie,Q+=1,ce&&(re=!0,ae=Re,_=be[0])}else if(je.test(le)){var Ae=L?1+L/2:$;n.letterSpacing="".concat((Ae-1)*b.getFontInfo().sizeAsNumber,"px");for(var Ee=le,Be=0;""!==Ee;){var We=Ee[0],Pe=Ee.slice(1),De=n.measureText(Ee).width-n.measureText(Pe).width;ve.test(We)?(A(N),De=n.measureText(Ee).width-n.measureText(Pe).width,E(N)):he.test(We)?(A(O),De=n.measureText(Ee).width-n.measureText(Pe).width,E(O)):ze.test(We)?(K(),De=n.measureText(Ee).width-n.measureText(Pe).width,q()):Me.test(We)&&"tcg"===j?(G(),De=n.measureText(Ee).width-n.measureText(Pe).width,V()):De=n.measureText(Ee).width-n.measureText(Pe).width,Be+=De,Ee=Pe}var He=Math.max(M,Be/at),Ge=He;Z+=Be-lr(ne,He),ne=Ge,ce&&(ae=He,_=le[0]),n.letterSpacing="0px"}else if(Me.test(le)&&"tcg"===j){G();var Ye=n.measureText(le).width*$;V();var Xe=Math.max(M,Ye/at),Ue=Xe;Z+=Ye-lr(ne,Xe),ne=Ue,ce&&(ae=Xe,_=le[0])}else{var Ke=nr({ctx:n,letter:le,isLastOfLine:te,fontStyle:j,metricMethod:h,xRatio:o}).boundWidth*$,qe=Math.max(M,Ke/at),$e=qe;Z+=Ke-lr(ne,qe),ne=$e,("ocg"===d||"tcg"===d&&/\s+/.test(le))&&!1===Ve.test(le)&&(Q+=1,ie===oe.length-1&&(ee=!0)),ce&&(ae=qe,_=le[0]),Je.test(le)&&(ae=0,ne=0)}}return{totalWidth:Z,spaceCount:Q,spaceAtEnd:ee,leftMostLetter:_,rightGap:ne,leftGap:ae,offsetable:re}},ur=function(e){var t=e.ctx,n=e.median,r=e.paragraphList,a=e.additionalLineCount,o=void 0===a?0:a,i=e.width,c=e.format,l=e.textData,s=l.fontData,u=l.fontLevel,d=s.fontList[u].letterSpacing,f=[],b=r.reduce((function(e,r){for(var a=(n<=100?100:n)/1e3,o=i/a,s=ar(r,!0),u=1,b=[],p=0,m=0,h=0,v=0,g=a;v<s.length;v++){var j=s[v],x=s[v+1];j===Fe?(h+=1,g=1):j===Ce&&(h-=1,g=a);var y=sr({ctx:t,token:j,nextToken:x,xRatio:g,previousTokenGap:m,format:c,letterSpacing:d,textData:l}),O=y.leftMostLetter,w=y.totalWidth,k=y.rightGap,F=y.leftGap,C=w/(h>0?a:1)+(0===v?(F>0?-1*Math.min(20/g,F):0)+(Pe.test(O)?4:0):0);if(p+C>o){var S=b.join("").trim();h>0&&(S+=Ce),h<0&&(S=Fe+S),h=0,f.push({line:S,effectiveMedian:n,isLast:!1,actualLineWidth:p});var T=sr({ctx:t,token:j,nextToken:x,xRatio:g,previousTokenGap:0,format:c,textData:l}),R=T.totalWidth,N=T.rightGap,L=T.leftGap;p=R+((L>0?-1*Math.min(20/g,L):0)+(Pe.test(O)?4:0)),m=N,b=[j],u+=1}else p+=C,m=k,b.push(j)}var M=b.join("").trim();return h>0&&(M+=Ce),h<0&&(M=Fe+M),h=0,f.push({line:M,effectiveMedian:n,isLast:!0,actualLineWidth:p}),e+u}),0)+(null!==o&&void 0!==o?o:0);return{currentLineList:f,currentLineCount:b}},dr=function(e){var t=e.ctx,n=e.fontSize,r=e.edge,a=e.baseline,o=e.headText,i=e.headTextLetterWidth,c=e.footText,l=e.footTextWidth,s=e.headTextGap,u=e.headTextSpacing,d=e.headTextHeightRatio,f=e.xRatio,b=e.fontStyle,p=e.textWorker,m=e.fitFootText,h=e.headTextOverflow,v=p.applyFuriganaFont,g=p.stopApplyFuriganaFont,j=p.resetScale,x=p.applyScale,y="condense"===h&&c.length>1?Math.min(1,f+.1):0,O=cr({headText:o,headTextLetterWidth:i,footText:c,footTextWidth:l*f,headTextGap:s,headTextSpacing:u*f,gapPadding:n*ot,fitFootText:m,sentenceXRatio:f,xRatio:y}),w=O.gapPadding,k=O.letterSpacing,F=O.trueHeadTextWidth,C=O.halfGap,S=O.alignment,T=O.headTextXRatio,R=F>l*f;if(0===o.length)return{trueHeadTextWidth:F,halfGap:C};var N=m?Math.min(1,l*f/F):1,L=m?N:y&&"center"===S?y:T,M=r;j(),(m||L)&&(x(L,1),M=r/L),"center"===S?(M+=w,R?L>N&&(M+=(l*f/L-F)/2/L):M+=(l*f-F)/2):M+=k/2;var I,A=Object(kt.a)(o);try{for(A.s();!(I=A.n()).done;){var E=I.value;v();var B=nr({ctx:t,letter:E,fontStyle:b,metricMethod:"furigana",xRatio:1}),W=B.width,P=B.boundWidth,D=(W-P)/2;g(),v(!0),t.fillText(E,M-D,a-n*d),g(),M+=P+k}}catch(z){A.e(z)}finally{A.f()}return(m||L)&&j(),x(f,1),{trueHeadTextWidth:F,halfGap:C}},fr=function e(t){for(var n=t.ctx,r=t.tokenList,a=t.trueEdge,o=t.trueBaseline,i=t.spaceWidth,c=void 0===i?0:i,u=t.xRatio,d=t.yRatio,f=void 0===d?1:d,b=t.textData,p=t.format,m=t.textDrawer,h=t.debug,v=void 0!==h&&h,g=b.currentFont,j=b.fontData,x=b.fontLevel,y=j.fontList[x],O=j.headTextFillStyle,w=j.headTextHeightRatio,k=void 0===w?K:w,F=j.headTextOverflow,C=void 0===F?J:F,S=j.metricMethod,T=j.fontStyle,R=y.letterSpacing,N=void 0===R?X:R,L=y.wordLetterSpacing,M=y.capitalLetterRatio,I=void 0===M?H:M,A=y.squareBracketRatio,E=void 0===A?G:A,B=y.fontSize,W=y.bulletSymbolWidth,P=y.iconSymbolWidth,D=void 0===P?W:P,z=y.largeSymbolRatio,V=void 0===z?Y:z,q=y.headTextSpacing,$=void 0===q?U:q,_=or(n,j,y,g),Z=_.stopApplyFuriganaFont,Q=_.applyFuriganaFont,ee=_.stopApplyLargerText,te=_.applyLargerText,ne=_.stopApplyNumberFont,re=_.applyNumberFont,ae=_.stopApplyOrdinalFont,oe=_.applyOrdinalFont,ie=_.applyScale,ce=_.reverseScale,le=_.applySymbolFont,se=_.stopApplySymbolFont,ue=_.applyAsymmetricScale,de=_.resetScale,fe=1+N/2,be=o/f,pe=0,me=[],ge=0,ye=a,Oe=0,we=u;Oe<r.length;Oe++){var ke=r[Oe];if(ke!==Fe)if(ke!==Ce){for(var Se=-.4*we,Te=B*Se,Re=r[Oe+1],Ne=r[Oe+2],Le={ctx:n,xRatio:we,letterSpacing:N,format:p,textData:b},Ie={ctx:n,baseline:be,xRatio:we,textDrawer:m},Ae=ke.split(xe).filter((function(e){return null!=e&&""!==e})),Ee=sr(Object(l.a)({token:ke,nextToken:Re,previousTokenGap:pe/we},Le)),Be=Ee.leftMostLetter,We=Ee.leftGap,De=Ee.rightGap,He=Ee.totalWidth,Ge=Ee.spaceCount,Ye=0===Oe?(We>0?-1*Math.min(20,We*we):0)+(Pe.test(Be)?4:0):0,Xe=ye+Ye,Ue=pe,Ke=0;Ke<Ae.length;Ke++){var qe,$e,_e=Ae[Ke],Ze=null!==(qe=Ae[Ke+1])&&void 0!==qe?qe:Re,Qe=null!==($e=Ae[Oe+2])&&void 0!==$e?$e:Ne;if(ke===Fe||ke===Ce);else if("\u29be"===_e)me.push({edge:Xe,size:D,baseline:be}),Xe+=D*fe,Ue=0,ge=0;else if("\u25cf"===_e)de(),ir(n,Xe,o,W,tt(p)),Xe+=W*fe,ue(we,f),Ue=0,ge=0;else if(/[\xa9]/.test(_e))de(),te(V),rr(Object(l.a)(Object(l.a)({},Ie),{},{letter:_e,edge:Xe*we,baseline:o+("tcg"===p?1:2)})),Xe+=n.measureText(_e).width*fe,ee(),ue(we,f),Ue=0,ge=0;else if(/[\u2460-\u2473]/.test(_e))de(),oe(),rr(Object(l.a)(Object(l.a)({},Ie),{},{letter:_e,edge:Xe*we,baseline:o-2})),Xe+=n.measureText(_e).width*fe,ae(),ue(we,f),Xe+=c,Ue=0,ge=0;else if(nt.test(_e)){var et=_e.replaceAll(/{|}/g,"").split(/(\|+)/),rt=Object(s.a)(et,3),at=rt[0],it=rt[1],ct=rt[2],lt=void 0===ct?"":ct,st="||"===it,ut=sr(Object(l.a)({token:at,nextToken:Ze,previousTokenGap:0},Le)).totalWidth;Q();var dt=lt.split("").map((function(e){return nr({ctx:n,letter:e,fontStyle:T,metricMethod:"furigana",xRatio:1}).boundWidth})).reduce((function(e,t){return e+t}),0);Z();var ft=cr({headText:lt,headTextLetterWidth:dt,footText:at,footTextWidth:ut*we,headTextGap:Te,headTextSpacing:$*we,gapPadding:B*ot,fitFootText:st,sentenceXRatio:we,xRatio:"condense"===C&&at.length>1?Math.min(1,we+.1):0}),bt=ft.headTextWidth,pt=ft.halfGap,mt=0===lt.length?Math.max(Te,ut*Se):pt,ht=mt,vt=mt,gt=lr(Ue,vt),jt=vt>0?vt-gt:0,xt=sr(Object(l.a)({token:Ze,nextToken:Qe,previousTokenGap:ht/we},Le)),yt=xt.offsetable,Ot=xt.leftGap*we,wt=lr(ht,Ot),kt=jt+(ht>0?ht-wt:0),Ft=0,Ct=0;kt>0&&Ot>=-2&&yt?(Ft=(kt+2*Math.max(Ot,0))/3,Ct=Math.max(Ot,0)-Ft):Ft=jt;var St=Xe+(mt<0?-gt:Ye?-Ye:Ft)+ge;ge=Ct,e({ctx:n,format:p,textData:b,tokenList:ar(at),trueBaseline:be,trueEdge:St,xRatio:we,yRatio:f,spaceWidth:0,textDrawer:m,debug:!1});var Tt=n.fillStyle,Rt=n.strokeStyle,Nt=n.shadowColor,Lt=n.shadowOffsetX,Mt=n.shadowOffsetY,It=n.shadowBlur;O&&(n.fillStyle=O,n.strokeStyle="",n.shadowColor="",n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowBlur=0),dr({ctx:n,fontSize:B,edge:Xe-gt,baseline:be,headText:lt,headTextLetterWidth:dt,footText:at,footTextWidth:ut,headTextGap:Te,headTextSpacing:$,headTextHeightRatio:k,xRatio:we,fontStyle:T,textWorker:_,fitFootText:st,headTextOverflow:C}),n.fillStyle=Tt,n.strokeStyle=Rt,n.shadowColor=Nt,n.shadowOffsetX=Lt,n.shadowOffsetY=Mt,n.shadowBlur=It,Xe+=Math.max(ut*we,bt)-gt+c,Ue=ht}else if(je.test(_e)){var At=L?1+L/2:fe;n.letterSpacing="".concat((At-1)*g.getFontInfo().sizeAsNumber,"px");for(var Et=n.measureText(_e).width*we,Bt=Math.max(Te,Et*Se),Wt=Bt,Pt=_e,Dt=Xe-=lr(Ue,Bt);""!==Pt;){var zt=Pt[0],Ht=Pt.slice(1),Gt=0,Yt=Object(l.a)(Object(l.a)({},Ie),{},{letter:zt,edge:Dt});if(ve.test(zt))ie(E),Gt=n.measureText(Pt).width-n.measureText(Ht).width,rr(Object(l.a)(Object(l.a)({},Yt),{},{edge:Dt/E,baseline:be/E})),ce(E);else if(he.test(zt)){ie(I);var Xt=(Gt=n.measureText(Pt).width-n.measureText(Ht).width)>n.measureText(zt).width*I?Math.round(Gt*(1-I))/2:0;rr(Object(l.a)(Object(l.a)({},Yt),{},{edge:Dt/I+Xt,baseline:be/I})),ce(I)}else ze.test(zt)?(re(),Gt=n.measureText(Pt).width-n.measureText(Ht).width,rr(Yt),ne()):Me.test(zt)&&"tcg"===T?(le(),Gt=n.measureText(Pt).width-n.measureText(Ht).width,rr(Yt),se()):(Gt=n.measureText(Pt).width-n.measureText(Ht).width,rr(Yt));Dt+=Gt*we,Pt=Ht}Xe=Dt,Ue=Wt,ge=0,n.letterSpacing="0px"}else if(Me.test(_e)&&"tcg"===T){var Vt=_e;le();var Ut=n.measureText(Vt).width*fe*we,Kt=Math.max(Te,Ut*Se),Jt=Kt;Xe-=lr(Ue,Kt),rr(Object(l.a)(Object(l.a)({},Ie),{},{letter:Vt,edge:Xe})),Xe+=Ut,se(),Ue=Jt,ge=0}else{var qt=_e,$t=nr({ctx:n,letter:qt,fontStyle:T,metricMethod:S,isLastOfLine:void 0===Ze,xRatio:we}),_t=$t.boundWidth*fe*we,Zt=Math.max(Te,_t*Se),Qt=Zt;Xe-=lr(Ue,Zt),rr(Object(l.a)(Object(l.a)({},Ie),{},{letter:qt,edge:Xe,letterMetric:$t})),Xe+=_t,("ocg"===p||"tcg"===p&&/\s+/.test(qt))&&!0!==Ve.test(qt)&&(Xe+=c),Je.test(qt)||(Ue=Qt),ge=0}}pe=De*we,v&&Un({ctx:n,baseline:be,edge:ye,width:He*we,xRatio:we}),ye+=He*we+Ge*c+Ye}else we=u,n.scale(we,1);else we=1,n.setTransform(1,0,0,1,0,0)}return{tokenEdge:ye,iconPositionList:me}},br=function(e,t,n){var r,a=null!==n&&void 0!==n?n:{},o=a.multiline,i=void 0===o||o,c=a.furiganaHelper,l=void 0===c||c,s=a.dictionaryType,u=void 0===s?"rubyForm":s,d=null!==e&&void 0!==e?e:"",f="",b="ocg"===t?le:se,p=Object(kt.a)(d);try{for(p.s();!(r=p.n()).done;){var m,h=r.value;f+=null!==(m=b[h])&&void 0!==m?m:h}}catch(F){p.e(F)}finally{p.f()}var v,g=f,j=(i?g.replace(/^\[([\w\W]*?)\](?=(\n|$))/gm,"".concat(we,"$1").concat(ke)):g).replace(/(^|[-\u2014\s(["])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/[(\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/--/g,"\u2014").replace(/\u25cf /g,"\u25cf").replace(/(\([\uff10-\uff190-9]{1,2}\))/g,(function(e){var t=ue[e];return null!==t&&void 0!==t?t:e})).replaceAll(new RegExp("{{([^{}]+?)}}","g"),(function(e){return e.replaceAll("{{",Fe).replaceAll("}}",Ce)})).replaceAll(new RegExp("{[^{}]+?}","g"),(function(e){return"".concat(ye).concat(e).concat(Oe)})),x=("tcg"===t||!1===l?j:j.replaceAll(new RegExp(Ae,"g"),(function(e){var t,n=null!==(t=E[e][u])&&void 0!==t?t:E[e].rubyForm;return"".concat(ye).concat(n).concat(Oe)}))).replaceAll(new RegExp(ge,"g"),(function(e){return"".concat(ye).concat(e).concat(Oe)})).replaceAll(new RegExp("[(\\[\uff5b\u3014\u3008\u300a\u300c\uff62\u300e\u3010\u3018\u3016\u301d'\"\u2018\u201c\uff5f\xab\u25cf]+.","g"),(function(e){return"".concat(ye).concat(e).concat(Oe)})).replaceAll(new RegExp(We,"g"),(function(e){return"".concat(ye).concat(e).concat(Oe)})).replaceAll(new RegExp(".[\u2014...\u2025\u3033\u3034\u3035)]+[^\\s]","g"),(function(e){return"".concat(ye).concat(e).concat(Oe)})).replaceAll(new RegExp("[\u2460-\u2473]\uff1a.","g"),(function(e){return"".concat(ye).concat(e).concat(Oe)})),y=[],O=0,w=Object(kt.a)(x);try{for(w.s();!(v=w.n()).done;){var k=v.value;k===ye?(0===O&&y.push(k),O+=1):k===Oe?0===(O-=1)&&y.push(k):y.push(k)}}catch(F){w.e(F)}finally{w.f()}return y.join("").replaceAll("".concat(ke).concat(Oe),"".concat(Oe).concat(ke)).replaceAll("".concat(ye).concat(we),"".concat(we).concat(ye)).replaceAll("".concat(Fe).concat(Oe),"".concat(Oe).concat(Fe)).replaceAll("".concat(ye).concat(Ce),"".concat(Ce).concat(ye)).replaceAll("".concat(we).concat(ke),"").replaceAll("".concat(ye).concat(Oe),"")},pr=function(e){var t=e.format,n=e.isNormal,r=e.statInEffect,a=e.typeInEffect,o=[t,a?"type":"",r?"stat":""].filter((function(e){return""!==e})).join("-"),i=[t,a?"type":"",r?"stat":""].filter((function(e){return""!==e})).join("-"),c=Q[i];return r&&a&&n&&"tcg"===t&&((c=_).fontList=ee),{fontData:c,sizeList:N[o]}},mr=d,hr=function(e){var t,n,r=e.ctx,a=e.content,o=e.isNormal,i=void 0!==o&&o,c=e.fontData,l=void 0===c?Q.tcg:c,s=e.sizeList,u=void 0===s?N["tcg-type"]:s,d=e.condenseTolerant,f=void 0===d?"strict":d,b=e.format,p=e.furiganaHelper,m=0;if(!r||!a)return m;for(var h=br(a.trim(),b,{furiganaHelper:p}),v="tcg"===b?null!==(t=ne[f])&&void 0!==t?t:ne.strict:{1:800,2:800,3:800},g=function(e){var t,n,r,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=e,i=[],c=new RegExp("^(".concat(we,"([^").concat(ke,"]*)").concat(ke,"\\s*)"));do{var l,s;n=null===(l=c.exec(o))||void 0===l?void 0:l[1],(r=null===(s=c.exec(o))||void 0===s?void 0:s[2])&&n&&(i.push(r),o=o.replace(n,""))}while(n&&r);var u="",d=new RegExp(Ne,"m"),f=null===(t=d.exec(e))||void 0===t?void 0:t[1];return f&&a?(u=f,o=o.replace(f,"")):u="",{fullLineList:i,effectText:o,effectFlavorCondition:u}}(h,i),j=g.effectText,x=g.effectFlavorCondition,y=g.fullLineList,O=(null!==(n=y.length)&&void 0!==n?n:0)+(x.length>0?1:0),w=j?j.split("\n"):[],k=l.font,F=l.fontList,C=function(){var e,t,n=F[m],a=n.fontSize,o=n.lineHeight,c=n.lineCount,s=null!==(e=u[m])&&void 0!==e?e:u[u.length-1],d=s.trueEdge,f=s.trueWidth,p=s.trueBaseline,h=i&&"tcg"===b?f-2:f,g=jt();r.font=g.setStyle(i&&"tcg"===b?"italic":"").setWeight("").setSize(a).setFamily(k).getFont(),r.textAlign="left";var j={fontData:l,fontLevel:m,currentFont:g},C=[];if(!(gt((function(e){var t=ur({ctx:r,median:e,paragraphList:w,additionalLineCount:O,format:b,textData:j,width:h}),n=t.currentLineList,a=t.currentLineCount;return C=n,!(a>c)}),200)<(null!==(t=v["".concat(w.length)])&&void 0!==t?t:v[3])&&m<F.length-1)){r.clearRect(0,0,mr,1111);var S=p+o,T=y.map((function(e){return{line:e,isLast:!0,effectiveMedian:gt((function(t){return!(ur({ctx:r,median:t,paragraphList:[e],format:b,textData:j,width:h}).currentLineCount>1)}))}}));if([].concat(Object(cn.a)(T),Object(cn.a)(C)).forEach((function(e){var t=e.line,n=e.isLast,a=e.effectiveMedian/1e3,i=function(e){for(var t=e.ctx,n=e.line,r=e.width,a=e.xRatio,o=e.format,i=e.isLast,c=e.textData,l=ar(n),s=0,u=0,d=0,f=0,b=a;f<l.length;f++){var p=l[f],m=l[f+1];if(p!==Fe)if(p!==Ce){var h=sr({ctx:t,token:p,nextToken:m,xRatio:b,previousTokenGap:d/b,textData:c,format:o}),v=h.spaceCount,g=h.totalWidth,j=h.spaceAtEnd,x=h.leftGap,y=h.rightGap,O=h.leftMostLetter;d=y*b,s+=g*b+((0===f&&x>0?-1*Math.min(20,x*b):0)+(0===f&&Pe.test(O)?4*b:0)),u+=v-(j&&void 0===m?1:0)}else b=a;else b=1}var w=u>0?(r-s)/u:0;return{tokenList:l,spaceWidth:i?"tcg"===o?w>1.5?0:w:w>3.65?0:w:w}}({ctx:r,line:t,xRatio:a,format:b,isLast:n,textData:j,width:h}),c=i.tokenList,l=i.spaceWidth;r.scale(a,1),fr({ctx:r,tokenList:c,xRatio:a,yRatio:1,trueEdge:d,trueBaseline:S,spaceWidth:l,textData:j,format:b}),S+=o,r.setTransform(1,0,0,1,0,0)})),x.length>0){var R=gt((function(e){return!(ur({ctx:r,median:e,paragraphList:[x],format:b,textData:j,width:h}).currentLineCount>1)}))/1e3;r.scale(R,1),r.font=g.setStyle("").getFont();var N=ar(x);N="\n"===N[0]?N.slice(1):N,fr({ctx:r,tokenList:N,xRatio:R,yRatio:1,trueEdge:d,trueBaseline:S,textData:j,format:b}),S+=o,r.setTransform(1,0,0,1,0,0)}return"break"}m+=1};m<F.length;){if("break"===C())break}return m},vr=d,gr=function(){var e=Object(Dn.a)(Pn.a.mark((function e(t){var n,r,a,o,i,c,l,s,u,d;return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.ctx,r=t.cardIcon,a=t.star,o=t.onStarDraw,i=50,4,c=Math.min(13,a),l=["rank","negative-level"].includes(r),s=i*c+4*(c-1),u=c<=12?l?85.9125-i:728.775:l?(vr-s)/2-i:(vr-s)/2+s,d=-54,e.abrupt("return",Promise.all(Object(cn.a)(Array(c)).map(Object(Dn.a)(Pn.a.mark((function e(){var t;return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[u+(i+(d+=54))*(l?1:-1),145],e.next=4,Qn.apply(void 0,[n,"subfamily/subfamily-".concat(r,".png")].concat(t));case 4:return e.next=6,o(t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)}))))));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),jr=function(){var e=Object(Dn.a)(Pn.a.mark((function e(t){var n,r;return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.ctx,r=t.sticker,qn(n)){e.next=3;break}return e.abrupt("return");case 3:if("no-sticker"!==r){e.next=5;break}return e.abrupt("return",Promise.resolve());case 5:return e.abrupt("return",Qn(n,"sticker/sticker-".concat(r.toLowerCase(),".png"),739.1438,1110.938));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xr=function(){var e=Object(Dn.a)(Pn.a.mark((function e(t){var n,r,a,o,i,c,l,s,u;return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.ctx,r=t.type,a=t.isPendulum,o=t.isLink,i=t.isDuelTerminalCard,c=t.isSpeedCard,l=t.bordered,n){e.next=3;break}return e.abrupt("return");case 3:if(!i){e.next=7;break}return s=a?[250,1087,180,20]:o?[151,848,216,24]:[80,843,270,30],e.next=7,tr.apply(void 0,[n,"text/text-duel-terminal-".concat(r).concat(l?"-bordered":"",".png")].concat(s));case 7:if(!c){e.next=11;break}return u=a?[250,1090,176.4,18]:o?[151,855,215.6,22]:[80,850,245,25],e.next=11,tr.apply(void 0,[n,"text/text-speed-duel-".concat(r).concat(l?"-bordered":"",".png")].concat(u));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),yr=function(){var e=Object(Dn.a)(Pn.a.mark((function e(t,n){return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&Array.isArray(n)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Qn(t,"link/link-text.png",600,1080);case 4:t.textAlign="right",t.scale(1.2,1),t.font="bold 35.55px Yugioh Rush Duel Numbers V4",t.fillStyle="#000000",t.fillText("".concat(n.length),623.36,1105.01),t.setTransform(1,0,0,1,0,0),t.textAlign="left";case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Or=b,wr=p,kr=m,Fr=function(e){var t=e.ctx,n=e.artworkCanvas,r=e.backgroundCanvas,a=e.format,o=e.hasBackground,i=e.frame,c=e.bottomFrame,s=e.backgroundType,u=e.cardIcon,d=e.attribute,f=e.star,b=e.foil,p=e.pendulumSize,m=e.opacity,h=e.isLink,v=e.isSpeedSkill,g=e.isXyz,x=e.isPendulum,O=e.loopFinish,w=e.loopArtFinish,k=m.artBorder,F=m.nameBorder,C=m.body,S=m.name,T=m.pendulum,R=m.text,N=m.boundless,L=j(x,m),M=L.artX,I=L.artY,A=L.artFinishX,E=L.artFinishY,B=L.artWidth,W=C>0||k,P=860,D="normal"!==b,z=g||v?i:"normal",H=z,G=!N&&W,Y={calculateCardArtRedrawCoordination:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=null!==t&&void 0!==t?t:m,o=a.body,i=j(x,a,r),c=i.artX,l=i.artY,s=i.artWidth,u=e.width,d=e.height,f=s/u,b=o<100?(kr-c)/f:0,p=b*f,h=o<100?(Or-l)/f:0,v=h*f,g=o<100?d-wr/f:0,y=c+p,O=l+v,w=s-2*p,k=s/(u/d)*n-g*f;return{imageScaledRatio:f,sourceOffsetX:b,sourceOffsetY:h,destinationOffsetX:p,destinationOffsetY:v,offsetHeight:g,destinationX:y,destinationY:O,destinationWidth:w,destinationHeight:k}},drawFrame:function(){var e=Object(Dn.a)(Pn.a.mark((function e(){return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.globalAlpha=C/100,e.next=3,Qn(t,"frame/frame-".concat(i,".png"),0,0);case 3:return e.next=5,Qn(t,"frame-pendulum/frame-pendulum-".concat(c,".png"),0,0);case 5:t.globalAlpha=1;case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),drawCardArt:function(){if(n&&t){var e=n.width,r=n.height;r<=0||t.drawImage(n,0,0,e,r,M,I,B,B/(e/r))}},drawBackground:function(e){if(r&&t&&o){var n=r.width,a=r.height;if(!(a<=0))if("pendulum"!==e){var i=j(x,Object(l.a)(Object(l.a)({},m),{},{boundless:!0}),s),c=i.artX,u=i.artY,d=i.artWidth;t.drawImage(r,0,0,n,a,c,u,d,d/(n/a))}else{var f=Y.calculateCardArtRedrawCoordination(r);"full"===s?f=Y.calculateCardArtRedrawCoordination(r,Object(l.a)(Object(l.a)({},m),{},{body:0}),void 0,"full"):"fit"===s&&(f=Y.calculateCardArtRedrawCoordination(r,m,void 0,"fit"));var b=f,p=b.sourceOffsetX,h=b.sourceOffsetY,v=b.offsetHeight,g=b.destinationX,y=b.destinationY,O=b.destinationWidth,w=b.destinationHeight;t.drawImage(r,p,h,n-2*p,a-v,g,y,O,w)}}},drawAttribute:function(){var e=Object(Dn.a)(Pn.a.mark((function e(){return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qn(t,"attribute/attr-".concat(a,"-").concat(d.toLowerCase(),".png"),678,55);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),drawStar:function(){var e=Object(Dn.a)(Pn.a.mark((function e(){var n;return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="auto"===u?bt(i):u,e.next=3,gr({ctx:t,cardIcon:n,star:null!==f&&void 0!==f?f:0,onStarDraw:function(){var e=Object(Dn.a)(Pn.a.mark((function e(r){return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("st"!==n){e.next=4;break}e.t0=Promise.resolve(),e.next=7;break;case 4:return e.next=6,O(t,"star",function(){var e=Object(Dn.a)(Pn.a.mark((function e(n){return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qn.apply(void 0,[t,"finish/finish-".concat(n,"-star.png")].concat(Object(cn.a)(r))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:e.t0=e.sent;case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),drawPendulumScaleIcon:function(){var e=Object(Dn.a)(Pn.a.mark((function e(){return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qn(t,"frame-pendulum/pendulum-scale-".concat(p,".png"),0,750);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),drawLinkArrowMap:function(){var e=Object(Dn.a)(Pn.a.mark((function e(n){return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([1,2,3,4,6,7,8,9].map(function(){var e=Object(Dn.a)(Pn.a.mark((function e(r){var a,o,i,c,l,s,u,d,f;return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=(a=me[r-1]).left,i=a.top,c=a.height,l=a.width,s=n.includes("".concat(r)),u="link/link-inactive-".concat(r),d="link/link-active-".concat(r),f=[o,i,l,c],e.next=7,tr.apply(void 0,[t,"".concat(u,"-base").concat(N?"-full":"",".png")].concat(f));case 7:return e.next=9,tr.apply(void 0,[t,"".concat(u,"-core.png")].concat(f));case 9:if(!s){e.next=15;break}return e.next=12,tr.apply(void 0,[t,"".concat(d,"-base.png")].concat(f));case 12:return e.abrupt("return",tr.apply(void 0,[t,"".concat(d,"-core.png")].concat(f)));case 15:return e.abrupt("return");case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),drawNameBackground:function(){var e=Object(Dn.a)(Pn.a.mark((function e(){return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.globalAlpha=S/100,e.next=3,Qn(t,"background/background-name-".concat(i,".png"),0,0);case 3:t.globalAlpha=1;case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),drawEffectBackground:function(){var e=Object(Dn.a)(Pn.a.mark((function e(){var n,r=arguments;return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>0&&void 0!==r[0]&&r[0],t.globalAlpha=R/100,e.next=4,Qn(t,"background/background-text-".concat(c,".png"),54,884);case 4:if(!n){e.next=8;break}return t.globalAlpha=T/100,e.next=8,Qn(t,"background/background-pendulum-".concat(c,".png"),55,738);case 8:t.globalAlpha=1;case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),drawFrameBorder:function(){var e=Object(Dn.a)(Pn.a.mark((function e(){return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qn(t,"frame/frame-border-".concat(z,".png"),0,0));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),drawNameBorder:function(){var e=Object(Dn.a)(Pn.a.mark((function e(){return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",F?Qn(t,"frame/name-border-".concat(H,".png"),0,0):Promise.resolve());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),drawArtBorder:function(){var e=Object(Dn.a)(Pn.a.mark((function e(){var n;return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!W){e.next=5;break}return n="",n=g||v?"frame/art-border-".concat(i,".png"):h||["zarc","hamon","uria","raviel"].includes(i)?"frame/art-border-special.png":"frame/art-border.png",e.next=5,Qn(t,n,60,170);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),drawPendulumBorder:function(){var e=Object(Dn.a)(Pn.a.mark((function e(n,r){return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qn(t,"frame-pendulum/border-pendulum-".concat(p)+"-".concat(r)+(n?"":"-artless")+".png",30,185);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),drawEffectBorder:function(){var e=Object(Dn.a)(Pn.a.mark((function e(){return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(D||"speed-skill"!==c){e.next=5;break}return e.next=3,Qn(t,"frame/effect-border-speed-skill.png",35,P);case 3:e.next=7;break;case 5:return e.next=7,Qn(t,"frame/effect-border.png",35,P);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),drawCardBorder:function(){var e=Object(Dn.a)(Pn.a.mark((function e(){return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qn(t,"frame/card-border".concat(D?"-".concat(b):"",".png"),0,0);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),drawArtBorderFoil:function(){var e=Object(Dn.a)(Pn.a.mark((function e(){return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!W){e.next=3;break}return e.next=3,Qn(t,"frame/art-border-".concat(b,".png"),60,170);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),drawEffectBorderFoil:function(){var e=Object(Dn.a)(Pn.a.mark((function e(){return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qn(t,"frame/effect-border-".concat(b,".png"),35,P);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),drawLinkMapFoil:function(){var e=Object(Dn.a)(Pn.a.mark((function e(){var n,r=arguments;return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>0&&void 0!==r[0]?r[0]:W,e.next=3,Qn(t,"link/link-overlay-arrow-".concat(b).concat(n?"":"-artless",".png"),0,175);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),drawNameFinish:function(){var e=Object(Dn.a)(Pn.a.mark((function e(){return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!W&&!F){e.next=3;break}return e.next=3,O(t,"name",function(){var e=Object(Dn.a)(Pn.a.mark((function e(n){return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qn(t,"finish/finish-".concat(n,"-name.png"),0,0));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),drawAttributeFinish:function(){var e=Object(Dn.a)(Pn.a.mark((function e(){return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d===y){e.next=3;break}return e.next=3,O(t,"attribute",function(){var e=Object(Dn.a)(Pn.a.mark((function e(n){return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qn(t,"finish/finish-".concat(n,"-attribute.png"),678,55));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),drawArtFinish:function(){var e=Object(Dn.a)(Pn.a.mark((function e(){return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!G){e.next=3;break}return e.next=3,w(t,"art",function(){var e=Object(Dn.a)(Pn.a.mark((function e(n){return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qn(t,"finish/art-finish-".concat(n).concat(x?"-pendulum-".concat(p):"",".png"),A,E);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),drawArtOverlayFinish:function(){var e=Object(Dn.a)(Pn.a.mark((function e(){return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(t,"art-overlay",function(){var e=Object(Dn.a)(Pn.a.mark((function e(n){return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qn(t,"finish/finish"+"-".concat(n)+"-".concat(G?"art":"unart")+"-overlay"+(x?"-pendulum-".concat(p):"")+".png",A,E));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),drawArtBorderFinish:function(){var e=Object(Dn.a)(Pn.a.mark((function e(){return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!W){e.next=3;break}return e.next=3,O(t,"art-border",function(){var e=Object(Dn.a)(Pn.a.mark((function e(n){return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qn(t,"finish/finish-".concat(n,"-art-border.png"),0,0));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),drawPendulumArtBorderFinish:function(){var e=Object(Dn.a)(Pn.a.mark((function e(){return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!W){e.next=3;break}return e.next=3,O(t,"art-border-pendulum",(function(e){return Qn(t,"finish/finish-".concat(e,"-art-border-pendulum-").concat(p,".png"),0,0)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),drawBorderPendulumFinish:function(){var e=Object(Dn.a)(Pn.a.mark((function e(){return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(t,"border-pendulum",function(){var e=Object(Dn.a)(Pn.a.mark((function e(n){return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qn(t,"finish/finish-".concat(n,"-border-pendulum-").concat(p,".png"),0,0));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),drawFrameFinish:function(){var e=Object(Dn.a)(Pn.a.mark((function e(){return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(t,"frame",function(){var e=Object(Dn.a)(Pn.a.mark((function e(n){return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qn(t,"finish/finish-".concat(n,"-frame").concat(x?"-pendulum-".concat(p):"",".png"),0,0));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),drawFrameBackgroundFinish:function(){var e=Object(Dn.a)(Pn.a.mark((function e(){return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(t,"frame-background",function(){var e=Object(Dn.a)(Pn.a.mark((function e(n){return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qn(t,"finish/finish-".concat(n,"-frame-background").concat(x?"-pendulum-".concat(p):"",".png"),0,0));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),drawOverlayFinish:function(){var e=Object(Dn.a)(Pn.a.mark((function e(){return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(t,"overlay",function(){var e=Object(Dn.a)(Pn.a.mark((function e(n){return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qn(t,"finish/finish-".concat(n,"-overlay.png"),0,0));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),drawCardBorderFinish:function(){var e=Object(Dn.a)(Pn.a.mark((function e(){return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(t,"card-border",function(){var e=Object(Dn.a)(Pn.a.mark((function e(n){return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qn(t,"finish/finish-".concat(n,"-card-border.png"),0,0));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()};return Y},Cr=function(e,t,n,r,a,o,i,c){var l=t%360,s="".concat(Math.floor(l/90)),u=l%90,d=i+c,f=r+a/2,b=o+(c-i)/2,p=a,m=d;"1"!==s&&"3"!==s||(p=d,m=a);var h=Math.sqrt(Math.pow(p,2)/4+Math.pow(m,2)/4);if(h>0){var v=90-(180*Math.asin(p/2/h)/Math.PI-u),g=Math.sin(v/180*Math.PI)*h,j=Math.sin(u/180*Math.PI)*g,x=Math.cos(u/180*Math.PI)*g,y=j,O=x;"1"===s&&(y=x,O=-j),"2"===s&&(y=-j,O=-x),"3"===s&&(y=-x,O=j);var w=f+y,k=b-O,F=f-y,C=b+O,S=e.createLinearGradient(w,k,F,C);return n.forEach((function(e){var t=e.color,n=e.offset;return S.addColorStop(parseFloat(n),t)})),S}},Sr=function(){var e=Object(Dn.a)(Pn.a.mark((function e(t,n,r,a,o,i,c){var s,u,d,f,b,p,m,h,v,g,j,x,y,O,w,k,F,C,S,R,N,L,M,I,A,E,B,W,P,D,H,G,Y,X,V,U,K,J,q,$,_,Z,Q,ee,te,ne,ae,oe,ie;return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=c.isSpeedSkill,u=c.format,d=c.cloneNode,f=c.frame,b=c.furiganaHelper,p=null===d||void 0===d?void 0:d.getContext("2d"),!(t&&p&&n)){e.next=58;break}if(g=Object(l.a)(Object(l.a)({},{font:"Default",fillStyle:"#000000",headTextFillStyle:"#000000",shadowColor:"#000000",shadowOffsetY:0,shadowOffsetX:0,shadowBlur:0,hasShadow:!1,lineColor:"#000000",lineWidth:0,lineOffsetY:0,lineOffsetX:0,hasOutline:!1,gradientAngle:0,gradientColor:"0.000|#eef10b,0.5|#d78025,1.000|#7e20cf",hasGradient:!1,preset:"commonB",pattern:"none"}),i),j=g.font,x=g.fillStyle,y=g.headTextFillStyle,O=g.shadowBlur,w=g.hasShadow,k=g.shadowColor,F=g.shadowOffsetX,C=g.shadowOffsetY,S=g.hasOutline,R=g.lineColor,N=g.lineWidth,L=g.lineOffsetX,M=g.lineOffsetY,I=g.hasGradient,A=g.gradientAngle,E=g.gradientColor,B=g.pattern,W=null!==(m=T[null!==B&&void 0!==B?B:""])&&void 0!==m?m:{},P=W.patternImage,D=W.blendMode,H=S,t.textAlign="left",w&&(t.shadowColor=k,t.shadowOffsetY=C,t.shadowOffsetX=F,t.shadowBlur=O),S&&(t.lineWidth=N,t.strokeStyle=R),G=Object(l.a)(Object(l.a)({},(null!==(h=re[j])&&void 0!==h?h:re.Default).fontData),{},{headTextFillStyle:y}),Y=jt({defaultFamily:G.font,defaultSize:G.fontList[0].fontSize,defaultWeight:G.weight}),X={fontLevel:0,fontData:G,currentFont:Y},V=br(n,u,{multiline:!1,furiganaHelper:b,dictionaryType:"rubyFormName"}),U="ocg"===u?[V]:V.split(new RegExp("([^".concat(Le,"])"),"g")),K=jt({defaultFamily:G.font,defaultSize:G.fontList[0].fontSize,defaultWeight:G.weight}),J=K.getFont(),q=K.setSize((function(e){return e*G.symbolFontRatio})).setStyle("small-caps").setFamily(G.symbolFont).getFont(),$=0,_=0,U.forEach((function(e,n){t.font=n%2===0?J:q;var r=t.measureText(e.replaceAll(Se,""));$=Math.max($,r.actualBoundingBoxAscent),_=Math.max(_,r.actualBoundingBoxDescent)}),0),t.font=J,Z=0,Q=gt((function(e){var n=ur({ctx:t,median:e,paragraphList:[V],format:u,textData:X,width:o}),r=n.currentLineCount,a=n.currentLineList;return!(r>1)&&(Z=a[0].actualLineWidth,!0)})),ee=Q/1e3,te=1,t.scale(ee,te),ne=null!==(v=G.fontList[0].offsetY)&&void 0!==v?v:z,ae=ar(V),oe=Z>0&&I?Cr(t,A,yt(E),r,Z,a,$,_):void 0,t.fillStyle=null!==oe&&void 0!==oe?oe:x,fr({ctx:t,tokenList:ae,xRatio:ee,yRatio:te,trueEdge:r,trueBaseline:a,textData:X,format:u,textDrawer:function(e){var t=e.ctx,n=e.letter,r=e.scaledEdge,a=e.scaledBaseline;t.fillText(n,r,a-(s?ne:0))}}),!P||!d){e.next=45;break}return t.setTransform(1,0,0,1,0,0),e.next=35,Qn(p,"frame/frame-".concat(f,".png"),0,0);case 35:return e.next=37,Qn(p,"background/background-name-".concat(f,".png"),0,0);case 37:return p.globalCompositeOperation=D,e.next=40,tr(p,"finish-name/".concat(P,".png"),r,a-$,o,$+_);case 40:t.globalCompositeOperation="source-in",t.drawImage(d,0,0),t.scale(ee,te),t.globalCompositeOperation="source-over",fr({ctx:t,tokenList:ae,xRatio:ee,yRatio:te,trueEdge:r,trueBaseline:a,textData:X,format:u,textDrawer:function(){}});case 45:H&&(t.globalCompositeOperation="destination-over",fr({ctx:t,tokenList:ae,xRatio:ee,yRatio:te,trueEdge:r,trueBaseline:a,textData:X,format:u,textDrawer:function(e){var t=e.ctx,n=e.letter,r=e.scaledEdge,a=e.scaledBaseline;t.lineJoin="round",t.strokeText(n,r+L,a+M-(s?ne:0))}})),t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),ie={font:"Default",fillStyle:"#000000",headTextFillStyle:"#000000",shadowColor:"#000000",shadowOffsetY:0,shadowOffsetX:0,shadowBlur:0,hasShadow:!1,lineColor:"#000000",lineWidth:0,lineOffsetY:0,lineOffsetX:0,hasOutline:!1,gradientAngle:0,gradientColor:"0.000|#eef10b,0.5|#d78025,1.000|#7e20cf",hasGradient:!1,preset:"commonB",pattern:"none"},t.fillStyle=ie.fillStyle,t.shadowColor=ie.shadowColor,t.shadowOffsetY=ie.shadowOffsetY,t.shadowOffsetX=ie.shadowOffsetX,t.shadowBlur=ie.shadowBlur,t.lineWidth=ie.lineWidth,t.strokeStyle=ie.lineColor,t.lineJoin="miter",t.globalCompositeOperation="source-over";case 58:case"end":return e.stop()}}),e)})));return function(t,n,r,a,o,i,c){return e.apply(this,arguments)}}(),Tr={small:0,medium:1,large:2},Rr=function(e){var t,n,r=e.ctx,a=e.value,o=e.format,i=e.metricMethod,c=e.size,s=e.furiganaHelper,u=null!==(t=null===(n=M[o])||void 0===n?void 0:n[c])&&void 0!==t?t:M.tcg.medium,d=u.edgeAlignment,f=void 0===d?"left":d,b=u.trueEdge,p=u.trueBaseline,m=u.trueWidth,h={tcg:oe,ocg:ie}[o];i&&(h.metricMethod=i);var v=h.font,g=Tr[c],j=h.fontList[g],x=jt({defaultFamily:v,defaultSize:"".concat(j.fontSize,"px")}),y={fontLevel:g,fontData:h,currentFont:x},O=0;r.font=x.getFont(),r.textAlign="left";var w=br(a,o,{multiline:!1,furiganaHelper:s}),k=gt((function(e){var t=ur({ctx:r,median:e,paragraphList:[w],format:o,textData:y,width:m}),n=t.currentLineCount,a=t.currentLineList;return!(n>1)&&(O=a[0].actualLineWidth,!0)}))/1e3;r.scale(k,1);var F=fr({ctx:r,tokenList:ar(w),xRatio:k,yRatio:1,trueEdge:"left"===f?b:b-O*k,trueBaseline:p,textData:y,format:o,textDrawer:function(e){var t=e.ctx,n=e.letter,r=e.scaledEdge,a=e.scaledBaseline;t.fillText(n,r,a)}});return r.setTransform(1,0,0,1,0,0),Object(l.a)(Object(l.a)({},F),{},{xRatio:k})},Nr=function(){var e=Object(Dn.a)(Pn.a.mark((function e(t){var n,r,a,o,i,c,l,s,u,d,f,b,p,m,h,v,g,j,x,y;return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.ctx,r=t.typeAbility,a=t.subFamily,o=t.format,i=t.frame,c=t.size,l=t.isMonster,s=t.furiganaHelper,qn(n)){e.next=3;break}return e.abrupt("return");case 3:if(u=r.length>0,f=r+((d=a!==w&&"large"===c)?"\u29be":""),b=u?"tcg"===o?"large"===c?"[\u200a\u200a".concat(f,"\u200a\u200a]"):"[".concat(f,"]"):"\u3010".concat(f,"\u3011"):"",u){e.next=9;break}return e.abrupt("return");case 9:if(n.fillStyle=pt(i)&&!dt({frame:i})&&"large"===c?"#ffffff":"#000000",p=Rr({ctx:n,format:o,size:c,value:b,metricMethod:l?void 0:"compact",furiganaHelper:s}),m=p.iconPositionList,h=p.xRatio,v="ocg"===o?-4:0,g="ocg"===o?-3:0,!d){e.next=19;break}return j=m[0],x=j.edge,y=j.baseline,e.next=17,tr(n,"subfamily/subfamily-".concat(a.toLowerCase(),".png"),(function(e){return x+.175*e.naturalWidth*h+g}),(function(e){return y-.8*e.naturalWidth+v}),(function(e){return e.naturalWidth}),(function(e){return e.naturalWidth}));case 17:e.next=19;break;case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Lr=function(e,t,n,r){if(e&&t){e.font="".concat(60.5,"px MatrixBoldSmallCaps"),e.textAlign="left";var a="".concat(t).split(""),o=0;a.forEach((function(t){o+=e.measureText(t).width*("1"===t?.65:1)}));var i=n-o/2;a.forEach((function(t){e.fillText(t,"1"===t?i-3:i,r+60.5),i+=e.measureText(t).width*("1"===t?.65:1)}))}},Mr=function(e,t,n,r){if(e){e.fillStyle="#000",e.scale(1,.98),e.font="bold 35.73px Matrix-Bold";var a=Kn(e,t,.075,n,r/.98);e.setTransform(1,0,0,1,0,0),e.scale(1,1.01),e.font="bold 34.74px Matrix-Bold",Kn(e,"/",.15,a+5,r/1.01),e.setTransform(1,0,0,1,0,0)}},Ir=function(e,t,n,r){if(e&&null!=t){var a=73.97;if("\u221e"===t)e.textAlign="right",e.font="bold 37px matrix",e.fillText(t,n+a,r);else if("?"===t)e.textAlign="right",e.font="bold 34px matrix",e.fillText(t,n+a,r);else{e.textAlign="left";var o="".concat(t).split("?"),i=o.reduce((function(t,n,r){e.font="37px MatrixBoldSmallCaps";var a=t+e.measureText(n).width;return r<o.length-1&&(e.font="37px matrix",a+=e.measureText("?").width),a}),0);if(i>0){var c=Math.min(a/i,1);e.scale(c,1),o.reduce((function(t,n,a,i){var l=i[i.length-1-a],s=t;return e.font="37px MatrixBoldSmallCaps",s-=e.measureText(l).width*c,e.fillText(l,s/c,r),a<o.length-1&&(e.font="bold 37px matrix",s-=e.measureText("?").width*c,e.fillText("?",s/c,r)),s}),n+a),e.scale(1/c,1)}}}},Ar=f,Er=d,Br=function(e,t,n){var r=Bn().card,o=t.drawCanvasRef,i=t.artworkCanvasRef,c=t.backgroundCanvasRef,s=t.frameCanvasRef,u=t.creatorCanvasRef,b=t.effectCanvasRef,p=t.nameCanvasRef,m=t.passwordCanvasRef,x=t.pendulumEffectCanvasRef,O=t.pendulumScaleCanvasRef,w=t.setIdCanvasRef,k=t.statCanvasRef,F=t.stickerCanvasRef,C=t.cardIconCanvasRef,S=t.typeCanvasRef,T=t.finishCanvasRef,R=t.lightboxCanvasRef,N=r.format,M=r.hasBackground,A=r.backgroundType,E=r.frame,B=r.foil,W=r.finish,H=r.artFinish,G=r.opacity,Y=r.name,X=r.nameStyle,V=r.nameStyleType,U=r.effect,K=r.effectStyle,J=r.typeAbility,q=r.isPendulum,$=r.pendulumFrame,_=r.pendulumEffect,Z=r.pendulumScaleBlue,Q=r.pendulumScaleRed,ee=r.atk,ne=r.def,re=r.linkMap,oe=r.attribute,ie=r.cardIcon,ce=r.subFamily,le=r.star,se=r.setId,ue=r.password,de=r.creator,fe=r.sticker,be=r.isFirstEdition,pe=r.isDuelTerminalCard,me=r.isSpeedCard,he=r.furiganaHelper,ve="auto"===$?q?"spell":E:$,ge=null===K||void 0===K?void 0:K.condenseTolerant,je=function(e){return"normal"===e.frame&&ft(e)}(r),xe=st(r),ye=ut(r),Oe=ft(r),we=dt(r),ke=G.body,Fe=void 0===ke?100:ke,Ce=G.boundless,Se=!!(Fe<50||Ce),Te=["xyz","dark-synchro","speed-skill","hamon","uria","raviel"].includes(ve),Re=ce.toUpperCase(),Ne=J.map((function(e){return e.trim()})).join("ocg"===N?"\uff0f":"/"),Le="auto"!==$||q?!!(ee||ne||ye&&re.length):Oe,Me="auto"===ie?Oe||we:"st"!==ie||ye,Ie=n.isInitializing,Ae=n.imageChangeCount,Ee=n.pendulumSize,Be=void 0===Ee?"medium":Ee,We=e&&!1===Ie,Pe=Object(a.useMemo)((function(){return $n(W,P)}),[W]),De=Object(a.useMemo)((function(){return $n([H],D)}),[H]),ze=Object(a.useRef)({frame:{name:"frame",order:1,rerun:0,instructor:function(){return Promise.resolve()}},attribute:{name:"attribute",order:2,rerun:0,instructor:function(){return Promise.resolve()}},sticker:{name:"sticker",order:3,rerun:0,instructor:function(){return Promise.resolve()}},name:{name:"name",order:4,rerun:0,instructor:function(){return Promise.resolve()}},typeAbility:{name:"typeAbility",order:5,rerun:0,instructor:function(){return Promise.resolve()}},overlay:{name:"overlay",order:6,rerun:0,instructor:function(){return Promise.resolve()}}});Object(a.useEffect)((function(){var e;if(We){var t=null===(e=s.current)||void 0===e?void 0:e.getContext("2d"),n=i.current,r=c.current;ze.current.frame.rerun+=1,ze.current.frame.instructor=Object(Dn.a)(Pn.a.mark((function e(){var a,o,i,c,s,u,d,f,b,p,m,j,x,y,O,w,k,F,C,S,T,R,L,I,W,P,D,z,H,Y,X,V,U,K,J,$,_,Z,Q,ee,te,ne,ae,ce,se,ue,de,fe,be,he,ge,je,Oe,ke;return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(qn(t)){e.next=2;break}return e.abrupt("return");case 2:return a=Object(l.a)(Object(l.a)({},v()),G),o=a.artBorder,i=a.body,c=a.boundless,s=a.baseFill,d=i>0||o,(u=function(e,n,r,a){t.fillStyle=M?s:h,t.fillRect(e,n,r,a)})(0,0,Er,Ar),f=Fr({ctx:t,artworkCanvas:n,backgroundCanvas:r,format:N,frame:E,bottomFrame:ve,hasBackground:M,backgroundType:A,attribute:oe,cardIcon:ie,star:le,foil:B,pendulumSize:Be,opacity:a,isLink:ye,isSpeedSkill:we,isXyz:xe,isPendulum:q,loopFinish:Pe,loopArtFinish:De}),b=f.drawFrame,p=f.drawCardArt,m=f.drawBackground,j=f.drawPendulumScaleIcon,x=f.drawLinkArrowMap,y=f.drawStar,O=f.drawAttribute,w=f.drawNameBackground,k=f.drawEffectBackground,F=f.drawFrameBorder,C=f.drawNameBorder,S=f.drawArtBorder,T=f.drawPendulumBorder,R=f.drawBorderPendulumFinish,L=f.drawEffectBorder,I=f.drawCardBorder,W=f.drawAttributeFinish,P=f.drawArtBorderFoil,D=f.drawEffectBorderFoil,z=f.drawLinkMapFoil,H=f.drawNameFinish,Y=f.drawArtFinish,X=f.drawArtOverlayFinish,V=f.drawArtBorderFinish,U=f.drawPendulumArtBorderFinish,K=f.drawFrameFinish,J=f.drawFrameBackgroundFinish,$=f.drawOverlayFinish,_=f.drawCardBorderFinish,Z=f.calculateCardArtRedrawCoordination,r&&t&&m(),n&&t&&!c&&p(),e.next=12,b();case 12:return e.next=14,I();case 14:return e.next=16,_();case 16:if(q){e.next=32;break}if(c){e.next=26;break}return e.next=20,w();case 20:return e.next=22,k();case 22:return e.next=24,L();case 24:return e.next=26,D();case 26:return e.next=28,S();case 28:return e.next=30,P();case 30:return e.next=32,V();case 32:if(!q||ye||c){e.next=38;break}return n&&t&&n.height>0&&(Q=n.width,ee=n.height,te=Z(n),ne=te.sourceOffsetX,ae=te.sourceOffsetY,ce=te.offsetHeight,se=te.destinationX,ue=te.destinationY,de=te.destinationWidth,fe=te.destinationHeight,u(se,ue,de,fe),m("pendulum"),t.drawImage(n,ne,ae,Q-2*ne,ee-ce,se,ue,de,fe)),e.next=36,w();case 36:return e.next=38,k(!0);case 38:return e.next=40,Y();case 40:return e.next=42,X();case 42:if(!q||ye||c){e.next=54;break}return e.next=45,j();case 45:return e.next=47,T(d,"normal");case 47:return e.next=49,T(d,B);case 49:return e.next=51,U();case 51:if(!d){e.next=54;break}return e.next=54,R();case 54:if(c){e.next=59;break}return e.next=57,K();case 57:return e.next=59,H();case 59:if(!d){e.next=62;break}return e.next=62,J();case 62:if(!c){e.next=108;break}if(!ye){e.next=68;break}return e.next=66,V();case 66:e.next=78;break;case 68:if(!q){e.next=78;break}if(be=g.fullCard.ratio/g.extendedPendulum.ratio,n&&t&&n.height>0&&(he=Z(n,Object(l.a)(Object(l.a)(Object(l.a)({},v()),G),{},{body:100,boundless:!1}),be),ge=he.destinationX,je=he.destinationY,Oe=he.destinationWidth,ke=he.destinationHeight,u(ge,je,Oe,ke),m("pendulum")),!d){e.next=76;break}return e.next=74,T(d,"normal");case 74:return e.next=76,T(d,B);case 76:return e.next=78,U();case 78:return e.next=80,w();case 80:return e.next=82,H();case 82:return e.next=84,C();case 84:return n&&t&&p(),e.next=87,X();case 87:if(!q||ye){e.next=100;break}return e.next=90,k(!0);case 90:return e.next=92,j();case 92:return e.next=94,T(!1,"normal");case 94:return e.next=96,T(!1,B);case 96:return e.next=98,R();case 98:e.next=106;break;case 100:return e.next=102,k();case 102:return e.next=104,L();case 104:return e.next=106,D();case 106:return e.next=108,K();case 108:if(!Le){e.next=111;break}return e.next=111,Qn(t,"frame/frame-stat-border.png",0,1070);case 111:if(q||!ye){e.next=118;break}return e.next=114,x(re);case 114:return e.next=116,z(!1);case 116:return e.next=118,yr(t,re);case 118:return e.next=120,O();case 120:return e.next=122,W();case 122:if(ye){e.next=125;break}return e.next=125,y();case 125:if(c){e.next=128;break}return e.next=128,C();case 128:return e.next=130,F();case 130:return e.next=132,xr({ctx:t,type:Te&&!q?"white":"black",bordered:(i<50||c)&&!q,isDuelTerminalCard:pe,isSpeedCard:me,isLink:ye,isPendulum:q});case 132:return e.next=134,$();case 134:case"end":return e.stop()}}),e)})))}}),[We,i,c,s,E,N,M,A,oe,ve,B,le,ie,pe,ye,q,me,we,xe,Te,re,De,Pe,G,Be,Le,Ae]),Object(a.useEffect)((function(){var e;if(We){var t=null===(e=O.current)||void 0===e?void 0:e.getContext("2d");qn(t)&&q&&(Lr(t,null!==Z&&void 0!==Z?Z:0,84.4,790),Lr(t,null!==Q&&void 0!==Q?Q:0,728,790))}}),[We,q,Z,Q,O]),Object(a.useEffect)((function(){We&&(ze.current.name.rerun+=1,ze.current.name.instructor=Object(Dn.a)(Pn.a.mark((function e(){var t,n,r,a;return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null===(t=p.current)||void 0===t?void 0:t.getContext("2d"),a=null===(n=p.current)||void 0===n?void 0:n.cloneNode(),qn(r)&&a){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,Sr(r,Y,"tcg"===N?60:68,115.5375,oe===y?"tcg"===N?688:674:"tcg"===N?608:598,mt({format:N,frame:E,nameStyle:X,nameStyleType:V,foil:B}),{isSpeedSkill:we,format:N,cloneNode:a,frame:E,furiganaHelper:he});case 6:case"end":return e.stop()}}),e)}))))}),[We,oe,B,N,E,he,we,Y,p,X,V]),Object(a.useEffect)((function(){var e;if(We){var t=null===(e=k.current)||void 0===e?void 0:e.getContext("2d");qn(t)&&Le&&(Mr(t,"ATK",432.1,1106.494),Ir(t,ee,508.824,1106.494),ye||(Mr(t,"DEF",600.85,1106.494),Ir(t,ne,673.865,1106.494)))}}),[We,ee,ne,ye,Oe,k,Le]),Object(a.useEffect)((function(){var e;if(We){var t=null===(e=w.current)||void 0===e?void 0:e.getContext("2d");qn(t)&&function(e,t,n){if(e){var r=n.isPendulum,a=n.isLink,o=n.withShadow,i=n.format,c=n.lightFooter,l=.175,s=0,u=0;e.fillStyle=c&&!r?"#ffffff":"#000000",e.shadowColor=o?c?"#000000":"#ffffff":"#000000",e.shadowOffsetY=0,e.shadowOffsetX=0,e.shadowBlur=o&&!r?3:0,e.font="".concat(o?"bold":""," 22px stone-serif-regular"),"ocg"===i&&(l=.145,s=-1,u=-3),r?Kn(e,t,l,66.65+u,1105.01+s):a?Jn(e,t,l,666.56+u,872.94+s):Jn(e,t,l,728.78+u,871.5+s)}}(t,se,{isLink:ye,isPendulum:q,withShadow:Se&&!q,format:N,lightFooter:Te})}}),[We,N,ye,q,Te,w,se,we,ve,Se]),Object(a.useEffect)((function(){var e;if(We){var t=null===(e=m.current)||void 0===e?void 0:e.getContext("2d");if(qn(t)){var n=function(e){var t=e.ctx,n=e.password,r=e.withShadow,a=e.lightFooter;return t?(t.fillStyle=a?"#ffffff":"#000000",t.font="".concat(r?"bold":""," 22.219px stone-serif-regular"),t.shadowColor=r?a?"#000000":"#ffffff":"#000000",t.shadowOffsetY=0,t.shadowOffsetX=0,t.shadowBlur=r?3:0,Kn(t,n,.1,37.031,1150.931)):0}({ctx:t,password:ue,lightFooter:Te,withShadow:"zarc"===ve||Se});be&&!pe&&(t.fillStyle=Te?"#ffffff":"#000000",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:99,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{stroke:!1};if(e){var a=(null!==r&&void 0!==r?r:{}).stroke,o=void 0!==a&&a;e.font="bold 23.7px palatino-linotype-bold";var i=t;e.fillText("1",i,1150.93+n),o&&e.strokeText("1",i,1150.93),i+=e.measureText("1").width-2,e.font="bold 17.78px palatino-linotype-bold",e.fillText("st",i,1143.53+n),o&&e.strokeText("st",i,1143.53),i+=e.measureText("st").width,e.font="bold 22.22px palatino-linotype-bold",e.fillText(" Edition",i,1150.93+n),o&&e.strokeText(" Edition",i,1150.93)}}(t,Math.max(n+14.813,142.2)-("ocg"===N?10:0),we?-2:0))}}}),[We,pe,be,ue,m,Te,N,Se,we,ve]),Object(a.useEffect)((function(){var e;We&&function(e){var t,n,r=e.ctx,a=e.value,o=e.format,i=e.alignment,c=e.baselineOffset,l=void 0===c?0:c,s=e.lightFooter,u=e.hasShadow;if(qn(r)){r.fillStyle=s?"#ffffff":"#000000",r.shadowColor=u?s?"#000000":"#ffffff":"#000000",r.shadowOffsetY=0,r.shadowOffsetX=0,r.shadowBlur=u?3:0;for(var d=null!==(t=I[o])&&void 0!==t?t:I.tcg,f=d.trueEdge,b=d.trueBaseline,p=d.trueWidth,m=ae[o],h=m.font,v=br(a,o,{multiline:!1,furiganaHelper:!1}),g={fontLevel:0,fontData:m,currentFont:jt()},j=0,x=1e3,y=m.fontList[0],O=function(e){y=m.fontList[e];var t=jt({defaultFamily:h,defaultSize:"".concat(y.fontSize,"px"),defaultWeight:"ocg"===o||u?"bold":""}),n={fontLevel:e,fontData:m,currentFont:t},a=0;if(r.font=t.getFont(),r.textAlign="left",x=gt((function(e){var t=ur({ctx:r,median:e,paragraphList:[v],format:o,textData:n,width:p}),i=t.currentLineCount,c=t.currentLineList;return!(i>1)&&(a=c[0].actualLineWidth,!0)})),j=a,g=n,x>=1e3)return"break"},w=0;w<m.fontList.length&&"break"!==O(w);w++);var k=x/1e3;r.scale(k,1);var F=fr({ctx:r,tokenList:ar(v),xRatio:k,yRatio:1,trueEdge:"left"===i?f:f-j*k,trueBaseline:b+(null!==(n=y.offsetY)&&void 0!==n?n:z)+l,textData:g,format:o,textDrawer:function(e){var t=e.ctx,n=e.letter,r=e.scaledEdge,a=e.scaledBaseline;t.fillText(n,r,a)}});r.setTransform(1,0,0,1,0,0)}}({ctx:null===(e=u.current)||void 0===e?void 0:e.getContext("2d"),format:N,value:de,alignment:"right",baselineOffset:we?-2:0,hasShadow:Se,lightFooter:Te})}),[We,q,Te,de,u,N,Se,we]),Object(a.useEffect)((function(){We&&(ze.current.sticker.rerun+=1,ze.current.sticker.instructor=Object(Dn.a)(Pn.a.mark((function e(){var t;return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jr({ctx:null===(t=F.current)||void 0===t?void 0:t.getContext("2d"),sticker:fe});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))))}),[We,fe,F]),Object(a.useEffect)((function(){var e,t;if(We){var n=null===(e=b.current)||void 0===e?void 0:e.getContext("2d"),r=null===(t=S.current)||void 0===t?void 0:t.getContext("2d");ze.current.typeAbility.rerun+=1,ze.current.typeAbility.instructor=Object(Dn.a)(Pn.a.mark((function e(){var t;return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(qn(n)&&qn(r)){e.next=2;break}return e.abrupt("return");case 2:return t=hr(Object(l.a)({ctx:n,content:U,isNormal:je,condenseTolerant:ge,format:N,furiganaHelper:he},pr({format:N,statInEffect:Le,typeInEffect:Me,isNormal:je}))),e.next=5,Nr({ctx:r,format:N,frame:E,furiganaHelper:he,isMonster:Oe,size:Me?0===t?"medium":"small":"large",subFamily:Re,typeAbility:Ne});case 5:case"end":return e.stop()}}),e)})))}}),[We,Me,Le,ge,U,b,N,E,he,Oe,je,Re,Ne,S]),Object(a.useEffect)((function(){var e;if(We){var t=null===(e=x.current)||void 0===e?void 0:e.getContext("2d");qn(t)&&q&&hr({ctx:t,content:_,isNormal:!1,fontData:te[N],sizeList:L,condenseTolerant:ge,format:N,furiganaHelper:he})}}),[We,ge,N,q,x,_,he]),Object(a.useEffect)((function(){var e;if(We){var t=null===(e=T.current)||void 0===e?void 0:e.getContext("2d");ze.current.overlay.rerun+=1,ze.current.overlay.instructor=Object(Dn.a)(Pn.a.mark((function e(){return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(qn(t)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Pe(t,"total-overlay",(function(e){return Qn(t,"finish/finish-".concat(e,"-total-overlay.png"),0,0)}));case 4:case"end":return e.stop()}}),e)})))}}),[We,T,Pe,Y]);var He=Object(a.useRef)({}),Ge=Object(a.useCallback)(function(){var e=Object(Dn.a)(Pn.a.mark((function e(t){var n,r,a,c,l,h,v,g,y,N,L,M,I,A,E;return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.isPendulum,r=void 0!==n&&n,a=t.opacity,c=o.current,l=null===c||void 0===c?void 0:c.getContext("2d"),h=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new Promise((function(r){setTimeout((function(){if(e.current&&t)try{e.current.toBlob((function(e){if(e){var n=URL.createObjectURL(e);if(n){var a=new Image;a.src=n,a.onload=function(){t.drawImage(a,0,0),URL.revokeObjectURL(n),r(!0)},a.onerror=function(){URL.revokeObjectURL(n),r(!1)}}else r(!0)}r(!1)}))}catch(n){console.error(n),r(!1)}else r(!1)}),25*n)}))},!c||!l){e.next=37;break}return l.clearRect(0,0,d,f),e.next=8,Promise.all(Object.values(ze.current).sort((function(e,t){return e.order-t.order})).map((function(e){var t=e.instructor,n=e.rerun,r=e.name;return 0!==n&&He.current[r]!==n||!He.current[r]?(He.current[r]=n,t()):Promise.resolve()})));case 8:return(y=i.current)&&l&&(N=j(r,a),L=N.artX,M=N.artY,I=N.artWidth,A=y.width,(E=y.height)>0&&l.drawImage(y,0,0,A,E,L,M,I,I/(A/E))),e.next=12,h(s,l,0);case 12:return e.next=14,h(p,l,0);case 14:return e.next=16,h(C,l,0);case 16:return e.next=18,h(O,l,0);case 18:return e.next=20,h(x,l,0);case 20:return e.next=22,h(S,l,0);case 22:return e.next=24,h(b,l,0);case 24:return e.next=26,h(k,l,0);case 26:return e.next=28,h(w,l,0);case 28:return e.next=30,h(m,l,0);case 30:return e.next=32,h(u,l,0);case 32:return e.next=34,h(F,l,0);case 34:return e.next=36,h(T,l,0);case 36:null===(v=R.current)||void 0===v||null===(g=v.getContext("2d"))||void 0===g||g.drawImage(c,0,0);case 37:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[i,C,u,o,b,T,R,p,m,x,O,w,s,k,F,S]);return{drawingPipeline:ze,onExport:Ge}},Wr=n(403);function Pr(){var e=Object(Ht.a)(["animation: "," 12s linear infinite;"]);return Pr=function(){return e},e}function Dr(){var e=Object(Ht.a)(["\n    cursor: pointer;\n    .setting-button-label {\n        display: grid;\n        label {\n            cursor: pointer;\n            line-height: 1;\n            font-size: var(--fs-xs);\n            margin-top: var(--spacing-xs);\n        }\n    }\n    .anticon-setting {\n        font-size: var(--fs-xl);\n        justify-self: center;\n        > svg {\n            ","\n        }\n    }\n    &:hover {\n        color: var(--main-active);\n        .anticon-setting {\n            color: var(--sub-active);\n        }\n    }\n"]);return Dr=function(){return e},e}function zr(){var e=Object(Ht.a)(["\n    display: grid;\n    grid-template-columns: 1fr;\n    gap: var(--spacing-sm);\n    background-color: var(--main-level-3);\n    padding: var(--spacing-sm);\n    border: var(--bw) solid var(--sub-level-1);\n    border-radius: var(--br-lg);\n    color: var(--color);\n"]);return zr=function(){return e},e}function Hr(){var e=Object(Ht.a)(["\n    to {\n        transform: rotate(360deg);\n    }\n"]);return Hr=function(){return e},e}var Gr=Object(Gt.c)(Hr()),Yr=Gt.b.div(zr()),Xr=Gt.b.div(Dr(),(function(e){return e.$softMode?"":Object(Gt.a)(Pr(),Gr)})),Vr=function(){var e=Yn((function(e){return{setting:e.setting,updateSetting:e.updateSetting}})),t=e.setting,n=e.updateSetting,a=t.allowHotkey,o=t.reduceMotionColor,i=t.showCreativeOption,c=t.showExtraDecorativeOption;return Object(r.jsx)(Xr,{className:"setting-button",$softMode:o,children:Object(r.jsx)(sn.a,{trigger:["click"],overlayClassName:"setting-button-overlay",content:Object(r.jsxs)(Yr,{children:[Object(r.jsx)("div",{children:Object(r.jsx)(Wr.a,{checked:o,onChange:function(e){return n({reduceMotionColor:e.target.checked})},children:"Reduce Color and Motion"})}),Object(r.jsx)("div",{children:Object(r.jsx)(Wr.a,{checked:c,onChange:function(e){return n({showExtraDecorativeOption:e.target.checked})},children:"Show Extra Decorative Options"})}),Object(r.jsx)("div",{children:Object(r.jsx)(Wr.a,{checked:i,onChange:function(e){return n({showCreativeOption:e.target.checked})},children:"Show Creative Options"})}),Object(r.jsx)("div",{children:Object(r.jsx)(Xt.a,{title:"Warning: Using hotkey may affect undo / redo feature.",placement:"left",children:Object(r.jsx)(Wr.a,{checked:a,onChange:function(e){return n({allowHotkey:e.target.checked})},children:"Allow hotkey"})})}),Object(r.jsx)("div",{children:Object(r.jsx)("small",{children:"Settings are saved locally"})})]}),children:Object(r.jsxs)("div",{className:"setting-button-label",children:[Object(r.jsx)(bn.a,{}),Object(r.jsx)("label",{children:"Setting"})]})})})},Ur=n(411);n(268);function Kr(){var e=Object(Ht.a)(["\n    align-content: center;\n    border-left: var(--bw) dashed #b1b1b1;\n    padding-left: var(--spacing);\n    margin-left: var(--spacing);\n"]);return Kr=function(){return e},e}var Jr=function(){var e;return Object(r.jsxs)("div",{className:"affiliation",children:[Object(r.jsxs)("span",{className:"version",children:["v",null!==(e="2.0.1")?e:"unknown"]}),Object(r.jsx)("div",{className:"affiliation-link",children:Object(r.jsx)("a",{href:"https://github.com/lauqerm/ygocarder",target:"_blank",rel:"noreferrer",children:Object(r.jsx)(Ur.a,{})})})]})},qr=Gt.b.div(Kr()),$r=function(){return Object(r.jsxs)("div",{className:"app-header",children:[Object(r.jsx)("img",{alt:"app-logo",src:"".concat("/ygocarder","/logo192.png"),width:35}),Object(r.jsxs)("div",{className:"app-description",children:[Object(r.jsx)("h1",{children:"Yugioh Carder"}),Object(r.jsxs)("div",{className:"app-contribution",children:[Object(r.jsxs)("span",{className:"app-creator",children:["GUI: ",Object(r.jsx)("a",{href:"https://github.com/lauqerm/ygocarder",target:"_blank",rel:"noreferrer",children:Object(r.jsx)("b",{children:"Lauqerm"})})," ",Object(r.jsx)(un,{content:Object(r.jsxs)("div",{className:"disclaimer",children:[Object(r.jsx)("h2",{children:"Disclaimer"}),Object(r.jsxs)("ul",{children:[Object(r.jsxs)("li",{children:['This is a personal project, not an "official" card maker. I do not have any affiliations with any other card makers, be it website, desktop app or mobile app. And ',Object(r.jsx)("a",{href:"https://lauqerm.github.io/ygocarder",children:"lauqerm.github.io/ygocarder"})," is the only site that directly maintained by me."]}),Object(r.jsx)("li",{children:"The code of my site is provided as-is. I hold no liability for any other parties that may use or modify the code of my app on their own sites."}),Object(r.jsx)("li",{children:"I hold no liability for cards created by this app, including pictures, card text and any product related to it."}),Object(r.jsx)("li",{children:"I do not own any of Yu-Gi-Oh card layers and fonts use in this project. They belong to their respective creators."}),Object(r.jsxs)("li",{children:["If you want to modify card layers, or use it in any public project, please contact ",Object(r.jsx)("a",{href:"https://www.deviantart.com/grezar",target:"_blank",rel:"noreferrer",children:"Grezar"})," or ",Object(r.jsx)("a",{href:"https://www.deviantart.com/9558able",target:"_blank",rel:"noreferrer",children:"9558able"})," directly."]}),Object(r.jsx)("li",{children:"This app is completely free to use, I do not charge any kind of fee, require donation or serve any ads in this site."})]})]})})]}),Object(r.jsxs)("span",{className:"template-creator",children:["Template: ",Object(r.jsx)("a",{href:"https://www.deviantart.com/grezar/art/SKILL-UPDATE-Series-10-Card-Proxy-Template-686736691",target:"_blank",rel:"noreferrer",children:Object(r.jsx)("b",{children:"Grezar"})}),", ",Object(r.jsx)("a",{href:"https://www.deviantart.com/9558able/art/Yugioh-Series-10-Proxy-Template-DELUXE-EDITION-843282421",target:"_blank",rel:"noreferrer",children:Object(r.jsx)("b",{children:"9558able"})}),", ",Object(r.jsx)("a",{href:"https://www.deviantart.com/slackermagician",target:"_blank",rel:"noreferrer",children:Object(r.jsx)("b",{children:"SlackerMagician"})}),", ",Object(r.jsx)("a",{href:"https://www.deviantart.com/icycatelf",target:"_blank",rel:"noreferrer",children:Object(r.jsx)("b",{children:"icycatelf"})})," and others"]})]})]}),Object(r.jsx)(qr,{className:"app-setting",children:Object(r.jsx)(Vr,{})})]})},_r=Object(r.jsx)(un,{overlayClassName:"disclaimer-overlay",style:{display:"inline-block"},content:Object(r.jsxs)("div",{className:"disclaimer",children:[Object(r.jsx)("h2",{children:"What is happening?"}),Object(r.jsx)("p",{children:'You are using an image host that does not get the "approval" needed for the app to use it. Browsers see it as a potential security risk (even if it is not the case), and mark the card as "tainted".'}),Object(r.jsx)("h2",{children:"How does it affect me?"}),Object(r.jsx)("p",{children:'A "tainted card" prevents all sort of automatic save. From then on you must save the card manually by right click it \u2192 "Save image as...". It is implying that this action is fully of your consent.'}),Object(r.jsx)("h2",{children:"How do I fix it?"}),Object(r.jsxs)("p",{children:['Change to other safe and popular image host ("imgur" for example) will likely fix the issue. You may try to refresh the page if the issue persists.',Object(r.jsx)("br",{}),"If you cannot afford to switch to other image hosts, the app will also work mostly just fine, you only need to manually save the card (and keep cautious for potential malicious links)."]})]})});function Zr(){var e=Object(Ht.a)(["\n    border: var(--bw) solid var(--sub-level-1);\n    border-radius: var(--br-lg);\n    background-color: var(--main-level-3);\n    box-shadow: 0 3px 6px -4px rgba(0, 0, 0, 0.12), 0 6px 16px 0 rgba(0, 0, 0, 0.08), 0 9px 28px 8px rgba(0, 0, 0, 0.05); // Mimic antd\n    padding: var(--spacing-xs) 0;\n    color: var(--color);\n"]);return Zr=function(){return e},e}function Qr(){var e=Object(Ht.a)(["\n    padding: var(--spacing-xs) var(--spacing);\n    cursor: pointer;\n    &:hover {\n        background-color: var(--sub-active);\n    }\n    &.menu-active {\n        background-color: var(--main-active);\n        &:hover {\n            background-color: var(--sub-active);\n        }\n    }\n"]);return Qr=function(){return e},e}function ea(){var e=Object(Ht.a)(["\n    font-weight: 500;\n    border-color: transparent;\n    background-color: transparent;\n    color: var(--color-vendor);\n    text-shadow: var(--ts);\n    user-select: none;\n    display: inline-block;\n    height: 32px;\n    width: var(--width-label);\n    line-height: 30px;\n    position: relative;\n    min-width: var(--width-label);\n    text-align: right;\n    padding-right: var(--spacing-antd);\n"]);return ea=function(){return e},e}var ta=Gt.b.div(ea()),na=Gt.b.div(Qr()),ra={Container:Gt.b.div(Zr()),Option:na},aa=[{label:"OCG",value:"ocg",props:{className:"ocg-button",style:{fontWeight:"bold"}}},{label:"TCG",value:"tcg",props:{className:"tcg-button",style:{fontWeight:"bold"}}}],oa=[{name:"normal",label:"None",color:"#747b95"},{name:"gold",label:"Gold",color:"#cfa65f"},{name:"platinum",label:"Platinum",color:"#b1b1b1"}].map((function(e){var t=e.color,n=e.name;return{label:e.label,value:n,props:{style:{color:t,fontWeight:"bold"}}}})),ia=Object.values(P).map((function(e){var t=e.value;return{label:e.label,value:t}})),ca=Object.values(re).map((function(e){var t=e.value;return{label:e.label,value:t}})),la=[{value:"normal",label:Object(r.jsx)(x.a,{})}].concat(Object(cn.a)(Object.values(D).map((function(e){var t=e.value;return{label:e.label,value:t}})))),sa=function(){return pe.map((function(e){var t=e.name,n=e.labelBackgroundColor,a=e.labelBackgroundColorList,o=e.edition;return{label:Object(r.jsx)(Sn,{labelBackgroundColor:n,labelBackgroundColorList:a,name:t}),value:t,edition:o}}))},ua=k.map((function(e){var t=e.label,n=e.value;return{label:n===w?Object(r.jsx)(x.a,{}):Object(r.jsx)(Xt.a,{overlay:t,children:Object(r.jsx)("img",{alt:"".concat(t),src:"".concat("/ygocarder","/asset/image/subfamily/subfamily-").concat(n.toLowerCase(),".png")})}),value:n}})),da=Object(cn.a)(Array(14)).map((function(e,t){return{label:t,value:t}})),fa={auto:{value:"auto",label:"Auto",fullLabel:"Auto"},st:{value:"st",label:"Icon",fullLabel:Object(r.jsxs)(r.Fragment,{children:["Spell/Trap Icon",Object(r.jsx)("img",{alt:"s/t-icon",src:"".concat("/ygocarder","/asset/image/subfamily/subfamily-continuous.png")})]})},level:{value:"level",label:"Level",fullLabel:"Level"},"negative-level":{value:"negative-level",label:"Neg. Level",fullLabel:"Negative Level"},rank:{value:"rank",label:"Rank",fullLabel:"Rank"}},ba=Object.values(fa),pa=["no-sticker","gold","silver","beta","holo5","holo4","holo3","holo2","holo1","limited","unlimited"].map((function(e){return{label:"no-sticker"===e?Object(r.jsx)(x.a,{}):Object(r.jsx)("img",{alt:e,src:"".concat("/ygocarder","/asset/image/sticker/sticker-").concat(e.toLowerCase(),".png")}),value:e}})),ma=Object.entries({veryStrict:{label:"5",order:1},strict:{label:"4",order:2},loose:{label:"3",order:3},veryLoose:{label:"2",order:4},relaxed:{label:"1",order:5}}).map((function(e){var t=Object(s.a)(e,2),n=t[0],r=t[1];return{label:r.label,value:n,order:r.order}})).sort((function(e,t){return e.order-t.order}));function ha(){var e=Object(Ht.a)(["\n    z-index: 10;\n    display: inline-grid;\n    grid-template-columns: 1fr max-content;\n    align-items: center;\n    column-gap: var(--spacing-sm);\n    .char-picker-guideline {\n\n    }\n    .char-picker {\n        z-index: 1;\n        display: grid;\n        grid-template-columns: repeat(auto-fit, minmax(40px, 1fr));\n        .handler,\n        .ant-btn {\n            background-color: var(--main-level-1);\n            color: var(--color-heavy);\n            text-shadow: var(--ts);\n            font-family: Segoe UI Symbol, sans-serif;\n            border: 1px solid var(--sub-level-1);\n            border-radius: 0;\n            padding: 0 var(--spacing);\n            + .ant-btn {\n                border-left-width: 0;\n            }\n            &:hover {\n                color: var(--main-active);\n            }\n            &:first-child {\n                border-radius: var(--br) 0 0 var(--br);\n            }\n            &:last-child {\n                border-radius: 0 var(--br) var(--br) 0;\n            }\n        }\n        /** Currently char picker no longer movable */\n        /* .handler {\n            cursor: grabbing;\n            background-color: var(--main-level-2);\n            height: unset;\n            font-size: var(--fs-xl);\n            height: var(--fs-xl);\n            line-height: 1;\n            padding: 0;\n            text-align: center;\n        } */\n    }\n    .moveable-control-box {\n        .moveable-control.moveable-origin,\n        .moveable-line.moveable-direction {\n            border-color: transparent;\n            background: none;\n        }\n    }\n"]);return ha=function(){return e},e}var va=Gt.b.div(ha()),ga=function(e){var t=e.targetId,n=void 0===t?"":t,a=e.onPick,o=void 0===a?function(){}:a,i=function(e){var t=document.getElementById(n);if(t){var r=function(e,t){if(document.selection)return e.focus(),document.selection.createRange().text=t,{value:e.value,position:0};if(e.selectionStart||0===e.selectionStart){var n=e.selectionStart,r=e.selectionEnd;return e.value=e.value.substring(0,n)+t+e.value.substring(r,e.value.length),e.selectionStart=n+t.length,e.selectionEnd=n+t.length,e.focus(),{value:e.value,position:n+t.length}}return e.value+=t,{value:e.value,position:0}}(t,e).value;o(r,e)}};return Object(r.jsxs)(va,{tabIndex:-1,className:"char-picker-container",children:[Object(r.jsx)("div",{id:"char-picker",className:"char-picker",children:["\u221e","\u2606","\u25cf","\xa9","\u2122","\u2c6f","\u042f"].map((function(e){return Object(r.jsx)("button",{tabIndex:-1,className:"ant-btn",onClick:function(){return i(e)},children:e},e)}))}),Object(r.jsx)("div",{className:"char-picker-guideline",children:Object(r.jsx)(un,{content:Object(r.jsxs)(r.Fragment,{children:["How to use:",Object(r.jsxs)("ul",{children:[Object(r.jsx)("li",{children:"At any text field, click at the position you want to insert."}),Object(r.jsx)("li",{children:"Click the letter."})]})]})})})]})},ja=n(61),xa=n(412),ya=n(404),Oa=n(147),wa=(n(375),n(376),Object(a.forwardRef)((function(e,t){var n=e.color,o=e.onSelect,i=e.onOffsetChange,c=e.onRemove,l=Object(a.useState)(n),u=Object(s.a)(l,2),d=u[0],f=u[1],b=Object(a.useState)(0),p=Object(s.a)(b,2),m=p[0],h=p[1],v=Object(a.useState)(-1),g=Object(s.a)(v,2),j=g[0],x=g[1],y=Object(a.useRef)(Ln()(h,250)).current;return Object(a.useImperativeHandle)(t,(function(){return{setColor:function(e){var t=e.color,n=e.offset,r=e.id,a=Math.min,o=Math.max,i=Math.round;f(t),h(o(0,a(100,i(100*parseFloat(n))))),x(r)},setCurrentOffset:function(e,t){var n=Math.min,r=Math.max,a=Math.round;e===j&&h(r(0,n(100,a(100*parseFloat(t)))))}}})),Object(a.useEffect)((function(){j>0&&(null===i||void 0===i||i(j,"".concat(m/100)))}),[j,m,i]),Object(r.jsxs)("div",{className:"stop-point-control-panel",children:[Object(r.jsxs)("div",{className:"stop-point-offset-input",children:["Stop At: ",Object(r.jsx)(ya.a,{value:m,size:"small",max:100,min:0,onChange:function(e){return y("string"===typeof e?parseInt(e):null!==e&&void 0!==e?e:0)}}),"\xa0%\xa0",Object(r.jsx)(fn.a,{className:"remove-stop-color",size:"small",onClick:function(){return null===c||void 0===c?void 0:c(j)},children:"Remove"})]}),Object(r.jsx)(ja.a,{styles:{default:{picker:{color:"#000000",background:"var(--main-level-3)",boxShadow:"none"},body:{padding:"var(--spacing) var(--spacing)"}}},disableAlpha:!0,color:d,onChange:function(e){return f(e.hex)},onChangeComplete:function(e){f(e.hex),null===o||void 0===o||o(e.hex)}})]})}))),ka=function(e){return{colorList:e,raw:xt(e)}},Fa=function(e){var t,n,o=e.palette,i=void 0===o?xt(yt("0.000|#eef10b,0.5|#d78025,1.000|#7e20cf")):o,c=e.angle,u=void 0===c?180:c,d=e.memoizedOnChange,f=Object(a.useRef)(null),b=Object(a.useState)(u),p=Object(s.a)(b,2),m=p[0],h=p[1],v=Object(a.useState)((function(){var e,t,n=yt(i);return{raw:i,colorList:n,currentControlId:null!==(e=null===(t=n[0])||void 0===t?void 0:t.id)&&void 0!==e?e:-1}})),g=Object(s.a)(v,2),j=g[0],x=g[1],y=Object(a.useCallback)((function(e,t){return x((function(n){var r=n.colorList.map((function(n){return n.id===e?Object(l.a)(Object(l.a)({},n),{},{offset:t}):n}));return Object(l.a)(Object(l.a)({},n),ka(r))}))}),[]);Object(a.useEffect)((function(){h(u)}),[u]),Object(a.useEffect)((function(){var e,t,n=yt(i);x({raw:i,colorList:n,currentControlId:null!==(e=null===(t=n[0])||void 0===t?void 0:t.id)&&void 0!==e?e:-1})}),[i]);var O=Object(a.useRef)(!1);return Object(a.useEffect)((function(){var e;j.colorList[0]&&O.current&&(O.current=!0,null===(e=f.current)||void 0===e||e.setColor(j.colorList[0]))}),[j.colorList]),Object(a.useEffect)((function(){var e=!0;return setTimeout((function(){var t=j.colorList,n=j.currentControlId;if(e&&n>=0){var r,a=t.find((function(e){return e.id===n}));a&&(null===(r=f.current)||void 0===r||r.setCurrentOffset(n,a.offset))}}),100),function(){e=!1}}),[j]),Object(a.useEffect)((function(){var e=!0;return setTimeout((function(){e&&d(j.colorList,m)}),200),function(){e=!1}}),[j,m,d]),Object(r.jsxs)("div",{className:"controls-wrapper gradient-picker-container",children:[Object(r.jsxs)("div",{className:"gradient-angle-control",children:[Object(r.jsx)("h2",{children:"Color Points"}),Object(r.jsxs)(fn.a,{size:"small",className:"add-stop-color",disabled:(null!==(t=null===(n=j.colorList)||void 0===n?void 0:n.length)&&void 0!==t?t:1e4)>20,onClick:function(){x((function(e){var t=[].concat(Object(cn.a)(e.colorList),[{offset:"0.5",color:"#ffffff",id:e.colorList.length+1}]).sort((function(e,t){return Number(e.offset)-Number(t.offset)}));return Object(l.a)(Object(l.a)({},e),ka(t))}))},children:["Add Point (",j.colorList.length,"/",20,")"]}),Object(r.jsxs)("div",{className:"angle-picker-container",children:[Object(r.jsx)("h2",{children:"Gradient Direction"}),Object(r.jsx)(Oa.AnglePicker,{angle:m,size:120,setAngle:h})]})]}),Object(r.jsx)("div",{className:"stop-color-picker-container",children:Object(r.jsx)(Oa.GradientPicker,Object(l.a)(Object(l.a)({},{width:370,paletteHeight:32,maxStops:20,minStops:2,stopRemovalDrop:99999,palette:j.colorList,onPaletteChange:function(e){return x((function(t){return Object(l.a)(Object(l.a)({},t),ka(e))}))},onColorStopSelect:function(e){var t;x((function(t){return Object(l.a)(Object(l.a)({},t),{},{currentControlId:e.id})})),null===(t=f.current)||void 0===t||t.setColor(e)}}),{},{children:Object(r.jsx)(wa,{ref:f,onOffsetChange:y,onRemove:function(e){x((function(t){var n,r,a=t.colorList.filter((function(t){return t.id!==e})),o=null!==(n=null===a||void 0===a?void 0:a[0].id)&&void 0!==n?n:-1;return o>0&&(null===(r=f.current)||void 0===r||r.setColor(j.colorList[o])),Object(l.a)(Object(l.a)({},ka(a)),{},{currentControlId:o})}))}})}))})]})};function Ca(){var e=Object(Ht.a)(["\n    line-height: 0;\n    cursor: pointer;\n    min-height: 26.13px;\n    &.menu-active {\n        outline: var(--bw-lg) solid var(--main-active);\n        &:hover {\n            outline: var(--bw-lg) solid var(--sub-active);\n        }\n    }\n    &.preset-item-focused {\n        outline: var(--bw-lg) solid var(--sub-active);\n    }\n    :hover {\n        outline: var(--bw-lg) solid var(--sub-active);\n    }\n    img {\n        max-width: 100%;\n    }\n"]);return Ca=function(){return e},e}function Sa(){var e=Object(Ht.a)(["\n    display: grid;\n    grid-template-columns: repeat(4, 120px);\n    gap: var(--spacing-sm);\n    padding: var(--spacing-xs);\n    &:focus-visible {\n        outline: none;\n        box-shadow: 0 0 0 2px var(--focus) inset;\n    }\n"]);return Sa=function(){return e},e}function Ta(){var e=Object(Ht.a)(["\n    line-height: 0;\n    cursor: pointer;\n    align-self: center;\n    text-align: center;\n    &:not(.menu-off) {\n        min-height: 23.2px;\n        &.menu-active {\n            outline: var(--bw-lg) solid var(--main-active);\n            &:hover {\n                outline: var(--bw-lg) solid var(--sub-active);\n            }\n        }\n        :hover {\n            outline: var(--bw-lg) solid var(--sub-active);\n        }\n    }\n    &.menu-off {\n        &:hover {\n            color: var(--main-link);\n            .anticon {\n                color: var(--main-link);\n            }\n        }\n    }\n    img {\n        max-width: 100%;\n        border: var(--bw) solid var(--sub-level-1);\n    }\n"]);return Ta=function(){return e},e}function Ra(){var e=Object(Ht.a)(["\n    display: grid;\n    grid-template-columns: repeat(2, 200px);\n    gap: var(--spacing-sm);\n    padding: var(--spacing-xs);\n    .alert {\n        grid-column: span 2;\n        font-size: var(--fs-sm);\n        text-align: center;\n    }\n"]);return Ra=function(){return e},e}function Na(){var e=Object(Ht.a)(["\n    background-color: var(--main-level-4);\n    ","\n    padding: var(--spacing-xxs) var(--spacing-xs);\n    margin: calc(-1 * var(--spacing-xxs)) 0;\n    border-radius: var(--br-lg);\n    box-shadow: var(--bs-button);\n    color: var(--color-heavy);\n    cursor: pointer;\n    ","\n    &:hover {\n        background-color: var(--sub-level-4);\n    }\n"]);return Na=function(){return e},e}var La=Gt.b.div(Na(),(function(e){return e.$active?"border: var(--bw) solid var(--main-active);":"border: var(--bw) solid var(--sub-level-1);"}),(function(e){var t=e.$softMode,n=e.$active;return t?"\n                border: var(--bw) solid var(--main-level-4);\n                ".concat(n?"outline: var(--bw) solid var(--main-active);":"","\n            "):""})),Ma=Object(Gt.b)(ra.Container)(Ra()),Ia=Gt.b.div(Ta()),Aa=Object(Gt.b)(ra.Container)(Sa()),Ea=Gt.b.div(Ca()),Ba=n(397),Wa=n(205),Pa=Object(a.forwardRef)((function(e,t){var n=e.className,o=e.defaultValue,i=e.fieldMap,c=e.labelMap,u=e.onChange,d=i.x,f=i.y,b=i.color,p=i.width,m=Object(a.useState)((function(){var e=o[d],t=o[f],n=o[b],r=o[p];return{x:null!==e&&void 0!==e?e:0,y:null!==t&&void 0!==t?t:0,width:null!==r&&void 0!==r?r:0,color:n}})),h=Object(s.a)(m,2),v=h[0],g=h[1],j=v.x,x=v.y,y=v.color,O=v.width,w=c[p];return Object(a.useEffect)((function(){var e=!0;return setTimeout((function(){e&&u(v)}),500),function(){e=!1}}),[v]),Object(a.useImperativeHandle)(t,(function(){return{setValue:function(e){var t=Object.keys(e);for(var n in t)if(e[n]!==v[n])return void g((function(t){return Object(l.a)(Object(l.a)({},t),e)}))}}})),Object(r.jsxs)("div",{className:n,children:[Object(r.jsx)("h2",{children:"Position"}),Object(r.jsxs)("div",{className:"line-position",children:[Object(r.jsx)(Wa.a,{axis:"xy",styles:{track:{backgroundColor:"var(--main-slider)",width:100,height:100,gridRow:"span 3",position:"relative"},thumb:{backgroundColor:"var(--sub-slider)",zIndex:10}},xmax:5,xmin:-5,ymax:5,ymin:-5,x:null!==j&&void 0!==j?j:0,y:null!==x&&void 0!==x?x:0,onChange:function(e){var t=e.x,n=e.y;return g((function(e){return Object(l.a)(Object(l.a)({},e),{},{x:t,y:n})}))}}),Object(r.jsxs)("div",{className:"single-slider",children:["X Offset: ",Object(r.jsx)(ya.a,{size:"small",value:j,onChange:function(e){return g((function(t){return Object(l.a)(Object(l.a)({},t),{},{x:"number"===typeof e?e:parseInt(null!==e&&void 0!==e?e:"0")})}))}})]}),Object(r.jsxs)("div",{className:"single-slider",children:["Y Offset: ",Object(r.jsx)(ya.a,{size:"small",value:x,onChange:function(e){return g((function(t){return Object(l.a)(Object(l.a)({},t),{},{y:"number"===typeof e?e:parseInt(null!==e&&void 0!==e?e:"0")})}))}})]}),Object(r.jsxs)("div",{className:"single-slider",children:[w,": ",Object(r.jsx)(Ba.a,{value:O,min:1,max:10,onChange:function(e){"number"===typeof e&&g((function(t){return Object(l.a)(Object(l.a)({},t),{},{width:e})}))}})]})]}),Object(r.jsx)("h2",{children:"Color"}),Object(r.jsx)(ja.b,{color:y,onChangeComplete:function(e){return g((function(t){return Object(l.a)(Object(l.a)({},t),{},{color:e.hex})}))}})]})})),Da=Object(a.forwardRef)((function(e,t){var n=e.active,o=e.value,i=e.onClick,c=e.onCancel,u=Object(a.useRef)(null),d=Object(a.useState)(0),f=Object(s.a)(d,2),b=f[0],p=f[1];return Object(a.useImperativeHandle)(t,(function(){return{focus:function(){var e;return null===(e=u.current)||void 0===e?void 0:e.focus()}}})),Object(r.jsx)(Aa,Object(l.a)(Object(l.a)({ref:u},Ot({stopPropagation:!0,optionLength:S.length,setFocus:p,onTrigger:function(){b>=0&&i(S[b])},onCancel:function(){null===c||void 0===c||c()}})),{},{children:S.map((function(e,t){var a=e.key,c=e.image,l=e.label;return Object(r.jsx)(Ea,{className:zt("preset-item",o.preset===a&&n?"menu-active":"",b===t?"preset-item-focused":""),onClick:function(t){t.stopPropagation(),i(e)},children:Object(r.jsx)("img",{className:"preset-preview",src:"".concat("/ygocarder","/").concat(c),alt:l})},a)}))}))})),za=(n(382),Object(a.forwardRef)((function(e,t){var n=e.frameInfo,o=e.defaultType,i=e.defaultValue,c=e.showExtraDecorativeOption,u=e.onChange,d=Object(a.useRef)(null),f=Object(a.useState)(-1),b=Object(s.a)(f,2),p=b[0],m=b[1],h=Object(a.useState)(!1),v=Object(s.a)(h,2),g=v[0],j=v[1],y=Object(a.useState)(o),O=Object(s.a)(y,2),w=O[0],k=O[1],F=Object(a.useState)(i),S=Object(s.a)(F,2),T=S[0],N=S[1],L=function(){var e=Object(a.useState)(0),t=Object(s.a)(e,2),n=t[0],r=t[1];return[Object(a.useCallback)((function(){r((function(e){return e+1}))}),[]),n]}(),M=Object(s.a)(L,2),I=M[0],A=M[1],E=Object(a.useRef)(Ln()(u,250)).current,B=Object(a.useCallback)((function(e,t){N((function(n){return Object(l.a)(Object(l.a)({},n),{},{gradientAngle:t,gradientColor:xt(e)})})),I()}),[I]),W=Yn((function(e){return e.setting.reduceMotionColor}));Object(a.useEffect)((function(){0!==A&&(k("custom"),E("custom",T))}),[A]);var P=Object(a.useRef)(null),D=Object(a.useRef)(null);Object(a.useImperativeHandle)(t,(function(){return{setValue:function(e){var t,n;N((function(t){return Object(l.a)(Object(l.a)({},t),e)}));var r=e.lineColor,a=e.lineWidth,o=e.lineOffsetX,i=e.lineOffsetY,c=e.shadowBlur,s=e.shadowColor,u=e.shadowOffsetX,d=e.shadowOffsetY;null===(t=P.current)||void 0===t||t.setValue({x:u,y:d,width:c,color:s}),null===(n=D.current)||void 0===n||n.setValue({x:o,y:i,width:a,color:r})}}}));var z=T.fillStyle,H=T.headTextFillStyle,G=T.hasOutline,Y=T.hasShadow,X=T.hasGradient,V=T.gradientColor,U=T.gradientAngle,K=T.pattern,J=T.font,q=null!==n&&void 0!==n?n:{},$={background:q.labelBackgroundColor,backgroundImage:q.labelBackgroundImage},_="custom"===w,Z="predefined"===w,Q="name-style-option-input-container",ee=function(){k("auto"),"auto"!==w&&E("auto",T)},te=function(){var e,t=T.preset?null===(e=C[T.preset])||void 0===e?void 0:e.value:{};k("predefined"),N((function(e){return Object(l.a)(Object(l.a)({},e),t)})),E("predefined",Object(l.a)(Object(l.a)({},T),t))},ne=function(){k("custom"),"custom"!==w&&E("custom",T)};return Object(r.jsx)("div",{className:"ant-input-group-wrapper text-style-input",children:Object(r.jsxs)("span",{className:"ant-input-wrapper ant-input-group",children:[Object(r.jsx)("span",{className:"ant-input-group-addon",children:"Name Style"}),Object(r.jsxs)("span",{className:"name-style-input-container",children:[Object(r.jsxs)("div",Object(l.a)(Object(l.a)({id:Q,className:"ant-radio-group ant-radio-group-outline name-style-option-input-container"},Ot({setFocus:m,optionLength:3,onKeyPress:function(e){if(1===p&&("ArrowDown"===e.key||"Enter"===e.key||"  "===e.key))return e.preventDefault(),m(1),j(!0),setTimeout((function(){var e;1===p&&(null===(e=d.current)||void 0===e||e.focus())}),200),!1},onTrigger:function(){0===p&&ee(),1===p&&te(),2===p&&ne()}})),{},{children:[Object(r.jsxs)("label",{className:zt("ant-radio-wrapper","auto"===w&&"ant-radio-wrapper-checked",0===p&&"ant-radio-focused"),onClick:function(){return ee()},children:[Object(r.jsxs)("span",{className:"ant-radio ".concat("auto"===w?"ant-radio-checked":""),children:[Object(r.jsx)("input",{tabIndex:-1,type:"radio",className:"ant-radio-input",value:"auto"}),Object(r.jsx)("span",{className:"ant-radio-inner"})]}),Object(r.jsx)("span",{className:"ant-radio-label",children:"Auto"})]}),Object(r.jsx)("span",{className:"name-style-option-break"}),Object(r.jsx)("label",{className:zt("ant-radio-wrapper",Z&&"ant-radio-wrapper-checked",1===p&&"ant-radio-focused"),onClick:function(){return te()},children:Object(r.jsx)(sn.a,{visible:g,onVisibleChange:j,trigger:["hover","click"],placement:"bottomLeft",overlayClassName:"predefined-picker-overlay",content:Object(r.jsx)("div",{className:"overlay-event-absorber",children:Object(r.jsx)(Da,{ref:d,active:Z,value:T,onCancel:function(){var e;j(!1),null===(e=document.getElementById(Q))||void 0===e||e.focus()},onClick:function(e){var t,n=e.key,r=n?null===(t=C[n])||void 0===t?void 0:t.value:{};k("predefined"),N((function(e){return Object(l.a)(Object(l.a)({},e),r)})),E("predefined",Object(l.a)(Object(l.a)({},T),r))}})}),children:Object(r.jsxs)("span",{className:"name-style-option-label",children:[Object(r.jsxs)("span",{className:"ant-radio ".concat(Z?"ant-radio-checked":""),children:[Object(r.jsx)("input",{tabIndex:-1,type:"radio",className:"ant-radio-input",value:"predefined"}),Object(r.jsx)("span",{className:"ant-radio-inner"})]}),Object(r.jsx)("span",{className:"ant-radio-label",children:"Predefined"})]})})}),Object(r.jsx)("span",{className:"name-style-option-break"}),Object(r.jsx)("label",{className:zt("ant-radio-wrapper",_&&"ant-radio-wrapper-checked",2===p&&"ant-radio-focused"),onClick:function(){return ne()},children:Object(r.jsxs)("span",{children:[Object(r.jsxs)("span",{className:"ant-radio ".concat(_?"ant-radio-checked":""),children:[Object(r.jsx)("input",{tabIndex:-1,type:"radio",className:"ant-radio-input",value:"custom"}),Object(r.jsx)("span",{className:"ant-radio-inner"})]}),Object(r.jsx)("span",{className:"ant-radio-label ant-radio-label-custom",children:"Custom"})]})})]})),Object(r.jsxs)("div",{className:"style-picker",children:[Object(r.jsx)(sn.a,{trigger:["click"],overlayClassName:"input-overlay style-picker-overlay",content:Object(r.jsx)("div",{className:"overlay-event-absorber",children:Object(r.jsxs)("div",{className:"custom-style-picker",children:[Object(r.jsxs)("div",{className:"custom-style-text",children:[Object(r.jsx)("h3",{children:"Text Color"}),Object(r.jsx)(ja.b,{color:z,onChangeComplete:function(e){k("custom"),N((function(t){return Object(l.a)(Object(l.a)({},t),{},{fillStyle:e.hex})})),I()}})]}),Object(r.jsx)("hr",{}),Object(r.jsxs)("div",{className:"custom-style-text",children:[Object(r.jsxs)("h3",{children:["Ruby Color (",Object(r.jsx)("small",{children:"Japanese Furigana"}),")"]}),Object(r.jsx)(ja.b,{color:H,onChangeComplete:function(e){k("custom"),N((function(t){return Object(l.a)(Object(l.a)({},t),{},{headTextFillStyle:e.hex})})),I()}})]})]})}),placement:"bottom",children:Object(r.jsxs)(La,{$softMode:W,className:"picker-dropdown color-picker-dropdown",children:["Color ",Object(r.jsx)(xa.a,{})]})},"color-picker"),c&&Object(r.jsx)(sn.a,{trigger:["click"],overlayClassName:"input-overlay style-picker-overlay",content:Object(r.jsx)("div",{className:"overlay-event-absorber",children:Object(r.jsxs)("div",{className:"custom-style-picker",children:[Object(r.jsx)("h3",{className:"custom-style-expand",children:Object(r.jsx)(Wr.a,{value:"has-shadow",checked:Y,onChange:function(){k("custom"),N((function(e){return Object(l.a)(Object(l.a)({},e),{},{hasShadow:!e.hasShadow})})),I()},children:"Has Shadow?"})}),Y&&Object(r.jsx)(Pa,{ref:P,className:"custom-style-shadow",fieldMap:{color:"shadowColor",width:"shadowBlur",x:"shadowOffsetX",y:"shadowOffsetY"},labelMap:{shadowBlur:"Blur"},defaultValue:T,onChange:function(e){var t=e.color,n=e.width,r=e.x,a=e.y;N((function(e){return Object(l.a)(Object(l.a)({},e),{},{shadowBlur:n,shadowColor:t,shadowOffsetX:r,shadowOffsetY:a})})),I()}})]})}),placement:"bottom",children:Object(r.jsxs)(La,{$softMode:W,$active:_&&Y,className:"picker-dropdown shadow-picker-dropdown",children:["Shadow ",Object(r.jsx)(xa.a,{})]})},"shadow-picker"),Object(r.jsx)(sn.a,{trigger:["click"],overlayClassName:"input-overlay style-picker-overlay",content:Object(r.jsx)("div",{className:"overlay-event-absorber",children:Object(r.jsxs)("div",{className:"custom-style-picker",children:[Object(r.jsx)("h3",{className:"custom-style-expand",children:Object(r.jsx)(Wr.a,{value:"has-line",checked:G,onChange:function(){k("custom"),N((function(e){return Object(l.a)(Object(l.a)({},e),{},{hasOutline:!e.hasOutline})})),I()},children:"Has outline?"})}),G&&Object(r.jsx)(Pa,{ref:D,className:"custom-style-line",fieldMap:{color:"lineColor",width:"lineWidth",x:"lineOffsetX",y:"lineOffsetY"},labelMap:{lineWidth:"Thickness"},defaultValue:T,onChange:function(e){var t=e.color,n=e.width,r=e.x,a=e.y;N((function(e){return Object(l.a)(Object(l.a)({},e),{},{lineWidth:n,lineColor:t,lineOffsetX:r,lineOffsetY:a})})),I()}})]})}),placement:"bottom",children:Object(r.jsxs)(La,{$softMode:W,$active:_&&G,className:"picker-dropdown outline-picker-dropdown",children:["Outline ",Object(r.jsx)(xa.a,{})]})},"outline-picker"),c&&Object(r.jsx)(sn.a,{trigger:["click"],overlayClassName:"input-overlay style-picker-overlay",content:Object(r.jsx)("div",{className:"overlay-event-absorber",children:Object(r.jsxs)("div",{className:"custom-style-picker",children:[Object(r.jsx)("h3",{className:"custom-style-expand",children:Object(r.jsx)(Wr.a,{value:"has-gradient",checked:X,onChange:function(){k("custom"),N((function(e){return Object(l.a)(Object(l.a)({},e),{},{hasGradient:!e.hasGradient})})),I()},children:"Has gradient?"})}),X&&Object(r.jsx)("div",{className:"custom-style-gradient",children:Object(r.jsx)(Fa,{angle:U,palette:V,memoizedOnChange:B})})]})}),placement:"bottom",children:Object(r.jsxs)(La,{$softMode:W,$active:_&&X,className:"picker-dropdown gradient-picker-dropdown",children:["Gradient ",Object(r.jsx)(xa.a,{})]})},"gradient-picker"),c&&Object(r.jsx)(sn.a,{trigger:["click"],overlayClassName:"input-overlay pattern-picker-overlay",content:Object(r.jsx)("div",{className:"overlay-event-absorber",children:Object(r.jsxs)(Ma,{onClick:function(e){return e.stopPropagation()},children:[Object(r.jsx)("div",{className:"alert",children:"Pattern will disable shadow and gradient"}),R.map((function(e){var t=e.key,n=e.patternImage;return Object(r.jsx)(Ia,{className:["pattern-option",T.pattern===t?"menu-active":"",n?"":"menu-off"].join(" "),onClick:function(){N((function(e){return Object(l.a)(Object(l.a)({},e),{},{pattern:t})})),I()},children:n?Object(r.jsx)("img",{style:n?$:{},className:"pattern-image",src:"".concat("/ygocarder","/asset/image/finish-name/").concat(n,".png"),alt:t}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(x.a,{})," No Pattern"]})},t)}))]})}),placement:"bottomLeft",children:Object(r.jsx)(La,{$softMode:W,$active:_&&"string"===typeof K&&"none"!==K,className:"picker-dropdown pattern-picker-dropdown",children:"Pattern"})},"pattern-picker"),Object(r.jsx)(sn.a,{trigger:["click"],overlayClassName:"input-overlay font-picker-overlay",content:Object(r.jsx)("div",{className:"overlay-event-absorber",children:Object(r.jsx)(ra.Container,{children:ca.map((function(e){var t=e.value,n=e.label;return Object(r.jsx)(ra.Option,{className:J===t?"menu-active":"",onClick:function(){N((function(e){return Object(l.a)(Object(l.a)({},e),{},{font:t})})),I()},children:n},t)}))})}),placement:"bottomLeft",children:Object(r.jsx)(La,{$softMode:W,className:"picker-dropdown font-picker-dropdown",children:"Font"})},"font-picker")]})]})]})})})));function Ha(){var e=Object(Ht.a)(["\n    .checkbox-train-input-group,\n    .radio-train-input-group {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\tcolumn-gap: var(--spacing-xs);\n\t\trow-gap: var(--spacing-xs);\n\t\tbox-shadow: none;\n\t\tborder-radius: 0;\n\t\t&:focus-visible {\n\t\t\toutline: 3px solid var(--focus); // +1 width size to account for shadow\n\t\t}\n\t\t.ant-radio-button-wrapper:first-child,\n\t\t.ant-radio-button-wrapper:last-child {\n\t\t\tborder-radius: 0;\n\t\t}\n\t\t.ant-radio-button-wrapper {\n\t\t\tflex: 1;\n\t\t\ttext-transform: capitalize;\n\t\t\twhite-space: nowrap;\n\t\t\tborder: none;\n\t\t\tbox-shadow: var(--bs-1);\n\t\t\tpadding: 0;\n\t\t\tmin-width: 90px;\n\t\t\theight: 28px;\n\t\t\tline-height: 28px;\n\t\t\ttext-align: center;\n\t\t\ttext-shadow: none;\n\t\t\tfont-size: var(--fs-sm);\n\t\t\t&:hover {\n\t\t\t\toutline: var(--bw) solid var(--main-active);\n\t\t\t\toutline-offset: var(--bw);\n\t\t\t}\n\t\t\t&::before {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t}\n\t\t.ant-radio-button-wrapper-checked {\n\t\t\toutline: var(--bw) solid var(--main-active);\n\t\t\toutline-offset: var(--bw);\n\t\t}\n\t}\n"]);return Ha=function(){return e},e}function Ga(){var e=Object(Ht.a)(["\n    display: flex;\n    .checkbox-train-input-group,\n    .radio-train-input-group {\n        display: flex;\n        flex: 1 1 auto;\n\t\t&:focus-visible {\n\t\t\t.radio-train-focused,\n\t\t\t.checkbox-train-focused {\n\t\t\t\tbackground-color: var(--main-level-3);\n\t\t\t}\n\t\t}\n    }\n    .ant-radio-button-wrapper {\n        user-select: none;\n    }\n    .ant-radio-button-wrapper:first-child,\n    .ant-radio-button-wrapper:last-child {\n        border-radius: 0;\n    }\n    .ant-radio-button-wrapper:not(.ant-radio-button-wrapper-checked):first-child {\n        border-left-color: var(--sub-level-1);\n    }\n"]);return Ga=function(){return e},e}var Ya=Object(Gt.a)(Ga()),Xa=Object(Gt.a)(Ha());function Va(){var e=Object(Ht.a)(["\n    ","\n"]);return Va=function(){return e},e}var Ua=Gt.b.div(Va(),Ya),Ka=Object(a.forwardRef)((function(e,t){var n=e.onChange,o=e.value,i=e.optionList,c=e.children,u=e.className,d=Object(a.useState)(-1),f=Object(s.a)(d,2),b=f[0],p=f[1],m=Object(a.useRef)(null),h=i.length;return Object(a.useImperativeHandle)(t,(function(){return{focus:function(){var e;return null===(e=m.current)||void 0===e?void 0:e.focus()}}})),Object(r.jsxs)(Ua,{className:["ant-radio-group ant-radio-group-outline radio-train",u].join(" "),children:[c&&Object(r.jsx)("label",{className:"standalone-addon ant-input-group-addon",children:c}),Object(r.jsx)("div",Object(l.a)(Object(l.a)({ref:m,className:"radio-train-input-group"},Ot({setFocus:p,optionLength:h,onTrigger:function(){var e=i[b];e&&n(e.value)}})),{},{children:i.map((function(e,t){var a=e.value,i=e.props,c=e.label,s=(null!==i&&void 0!==i?i:{}).className,u="".concat(a)==="".concat(o);return Object(r.jsxs)("label",Object(l.a)(Object(l.a)({},i),{},{className:["ant-radio-button-wrapper",u?"ant-radio-button-wrapper-checked":"",null!==s&&void 0!==s?s:"",b===t?"radio-train-focused":""].join(" "),onClick:function(){return n(a)},children:[Object(r.jsx)("span",{className:"ant-radio-button ".concat(u?"ant-radio-button-checked":""),children:Object(r.jsx)("span",{className:"ant-radio-button-inner"})}),Object(r.jsx)("span",{className:"label",children:c})]}),a)}))}))]})}));function Ja(){var e=Object(Ht.a)(["\n\t","\n"]);return Ja=function(){return e},e}var qa=Object(Gt.b)(Ka)(Ja(),Xa),$a=function(e){var t=e.onSTFrameChange,n=Yn().setting.showExtraDecorativeOption,o=Object(a.useMemo)((function(){return sa().filter((function(e){return n||"normal"===e.edition}))}),[n]),i=Bn(Object(Gn.useShallow)((function(e){var t=e.card,n=e.setCard;return{frame:t.frame,setCard:n}}))),c=i.frame,s=i.setCard,u=Object(a.useCallback)((function(e){s((function(n){var r=n.typeAbility,a=n.isPendulum,o=n.attribute,i=n.format,c="".concat(e),s="spell"===c||"trap"===c,u="tcg"===i?{"Spell Card":"Spell Card","Trap Card":"Trap Card"}:fe,d="spell"===c?[u["Spell Card"]]:"trap"===c?[u["Trap Card"]]:r;return s&&t(d),Object(l.a)(Object(l.a)({},n),{},{frame:c,isPendulum:"link"!==c&&a,attribute:s?"".concat(c).toUpperCase():o,typeAbility:d})}))}),[s,t]);return Object(r.jsx)(qa,{className:"frame-radio",value:c,onChange:u,optionList:o})};function _a(){var e=Object(Ht.a)(["\n    ","\n"]);return _a=function(){return e},e}var Za=Gt.b.div(_a(),Ya),Qa=function(e){var t=e.onChange,n=e.value,o=e.optionList,i=e.children,c=e.className,u=Object(a.useState)(-1),d=Object(s.a)(u,2),f=d[0],b=d[1],p=o.length;return Object(r.jsxs)(Za,{className:["ant-radio-group ant-radio-group-outline checkbox-train",c].join(" "),children:[i&&Object(r.jsx)("label",{className:"standalone-addon ant-input-group-addon",children:i}),Object(r.jsx)("div",Object(l.a)(Object(l.a)({className:"checkbox-train-input-group"},Ot({setFocus:b,optionLength:p,onTrigger:function(){var e=o[f];if(e){var r=!!Array.isArray(n)&&n.includes("".concat(e.value));t(r?n.filter((function(t){return"".concat(e.value)!==t})):[].concat(Object(cn.a)(n),["".concat(e.value)]))}}})),{},{children:o.map((function(e,a){var o=e.label,i=e.value,c=e.props,s=!!Array.isArray(n)&&n.includes("".concat(i));return Object(r.jsxs)("label",Object(l.a)(Object(l.a)({},c),{},{className:["ant-radio-button-wrapper",s?"ant-radio-button-wrapper-checked":"",f===a?"checkbox-train-focused":""].join(" "),onClick:function(){t(s?n.filter((function(e){return"".concat(i)!==e})):[].concat(Object(cn.a)(n),["".concat(i)]))},children:[Object(r.jsx)("span",{className:"ant-radio-button ".concat(s?"ant-radio-button-checked":""),children:Object(r.jsx)("span",{className:"ant-radio-button-inner"})}),Object(r.jsx)("span",{className:"label",children:o})]}),i)}))}))]})};function eo(){var e=Object(Ht.a)(["\n    display: grid;\n    grid-template-columns: max-content max-content;\n    align-items: start;\n    gap: 0;\n    .card-image-source-input {\n        display: flex;\n        flex-direction: column-reverse;\n        .online-image-tip {\n            text-align: center;\n        }\n    }\n    .card-cropper {\n        width: 375px;\n        text-align: center;\n    }\n"]);return eo=function(){return e},e}var to=Object(Gt.b)(on)(eo()),no=Object(a.forwardRef)((function(e,t){var n=e.backgroundColor,o=e.children,i=e.receivingCanvas,c=e.onSourceLoaded,s=e.onTainted,u=e.onCropChange,d=Bn(Object(Gn.useShallow)((function(e){var t=e.card;return{background:t.background,backgroundCrop:t.backgroundCrop,backgroundType:t.backgroundType,isPendulum:t.isPendulum,opacity:t.opacity,getUpdater:e.getUpdater,setCard:e.setCard}}))),f=d.background,b=d.backgroundCrop,p=d.backgroundType,m=d.isPendulum,h=d.opacity,v=d.getUpdater,g=d.setCard,x=Object(a.useRef)(null),y=Object(a.useMemo)((function(){return v("background")}),[v]),O=Object(a.useCallback)((function(e,t){null===u||void 0===u||u(e,t),e&&g((function(t){return Object(l.a)(Object(l.a)({},t),{},{backgroundCrop:e})}))}),[u,g]);return Object(a.useEffect)((function(){var e;null===(e=x.current)||void 0===e||e.setRatio(j(m,h,p).ratio)}),[p,h,m]),Object(a.useImperativeHandle)(t,(function(){return{setValue:function(e){var t,n=e.background,r=e.backgroundCrop;"string"===typeof n&&r&&(null===(t=x.current)||void 0===t||t.forceExternalSource(n,r))}}})),Object(r.jsx)(to,{ref:x,title:"Image",backgroundColor:n,defaultExternalSource:f,defaultCropInfo:b,receivingCanvas:i,onSourceChange:y,onCropChange:O,onTainted:s,onSourceLoaded:c,ratio:j(m,h,p).ratio,beforeCropper:null,children:o})})),ro=n(413);n(383);function ao(){var e=Object(Ht.a)(["\n    &.overlay-no-background-image {\n        .card-image-cropper {\n            grid-template-columns: 1fr;\n        }\n        .card-cropper {\n            min-height: 0;\n            line-height: 0;\n            width: 0;\n            visibility: hidden;\n        }\n        .card-image-source-input {\n            padding-right: 0;\n            margin-right: 0;\n            border-right: none;\n        }\n        i {\n            max-width: 247px; // Alignment\n        }\n    }\n    i {\n        display: inline-block;\n        font-size: var(--fs-sm);\n        color: var(--color);\n        font-weight: normal;\n    }\n    .background-picker {\n        padding: var(--spacing-xs);\n        /** No display none here, again we want to keep card cropper painted, just not visible */\n        &.overlay-no-background {\n            visibility: hidden;\n            height: 0;\n            width: 0;\n            padding: 0;\n        }\n    }\n    .card-image-source-input {\n        padding-right: var(--spacing-xs);\n        margin-right: var(--spacing-xs);\n        border-right: var(--bw) solid var(--sub-level-4);\n        .type-section h2 {\n            margin-top: var(--spacing-xs);\n        }\n        .color-section h2 {\n            padding-top: 0;\n        }\n    }\n    .color-section {\n        > h2 + div {\n            > div:first-child {\n                box-shadow: none !important;\n            }\n            > div:nth-child(2) {\n                border: var(--bw) solid var(--main-level-1);\n            }\n        }\n    }\n"]);return ao=function(){return e},e}function oo(){var e=Object(Ht.a)(["\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    column-gap: var(--spacing-sm);\n    row-gap: var(--spacing-sm);\n    padding: 2px 0;\n    align-items: center;\n    .slider-label,\n    .ant-slider,\n    .slider-padding {\n        border: var(--bw) solid var(--sub-level-1);\n        background-color: var(--main-level-4);\n    }\n    .slider-label {\n        display: inline-flex;\n        column-gap: var(--spacing-xs);\n        border-right: none;\n        padding: var(--spacing-xxs) var(--spacing-xs);\n        border-radius: var(--br) 0 0 var(--br);\n        box-shadow: var(--bs-input);\n    }\n    .ant-slider {\n        margin: 0;\n        border-left: none;\n        border-right: none;\n        height: 28px; // Alignment\n        padding-top: 11px; // Alignment\n    }\n    .slider-padding {\n        border-left: none;\n        border-radius: 0 var(--br) var(--br) 0;\n    }\n    .ant-slider-rail,\n    .ant-slider-track {\n        border-radius: 0 var(--br) var(--br) 0;\n    }\n    .card-opacity-slider {\n        flex: 0 1 auto;\n        display: grid;\n        grid-template-columns: max-content 60px 45px 12px;\n        &.inactive {\n            .slider-label,\n            .ant-slider,\n            .slider-padding {\n                background-color: var(--main-level-3);\n            }\n        }\n    }\n    .ant-input-number.ant-input-number-sm {\n        height: 28px; // Alignment\n        width: unset;\n        border-radius: 0;\n        box-shadow: var(--bs-input);\n        .ant-input-number-input {\n            height: 26px; // Alignment\n        }\n    }\n    .background-preview {\n        display: inline-block;\n        line-height: 0;\n        width: 17px;\n        height: 17px; // Alignment\n        align-self: center;\n        border: 1px solid #333333;\n        cursor: pointer;\n        text-align: center;\n        user-select: none;\n        &:hover {\n            box-shadow: 0 0 2px 0 #222222;\n        }\n        .background-image-preview {\n            max-width: 15px;\n            max-height: 15px;\n        }\n        .no-background-icon {\n            font-size: 15px; // Alignment\n        }\n    }\n"]);return oo=function(){return e},e}var io=Gt.b.div(oo()),co=Gt.b.div(ao()),lo=Object(a.forwardRef)((function(e,t){var n=e.receivingCanvas,o=e.defaultValue,i=e.onTainted,c=e.onChange,d=e.onSourceLoaded,f=e.onCropChange,b=Bn(Object(Gn.useShallow)((function(e){var t=e.card,n=t.isPendulum;return{hasBackground:t.hasBackground,backgroundType:t.backgroundType,isPendulum:n,background:t.background,setCard:e.setCard,getUpdater:e.getUpdater}}))),p=b.hasBackground,m=b.backgroundType,g=b.isPendulum,j=b.background,x=b.setCard,y=b.getUpdater,O=Object(a.useState)(!0),w=Object(s.a)(O,2),k=w[0],F=w[1],C=Object(a.useState)(!0),S=Object(s.a)(C,2),T=S[0],R=S[1],N=Object(a.useState)(Object(l.a)(Object(l.a)({},v()),o)),L=Object(s.a)(N,2),M=L[0],I=L[1],A=Object(a.useRef)(null),E=Object(a.useMemo)((function(){return y("backgroundType")}),[y]),B=Object(a.useCallback)((function(e){return x((function(t){var n=e.target.checked;return Object(l.a)(Object(l.a)({},t),{},{hasBackground:n})}))}),[x]);Object(a.useEffect)((function(){var e=!0;return setTimeout((function(){e&&c(M)}),500),function(){e=!1}}),[M]),Object(a.useEffect)((function(){F(!1),setTimeout((function(){R(!1)}),250)}),[]),Object(a.useImperativeHandle)(t,(function(){return{setValue:function(e){var t,n=e.background,r=e.backgroundCrop,a=Object(en.a)(e,["background","backgroundCrop"]);"string"===typeof n&&r&&(null===(t=A.current)||void 0===t||t.setValue({background:n,backgroundCrop:r}));for(var o in a)a[o]!==M[o]&&I((function(e){return Object(l.a)(Object(l.a)({},e),a)}))}}}));var W=0===(null!==j&&void 0!==j?j:"").length;return Object(r.jsxs)(io,{className:"card-opacity-slider-container",children:[Object(r.jsx)(Xt.a,{overlayClassName:"long-tooltip-overlay",title:Object(r.jsxs)(r.Fragment,{children:["Allow the artwork to extend beyond its border.",Object(r.jsx)("br",{}),"Art finish will not apply to boundless artwork."]}),children:Object(r.jsx)(Wr.a,{className:"art-frame",onChange:function(e){return I((function(t){return Object(l.a)(Object(l.a)({},t),{},{boundless:e.target.checked})}))},checked:M.boundless,children:"Boundless"})}),lt.map((function(e){var t,a,o=e.label,c=e.type,s=e.subType,b=e.tooltip;if("pendulum"===c&&!g)return null;var v=!!s,x=s&&M[s];return Object(r.jsxs)("div",{className:["card-opacity-slider",x?"":"inactive"].join(" "),children:[Object(r.jsxs)("div",{className:"slider-label",children:["body"===c&&Object(r.jsx)(sn.a,{visible:k,destroyTooltipOnHide:!1,trigger:["click"],onVisibleChange:F,overlayClassName:["input-overlay style-picker-overlay layout-picker-overlay",k?"picker-visible":"",T?"picker-hidden":""].join(" "),content:Object(r.jsx)("div",{className:"overlay-event-absorber",children:Object(r.jsxs)(co,{className:["custom-style-picker",W?"overlay-no-background-image":""].join(" "),children:[Object(r.jsxs)("h3",{className:"custom-style-expand ".concat(p?"":"inactive"),children:[Object(r.jsx)(Wr.a,{checked:p,onChange:function(e){B(e);e.target.checked},children:"Has Background?"}),Object(r.jsx)("br",{}),Object(r.jsx)("i",{children:"Define the color and background of the card if you use transparent artwork."})]}),Object(r.jsx)("div",{className:"background-picker ".concat(p?"":"overlay-no-background"),children:Object(r.jsx)(no,{ref:A,receivingCanvas:n,onSourceLoaded:d,onTainted:i,onCropChange:f,backgroundColor:M.baseFill,children:Object(r.jsxs)("div",{className:"layout-picker-panel",children:[Object(r.jsxs)("div",{className:"layout-picker-subpanel color-section",children:[Object(r.jsx)("h2",{children:"Color"}),Object(r.jsx)(ja.b,{color:M.baseFill,onChangeComplete:function(e){I((function(t){return Object(l.a)(Object(l.a)({},t),{},{baseFill:e.hex})}))}})]}),!W&&Object(r.jsxs)("div",{className:"layout-picker-subpanel type-section",children:[Object(r.jsx)("h2",{children:"Type"}),Object(r.jsx)(Ka,{onChange:E,optionList:u,value:m})]})]})})})]})}),placement:"bottom",children:Object(r.jsx)("div",{className:"background-preview",style:{backgroundColor:p?M.baseFill:h},children:p?j?Object(r.jsx)("img",{className:"background-image-preview",src:j,alt:"Background"}):null:Object(r.jsx)(ro.a,{className:"no-background-icon"})})}),v&&Object(r.jsx)(Xt.a,{title:b,overlayClassName:"long-tooltip-overlay",children:Object(r.jsx)(Wr.a,{checked:x,onChange:function(e){return s&&I((function(t){return Object(l.a)(Object(l.a)({},t),{},Object(ce.a)({},s,e.target.checked))}))}})}),o]}),Object(r.jsx)(ya.a,{size:"small",min:0,max:100,onChange:function(e){return I((function(t){return Object(l.a)(Object(l.a)({},t),{},Object(ce.a)({},c,"number"===typeof e?e:100))}))},value:null!==(t=M[c])&&void 0!==t?t:100}),Object(r.jsx)(Ba.a,{min:0,max:100,step:5,onChange:function(e){return I((function(t){return Object(l.a)(Object(l.a)({},t),{},Object(ce.a)({},c,e))}))},value:null!==(a=M[c])&&void 0!==a?a:100}),Object(r.jsx)("div",{className:"slider-padding"})]},c)}))]})})),so=Object(a.forwardRef)((function(e,t){var n=e.isLink,o=e.isMonster,i=e.showCreativeOption,c=Bn(Object(Gn.useShallow)((function(e){var t=e.card;return{frame:t.frame,subFamily:t.subFamily,cardIcon:t.cardIcon,star:t.star,getUpdater:e.getUpdater}}))),l=c.frame,s=c.subFamily,u=c.cardIcon,d=c.star,f=c.getUpdater,b="dark-synchro"==={frame:l}.frame,p=st({frame:l}),m=Object(a.useMemo)((function(){return f("cardIcon")}),[f]),h=Object(a.useMemo)((function(){return f("subFamily")}),[f]),v=Object(a.useMemo)((function(){return f("star")}),[f]);Object(a.useImperativeHandle)(t,(function(){return{}}));var g="auto"===u?fa[o?p?"rank":b?"negative-level":"level":"st"]:fa[u],j=i?Object(r.jsxs)(r.Fragment,{children:[g.label," ",Object(r.jsx)(xa.a,{})]}):g.label,x=Object(r.jsx)(sn.a,{trigger:["click"],overlayClassName:"input-overlay pattern-picker-overlay",content:Object(r.jsx)("div",{className:"overlay-event-absorber",children:Object(r.jsx)(ra.Container,{children:ba.map((function(e){var t=e.fullLabel,n=e.value;return Object(r.jsx)(ra.Option,{className:n===u?"menu-active":"",onClick:function(){return m(n)},children:t},n)}))})}),placement:"bottomRight",children:Object(r.jsx)("span",{className:"card-icon-dropdown ".concat("auto"===u?"":"active"," ").concat(i?"":"disabled"),children:j})},"icon-type-picker"),y=i?x:j;return n?null:"st"===g.value?Object(r.jsx)(Ka,{className:"fill-input-train",value:s,onChange:h,optionList:ua,children:y}):Object(r.jsx)(Ka,{className:"checkbox-star-train",value:"".concat(d),onChange:v,optionList:da,children:y})})),uo=new Set(["1","2","3","4","5"]),fo=function(e,t,n,r,a,o){var i=e.substring(n,r),c="\n"===e[r]||!a,l=i,s=2;switch(t){case"1":l="[".concat(i,"]").concat(c?"":"\n"),s=c?2:3;break;case"2":l="{".concat(i,"}");break;case"3":l="{".concat(i,"|}");break;case"4":l="{".concat(i,"||}"),s=3;break;case"5":l="{{".concat(i,"}}"),s=4}o(e.substring(0,n)+"".concat(l)+e.substring(r,e.length),r+s)},bo=function(e){var t=e.id,n=e.placement;if(t&&n>=0){var r,a=document.querySelector("#".concat(t));a&&(null!==(r=a.selectionEnd)&&void 0!==r?r:-1)>=0&&(a.selectionEnd=n)}},po=Vt.a.TextArea,mo=Object(a.forwardRef)((function(e,t){var n=e.id,o=e.allowHotkey,i=e.defaultValue,c=e.onTakePicker,u=e.onChange,d=e.onKeyDown,f=e.className,b=Object(en.a)(e,["id","allowHotkey","defaultValue","onTakePicker","onChange","onKeyDown","className"]),p=Object(a.useRef)(i),m=Object(a.useState)(i),h=Object(s.a)(m,2),v=h[0],g=h[1],j=Object(a.useState)({id:"",placement:-1}),x=Object(s.a)(j,2),y=x[0],O=x[1],w=Object(a.useCallback)((function(e){var t="string"===typeof e?e:e.target.value;p.current=t,g(t)}),[]);Object(a.useEffect)((function(){bo(y)}),[y]),Object(a.useEffect)((function(){u({target:{value:v}})}),[v]);var k=function(e){e!==p.current&&w(e)};return Object(a.useImperativeHandle)(t,(function(){return{setValue:k,getPickerRef:function(){return n?{id:n,setValue:k}:null}}})),Object(r.jsx)(po,Object(l.a)({id:n,autoComplete:"off",onFocus:function(){return n&&(null===c||void 0===c?void 0:c({id:n,setValue:k}))},allowClear:!0,spellCheck:!1,className:"".concat(n,"-input ").concat(f),value:v,onKeyDown:function(e){var t,r;if(null===d||void 0===d||d(e),o){var a=e.ctrlKey,i=e.key,c=e.metaKey,l=null!==(t=e.currentTarget.selectionStart)&&void 0!==t?t:-1,s=null!==(r=e.currentTarget.selectionEnd)&&void 0!==r?r:-1;(a||c)&&n&&s!==l&&uo.has(i)&&(e.preventDefault(),fo(e.currentTarget.value,i,l,s,!0,(function(e,t){w(e),O({id:n,placement:t})})))}},onChange:w},b))})),ho=Object(a.forwardRef)((function(e,t){var n=e.id,o=e.defaultValue,i=e.onTakePicker,c=e.onChange,u=e.onKeyDown,d=e.className,f=Object(en.a)(e,["id","defaultValue","onTakePicker","onChange","onKeyDown","className"]),b=Yn().setting.allowHotkey,p=Object(a.useRef)(o),m=Object(a.useState)(o),h=Object(s.a)(m,2),v=h[0],g=h[1],j=Object(a.useState)({id:"",placement:-1}),x=Object(s.a)(j,2),y=x[0],O=x[1],w=Object(a.useCallback)((function(e){var t="string"===typeof e?e:e.target.value;p.current=t,g(t)}),[]);Object(a.useEffect)((function(){bo(y)}),[y]),Object(a.useEffect)((function(){c({target:{value:v}})}),[v]);var k=function(e){e!==v&&w(e)};return Object(a.useImperativeHandle)(t,(function(){return{setValue:k}})),Object(r.jsx)(Vt.a,Object(l.a)({id:n,autoComplete:"off",onFocus:function(){return n&&(null===i||void 0===i?void 0:i({id:n,setValue:k}))},allowClear:!0,className:"".concat(n,"-input ").concat(d),value:v,onKeyDown:function(e){var t,r;if(null===u||void 0===u||u(e),b){var a=e.ctrlKey,o=e.key,i=e.metaKey,c=null!==(t=e.currentTarget.selectionStart)&&void 0!==t?t:-1,l=null!==(r=e.currentTarget.selectionEnd)&&void 0!==r?r:-1;(a||i)&&n&&l!==c&&uo.has(o)&&(e.preventDefault(),fo(e.currentTarget.value,o,c,l,!1,(function(e,t){w(e),O({id:n,placement:t})})))}},onChange:function(e){return w(e.target.value)}},f))})),vo=Object(a.forwardRef)((function(e,t){var n=e.onTakePicker,o=Bn((function(e){return e.getUpdater})),i=Object(a.useRef)(null),c=Object(a.useMemo)((function(){return o("effect",void 0,"debounce")}),[o]);return Object(a.useEffect)((function(){var e,t=null===(e=i.current)||void 0===e?void 0:e.getPickerRef();t&&(null===n||void 0===n||n(t))}),[]),Object(a.useImperativeHandle)(t,(function(){return{setValue:function(e){var t;null===(t=i.current)||void 0===t||t.setValue(e)}}})),Object(r.jsx)(mo,{ref:i,id:"effect",allowHotkey:!0,defaultValue:Bn.getState().card.effect,onChange:c,onTakePicker:n,rows:9})}));function go(){var e=Object(Ht.a)(["\n    align-self: center;\n    text-align: right;\n    .ant-checkbox + span {\n        user-select: none;\n    }\n"]);return go=function(){return e},e}var jo=Gt.b.div(go()),xo=function(e){var t=Bn(Object(Gn.useShallow)((function(e){var t=e.card,n=e.setCard;return{isSpeedCard:t.isSpeedCard,isDuelTerminalCard:t.isDuelTerminalCard,isFirstEdition:t.isFirstEdition,setCard:n}}))),n=t.isDuelTerminalCard,o=t.isFirstEdition,i=t.isSpeedCard,c=t.setCard,s=Object(a.useCallback)((function(e){return c((function(t){var n=e.target.checked;return Object(l.a)(Object(l.a)({},t),{},{isFirstEdition:n})}))}),[c]),u=Object(a.useCallback)((function(e){return c((function(t){var n=e.target.checked;return Object(l.a)(Object(l.a)({},t),{},{isDuelTerminalCard:n,isSpeedCard:!n&&t.isSpeedCard})}))}),[c]),d=Object(a.useCallback)((function(e){return c((function(t){var n=e.target.checked;return Object(l.a)(Object(l.a)({},t),{},{isSpeedCard:e.target.checked,isDuelTerminalCard:!n&&t.isDuelTerminalCard})}))}),[c]);return Object(r.jsxs)(jo,{className:"checkbox-input",children:[Object(r.jsx)(Wr.a,{className:"input-1st",onChange:s,checked:o,tabIndex:0,children:"1st Edition"}),Object(r.jsx)(Xt.a,{overlayClassName:"long-tooltip-overlay",overlay:"Will turn off Duel Terminal mark.",children:Object(r.jsx)(Wr.a,{className:"input-speed",onChange:d,checked:i,tabIndex:0,children:"Speed"})}),Object(r.jsx)(Xt.a,{overlayClassName:"long-tooltip-overlay",overlay:"Will turn off Speed Duel mark.",children:Object(r.jsx)(Wr.a,{className:"input-terminal",onChange:u,checked:n,tabIndex:0,children:"Duel Terminal"})})]})},yo=n(414);function Oo(){var e=Object(Ht.a)(['\n    &.radio-train {\n        .ant-radio-button-wrapper-checked {\n            &.ocg-button {\n                background-color: var(--main-red-scale);\n                border-color: var(--sub-red-scale);\n                &:not([class*=" ant-radio-button-wrapper-disabled"]).ant-radio-button-wrapper:first-child {\n                    border-right-color: var(--sub-red-scale);\n                }\n                &:not(.ant-radio-button-wrapper-disabled):first-child {\n                    border-color: var(--sub-red-scale);\n                }\n                &:hover {\n                    background-color: var(--sub-red-scale);\n                    color: var(--color-heavy);\n                }\n            }\n            &.tcg-button {\n                background-color: var(--main-blue-scale);\n                border-color: var(--sub-blue-scale);\n                &:hover {\n                    background-color: var(--sub-blue-scale);\n                    color: var(--color-heavy);\n                }\n            }\n        }\n        .ocg-button {\n            color: var(--color-heavy);\n            &:hover {\n                color: var(--sub-red-scale);\n            }\n        }\n        .tcg-button {\n            color: var(--color-heavy);\n            &:hover {\n                color: var(--sub-blue-scale);\n            }\n        }\n    }\n']);return Oo=function(){return e},e}function wo(){var e=Object(Ht.a)(["\n    display: flex;\n    align-items: center;\n    margin-top: var(--spacing-sm);\n    flex-wrap: wrap;\n    row-gap: var(--spacing-sm);\n"]);return wo=function(){return e},e}function ko(){var e=Object(Ht.a)(["\n\tdisplay: flex;\n\talign-items: center;\n\t.input-label {\n\t\tflex: 1;\n\t}\n"]);return ko=function(){return e},e}function Fo(){var e=Object(Ht.a)(["\n    padding: var(--spacing-xs);\n    .radio-train {\n        display: flex;\n        flex-wrap: wrap;\n        max-width: 500px;\n        .radio-train-input-group {\n            gap: var(--spacing);\n        }\n    }\n    .ant-checkbox-wrapper {\n        color: var(--color-heavy);\n    }\n    .frame-auto-checkbox {\n        margin-bottom: var(--spacing-xs);\n    }\n    ","\n"]);return Fo=function(){return e},e}var Co=Object(Gt.b)(ra.Container)(Fo(),Xa),So=Gt.b.div(ko()),To=Gt.b.div(wo()),Ro=Object(Gt.b)(Ka)(Oo());function No(){var e=Object(Ht.a)(["\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    gap: var(--spacing-sm);\n    .checkbox-input {\n        align-self: center;\n        .ant-checkbox + span {\n            user-select: none;\n        }\n    }\n    .sticker-input,\n    .creator-input {\n        grid-column: span 2;\n    }\n    .sticker-input .ant-radio-button-wrapper {\n        padding-left: var(--spacing-sm);\n        padding-right: var(--spacing-sm);\n    }\n"]);return No=function(){return e},e}var Lo=Gt.b.div(No()),Mo=Object(a.forwardRef)((function(e,t){var n=e.isMonster,o=e.showCreativeOption,i=e.onTakePicker,c=Bn(Object(Gn.useShallow)((function(e){return{sticker:e.card.sticker,getUpdater:e.getUpdater}}))),l=c.sticker,s=c.getUpdater,u=Object(a.useRef)(null),d=Object(a.useRef)(null),f=Object(a.useRef)(null),b=Object(a.useRef)(null),p=Object(a.useMemo)((function(){return s("atk",(function(e){return"string"===typeof e?e.trim():e}))}),[s]),m=Object(a.useMemo)((function(){return s("def",(function(e){return"string"===typeof e?e.trim():e}))}),[s]),h=Object(a.useMemo)((function(){return s("password",void 0,"debounce")}),[s]),v=Object(a.useMemo)((function(){return s("sticker")}),[s]),g=Object(a.useMemo)((function(){return s("creator",void 0,"debounce")}),[s]);return Object(a.useImperativeHandle)(t,(function(){return{setValue:function(e){var t,n,r,a,o=e.password,i=e.creator,c=e.atk,l=e.def;"string"===typeof c&&(null===(t=f.current)||void 0===t||t.setValue(c)),"string"===typeof l&&(null===(n=b.current)||void 0===n||n.setValue(l)),"string"===typeof o&&(null===(r=u.current)||void 0===r||r.setValue(o)),"string"===typeof i&&(null===(a=d.current)||void 0===a||a.setValue(i))}}})),Object(r.jsxs)(Lo,{className:"card-footer-input",children:[(n||o)&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(ho,{ref:f,id:"atk",addonBefore:"ATK",defaultValue:Bn.getState().card.atk,onChange:p,onTakePicker:i}),Object(r.jsx)(ho,{ref:b,id:"def",addonBefore:"DEF",defaultValue:Bn.getState().card.def,onChange:m,onTakePicker:i})]}),Object(r.jsx)(ho,{ref:u,id:"password",addonBefore:Object(r.jsxs)(So,{className:"input-label-with-button",children:[Object(r.jsx)("div",{className:"input-label",children:"Password"}),Object(r.jsx)(rn,{onClick:function(){var e;return null===(e=u.current)||void 0===e?void 0:e.setValue("".concat(Bt("0123456789",8)))},Icon:yo.a,tooltipProps:{overlay:"Randomize"}})]}),defaultValue:Bn.getState().card.password,onChange:h,onTakePicker:i}),Object(r.jsx)(xo,{}),Object(r.jsx)(ho,{ref:d,id:"creator",addonBefore:"Creator Text",defaultValue:Bn.getState().card.creator,onChange:g,onTakePicker:i}),Object(r.jsx)(Ka,{className:"sticker-input fill-input-train",value:l,onChange:v,optionList:pa,children:Object(r.jsx)("span",{children:"Sticker"})})]})}));function Io(){var e=Object(Ht.a)(["\n    .ant-input-group-addon {\n        padding-left: 0;\n    }\n    .radio-train-input-group .ant-radio-button-wrapper {\n        min-width: unset;\n    }\n"]);return Io=function(){return e},e}var Ao=Object(Gt.b)(Ka)(Io()),Eo=Object(a.forwardRef)((function(e,t){var n=e.isLink,o=e.showExtraDecorativeOption,i=e.receivingCanvas,c=e.onSourceLoaded,s=e.onTainted,u=e.onCropChange,d=Bn(Object(Gn.useShallow)((function(e){var t=e.card;return{opacity:t.opacity,artFinish:t.artFinish,linkMap:t.linkMap,isPendulum:t.isPendulum,art:t.art,artCrop:t.artCrop,getUpdater:e.getUpdater,setCard:e.setCard}}))),f=d.opacity,b=d.artFinish,p=d.linkMap,m=d.isPendulum,h=d.art,v=d.artCrop,g=d.getUpdater,x=d.setCard,y=Object(a.useRef)(null),O=Object(a.useMemo)((function(){return g("linkMap")}),[g]),w=Object(a.useMemo)((function(){return g("art")}),[g]),k=Object(a.useMemo)((function(){return g("artFinish")}),[g]),F=Object(a.useCallback)((function(e,t){null===u||void 0===u||u(e,t),e&&x((function(t){return Object(l.a)(Object(l.a)({},t),{},{artCrop:e})}))}),[u,x]);return Object(a.useEffect)((function(){var e;null===(e=y.current)||void 0===e||e.setRatio(j(m,f).ratio)}),[f,m]),Object(a.useImperativeHandle)(t,(function(){return{setValue:function(e){var t,n=e.art,r=e.artCrop;"string"===typeof n&&r&&(null===(t=y.current)||void 0===t||t.forceExternalSource(n,r))}}})),Object(r.jsx)(on,{ref:y,defaultExternalSource:h,defaultCropInfo:v,receivingCanvas:i,onSourceChange:w,onCropChange:F,onTainted:s,onSourceLoaded:c,ratio:j(m,f).ratio,beforeCropper:o?Object(r.jsx)(Ao,{className:"art-finish-checkbox fill-input-train",value:b,onChange:k,optionList:la,children:Object(r.jsx)("span",{className:"field-title",children:"Art Finish"})}):null,children:n?Object(r.jsx)(ln,{defaultValue:p,onChange:O}):Object(r.jsx)("div",{})})}));function Bo(){var e=Object(Ht.a)(["\n    display: flex;\n    flex-wrap: wrap;\n    gap: var(--spacing-sm);\n    width: 100%;\n    .name-input {\n        flex: 3;\n        min-width: 400px;\n    }\n    .set-id-input {\n        flex: 1;\n        min-width: 250px;\n    }\n"]);return Bo=function(){return e},e}var Wo=Gt.b.div(Bo()),Po=Object(a.forwardRef)((function(e,t){var n=e.onTakePicker,o=Bn(Object(Gn.useShallow)((function(e){var t=e.card;return{name:t.name,format:t.format,getUpdater:e.getUpdater}}))),i=o.name,c=o.format,l=o.getUpdater,s=Object(a.useRef)(null),u=Object(a.useRef)(null),d=Object(a.useMemo)((function(){return l("setId")}),[l]),f=Object(a.useMemo)((function(){return l("name",void 0,"debounce")}),[l]);return Object(a.useImperativeHandle)(t,(function(){return{setValue:function(e){var t,n,r=e.name,a=e.setId;"string"===typeof r&&(null===(t=s.current)||void 0===t||t.setValue(r)),"string"===typeof a&&(null===(n=u.current)||void 0===n||n.setValue(a))}}})),Object(r.jsxs)(Wo,{className:"name-id-input",children:[Object(r.jsx)(ho,{ref:s,id:"name",defaultValue:i,addonBefore:Object(r.jsx)(Xt.a,{title:"Copy",children:Object(r.jsx)("span",{style:{cursor:"pointer"},onClick:function(){navigator.clipboard.writeText(Pt(i))},children:"Name"})}),onChange:f,onTakePicker:n}),Object(r.jsx)(ho,{ref:u,id:"set-id",defaultValue:Bn.getState().card.setId,addonBefore:Object(r.jsxs)(So,{className:"input-label-with-button",children:[Object(r.jsx)("div",{className:"input-label",children:"Set ID"}),Object(r.jsx)(rn,{onClick:function(){var e;return null===(e=u.current)||void 0===e?void 0:e.setValue(function(e){return Bt("ABCDEFGHIJKLMNOPQRSTUVWXYZ",4)+"-"+("OCG"===e?"JP":"EN")+Bt("0000000000111111111122222222223456789",1)+Bt("0123456789",2)}(c))},Icon:yo.a,tooltipProps:{overlay:"Randomize"}})]}),onChange:d,onTakePicker:n})]})}));function Do(){var e=Object(Ht.a)(["\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    column-gap: var(--spacing-sm);\n    row-gap: var(--spacing-sm);\n    .joined-row {\n        grid-column: span 2;\n        .standalone-label {\n            min-width: 0;\n            width: unset;\n            padding-left: var(--spacing-antd);\n        }\n        .pendulum-checkbox {\n            /** Alignment **/\n            width: 95px;\n            line-height: 32px;\n            text-align: right;\n            font-weight: 500;\n            > span {\n                padding-right: 0;\n            }\n        }\n        .pendulum-checkbox-placeholder {\n            display: inline-block;\n            /** Alignment **/\n            width: var(--width-label);\n        }\n        .pendulum-frame-input {\n            margin-right: var(--spacing-lg);\n        }\n        .ant-checkbox-wrapper {\n            margin-right: var(--spacing);\n        }\n        .ant-checkbox-wrapper + .ant-checkbox-wrapper {\n            margin-left: 0;\n        }\n    }\n"]);return Do=function(){return e},e}function zo(){var e=Object(Ht.a)(["\n    display: inline-flex;\n    cursor: pointer;\n    box-shadow: var(--bs-input);\n    vertical-align: bottom;\n    box-shadow: var(--bs-button);\n    border-radius: var(--br-lg);\n    &:focus-visible {\n        outline: 2px solid var(--focus);\n    }\n    .pendulum-frame-info-block {\n        border-radius: 0 var(--br-lg) var(--br-lg) 0;\n        line-height: 2; // Alignment\n        background-color: var(--main-level-4);\n        min-width: 100px;\n        overflow: hidden;\n        border: var(--bw) solid var(--sub-level-1);\n        .frame-info-block-label {\n            padding: var(--spacing-px) var(--spacing-xs);\n        }\n    }\n    .pendulum-frame-label {\n        display: inline-block;\n        background: var(--main-level-4);\n        border: var(--bw) solid var(--sub-level-1);\n        border-right: none;\n        padding: var(--spacing-px) var(--spacing-xs);\n        border-radius: var(--br-lg) 0 0 var(--br-lg);\n        line-height: 2; // Alignment\n        &:last-child {\n            border-radius: var(--br-lg);\n            border-right: var(--bw) solid var(--sub-level-1);\n        }\n    }\n"]);return zo=function(){return e},e}var Ho=Object(a.forwardRef)((function(e,t){var n=e.frameList,o=e.pendulumFrame,i=e.onChange,c=e.onCancel,u=Object(a.useRef)("auto"===o?"spell":o),d=Object(a.useRef)(null),f=Object(a.useState)(0),b=Object(s.a)(f,2),p=b[0],m=b[1];return Object(a.useImperativeHandle)(t,(function(){return{focus:function(){var e;return null===(e=d.current)||void 0===e?void 0:e.focus()}}})),Object(r.jsxs)(Co,Object(l.a)(Object(l.a)({className:"pendulum-frame-picker"},Ot({stopPropagation:!0,optionLength:n.length,setFocus:m,onTrigger:function(){p>=0&&i(n[p].value)},onCancel:c})),{},{children:[Object(r.jsx)(Wr.a,{ref:d,className:"frame-auto-checkbox",checked:"auto"===o,onChange:function(e){i(e.target.checked?"auto":u.current)},children:"Auto"}),Object(r.jsx)(Ka,{className:"frame-radio",value:o,onChange:i,optionList:n})]}))})),Go=Gt.b.div(zo()),Yo=Gt.b.div(Do()),Xo=Object(a.forwardRef)((function(e,t){var n=e.showCreativeOption,o=e.showExtraDecorativeOption,i=e.onTakePicker,c=Bn(Object(Gn.useShallow)((function(e){var t=e.card;return{frame:t.frame,isPendulum:t.isPendulum,pendulumFrame:t.pendulumFrame,pendulumScaleBlue:t.pendulumScaleBlue,pendulumScaleRed:t.pendulumScaleRed,setCard:e.setCard,getUpdater:e.getUpdater}}))),u=c.frame,d=c.isPendulum,f=c.pendulumFrame,b=c.pendulumScaleBlue,p=c.pendulumScaleRed,m=c.setCard,h=c.getUpdater,v=Object(a.useRef)(null),g=Object(a.useRef)(null),j=Object(a.useRef)(null),x=Object(a.useState)(!0),y=Object(s.a)(x,2),O=y[0],w=y[1],k=Object(a.useState)(!1),F=Object(s.a)(k,2),C=F[0],S=F[1],T=Object(a.useRef)("auto"===f?"spell":f),R=Object(a.useMemo)((function(){return h("pendulumScaleRed")}),[h]),N=Object(a.useMemo)((function(){return h("pendulumScaleBlue")}),[h]),L=Object(a.useMemo)((function(){return h("pendulumEffect",void 0,"debounce")}),[h]),M=Object(a.useMemo)((function(){return sa().filter((function(e){return o||"normal"===e.edition}))}),[o]);Object(a.useImperativeHandle)(t,(function(){return{setValue:function(e){var t,n=e.pendulumEffect;n&&(null===(t=j.current)||void 0===t||t.setValue(n))}}}));var I=be[f];return Object(r.jsxs)(Yo,{className:"pendulum-input",children:[Object(r.jsxs)("div",{className:"joined-row pendulum-option",children:["link"!==u?Object(r.jsx)(Wr.a,{className:"pendulum-checkbox",onChange:function(e){return m((function(t){var n=e.target.checked;return Object(l.a)(Object(l.a)({},t),{},{isPendulum:n})}))},checked:d,children:"Pendulum"}):Object(r.jsx)("div",{className:"pendulum-checkbox-placeholder"}),n&&Object(r.jsx)(sn.a,{visible:C,onVisibleChange:S,trigger:["hover","click"],placement:"bottom",overlayClassName:"pendulum-frame-picker-overlay",content:Object(r.jsx)("div",{className:"overlay-event-absorber",children:Object(r.jsx)(Ho,{ref:g,frameList:M,pendulumFrame:f,onCancel:function(){var e;S(!1),null===(e=v.current)||void 0===e||e.focus()},onChange:function(e){var t="".concat(e);"auto"!==t&&(T.current=t),m((function(e){return Object(l.a)(Object(l.a)({},e),{},{pendulumFrame:t})}))}})}),children:Object(r.jsxs)(Go,{ref:v,className:"pendulum-frame-input",tabIndex:0,onKeyDown:function(e){if("ArrowDown"===e.key||"Enter"===e.key||"  "===e.key)return S(!0),setTimeout((function(){var e;null===(e=g.current)||void 0===e||e.focus()}),200),!1},children:[Object(r.jsxs)("span",{className:"pendulum-frame-label",children:["Bottom Frame ",Object(r.jsx)(xa.a,{})]}),I?Object(r.jsx)(Sn,Object(l.a)({className:"pendulum-frame-info-block"},I)):Object(r.jsx)(Sn,{className:"pendulum-frame-info-block",name:"Auto"})]})}),d&&n&&Object(r.jsx)(Wr.a,{onChange:function(e){return w(e.target.checked)},checked:O,children:"Mirror Scale"})]}),d&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{children:Object(r.jsx)(Vt.a,{addonBefore:Object(r.jsxs)("span",{children:[Object(r.jsx)("span",{style:{color:"var(--sub-blue-scale)"},children:"Blue"})," Scale"]}),value:b,onChange:function(e){N(e),O&&R(e)}})}),Object(r.jsx)("div",{children:Object(r.jsx)(Vt.a,{addonBefore:Object(r.jsxs)("span",{children:[Object(r.jsx)("span",{style:{color:"var(--sub-red-scale)"},children:"Red"})," Scale"]}),value:p,onChange:function(e){O&&N(e),R(e)}})}),Object(r.jsx)("div",{className:"joined-row",style:{position:"relative"},children:Object(r.jsx)(mo,{ref:j,id:"pendulum-effect",allowHotkey:!0,defaultValue:Bn.getState().card.pendulumEffect,onChange:L,onTakePicker:i,rows:5})})]})]})}));function Vo(){var e=Object(Ht.a)(['\n    display: grid;\n    grid-template-columns: 1fr max-content;\n    grid-template-areas:\n        "type-input input-helper"\n        "condense-input help-button";\n    gap: var(--spacing-sm);\n    align-items: center;\n    .formatting-help-button {\n        grid-area: help-button;\n        &:focus {\n            box-shadow: 0 0 0 2px var(--focus);\n        }\n    }\n    .input-kanji-helper {\n        grid-area: input-helper;\n    }\n    .type-ability-input {\n        grid-area: type-input;\n    }\n    .condense-input {\n        grid-area: condense-input;\n\t\t.standalone-addon.ant-input-group-addon {\n\t\t\twidth: unset;\n\t\t}\n\t\t.ant-radio-button-wrapper {\n\t\t\tflex: 1 1 90px;\n\t\t}\n\t}\n    &.variant-tcg {\n        .type-ability-input {\n            grid-column: span 2;\n        }\n    }\n']);return Vo=function(){return e},e}var Uo=Gt.b.div(Vo()),Ko=Object(a.forwardRef)((function(e,t){var n=e.onTakePicker,o=Bn(Object(Gn.useShallow)((function(e){var t=e.card,n=t.format,r=t.furiganaHelper,a=t.effectStyle,o=e.setCard,i=e.getUpdater;return{format:n,furiganaHelper:r,condenseTolerant:null===a||void 0===a?void 0:a.condenseTolerant,setCard:o,getUpdater:i}}))),i=o.format,c=o.furiganaHelper,s=o.condenseTolerant,u=o.setCard,d=o.getUpdater,f="ocg"===i?"\uff0f":"/",b=Object(a.useRef)(null),p=Object(a.useMemo)((function(){return d("typeAbility",(function(e){return"string"!==typeof e?[]:e.split(/\uff0f|\//).map((function(e){return"".concat(e).trim()})).filter((function(e){return"string"===typeof e&&e.length>0}))}),"debounce")}),[d]),m=Object(a.useCallback)((function(e){return u((function(t){return Object(l.a)(Object(l.a)({},t),{},{furiganaHelper:e.target.checked})}))}),[u]);Object(a.useImperativeHandle)(t,(function(){return{setValue:function(e){var t,n=e.typeAbility;n&&(null===(t=b.current)||void 0===t||t.setValue(n.join(f)))}}}));var h="ocg"===i;return Object(r.jsxs)(Uo,{className:"post-pendulum-input variant-".concat(i),children:[Object(r.jsx)(ho,{ref:b,addonBefore:"Type",id:"type-ability",defaultValue:Bn.getState().card.typeAbility.join(f),onChange:p,onTakePicker:n}),h&&Object(r.jsx)(Xt.a,{overlay:"Automatically annotates popular kanji characters with corresponding furigana.",overlayClassName:"long-tooltip-overlay",children:Object(r.jsx)(Wr.a,{className:"input-kanji-helper",onChange:m,checked:c,children:"Furigana Helper"})}),Object(r.jsx)(Ka,{className:"condense-input",value:"".concat(s),onChange:function(e){return function(e){u((function(t){return Object(l.a)(Object(l.a)({},t),{},{effectStyle:Object(l.a)(Object(l.a)({},t.effectStyle),{},{condenseTolerant:e})})}))}(e)},optionList:ma,children:Object(r.jsxs)("span",{children:["Condense ",Object(r.jsx)(un,{content:"Higher condense limit will prefer compressing words instead of adding new lines."})]})}),Object(r.jsx)(On,{})]})})),Jo=(n(384),o.a.forwardRef((function(e,t){var n=e.artworkCanvas,o=e.backgroundCanvas,i=e.onCropChange,c=e.onTainted,u=e.onSourceLoaded,d=Bn(Object(Gn.useShallow)((function(e){var t=e.card;return{format:t.format,frame:t.frame,foil:t.foil,finish:t.finish,opacity:t.opacity,nameStyleType:t.nameStyleType,nameStyle:t.nameStyle,isPendulum:t.isPendulum,attribute:t.attribute,getUpdater:e.getUpdater,setCard:e.setCard}}))),f=d.format,b=d.frame,p=d.foil,m=d.finish,h=d.opacity,v=d.nameStyleType,g=d.nameStyle,j=d.isPendulum,w=d.attribute,k=d.getUpdater,F=d.setCard,C=Yn().setting,S=C.showCreativeOption,T=C.showExtraDecorativeOption,R=Object(a.useRef)(null),N=ut({frame:b}),L=ft({frame:b}),M=Object(a.useState)(0),I=Object(s.a)(M,2),A=I[0],E=I[1],B=Object(a.useRef)(null),W=Object(a.useRef)(null),P=Object(a.useRef)(null),D=Object(a.useRef)(null),z=Object(a.useRef)(null),H=Object(a.useRef)(null),G=Object(a.useRef)(null),Y=Object(a.useState)({id:"",setValue:function(){}}),X=Object(s.a)(Y,2),V=X[0],U=X[1],K=Object(a.useMemo)((function(){return k("foil")}),[k]),J=Object(a.useMemo)((function(){return k("finish")}),[k]),q=Object(a.useCallback)((function(e){return F((function(t){return Object(l.a)(Object(l.a)({},t),{},{opacity:e})}))}),[F]),$=Object(a.useMemo)((function(){return k("attribute")}),[k]),_=Object(a.useCallback)((function(e,t){F((function(n){return Object(l.a)(Object(l.a)({},n),{},{nameStyleType:e,nameStyle:t})}))}),[F]),Z=Object(a.useMemo)((function(){return function(e){return O.map((function(t){var n=t.label,a=t.name;return{label:a===y?Object(r.jsx)(x.a,{}):Object(r.jsx)(Xt.a,{overlay:n,children:Object(r.jsx)("img",{alt:n,src:"".concat("/ygocarder","/asset/image/attribute/attr-").concat(e,"-").concat(a.toLowerCase(),".png")})}),value:a}}))}(f)}),[f]);return Object(a.useEffect)((function(){var e;null===(e=R.current)||void 0===e||e.setValue({font:g.font})}),[g]),Object(a.useEffect)((function(){var e;null===(e=W.current)||void 0===e||e.setValue(h)}),[h]),Object(a.useImperativeHandle)(t,(function(){return{forceCardData:function(e){var t,n,r,a,o,i,c;E((function(e){return e+1}));var s=e.name,u=e.art,d=e.artCrop,f=e.background,b=e.backgroundCrop,p=e.opacity,m=e.setId,h=e.pendulumEffect,v=e.typeAbility,g=e.effect,j=e.atk,x=e.def,y=e.creator,O=e.password;null===(t=B.current)||void 0===t||t.setValue({art:u,artCrop:d}),null===(n=W.current)||void 0===n||n.setValue(Object(l.a)(Object(l.a)({},p),{},{background:f,backgroundCrop:b})),null===(r=P.current)||void 0===r||r.setValue({name:s,setId:m}),null===(a=D.current)||void 0===a||a.setValue({pendulumEffect:h}),null===(o=z.current)||void 0===o||o.setValue(g),null===(i=H.current)||void 0===i||i.setValue({typeAbility:v}),null===(c=G.current)||void 0===c||c.setValue({atk:j,def:x,creator:y,password:O})}}})),Object(r.jsxs)("div",{className:["card-info-panel","ocg"===f?"input-ocg":"input-tcg"].join(" "),children:[Object(r.jsx)($r,{}),Object(r.jsx)("br",{}),Object(r.jsx)(Jr,{}),Object(r.jsxs)("div",{className:"card-overlay-input",children:[Object(r.jsx)(Ro,{className:"format-radio",value:f,onChange:function(e){F((function(t){var n,r,a,o,i,c="".concat(e),l=Tn(t,c);null===(n=H.current)||void 0===n||n.setValue({typeAbility:l.typeAbility});var s=l.name,u=l.setId,d=l.effect,f=l.typeAbility,b=l.creator;return null===(r=P.current)||void 0===r||r.setValue({name:s,setId:u}),null===(a=z.current)||void 0===a||a.setValue(d),null===(o=H.current)||void 0===o||o.setValue({typeAbility:f}),null===(i=G.current)||void 0===i||i.setValue({creator:b}),l}))},optionList:aa,children:Object(r.jsx)("span",{children:"Format"})}),Object(r.jsx)(Ka,{className:"foil-radio",value:p,onChange:K,optionList:oa,children:Object(r.jsx)("span",{children:"Foil"})}),T&&Object(r.jsx)(Qa,{className:"finish-checkbox",value:m,onChange:J,optionList:ia,children:Object(r.jsx)("span",{children:"Finish"})})]}),S&&Object(r.jsxs)("div",{className:"card-layout-input",children:[Object(r.jsxs)("label",{className:"standalone-addon ant-input-group-addon",children:["Layout ",Object(r.jsx)(un,{content:"May affect behavior of some finish types."})]}),Object(r.jsx)(lo,{ref:W,defaultValue:h,receivingCanvas:o,onChange:q,onTainted:c,onCropChange:i,onSourceLoaded:u})]}),Object(r.jsx)($a,{onSTFrameChange:function(e){var t;return null===(t=H.current)||void 0===t?void 0:t.setValue({typeAbility:e})}}),Object(r.jsxs)(To,{className:"name-style-id-input",children:[Object(r.jsx)(Po,{ref:P,onTakePicker:U}),Object(r.jsx)(za,{ref:R,frameInfo:be[b],defaultType:v,defaultValue:g,showExtraDecorativeOption:T,onChange:_},A),Object(r.jsx)(so,{isLink:N,isMonster:L,showCreativeOption:S})]}),Object(r.jsxs)("div",{className:"main-info",children:[Object(r.jsxs)("div",{className:"main-info-first",children:[Object(r.jsx)(Ka,{className:"fill-input-train attribute-input",value:w,onChange:$,optionList:Z,children:Object(r.jsx)("span",{children:"Attribute"})}),(j||"link"!==b||S)&&Object(r.jsx)(Xo,{ref:D,showCreativeOption:S,showExtraDecorativeOption:T,onTakePicker:U}),Object(r.jsx)(Ko,{ref:H,onTakePicker:U}),Object(r.jsxs)("div",{children:[Object(r.jsxs)("div",{className:"card-effect-letter-helper",children:[Object(r.jsx)(ta,{className:"standalone-label",children:"Effect"}),Object(r.jsx)(ga,{targetId:V.id,onPick:V.setValue})]}),Object(r.jsx)(vo,{ref:z,onTakePicker:U})]}),Object(r.jsx)(Mo,{ref:G,isMonster:L,showCreativeOption:S,onTakePicker:U})]}),Object(r.jsx)("div",{className:"main-info-second",children:Object(r.jsx)(Eo,{ref:B,receivingCanvas:n,isLink:N,showExtraDecorativeOption:T,onSourceLoaded:u,onTainted:c,onCropChange:i})})]})]})}))),qo=Object(a.forwardRef)((function(e,t){var n=e.isTainted,o=e.isInitializing,i=e.imageChangeCount,c=e.canvasMap,l=e.onDownloadError,u=Yn((function(e){return e.setting.allowHotkey})),d=Br(!0,c,{imageChangeCount:i,isInitializing:o}).onExport,f=c.drawCanvasRef,b=Object(a.useRef)({currentPipeline:Promise.resolve(),pipelineRunning:!1}),p=Object(a.useState)(!1),m=Object(s.a)(p,2),h=m[0],v=m[1],g=Object(a.useCallback)((function(){v(!1)}),[]),j=function(e){var t=e.isTainted,n=e.isInitializing,r=e.drawCanvasRef,o=e.exportRef,i=e.onExport,c=e.onDownloadError,l=e.onDownloadComplete,s=Bn().card,u=s.opacity,d=s.name,f=s.isPendulum,b=Object(a.useRef)(!1),p=Object(a.useCallback)((function(){var e,n=r.current;if(n&&!t)try{var a=Pt(d),o=document.createElement("a");o.download=a?"".concat(a,".png"):"card.png",o.href=n.toDataURL("image/png"),o.click()}catch(i){c()}null===(e=document.querySelector("#export-canvas-guard"))||void 0===e||e.classList.remove("guard-on"),l()}),[r,t,d,l,c]);return Object(a.useEffect)((function(){var e=!0;return setTimeout((function(){var t=Pt(d);e&&(document.title=t?"".concat(t," - Yu-Gi-Oh Carder"):"Yu-Gi-Oh Carder")}),500),function(){e=!1}}),[d]),Object(a.useEffect)((function(){var e,t=!0,a=function(e){return e.preventDefault(),"Leave right now may make you lose unsaved progress, proceed?"};return!1===n&&(localStorage.setItem("card-data",JSON.stringify(s)),localStorage.setItem("card-version",null!==(e="2.0.1")?e:"unknown"),Object(Dn.a)(Pn.a.mark((function e(){var n,c,l,d,m,h,v;return Pn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.current){e.next=14;break}return window.addEventListener("beforeunload",a),null===(n=document.getElementById("export-canvas"))||void 0===n||n.classList.remove("js-export-available"),null===(c=document.getElementById("export-canvas-guard"))||void 0===c||c.setAttribute("style",""),null===(l=document.getElementById("save-button-waiting"))||void 0===l||l.setAttribute("style","display: block"),o.current.pipelineRunning=!0,e.next=9,o.current.currentPipeline;case 9:if(!t){e.next=14;break}return o.current.currentPipeline=i({isPendulum:f,opacity:u,isRelevant:function(){return t}}),e.next=13,o.current.currentPipeline;case 13:t&&("string"===typeof(v=Nt(s))&&Wt("data",v),null===(d=document.getElementById("export-canvas"))||void 0===d||d.classList.add("js-export-available"),null===(m=document.getElementById("export-canvas-guard"))||void 0===m||m.setAttribute("style","display: none"),null===(h=document.getElementById("save-button-waiting"))||void 0===h||h.setAttribute("style","display: none"),window.removeEventListener("beforeunload",a),o.current.pipelineRunning=!1,b.current&&(b.current=!1,p()));case 14:case"end":return e.stop()}}),e)})))()),function(){window.removeEventListener("beforeunload",a),t=!1}})),{onSave:function(){var e;null===(e=document.querySelector("#export-canvas-guard"))||void 0===e||e.classList.add("guard-on"),setTimeout((function(){!1===o.current.pipelineRunning?p():b.current=!0}),200)}}}({isTainted:n,isInitializing:o,drawCanvasRef:f,exportRef:b,onExport:d,onDownloadError:l,onDownloadComplete:g}).onSave,x=function(){n?St.a.error({message:"Your card is tainted, you must save manually",description:'Right click the card \u2192 Choose "Save image as..."'}):(v(!0),j())};return Object(a.useImperativeHandle)(t,(function(){return{download:x}})),n?null:Object(r.jsxs)("div",{className:"save-button-container",children:[Object(r.jsx)("div",{id:"save-button-waiting"}),Object(r.jsx)(Xt.a,{overlay:u?Object(r.jsx)(r.Fragment,{children:"Ctrl-S / \u2318-S"}):null,children:Object(r.jsx)(fn.a,{className:"save-button",loading:h,id:"save-button-ready",onClick:x,children:"Download"})})]})})),$o=n(398),_o=n(415),Zo=n(416);function Qo(){var e=Object(Ht.a)(["\n    top: var(--spacing-xs);\n    right: calc(var(--overlay-size) + 2 * var(--spacing-xs));\n"]);return Qo=function(){return e},e}function ei(){var e=Object(Ht.a)(["\n    top: var(--spacing-xs);\n    right: var(--spacing-xs);\n"]);return ei=function(){return e},e}function ti(){var e=Object(Ht.a)(["\n    --overlay-size: 51px;\n    position: absolute;\n    z-index: 101;\n    background: var(--main-primary);\n    border-color: var(--main-active);\n    color: var(--color-heavy);\n    padding: var(--spacing);\n    line-height: 1;\n    font-size: var(--fs-3xl);\n    text-align: center;\n    width: var(--overlay-size);\n    height: var(--overlay-size);\n    border-radius: var(--br-lg);\n    cursor: pointer;\n    box-shadow: var(--bs-1);\n    display: none;\n    &:hover {\n        background: var(--sub-primary);\n    }\n"]);return ti=function(){return e},e}function ni(){var e=Object(Ht.a)(["\n    color: var(--main-danger);\n"]);return ni=function(){return e},e}function ri(){var e=Object(Ht.a)(["\n\tposition: fixed;\n\tright: var(--spacing);\n\tbottom: 0;\n\tfont-size: var(--fs-xs);\n\topacity: 0.5;\n\tpadding: var(--spacing-px) var(--spacing-xs);\n\tcolor: var(--color-dim);\n    img {\n        height: 10px;\n        margin-left: 1px;\n    }\n"]);return ri=function(){return e},e}function ai(){var e=Object(Ht.a)(["\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tbackground-image: linear-gradient(45deg, #333, #333);\n\tz-index: 4000;\n\tcolor: white;\n\ttext-shadow:\n\t\t0 1px #333,\n\t\t0 2px #111;\n\tfont-size: var(--fs-3xl);\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n"]);return ai=function(){return e},e}function oi(){var e=Object(Ht.a)(["\n    width: var(--card-width);\n    height: var(--card-height);\n    margin-bottom: var(--spacing);\n    transform: translateX(var(--translate-ratio)) translateY(var(--translate-ratio)) scale(var(--resize-ratio))\n        translateZ(0);\n    position: absolute;\n    top: 0;\n    left: 0;\n    canvas {\n        position: absolute;\n        left: 0;\n        z-index: 1;\n        pointer-events: none;\n    }\n    &:hover {\n        .reset-button,\n        .lightbox-button {\n            display: block;\n        }\n        #export-canvas.js-export-available {\n            display: inline-block !important;\n            cursor: default;\n        }\n        #export-canvas-guard {\n            display: flex;\n            cursor: wait;\n            transition: all 2s;\n        }\n    }\n    #export-canvas {\n        display: none;\n        z-index: 100;\n        pointer-events: all;\n    }\n    #export-canvas-guard {\n        position: absolute;\n        left: 0;\n        display: none;\n        align-items: center;\n        justify-content: center;\n        z-index: 101;\n        // background-color: #ffffff08;\n        width: var(--card-width);\n        height: var(--card-height);\n        .anticon {\n            font-size: var(--fs-4xl);\n        }\n        .canvas-guard-alert {\n            position: absolute;\n            top: 0;\n            right: 0;\n            color: white;\n            padding: var(--spacing-xs) var(--spacing);\n            border-radius: 0 0 0 var(--br-lg);\n            background-color: var(--main-active);\n            box-shadow:\n                0 3px 6px rgba(0, 0, 0, 0.16),\n                0 3px 6px rgba(0, 0, 0, 0.23);\n        }\n        &.guard-on {\n            display: flex !important;\n        }\n    }\n    .crop-canvas {\n        position: relative;\n        width: 416px;\n        height: 416px;\n        z-index: 0;\n        visibility: hidden;\n    }\n"]);return oi=function(){return e},e}function ii(){var e=Object(Ht.a)(["\n    display: flex;\n    column-gap: var(--spacing);\n    border-radius: var(--br-lg);\n    font-size: var(--fs-4xl);\n    line-height: 1.5;\n    margin: auto;\n    max-width: var(--card-width);\n    min-height: 59px;\n    outline: none !important;\n    padding: var(--spacing);\n    padding-right: 0;\n    text-align: center;\n    text-shadow: 0 1px 2px black;\n    .anticon {\n        cursor: pointer;\n    }\n    button {\n        color: white;\n        border-radius: var(--br-lg);\n        outline: none !important;\n        cursor: pointer;\n    }\n    .save-button {\n        flex: 1;\n        font-size: var(--fs-xl);\n        border: var(--bw) solid var(--sub-secondary);\n        font-weight: 500;\n        box-shadow: var(--bs-button);\n        height: 39px; // Alignment\n        line-height: 1;\n        &:focus, &:active {\n            color: white;\n        }\n    }\n    #save-button-waiting {\n        cursor: wait;\n        position: absolute;\n        width: 100%;\n        height: 100%;\n        top: 0;\n        left: 0;\n        z-index: 1;\n    }\n    #save-button-ready {\n        cursor: pointer;\n        &:hover {\n            background-color: var(--sub-info);\n            box-shadow: none;\n        }\n    }\n    .save-button-container {\n        display: flex;\n        flex: 1;\n        font-size: var(--fs);\n        line-height: 1.35;\n        position: relative;\n    }\n    .imexport {\n        flex: 0 0 200px;\n        display: grid;\n        grid-template-columns: 1fr 1fr;\n        column-gap: var(--spacing);\n        button {\n            font-size: var(--fs);\n            background-color: var(--main-tertiary);\n            border: var(--bw) solid var(--sub-tertiary);\n            box-shadow: var(--bs-button);\n            &:hover {\n                background-color: var(--sub-tertiary);\n                box-shadow: none;\n            }\n        }\n    }\n"]);return ii=function(){return e},e}var ci=Gt.b.div(ii()),li=Gt.b.div(oi()),si=Gt.b.div(ai()),ui=Gt.b.div(ri()),di=Gt.b.span(ni()),fi=Gt.b.div(ti()),bi=Object(Gt.b)(fi)(ei()),pi=Object(Gt.b)(fi)(Qo()),mi=n(148);Object(mi.configure)({ignoreTags:[]});var hi={EXPORT:["ctrl+d","command+d"],IMPORT:["ctrl+e","command+e"],VIEW:["ctrl+b","command+b"],DOWNLOAD:["ctrl+s","command+s"]},vi=f,gi=d;var ji=function(){var e=Yn(Object(Gn.useShallow)((function(e){var t=e.setting,n=t.allowHotkey;return{softMode:t.reduceMotionColor,allowHotkey:n}}))),t=e.allowHotkey,n=e.softMode,o=Object(a.useState)(!0),i=Object(s.a)(o,2),c=i[0],u=i[1],b=Object(a.useState)(""),p=Object(s.a)(b,2),m=p[0],h=p[1],v=Object(a.useState)("external"),g=Object(s.a)(v,2),j=g[0],x=g[1],y=Object(a.useState)(0),O=Object(s.a)(y,2),w=O[0],k=O[1],F=Object(a.useState)(!1),C=Object(s.a)(F,2),S=C[0],T=C[1],R=Object(a.useRef)(null),N=Object(a.useRef)(null),L=Object(a.useRef)(null),M=Object(a.useRef)(null),I=Object(a.useRef)(null),A=Object(a.useRef)(null),E=Object(a.useRef)(null),B=Object(a.useRef)(null),W=Object(a.useRef)(null),P=Object(a.useRef)(null),D=Object(a.useRef)(null),z=Object(a.useRef)(null),H=Object(a.useRef)(null),G=Object(a.useRef)(null),Y=Object(a.useRef)(null),X=Object(a.useRef)(null),V=Object(a.useRef)(null),U=Object(a.useRef)(null),K=Object(a.useState)({artworkCanvasRef:N,backgroundCanvasRef:L,drawCanvasRef:M,frameCanvasRef:I,cardIconCanvasRef:A,pendulumScaleCanvasRef:E,pendulumEffectCanvasRef:B,typeCanvasRef:W,effectCanvasRef:P,nameCanvasRef:D,statCanvasRef:z,setIdCanvasRef:H,passwordCanvasRef:G,creatorCanvasRef:Y,stickerCanvasRef:X,finishCanvasRef:V,lightboxCanvasRef:U}),J=Object(s.a)(K,1)[0],q=Object(a.useRef)(null),$=Object(a.useState)(0),_=Object(s.a)($,2),Z=_[0],Q=_[1];Object(a.useEffect)((function(){var e,t=null===(e=M.current)||void 0===e?void 0:e.getContext("2d"),n=Bn.getState().setCard;t&&(t.setTransform(1,0,0,1,0,0),t.imageSmoothingQuality="high",qn(t)),Hn.a.load({custom:{families:["Matrix-Bold","MatrixBoldSmallCaps","MatrixBook","MatrixRegularSmallCaps","Yugioh Rush Duel Numbers V4","YuGiOhITCStoneSerifBSc","matrix","palatino-linotype-bold","stone-serif-bold","stone-serif-regular"],urls:["asset/font.css"]},active:function(){n(An()),u(!1)},fontinactive:function(e,t){console.error("TCG fontinactive",e,t),St.a.error({message:"".concat(e," font could not be loaded, this will impact your card quality")})},inactive:function(){h("Font could not be loaded"),u(!1)}})}),[]);var ee=function(e){var t=e.onActive,n=e.onBeforeLoad,r=e.onFontInactive,o=e.onInactive,i=Bn(Object(Gn.useShallow)((function(e){return{format:e.card.format,font:e.card.nameStyle.font}}))),c=i.font,l=i.format,u=Object(a.useState)(""),d=Object(s.a)(u,2),f=d[0],b=d[1],p=Object(a.useRef)(!1),m=Object(a.useRef)(0);return Object(a.useEffect)((function(){("ocg"===l||"OCG"===c)&&!1===p.current&&m.current<=3&&(m.current+=1,b("".concat("/ygocarder","/asset/ocg-font.css")),n(),Hn.a.load({custom:{families:["DFHSGothic-W3-WIN-RKSJ-H","DFKakuTaiHiStd-W4","FOT-Rodin Pro M","Yu-Gi-Oh! DF Leisho 3"],urls:["asset/ocg-font.css"]},active:function(){p.current=!0,t()},inactive:function(){p.current=!0,o()},fontinactive:r}))}),[l,c,t,n,r,o]),{styleContent:f}}({onBeforeLoad:function(){var e;u(!0);var t=null===(e=M.current)||void 0===e?void 0:e.getContext("2d");t&&(t.setTransform(1,0,0,1,0,0),t.imageSmoothingQuality="high",qn(t))},onActive:function(){console.info("OCG Data Loaded"),u(!1)},onInactive:function(){h("Data for OCG cards could not be loaded"),u(!1)},onFontInactive:function(e,t){console.error("OCG fontinactive",e,t),St.a.error({message:"".concat(e," font could not be loaded, this will impact your card quality")})}}).styleContent,te=Object(a.useState)(!1),ne=Object(s.a)(te,2),re=ne[0],ae=ne[1];Object(a.useEffect)((function(){var e=document.body.classList;n?e.add("reduced-color-motion"):e.remove("reduced-color-motion")}),[n]);var oe=Object(a.useCallback)((function(e){if(t){null===e||void 0===e||e.preventDefault();var n=window.prompt("Paste your card data here"),r=Bn.getState().setCard;if(n){var a,o,i=Rt(n);r(i),Q((function(e){return e+1})),null===(a=R.current)||void 0===a||a.forceCardData(i),null===(o=document.querySelector(".radio-train-input-group"))||void 0===o||o.focus()}}}),[t]),ie=Object(a.useCallback)((function(e){if(t){null===e||void 0===e||e.preventDefault(),"internal"===j&&window.alert("Cannot export card data if you use offline image");var n=Bn.getState().card;window.prompt("Save card data for later use","".concat(Nt(n)))}}),[t,j]),ce=Object(a.useCallback)((function(e){var n;t&&(null===e||void 0===e||e.preventDefault(),null===(n=q.current)||void 0===n||n.download())}),[t]),le=Object(a.useMemo)((function(){return{IMPORT:oe,EXPORT:ie,VIEW:function(){return T(!0)},DOWNLOAD:ce}}),[ce,ie,oe]),se=Object(a.useCallback)((function(){ae(!0),alert('Could not save card, please manually save it by right click the card \u2192 Choose "Save image as..."')}),[]),ue=Object(a.useCallback)((function(){k((function(e){return e+1})),Q((function(e){return e+1})),ae(!1)}),[]),de=Object(a.useCallback)((function(e,t){Q((function(e){return e+1})),x(t)}),[]),fe=Object(a.useCallback)((function(){Q((function(e){return e+1})),ae(!0)}),[]);return Object(r.jsx)(mi.HotKeys,{keyMap:hi,handlers:le,children:Object(r.jsxs)("div",{id:"app",onDrop:function(){},style:Object(l.a)({backgroundImage:'url("'.concat("/ygocarder",'/asset/image/texture/debut-dark.png"), linear-gradient(180deg, #00000022, #00000044)'),height:Dt()?"-webkit-fill-available":"100vh"},{"--card-height":"".concat(f,"px"),"--card-width":"".concat(d,"px")}),children:[ee&&Object(r.jsx)("link",{rel:"stylesheet",type:"text/css",href:ee}),Object(r.jsxs)("div",{className:"app-container",style:{backgroundImage:'url("'.concat("/ygocarder",'/asset/image/texture/dark-denim-3.png")')},children:[c&&Object(r.jsx)(si,{className:"app-loading",children:m.length>0?Object(r.jsx)(di,{children:m}):"Loading fonts and scripts..."}),Object(r.jsxs)("div",{className:"card-preview-panel ".concat(re?"export-tainted":"export-normal"),children:[Object(r.jsxs)(ci,{className:"data-button-panel",children:[Object(r.jsxs)("div",{className:"imexport",children:[Object(r.jsx)(Xt.a,{overlay:t?Object(r.jsx)(r.Fragment,{children:"Ctrl-D / \u2318-D"}):null,children:Object(r.jsx)("button",{onClick:ie,children:"Export Data"})}),Object(r.jsx)(Xt.a,{overlay:t?Object(r.jsx)(r.Fragment,{children:"Ctrl-E / \u2318-E"}):null,children:Object(r.jsx)("button",{onClick:oe,children:"Import Data"})})]}),Object(r.jsx)(qo,{ref:q,canvasMap:J,imageChangeCount:Z,isTainted:re,isInitializing:c,onDownloadError:se}),re&&Object(r.jsx)("div",{id:"save-button-tainted",className:"save-button-container",children:Object(r.jsxs)("span",{children:["Manual save by right click the card",Object(r.jsx)("br",{}),'\u2192 "Save image as..." ',_r]})})]}),Object(r.jsx)("div",{className:"card-canvas-container",children:Object(r.jsxs)(li,{className:"card-canvas-group",children:[Object(r.jsx)(Xt.a,{title:"Reset",children:Object(r.jsx)(pi,{className:"reset-button",onClick:function(){if(window.confirm("This will reset your card information back to default, make sure you export the current data first!")){var e,t=Bn.getState(),n=t.setCard,r=t.card,a=it(),o="tcg"===r.format?a:Tn(a,"ocg");n(o),Q((function(e){return e+1})),null===(e=R.current)||void 0===e||e.forceCardData(o)}},children:Object(r.jsx)(_o.a,{})})}),Object(r.jsx)(Xt.a,{title:Object(r.jsxs)(r.Fragment,{children:["Original size",t?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("br",{}),"Ctrl-B / \u2318-B"]}):null]}),children:Object(r.jsx)(bi,{className:"lightbox-button",onClick:function(){return T((function(e){return!e}))},children:Object(r.jsx)(Zo.a,{})})}),Object(r.jsx)("canvas",{id:"export-canvas",ref:M,width:gi,height:vi},w+.1),Object(r.jsx)("div",{id:"export-canvas-guard",onContextMenu:function(e){return e.preventDefault()}}),Object(r.jsx)("canvas",{id:"frameCanvas",ref:I,width:gi,height:vi},w),Object(r.jsx)("canvas",{id:"nameCanvas",ref:D,width:gi,height:148}),Object(r.jsx)("canvas",{id:"cardIconCanvas",ref:A,width:gi,height:222}),Object(r.jsx)("canvas",{id:"pendulumScaleCanvas",ref:E,width:gi,height:889}),Object(r.jsx)("canvas",{id:"pendulumEffectCanvas",ref:B,width:gi,height:889}),Object(r.jsx)("canvas",{id:"typeCanvas",ref:W,width:gi,height:1037}),Object(r.jsx)("canvas",{id:"effectCanvas",ref:P,width:gi,height:1111}),Object(r.jsx)("canvas",{id:"statCanvas",ref:z,width:gi,height:vi}),Object(r.jsx)("canvas",{id:"setIdCanvas",ref:H,width:gi,height:vi}),Object(r.jsx)("canvas",{id:"passwordCanvas",ref:G,width:gi,height:vi}),Object(r.jsx)("canvas",{id:"creatorCanvas",ref:Y,width:gi,height:vi}),Object(r.jsx)("canvas",{id:"stickerCanvas",ref:X,width:gi,height:vi}),Object(r.jsx)("canvas",{id:"finishCanvas",ref:V,width:gi,height:vi}),Object(r.jsx)("canvas",{className:"crop-canvas",ref:N}),Object(r.jsx)("canvas",{className:"crop-canvas",ref:L})]})})]}),!1===c&&Object(r.jsx)(Jo,{ref:R,artworkCanvas:N.current,backgroundCanvas:L.current,onSourceLoaded:ue,onCropChange:de,onTainted:fe})]}),Object(r.jsx)($o.a,{width:"843px",wrapClassName:"card-lightbox-overlay",visible:S,forceRender:!0,onCancel:function(){return T(!1)},footer:null,children:Object(r.jsx)("canvas",{id:"lightbox-canvas",ref:U,width:gi,height:vi},w+.1)}),Object(r.jsxs)(ui,{className:"by-me",children:["Made by Lauqerm ",Object(r.jsx)("img",{src:"https://i.imgur.com/Ix5cq8k.png",alt:"avatar"})]})]})})},xi=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,417)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),o(e),i(e)}))};c.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)(ji,{})}),document.getElementById("root")),xi()}},[[392,1,2]]]);
//# sourceMappingURL=main.9075ec37.chunk.js.map